{"version":3,"file":"gm_embed.js","sources":["../src/scripts/gm_embed.js"],"sourcesContent":["import { exportChapeau } from \"../utils/export_chapeau.js\";\n\nconst mapHTML = `\n  <iframe class=\"c-map__iframe\" style=\"display: none\" frameborder=\"0\" allow=\"fullscreen\" referrerpolicy=\"no-referrer-when-downgrade\" loading=\"lazy\"></iframe>\n  <div class=\"c-map__overlay\">\n      <a href=\"#\" class=\"c-map__button w-button\">Karte laden</a>\n      <p class=\"c-map__text\">\n      Die Karte wird von Google Maps eingebettet.<br>\n      Es gelten die\n      <a class=\"c-map__link\" href=\"https://policies.google.com/privacy?hl=de\"\n          target=\"_blank\">Datenschutzerkl√§rungen</a>\n      von Google.\n      </p>\n  </div>\n`;\n\n/** @param {HTMLElement} $el */\nfunction createMap($el) {\n  $el.classList.add(\"c-map\");\n  $el.innerHTML = mapHTML;\n\n  const $iframe = $el.querySelector(\".c-map .c-map__iframe\");\n  const $overlay = $el.querySelector(\".c-map .c-map__overlay\");\n  const $link = $el.querySelector(\".c-map .c-map__link\");\n\n  const url = $el.dataset.url;\n\n  $overlay.addEventListener(\"click\", () => Chapeau.loadMaps());\n  $link.addEventListener(\"click\", (e) => e.stopPropagation());\n\n  function load() {\n    $iframe.src = url;\n\n    $iframe.style.display = null;\n    $overlay.style.display = \"none\";\n  }\n\n  return {\n    load,\n  };\n}\n\nArray.from(document.querySelectorAll('[c-map=\"iframe\"]')).forEach((el) => {\n  const url = el.querySelector(\"iframe\").src;\n  el.setAttribute(\"data-url\", url);\n});\n\nconst maps = Array.from(document.querySelectorAll(\"[c-map]\")).map(createMap);\nfunction loadMaps() {\n  maps.forEach((map) => map.load());\n\n  sessionStorage.setItem(\"c-accept_gm\", true);\n}\n\nconst accept = sessionStorage.getItem(\"c-accept_gm\");\nif (accept == \"true\") {\n  loadMaps();\n}\n\nexportChapeau({\n  loadMaps,\n});\n"],"names":[],"mappings":";AAEA,MAAM,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAehB,SAAS,UAAU,KAAK;AACtB,MAAI,UAAU,IAAI,OAAO;AACzB,MAAI,YAAY;AAEhB,QAAM,UAAU,IAAI,cAAc,uBAAuB;AACzD,QAAM,WAAW,IAAI,cAAc,wBAAwB;AAC3D,QAAM,QAAQ,IAAI,cAAc,qBAAqB;AAErD,QAAM,MAAM,IAAI,QAAQ;AAExB,WAAS,iBAAiB,SAAS,MAAM,QAAQ,SAAQ,CAAE;AAC3D,QAAM,iBAAiB,SAAS,CAAC,MAAM,EAAE,iBAAiB;AAE1D,WAAS,OAAO;AACd,YAAQ,MAAM;AAEd,YAAQ,MAAM,UAAU;AACxB,aAAS,MAAM,UAAU;AAAA,EAC7B;AAEE,SAAO;AAAA,IACL;AAAA,EACD;AACH;AAEA,MAAM,KAAK,SAAS,iBAAiB,kBAAkB,CAAC,EAAE,QAAQ,CAAC,OAAO;AACxE,QAAM,MAAM,GAAG,cAAc,QAAQ,EAAE;AACvC,KAAG,aAAa,YAAY,GAAG;AACjC,CAAC;AAED,MAAM,OAAO,MAAM,KAAK,SAAS,iBAAiB,SAAS,CAAC,EAAE,IAAI,SAAS;AAC3E,SAAS,WAAW;AAClB,OAAK,QAAQ,CAAC,QAAQ,IAAI,KAAI,CAAE;AAEhC,iBAAe,QAAQ,eAAe,IAAI;AAC5C;AAEA,MAAM,SAAS,eAAe,QAAQ,aAAa;AACnD,IAAI,UAAU,QAAQ;AACpB,WAAU;AACZ;AAEA,cAAc;AAAA,EACZ;AACF,CAAC;"}