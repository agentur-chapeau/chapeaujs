{"mappings":"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","sources":["<anon>","src/filepond.js","node_modules/filepond/dist/filepond.js","node_modules/filepond-plugin-file-validate-size/dist/filepond-plugin-file-validate-size.js","node_modules/filepond-plugin-file-validate-type/dist/filepond-plugin-file-validate-type.js"],"sourcesContent":["(function () {\n\nfunction $parcel$interopDefault(a) {\n  return a && a.__esModule ? a.default : a;\n}\n\nfunction $parcel$export(e, n, v, s) {\n  Object.defineProperty(e, n, {get: v, set: s, enumerable: true, configurable: true});\n}\n\n      var $parcel$global =\n        typeof globalThis !== 'undefined'\n          ? globalThis\n          : typeof self !== 'undefined'\n          ? self\n          : typeof window !== 'undefined'\n          ? window\n          : typeof global !== 'undefined'\n          ? global\n          : {};\n  var parcelRequire = $parcel$global[\"parcelRequirec7c1\"];\nvar parcelRegister = parcelRequire.register;\nparcelRegister(\"eIiHr\", function(module, exports) {\n\n$parcel$export(module.exports, \"FilePond\", function () { return (parcelRequire(\"gfnfD\")); });\n$parcel$export(module.exports, \"FilePondPluginFileValidateSize\", function () { return (/*@__PURE__*/$parcel$interopDefault((parcelRequire(\"3KeIy\")))); });\n$parcel$export(module.exports, \"FilePondPluginFileValidateType\", function () { return (/*@__PURE__*/$parcel$interopDefault((parcelRequire(\"gmco5\")))); });\n\nvar $gfnfD = parcelRequire(\"gfnfD\");\n\nvar $3KeIy = parcelRequire(\"3KeIy\");\n\nvar $gmco5 = parcelRequire(\"gmco5\");\n\n\n});\nparcelRegister(\"gfnfD\", function(module, exports) {\n/*!\n * FilePond 4.30.6\n * Licensed under MIT, https://opensource.org/licenses/MIT/\n * Please visit https://pqina.nl/filepond/ for details.\n */ /* eslint-disable */ (function(global, factory) {\n    factory(module.exports);\n})(module.exports, function(exports1) {\n    \"use strict\";\n    var isNode = function isNode(value) {\n        return value instanceof HTMLElement;\n    };\n    var createStore = function createStore(initialState) {\n        var queries = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n        var actions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n        // internal state\n        var state = Object.assign({}, initialState);\n        // contains all actions for next frame, is clear when actions are requested\n        var actionQueue = [];\n        var dispatchQueue = [];\n        // returns a duplicate of the current state\n        var getState = function getState() {\n            return Object.assign({}, state);\n        };\n        // returns a duplicate of the actions array and clears the actions array\n        var processActionQueue = function processActionQueue() {\n            // create copy of actions queue\n            var queue = [].concat(actionQueue);\n            // clear actions queue (we don't want no double actions)\n            actionQueue.length = 0;\n            return queue;\n        };\n        // processes actions that might block the main UI thread\n        var processDispatchQueue = function processDispatchQueue() {\n            // create copy of actions queue\n            var queue = [].concat(dispatchQueue);\n            // clear actions queue (we don't want no double actions)\n            dispatchQueue.length = 0;\n            // now dispatch these actions\n            queue.forEach(function(_ref) {\n                var type = _ref.type, data = _ref.data;\n                dispatch(type, data);\n            });\n        };\n        // adds a new action, calls its handler and\n        var dispatch = function dispatch(type, data, isBlocking) {\n            // is blocking action (should never block if document is hidden)\n            if (isBlocking && !document.hidden) {\n                dispatchQueue.push({\n                    type: type,\n                    data: data\n                });\n                return;\n            }\n            // if this action has a handler, handle the action\n            if (actionHandlers[type]) actionHandlers[type](data);\n            // now add action\n            actionQueue.push({\n                type: type,\n                data: data\n            });\n        };\n        var query = function query(str) {\n            var _queryHandles;\n            for(var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++)args[_key - 1] = arguments[_key];\n            return queryHandles[str] ? (_queryHandles = queryHandles)[str].apply(_queryHandles, args) : null;\n        };\n        var api = {\n            getState: getState,\n            processActionQueue: processActionQueue,\n            processDispatchQueue: processDispatchQueue,\n            dispatch: dispatch,\n            query: query\n        };\n        var queryHandles = {};\n        queries.forEach(function(query) {\n            queryHandles = Object.assign({}, query(state), {}, queryHandles);\n        });\n        var actionHandlers = {};\n        actions.forEach(function(action) {\n            actionHandlers = Object.assign({}, action(dispatch, query, state), {}, actionHandlers);\n        });\n        return api;\n    };\n    var defineProperty = function defineProperty(obj, property, definition) {\n        if (typeof definition === \"function\") {\n            obj[property] = definition;\n            return;\n        }\n        Object.defineProperty(obj, property, Object.assign({}, definition));\n    };\n    var forin = function forin(obj, cb) {\n        for(var key in obj){\n            if (!obj.hasOwnProperty(key)) continue;\n            cb(key, obj[key]);\n        }\n    };\n    var createObject = function createObject(definition) {\n        var obj = {};\n        forin(definition, function(property) {\n            defineProperty(obj, property, definition[property]);\n        });\n        return obj;\n    };\n    var attr = function attr(node, name) {\n        var value = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n        if (value === null) return node.getAttribute(name) || node.hasAttribute(name);\n        node.setAttribute(name, value);\n    };\n    var ns = \"http://www.w3.org/2000/svg\";\n    var svgElements = [\n        \"svg\",\n        \"path\"\n    ]; // only svg elements used\n    var isSVGElement = function isSVGElement(tag) {\n        return svgElements.includes(tag);\n    };\n    var createElement = function createElement(tag, className) {\n        var attributes = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n        if (typeof className === \"object\") {\n            attributes = className;\n            className = null;\n        }\n        var element = isSVGElement(tag) ? document.createElementNS(ns, tag) : document.createElement(tag);\n        if (className) {\n            if (isSVGElement(tag)) attr(element, \"class\", className);\n            else element.className = className;\n        }\n        forin(attributes, function(name, value) {\n            attr(element, name, value);\n        });\n        return element;\n    };\n    var appendChild = function appendChild(parent) {\n        return function(child, index) {\n            if (typeof index !== \"undefined\" && parent.children[index]) parent.insertBefore(child, parent.children[index]);\n            else parent.appendChild(child);\n        };\n    };\n    var appendChildView = function appendChildView(parent, childViews) {\n        return function(view, index) {\n            if (typeof index !== \"undefined\") childViews.splice(index, 0, view);\n            else childViews.push(view);\n            return view;\n        };\n    };\n    var removeChildView = function removeChildView(parent, childViews) {\n        return function(view) {\n            // remove from child views\n            childViews.splice(childViews.indexOf(view), 1);\n            // remove the element\n            if (view.element.parentNode) parent.removeChild(view.element);\n            return view;\n        };\n    };\n    var IS_BROWSER = function() {\n        return typeof window !== \"undefined\" && typeof window.document !== \"undefined\";\n    }();\n    var isBrowser = function isBrowser() {\n        return IS_BROWSER;\n    };\n    var testElement = isBrowser() ? createElement(\"svg\") : {};\n    var getChildCount = \"children\" in testElement ? function(el) {\n        return el.children.length;\n    } : function(el) {\n        return el.childNodes.length;\n    };\n    var getViewRect = function getViewRect(elementRect, childViews, offset, scale) {\n        var left = offset[0] || elementRect.left;\n        var top = offset[1] || elementRect.top;\n        var right = left + elementRect.width;\n        var bottom = top + elementRect.height * (scale[1] || 1);\n        var rect = {\n            // the rectangle of the element itself\n            element: Object.assign({}, elementRect),\n            // the rectangle of the element expanded to contain its children, does not include any margins\n            inner: {\n                left: elementRect.left,\n                top: elementRect.top,\n                right: elementRect.right,\n                bottom: elementRect.bottom\n            },\n            // the rectangle of the element expanded to contain its children including own margin and child margins\n            // margins will be added after we've recalculated the size\n            outer: {\n                left: left,\n                top: top,\n                right: right,\n                bottom: bottom\n            }\n        };\n        // expand rect to fit all child rectangles\n        childViews.filter(function(childView) {\n            return !childView.isRectIgnored();\n        }).map(function(childView) {\n            return childView.rect;\n        }).forEach(function(childViewRect) {\n            expandRect(rect.inner, Object.assign({}, childViewRect.inner));\n            expandRect(rect.outer, Object.assign({}, childViewRect.outer));\n        });\n        // calculate inner width and height\n        calculateRectSize(rect.inner);\n        // append additional margin (top and left margins are included in top and left automatically)\n        rect.outer.bottom += rect.element.marginBottom;\n        rect.outer.right += rect.element.marginRight;\n        // calculate outer width and height\n        calculateRectSize(rect.outer);\n        return rect;\n    };\n    var expandRect = function expandRect(parent, child) {\n        // adjust for parent offset\n        child.top += parent.top;\n        child.right += parent.left;\n        child.bottom += parent.top;\n        child.left += parent.left;\n        if (child.bottom > parent.bottom) parent.bottom = child.bottom;\n        if (child.right > parent.right) parent.right = child.right;\n    };\n    var calculateRectSize = function calculateRectSize(rect) {\n        rect.width = rect.right - rect.left;\n        rect.height = rect.bottom - rect.top;\n    };\n    var isNumber = function isNumber(value) {\n        return typeof value === \"number\";\n    };\n    /**\n     * Determines if position is at destination\n     * @param position\n     * @param destination\n     * @param velocity\n     * @param errorMargin\n     * @returns {boolean}\n     */ var thereYet = function thereYet(position, destination, velocity) {\n        var errorMargin = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0.001;\n        return Math.abs(position - destination) < errorMargin && Math.abs(velocity) < errorMargin;\n    };\n    /**\n     * Spring animation\n     */ var spring = // default options\n    function spring() {\n        var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {}, _ref$stiffness = _ref.stiffness, stiffness = _ref$stiffness === void 0 ? 0.5 : _ref$stiffness, _ref$damping = _ref.damping, damping = _ref$damping === void 0 ? 0.75 : _ref$damping, _ref$mass = _ref.mass, mass = _ref$mass === void 0 ? 10 : _ref$mass;\n        var target = null;\n        var position = null;\n        var velocity = 0;\n        var resting = false;\n        // updates spring state\n        var interpolate = function interpolate(ts, skipToEndState) {\n            // in rest, don't animate\n            if (resting) return;\n            // need at least a target or position to do springy things\n            if (!(isNumber(target) && isNumber(position))) {\n                resting = true;\n                velocity = 0;\n                return;\n            }\n            // calculate spring force\n            var f = -(position - target) * stiffness;\n            // update velocity by adding force based on mass\n            velocity += f / mass;\n            // update position by adding velocity\n            position += velocity;\n            // slow down based on amount of damping\n            velocity *= damping;\n            // we've arrived if we're near target and our velocity is near zero\n            if (thereYet(position, target, velocity) || skipToEndState) {\n                position = target;\n                velocity = 0;\n                resting = true;\n                // we done\n                api.onupdate(position);\n                api.oncomplete(position);\n            } else // progress update\n            api.onupdate(position);\n        };\n        /**\n             * Set new target value\n             * @param value\n             */ var setTarget = function setTarget(value) {\n            // if currently has no position, set target and position to this value\n            if (isNumber(value) && !isNumber(position)) position = value;\n            // next target value will not be animated to\n            if (target === null) {\n                target = value;\n                position = value;\n            }\n            // let start moving to target\n            target = value;\n            // already at target\n            if (position === target || typeof target === \"undefined\") {\n                // now resting as target is current position, stop moving\n                resting = true;\n                velocity = 0;\n                // done!\n                api.onupdate(position);\n                api.oncomplete(position);\n                return;\n            }\n            resting = false;\n        };\n        // need 'api' to call onupdate callback\n        var api = createObject({\n            interpolate: interpolate,\n            target: {\n                set: setTarget,\n                get: function get() {\n                    return target;\n                }\n            },\n            resting: {\n                get: function get() {\n                    return resting;\n                }\n            },\n            onupdate: function onupdate(value) {},\n            oncomplete: function oncomplete(value) {}\n        });\n        return api;\n    };\n    var easeLinear = function easeLinear(t) {\n        return t;\n    };\n    var easeInOutQuad = function easeInOutQuad(t) {\n        return t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n    };\n    var tween = // default values\n    function tween() {\n        var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {}, _ref$duration = _ref.duration, duration = _ref$duration === void 0 ? 500 : _ref$duration, _ref$easing = _ref.easing, easing = _ref$easing === void 0 ? easeInOutQuad : _ref$easing, _ref$delay = _ref.delay, delay = _ref$delay === void 0 ? 0 : _ref$delay;\n        var start = null;\n        var t;\n        var p;\n        var resting = true;\n        var reverse = false;\n        var target = null;\n        var interpolate = function interpolate(ts, skipToEndState) {\n            if (resting || target === null) return;\n            if (start === null) start = ts;\n            if (ts - start < delay) return;\n            t = ts - start - delay;\n            if (t >= duration || skipToEndState) {\n                t = 1;\n                p = reverse ? 0 : 1;\n                api.onupdate(p * target);\n                api.oncomplete(p * target);\n                resting = true;\n            } else {\n                p = t / duration;\n                api.onupdate((t >= 0 ? easing(reverse ? 1 - p : p) : 0) * target);\n            }\n        };\n        // need 'api' to call onupdate callback\n        var api = createObject({\n            interpolate: interpolate,\n            target: {\n                get: function get() {\n                    return reverse ? 0 : target;\n                },\n                set: function set(value) {\n                    // is initial value\n                    if (target === null) {\n                        target = value;\n                        api.onupdate(value);\n                        api.oncomplete(value);\n                        return;\n                    }\n                    // want to tween to a smaller value and have a current value\n                    if (value < target) {\n                        target = 1;\n                        reverse = true;\n                    } else {\n                        // not tweening to a smaller value\n                        reverse = false;\n                        target = value;\n                    }\n                    // let's go!\n                    resting = false;\n                    start = null;\n                }\n            },\n            resting: {\n                get: function get() {\n                    return resting;\n                }\n            },\n            onupdate: function onupdate(value) {},\n            oncomplete: function oncomplete(value) {}\n        });\n        return api;\n    };\n    var animator = {\n        spring: spring,\n        tween: tween\n    };\n    /*\n                       { type: 'spring', stiffness: .5, damping: .75, mass: 10 };\n                       { translation: { type: 'spring', ... }, ... }\n                       { translation: { x: { type: 'spring', ... } } }\n                      */ var createAnimator = function createAnimator(definition, category, property) {\n        // default is single definition\n        // we check if transform is set, if so, we check if property is set\n        var def = definition[category] && typeof definition[category][property] === \"object\" ? definition[category][property] : definition[category] || definition;\n        var type = typeof def === \"string\" ? def : def.type;\n        var props = typeof def === \"object\" ? Object.assign({}, def) : {};\n        return animator[type] ? animator[type](props) : null;\n    };\n    var addGetSet = function addGetSet(keys, obj, props) {\n        var overwrite = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n        obj = Array.isArray(obj) ? obj : [\n            obj\n        ];\n        obj.forEach(function(o) {\n            keys.forEach(function(key) {\n                var name = key;\n                var getter = function getter() {\n                    return props[key];\n                };\n                var setter = function setter(value) {\n                    return props[key] = value;\n                };\n                if (typeof key === \"object\") {\n                    name = key.key;\n                    getter = key.getter || getter;\n                    setter = key.setter || setter;\n                }\n                if (o[name] && !overwrite) return;\n                o[name] = {\n                    get: getter,\n                    set: setter\n                };\n            });\n        });\n    };\n    // add to state,\n    // add getters and setters to internal and external api (if not set)\n    // setup animators\n    var animations = function animations(_ref) {\n        var mixinConfig = _ref.mixinConfig, viewProps = _ref.viewProps, viewInternalAPI = _ref.viewInternalAPI, viewExternalAPI = _ref.viewExternalAPI;\n        // initial properties\n        var initialProps = Object.assign({}, viewProps);\n        // list of all active animations\n        var animations = [];\n        // setup animators\n        forin(mixinConfig, function(property, animation) {\n            var animator = createAnimator(animation);\n            if (!animator) return;\n            // when the animator updates, update the view state value\n            animator.onupdate = function(value) {\n                viewProps[property] = value;\n            };\n            // set animator target\n            animator.target = initialProps[property];\n            // when value is set, set the animator target value\n            var prop = {\n                key: property,\n                setter: function setter(value) {\n                    // if already at target, we done!\n                    if (animator.target === value) return;\n                    animator.target = value;\n                },\n                getter: function getter() {\n                    return viewProps[property];\n                }\n            };\n            // add getters and setters\n            addGetSet([\n                prop\n            ], [\n                viewInternalAPI,\n                viewExternalAPI\n            ], viewProps, true);\n            // add it to the list for easy updating from the _write method\n            animations.push(animator);\n        });\n        // expose internal write api\n        return {\n            write: function write(ts) {\n                var skipToEndState = document.hidden;\n                var resting = true;\n                animations.forEach(function(animation) {\n                    if (!animation.resting) resting = false;\n                    animation.interpolate(ts, skipToEndState);\n                });\n                return resting;\n            },\n            destroy: function destroy() {}\n        };\n    };\n    var addEvent = function addEvent(element) {\n        return function(type, fn) {\n            element.addEventListener(type, fn);\n        };\n    };\n    var removeEvent = function removeEvent(element) {\n        return function(type, fn) {\n            element.removeEventListener(type, fn);\n        };\n    };\n    // mixin\n    var listeners = function listeners(_ref) {\n        var mixinConfig = _ref.mixinConfig, viewProps = _ref.viewProps, viewInternalAPI = _ref.viewInternalAPI, viewExternalAPI = _ref.viewExternalAPI, viewState = _ref.viewState, view = _ref.view;\n        var events = [];\n        var add = addEvent(view.element);\n        var remove = removeEvent(view.element);\n        viewExternalAPI.on = function(type, fn) {\n            events.push({\n                type: type,\n                fn: fn\n            });\n            add(type, fn);\n        };\n        viewExternalAPI.off = function(type, fn) {\n            events.splice(events.findIndex(function(event) {\n                return event.type === type && event.fn === fn;\n            }), 1);\n            remove(type, fn);\n        };\n        return {\n            write: function write() {\n                // not busy\n                return true;\n            },\n            destroy: function destroy() {\n                events.forEach(function(event) {\n                    remove(event.type, event.fn);\n                });\n            }\n        };\n    };\n    // add to external api and link to props\n    var apis = function apis(_ref) {\n        var mixinConfig = _ref.mixinConfig, viewProps = _ref.viewProps, viewExternalAPI = _ref.viewExternalAPI;\n        addGetSet(mixinConfig, viewExternalAPI, viewProps);\n    };\n    var isDefined = function isDefined(value) {\n        return value != null;\n    };\n    // add to state,\n    // add getters and setters to internal and external api (if not set)\n    // set initial state based on props in viewProps\n    // apply as transforms each frame\n    var defaults = {\n        opacity: 1,\n        scaleX: 1,\n        scaleY: 1,\n        translateX: 0,\n        translateY: 0,\n        rotateX: 0,\n        rotateY: 0,\n        rotateZ: 0,\n        originX: 0,\n        originY: 0\n    };\n    var styles = function styles(_ref) {\n        var mixinConfig = _ref.mixinConfig, viewProps = _ref.viewProps, viewInternalAPI = _ref.viewInternalAPI, viewExternalAPI = _ref.viewExternalAPI, view = _ref.view;\n        // initial props\n        var initialProps = Object.assign({}, viewProps);\n        // current props\n        var currentProps = {};\n        // we will add those properties to the external API and link them to the viewState\n        addGetSet(mixinConfig, [\n            viewInternalAPI,\n            viewExternalAPI\n        ], viewProps);\n        // override rect on internal and external rect getter so it takes in account transforms\n        var getOffset = function getOffset() {\n            return [\n                viewProps[\"translateX\"] || 0,\n                viewProps[\"translateY\"] || 0\n            ];\n        };\n        var getScale = function getScale() {\n            return [\n                viewProps[\"scaleX\"] || 0,\n                viewProps[\"scaleY\"] || 0\n            ];\n        };\n        var getRect = function getRect() {\n            return view.rect ? getViewRect(view.rect, view.childViews, getOffset(), getScale()) : null;\n        };\n        viewInternalAPI.rect = {\n            get: getRect\n        };\n        viewExternalAPI.rect = {\n            get: getRect\n        };\n        // apply view props\n        mixinConfig.forEach(function(key) {\n            viewProps[key] = typeof initialProps[key] === \"undefined\" ? defaults[key] : initialProps[key];\n        });\n        // expose api\n        return {\n            write: function write() {\n                // see if props have changed\n                if (!propsHaveChanged(currentProps, viewProps)) return;\n                // moves element to correct position on screen\n                applyStyles(view.element, viewProps);\n                // store new transforms\n                Object.assign(currentProps, Object.assign({}, viewProps));\n                // no longer busy\n                return true;\n            },\n            destroy: function destroy() {}\n        };\n    };\n    var propsHaveChanged = function propsHaveChanged(currentProps, newProps) {\n        // different amount of keys\n        if (Object.keys(currentProps).length !== Object.keys(newProps).length) return true;\n        // lets analyze the individual props\n        for(var prop in newProps){\n            if (newProps[prop] !== currentProps[prop]) return true;\n        }\n        return false;\n    };\n    var applyStyles = function applyStyles(element, _ref2) {\n        var opacity = _ref2.opacity, perspective = _ref2.perspective, translateX = _ref2.translateX, translateY = _ref2.translateY, scaleX = _ref2.scaleX, scaleY = _ref2.scaleY, rotateX = _ref2.rotateX, rotateY = _ref2.rotateY, rotateZ = _ref2.rotateZ, originX = _ref2.originX, originY = _ref2.originY, width = _ref2.width, height = _ref2.height;\n        var transforms = \"\";\n        var styles = \"\";\n        // handle transform origin\n        if (isDefined(originX) || isDefined(originY)) styles += \"transform-origin: \" + (originX || 0) + \"px \" + (originY || 0) + \"px;\";\n        // transform order is relevant\n        // 0. perspective\n        if (isDefined(perspective)) transforms += \"perspective(\" + perspective + \"px) \";\n        // 1. translate\n        if (isDefined(translateX) || isDefined(translateY)) transforms += \"translate3d(\" + (translateX || 0) + \"px, \" + (translateY || 0) + \"px, 0) \";\n        // 2. scale\n        if (isDefined(scaleX) || isDefined(scaleY)) transforms += \"scale3d(\" + (isDefined(scaleX) ? scaleX : 1) + \", \" + (isDefined(scaleY) ? scaleY : 1) + \", 1) \";\n        // 3. rotate\n        if (isDefined(rotateZ)) transforms += \"rotateZ(\" + rotateZ + \"rad) \";\n        if (isDefined(rotateX)) transforms += \"rotateX(\" + rotateX + \"rad) \";\n        if (isDefined(rotateY)) transforms += \"rotateY(\" + rotateY + \"rad) \";\n        // add transforms\n        if (transforms.length) styles += \"transform:\" + transforms + \";\";\n        // add opacity\n        if (isDefined(opacity)) {\n            styles += \"opacity:\" + opacity + \";\";\n            // if we reach zero, we make the element inaccessible\n            if (opacity === 0) styles += \"visibility:hidden;\";\n            // if we're below 100% opacity this element can't be clicked\n            if (opacity < 1) styles += \"pointer-events:none;\";\n        }\n        // add height\n        if (isDefined(height)) styles += \"height:\" + height + \"px;\";\n        // add width\n        if (isDefined(width)) styles += \"width:\" + width + \"px;\";\n        // apply styles\n        var elementCurrentStyle = element.elementCurrentStyle || \"\";\n        // if new styles does not match current styles, lets update!\n        if (styles.length !== elementCurrentStyle.length || styles !== elementCurrentStyle) {\n            element.style.cssText = styles;\n            // store current styles so we can compare them to new styles later on\n            // _not_ getting the style value is faster\n            element.elementCurrentStyle = styles;\n        }\n    };\n    var Mixins = {\n        styles: styles,\n        listeners: listeners,\n        animations: animations,\n        apis: apis\n    };\n    var updateRect = function updateRect() {\n        var rect = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        var element = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        var style = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n        if (!element.layoutCalculated) {\n            rect.paddingTop = parseInt(style.paddingTop, 10) || 0;\n            rect.marginTop = parseInt(style.marginTop, 10) || 0;\n            rect.marginRight = parseInt(style.marginRight, 10) || 0;\n            rect.marginBottom = parseInt(style.marginBottom, 10) || 0;\n            rect.marginLeft = parseInt(style.marginLeft, 10) || 0;\n            element.layoutCalculated = true;\n        }\n        rect.left = element.offsetLeft || 0;\n        rect.top = element.offsetTop || 0;\n        rect.width = element.offsetWidth || 0;\n        rect.height = element.offsetHeight || 0;\n        rect.right = rect.left + rect.width;\n        rect.bottom = rect.top + rect.height;\n        rect.scrollTop = element.scrollTop;\n        rect.hidden = element.offsetParent === null;\n        return rect;\n    };\n    var createView = // default view definition\n    function createView() {\n        var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {}, _ref$tag = _ref.tag, tag = _ref$tag === void 0 ? \"div\" : _ref$tag, _ref$name = _ref.name, name = _ref$name === void 0 ? null : _ref$name, _ref$attributes = _ref.attributes, attributes = _ref$attributes === void 0 ? {} : _ref$attributes, _ref$read = _ref.read, read = _ref$read === void 0 ? function() {} : _ref$read, _ref$write = _ref.write, write = _ref$write === void 0 ? function() {} : _ref$write, _ref$create = _ref.create, create = _ref$create === void 0 ? function() {} : _ref$create, _ref$destroy = _ref.destroy, destroy = _ref$destroy === void 0 ? function() {} : _ref$destroy, _ref$filterFrameActio = _ref.filterFrameActionsForChild, filterFrameActionsForChild = _ref$filterFrameActio === void 0 ? function(child, actions) {\n            return actions;\n        } : _ref$filterFrameActio, _ref$didCreateView = _ref.didCreateView, didCreateView = _ref$didCreateView === void 0 ? function() {} : _ref$didCreateView, _ref$didWriteView = _ref.didWriteView, didWriteView = _ref$didWriteView === void 0 ? function() {} : _ref$didWriteView, _ref$ignoreRect = _ref.ignoreRect, ignoreRect = _ref$ignoreRect === void 0 ? false : _ref$ignoreRect, _ref$ignoreRectUpdate = _ref.ignoreRectUpdate, ignoreRectUpdate = _ref$ignoreRectUpdate === void 0 ? false : _ref$ignoreRectUpdate, _ref$mixins = _ref.mixins, mixins = _ref$mixins === void 0 ? [] : _ref$mixins;\n        return function(// each view requires reference to store\n        store) {\n            var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n            // root element should not be changed\n            var element = createElement(tag, \"filepond--\" + name, attributes);\n            // style reference should also not be changed\n            var style = window.getComputedStyle(element, null);\n            // element rectangle\n            var rect = updateRect();\n            var frameRect = null;\n            // rest state\n            var isResting = false;\n            // pretty self explanatory\n            var childViews = [];\n            // loaded mixins\n            var activeMixins = [];\n            // references to created children\n            var ref = {};\n            // state used for each instance\n            var state = {};\n            // list of writers that will be called to update this view\n            var writers = [\n                write\n            ];\n            var readers = [\n                read\n            ];\n            var destroyers = [\n                destroy\n            ];\n            // core view methods\n            var getElement = function getElement() {\n                return element;\n            };\n            var getChildViews = function getChildViews() {\n                return childViews.concat();\n            };\n            var getReference = function getReference() {\n                return ref;\n            };\n            var createChildView = function createChildView(store) {\n                return function(view, props) {\n                    return view(store, props);\n                };\n            };\n            var getRect = function getRect() {\n                if (frameRect) return frameRect;\n                frameRect = getViewRect(rect, childViews, [\n                    0,\n                    0\n                ], [\n                    1,\n                    1\n                ]);\n                return frameRect;\n            };\n            var getStyle = function getStyle() {\n                return style;\n            };\n            /**\n                 * Read data from DOM\n                 * @private\n                 */ var _read = function _read() {\n                frameRect = null;\n                // read child views\n                childViews.forEach(function(child) {\n                    return child._read();\n                });\n                var shouldUpdate = !(ignoreRectUpdate && rect.width && rect.height);\n                if (shouldUpdate) updateRect(rect, element, style);\n                // readers\n                var api = {\n                    root: internalAPI,\n                    props: props,\n                    rect: rect\n                };\n                readers.forEach(function(reader) {\n                    return reader(api);\n                });\n            };\n            /**\n                 * Write data to DOM\n                 * @private\n                 */ var _write = function _write(ts, frameActions, shouldOptimize) {\n                // if no actions, we assume that the view is resting\n                var resting = frameActions.length === 0;\n                // writers\n                writers.forEach(function(writer) {\n                    var writerResting = writer({\n                        props: props,\n                        root: internalAPI,\n                        actions: frameActions,\n                        timestamp: ts,\n                        shouldOptimize: shouldOptimize\n                    });\n                    if (writerResting === false) resting = false;\n                });\n                // run mixins\n                activeMixins.forEach(function(mixin) {\n                    // if one of the mixins is still busy after write operation, we are not resting\n                    var mixinResting = mixin.write(ts);\n                    if (mixinResting === false) resting = false;\n                });\n                // updates child views that are currently attached to the DOM\n                childViews.filter(function(child) {\n                    return !!child.element.parentNode;\n                }).forEach(function(child) {\n                    // if a child view is not resting, we are not resting\n                    var childResting = child._write(ts, filterFrameActionsForChild(child, frameActions), shouldOptimize);\n                    if (!childResting) resting = false;\n                });\n                // append new elements to DOM and update those\n                childViews//.filter(child => !child.element.parentNode)\n                .forEach(function(child, index) {\n                    // skip\n                    if (child.element.parentNode) return;\n                    // append to DOM\n                    internalAPI.appendChild(child.element, index);\n                    // call read (need to know the size of these elements)\n                    child._read();\n                    // re-call write\n                    child._write(ts, filterFrameActionsForChild(child, frameActions), shouldOptimize);\n                    // we just added somthing to the dom, no rest\n                    resting = false;\n                });\n                // update resting state\n                isResting = resting;\n                didWriteView({\n                    props: props,\n                    root: internalAPI,\n                    actions: frameActions,\n                    timestamp: ts\n                });\n                // let parent know if we are resting\n                return resting;\n            };\n            var _destroy = function _destroy() {\n                activeMixins.forEach(function(mixin) {\n                    return mixin.destroy();\n                });\n                destroyers.forEach(function(destroyer) {\n                    destroyer({\n                        root: internalAPI,\n                        props: props\n                    });\n                });\n                childViews.forEach(function(child) {\n                    return child._destroy();\n                });\n            };\n            // sharedAPI\n            var sharedAPIDefinition = {\n                element: {\n                    get: getElement\n                },\n                style: {\n                    get: getStyle\n                },\n                childViews: {\n                    get: getChildViews\n                }\n            };\n            // private API definition\n            var internalAPIDefinition = Object.assign({}, sharedAPIDefinition, {\n                rect: {\n                    get: getRect\n                },\n                // access to custom children references\n                ref: {\n                    get: getReference\n                },\n                // dom modifiers\n                is: function is(needle) {\n                    return name === needle;\n                },\n                appendChild: appendChild(element),\n                createChildView: createChildView(store),\n                linkView: function linkView(view) {\n                    childViews.push(view);\n                    return view;\n                },\n                unlinkView: function unlinkView(view) {\n                    childViews.splice(childViews.indexOf(view), 1);\n                },\n                appendChildView: appendChildView(element, childViews),\n                removeChildView: removeChildView(element, childViews),\n                registerWriter: function registerWriter(writer) {\n                    return writers.push(writer);\n                },\n                registerReader: function registerReader(reader) {\n                    return readers.push(reader);\n                },\n                registerDestroyer: function registerDestroyer(destroyer) {\n                    return destroyers.push(destroyer);\n                },\n                invalidateLayout: function invalidateLayout() {\n                    return element.layoutCalculated = false;\n                },\n                // access to data store\n                dispatch: store.dispatch,\n                query: store.query\n            });\n            // public view API methods\n            var externalAPIDefinition = {\n                element: {\n                    get: getElement\n                },\n                childViews: {\n                    get: getChildViews\n                },\n                rect: {\n                    get: getRect\n                },\n                resting: {\n                    get: function get() {\n                        return isResting;\n                    }\n                },\n                isRectIgnored: function isRectIgnored() {\n                    return ignoreRect;\n                },\n                _read: _read,\n                _write: _write,\n                _destroy: _destroy\n            };\n            // mixin API methods\n            var mixinAPIDefinition = Object.assign({}, sharedAPIDefinition, {\n                rect: {\n                    get: function get() {\n                        return rect;\n                    }\n                }\n            });\n            // add mixin functionality\n            Object.keys(mixins).sort(function(a, b) {\n                // move styles to the back of the mixin list (so adjustments of other mixins are applied to the props correctly)\n                if (a === \"styles\") return 1;\n                else if (b === \"styles\") return -1;\n                return 0;\n            }).forEach(function(key) {\n                var mixinAPI = Mixins[key]({\n                    mixinConfig: mixins[key],\n                    viewProps: props,\n                    viewState: state,\n                    viewInternalAPI: internalAPIDefinition,\n                    viewExternalAPI: externalAPIDefinition,\n                    view: createObject(mixinAPIDefinition)\n                });\n                if (mixinAPI) activeMixins.push(mixinAPI);\n            });\n            // construct private api\n            var internalAPI = createObject(internalAPIDefinition);\n            // create the view\n            create({\n                root: internalAPI,\n                props: props\n            });\n            // append created child views to root node\n            var childCount = getChildCount(element); // need to know the current child count so appending happens in correct order\n            childViews.forEach(function(child, index) {\n                internalAPI.appendChild(child.element, childCount + index);\n            });\n            // call did create\n            didCreateView(internalAPI);\n            // expose public api\n            return createObject(externalAPIDefinition);\n        };\n    };\n    var createPainter = function createPainter(read, write) {\n        var fps = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 60;\n        var name = \"__framePainter\";\n        // set global painter\n        if (window[name]) {\n            window[name].readers.push(read);\n            window[name].writers.push(write);\n            return;\n        }\n        window[name] = {\n            readers: [\n                read\n            ],\n            writers: [\n                write\n            ]\n        };\n        var painter = window[name];\n        var interval = 1000 / fps;\n        var last = null;\n        var id = null;\n        var requestTick = null;\n        var cancelTick = null;\n        var setTimerType = function setTimerType() {\n            if (document.hidden) {\n                requestTick = function requestTick() {\n                    return window.setTimeout(function() {\n                        return tick(performance.now());\n                    }, interval);\n                };\n                cancelTick = function cancelTick() {\n                    return window.clearTimeout(id);\n                };\n            } else {\n                requestTick = function requestTick() {\n                    return window.requestAnimationFrame(tick);\n                };\n                cancelTick = function cancelTick() {\n                    return window.cancelAnimationFrame(id);\n                };\n            }\n        };\n        document.addEventListener(\"visibilitychange\", function() {\n            if (cancelTick) cancelTick();\n            setTimerType();\n            tick(performance.now());\n        });\n        var tick = function tick(ts) {\n            // queue next tick\n            id = requestTick(tick);\n            // limit fps\n            if (!last) last = ts;\n            var delta = ts - last;\n            if (delta <= interval) // skip frame\n            return;\n            // align next frame\n            last = ts - delta % interval;\n            // update view\n            painter.readers.forEach(function(read) {\n                return read();\n            });\n            painter.writers.forEach(function(write) {\n                return write(ts);\n            });\n        };\n        setTimerType();\n        tick(performance.now());\n        return {\n            pause: function pause() {\n                cancelTick(id);\n            }\n        };\n    };\n    var createRoute = function createRoute(routes, fn) {\n        return function(_ref) {\n            var root = _ref.root, props = _ref.props, _ref$actions = _ref.actions, actions = _ref$actions === void 0 ? [] : _ref$actions, timestamp = _ref.timestamp, shouldOptimize = _ref.shouldOptimize;\n            actions.filter(function(action) {\n                return routes[action.type];\n            }).forEach(function(action) {\n                return routes[action.type]({\n                    root: root,\n                    props: props,\n                    action: action.data,\n                    timestamp: timestamp,\n                    shouldOptimize: shouldOptimize\n                });\n            });\n            if (fn) fn({\n                root: root,\n                props: props,\n                actions: actions,\n                timestamp: timestamp,\n                shouldOptimize: shouldOptimize\n            });\n        };\n    };\n    var insertBefore = function insertBefore(newNode, referenceNode) {\n        return referenceNode.parentNode.insertBefore(newNode, referenceNode);\n    };\n    var insertAfter = function insertAfter(newNode, referenceNode) {\n        return referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);\n    };\n    var isArray = function isArray(value) {\n        return Array.isArray(value);\n    };\n    var isEmpty = function isEmpty(value) {\n        return value == null;\n    };\n    var trim = function trim(str) {\n        return str.trim();\n    };\n    var toString = function toString(value) {\n        return \"\" + value;\n    };\n    var toArray = function toArray(value) {\n        var splitter = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \",\";\n        if (isEmpty(value)) return [];\n        if (isArray(value)) return value;\n        return toString(value).split(splitter).map(trim).filter(function(str) {\n            return str.length;\n        });\n    };\n    var isBoolean = function isBoolean(value) {\n        return typeof value === \"boolean\";\n    };\n    var toBoolean = function toBoolean(value) {\n        return isBoolean(value) ? value : value === \"true\";\n    };\n    var isString = function isString(value) {\n        return typeof value === \"string\";\n    };\n    var toNumber = function toNumber(value) {\n        return isNumber(value) ? value : isString(value) ? toString(value).replace(/[a-z]+/gi, \"\") : 0;\n    };\n    var toInt = function toInt(value) {\n        return parseInt(toNumber(value), 10);\n    };\n    var toFloat = function toFloat(value) {\n        return parseFloat(toNumber(value));\n    };\n    var isInt = function isInt(value) {\n        return isNumber(value) && isFinite(value) && Math.floor(value) === value;\n    };\n    var toBytes = function toBytes(value) {\n        var base = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1000;\n        // is in bytes\n        if (isInt(value)) return value;\n        // is natural file size\n        var naturalFileSize = toString(value).trim();\n        // if is value in megabytes\n        if (/MB$/i.test(naturalFileSize)) {\n            naturalFileSize = naturalFileSize.replace(/MB$i/, \"\").trim();\n            return toInt(naturalFileSize) * base * base;\n        }\n        // if is value in kilobytes\n        if (/KB/i.test(naturalFileSize)) {\n            naturalFileSize = naturalFileSize.replace(/KB$i/, \"\").trim();\n            return toInt(naturalFileSize) * base;\n        }\n        return toInt(naturalFileSize);\n    };\n    var isFunction = function isFunction(value) {\n        return typeof value === \"function\";\n    };\n    var toFunctionReference = function toFunctionReference(string) {\n        var ref = self;\n        var levels = string.split(\".\");\n        var level = null;\n        while(level = levels.shift()){\n            ref = ref[level];\n            if (!ref) return null;\n        }\n        return ref;\n    };\n    var methods = {\n        process: \"POST\",\n        patch: \"PATCH\",\n        revert: \"DELETE\",\n        fetch: \"GET\",\n        restore: \"GET\",\n        load: \"GET\"\n    };\n    var createServerAPI = function createServerAPI(outline) {\n        var api = {};\n        api.url = isString(outline) ? outline : outline.url || \"\";\n        api.timeout = outline.timeout ? parseInt(outline.timeout, 10) : 0;\n        api.headers = outline.headers ? outline.headers : {};\n        forin(methods, function(key) {\n            api[key] = createAction(key, outline[key], methods[key], api.timeout, api.headers);\n        });\n        // remove process if no url or process on outline\n        api.process = outline.process || isString(outline) || outline.url ? api.process : null;\n        // special treatment for remove\n        api.remove = outline.remove || null;\n        // remove generic headers from api object\n        delete api.headers;\n        return api;\n    };\n    var createAction = function createAction(name, outline, method, timeout, headers) {\n        // is explicitely set to null so disable\n        if (outline === null) return null;\n        // if is custom function, done! Dev handles everything.\n        if (typeof outline === \"function\") return outline;\n        // build action object\n        var action = {\n            url: method === \"GET\" || method === \"PATCH\" ? \"?\" + name + \"=\" : \"\",\n            method: method,\n            headers: headers,\n            withCredentials: false,\n            timeout: timeout,\n            onload: null,\n            ondata: null,\n            onerror: null\n        };\n        // is a single url\n        if (isString(outline)) {\n            action.url = outline;\n            return action;\n        }\n        // overwrite\n        Object.assign(action, outline);\n        // see if should reformat headers;\n        if (isString(action.headers)) {\n            var parts = action.headers.split(/:(.+)/);\n            action.headers = {\n                header: parts[0],\n                value: parts[1]\n            };\n        }\n        // if is bool withCredentials\n        action.withCredentials = toBoolean(action.withCredentials);\n        return action;\n    };\n    var toServerAPI = function toServerAPI(value) {\n        return createServerAPI(value);\n    };\n    var isNull = function isNull(value) {\n        return value === null;\n    };\n    var isObject = function isObject(value) {\n        return typeof value === \"object\" && value !== null;\n    };\n    var isAPI = function isAPI(value) {\n        return isObject(value) && isString(value.url) && isObject(value.process) && isObject(value.revert) && isObject(value.restore) && isObject(value.fetch);\n    };\n    var getType = function getType(value) {\n        if (isArray(value)) return \"array\";\n        if (isNull(value)) return \"null\";\n        if (isInt(value)) return \"int\";\n        if (/^[0-9]+ ?(?:GB|MB|KB)$/gi.test(value)) return \"bytes\";\n        if (isAPI(value)) return \"api\";\n        return typeof value;\n    };\n    var replaceSingleQuotes = function replaceSingleQuotes(str) {\n        return str.replace(/{\\s*'/g, '{\"').replace(/'\\s*}/g, '\"}').replace(/'\\s*:/g, '\":').replace(/:\\s*'/g, ':\"').replace(/,\\s*'/g, ',\"').replace(/'\\s*,/g, '\",');\n    };\n    var conversionTable = {\n        array: toArray,\n        boolean: toBoolean,\n        int: function int(value) {\n            return getType(value) === \"bytes\" ? toBytes(value) : toInt(value);\n        },\n        number: toFloat,\n        float: toFloat,\n        bytes: toBytes,\n        string: function string(value) {\n            return isFunction(value) ? value : toString(value);\n        },\n        function: function _function(value) {\n            return toFunctionReference(value);\n        },\n        serverapi: toServerAPI,\n        object: function object(value) {\n            try {\n                return JSON.parse(replaceSingleQuotes(value));\n            } catch (e) {\n                return null;\n            }\n        }\n    };\n    var convertTo = function convertTo(value, type) {\n        return conversionTable[type](value);\n    };\n    var getValueByType = function getValueByType(newValue, defaultValue, valueType) {\n        // can always assign default value\n        if (newValue === defaultValue) return newValue;\n        // get the type of the new value\n        var newValueType = getType(newValue);\n        // is valid type?\n        if (newValueType !== valueType) {\n            // is string input, let's attempt to convert\n            var convertedValue = convertTo(newValue, valueType);\n            // what is the type now\n            newValueType = getType(convertedValue);\n            // no valid conversions found\n            if (convertedValue === null) throw 'Trying to assign value with incorrect type to \"' + option + '\", allowed type: \"' + valueType + '\"';\n            else newValue = convertedValue;\n        }\n        // assign new value\n        return newValue;\n    };\n    var createOption = function createOption(defaultValue, valueType) {\n        var currentValue = defaultValue;\n        return {\n            enumerable: true,\n            get: function get() {\n                return currentValue;\n            },\n            set: function set(newValue) {\n                currentValue = getValueByType(newValue, defaultValue, valueType);\n            }\n        };\n    };\n    var createOptions = function createOptions(options) {\n        var obj = {};\n        forin(options, function(prop) {\n            var optionDefinition = options[prop];\n            obj[prop] = createOption(optionDefinition[0], optionDefinition[1]);\n        });\n        return createObject(obj);\n    };\n    var createInitialState = function createInitialState(options) {\n        return {\n            // model\n            items: [],\n            // timeout used for calling update items\n            listUpdateTimeout: null,\n            // timeout used for stacking metadata updates\n            itemUpdateTimeout: null,\n            // queue of items waiting to be processed\n            processingQueue: [],\n            // options\n            options: createOptions(options)\n        };\n    };\n    var fromCamels = function fromCamels(string) {\n        var separator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"-\";\n        return string.split(/(?=[A-Z])/).map(function(part) {\n            return part.toLowerCase();\n        }).join(separator);\n    };\n    var createOptionAPI = function createOptionAPI(store, options) {\n        var obj = {};\n        forin(options, function(key) {\n            obj[key] = {\n                get: function get() {\n                    return store.getState().options[key];\n                },\n                set: function set(value) {\n                    store.dispatch(\"SET_\" + fromCamels(key, \"_\").toUpperCase(), {\n                        value: value\n                    });\n                }\n            };\n        });\n        return obj;\n    };\n    var createOptionActions = function createOptionActions(options) {\n        return function(dispatch, query, state) {\n            var obj = {};\n            forin(options, function(key) {\n                var name = fromCamels(key, \"_\").toUpperCase();\n                obj[\"SET_\" + name] = function(action) {\n                    try {\n                        state.options[key] = action.value;\n                    } catch (e) {} // nope, failed\n                    // we successfully set the value of this option\n                    dispatch(\"DID_SET_\" + name, {\n                        value: state.options[key]\n                    });\n                };\n            });\n            return obj;\n        };\n    };\n    var createOptionQueries = function createOptionQueries(options) {\n        return function(state) {\n            var obj = {};\n            forin(options, function(key) {\n                obj[\"GET_\" + fromCamels(key, \"_\").toUpperCase()] = function(action) {\n                    return state.options[key];\n                };\n            });\n            return obj;\n        };\n    };\n    var InteractionMethod = {\n        API: 1,\n        DROP: 2,\n        BROWSE: 3,\n        PASTE: 4,\n        NONE: 5\n    };\n    var getUniqueId = function getUniqueId() {\n        return Math.random().toString(36).substring(2, 11);\n    };\n    function _typeof(obj) {\n        if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") _typeof = function(obj) {\n            return typeof obj;\n        };\n        else _typeof = function(obj) {\n            return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n        };\n        return _typeof(obj);\n    }\n    var REACT_ELEMENT_TYPE;\n    function _jsx(type, props, key, children) {\n        if (!REACT_ELEMENT_TYPE) REACT_ELEMENT_TYPE = typeof Symbol === \"function\" && Symbol[\"for\"] && Symbol[\"for\"](\"react.element\") || 0xeac7;\n        var defaultProps = type && type.defaultProps;\n        var childrenLength = arguments.length - 3;\n        if (!props && childrenLength !== 0) props = {\n            children: void 0\n        };\n        if (props && defaultProps) {\n            for(var propName in defaultProps)if (props[propName] === void 0) props[propName] = defaultProps[propName];\n        } else if (!props) props = defaultProps || {};\n        if (childrenLength === 1) props.children = children;\n        else if (childrenLength > 1) {\n            var childArray = new Array(childrenLength);\n            for(var i = 0; i < childrenLength; i++)childArray[i] = arguments[i + 3];\n            props.children = childArray;\n        }\n        return {\n            $$typeof: REACT_ELEMENT_TYPE,\n            type: type,\n            key: key === undefined ? null : \"\" + key,\n            ref: null,\n            props: props,\n            _owner: null\n        };\n    }\n    function _asyncIterator(iterable) {\n        var method;\n        if (typeof Symbol !== \"undefined\") {\n            if (Symbol.asyncIterator) {\n                method = iterable[Symbol.asyncIterator];\n                if (method != null) return method.call(iterable);\n            }\n            if (Symbol.iterator) {\n                method = iterable[Symbol.iterator];\n                if (method != null) return method.call(iterable);\n            }\n        }\n        throw new TypeError(\"Object is not async iterable\");\n    }\n    function _AwaitValue(value) {\n        this.wrapped = value;\n    }\n    function _AsyncGenerator(gen) {\n        var front, back;\n        function send(key, arg) {\n            return new Promise(function(resolve, reject) {\n                var request = {\n                    key: key,\n                    arg: arg,\n                    resolve: resolve,\n                    reject: reject,\n                    next: null\n                };\n                if (back) back = back.next = request;\n                else {\n                    front = back = request;\n                    resume(key, arg);\n                }\n            });\n        }\n        function resume(key, arg) {\n            try {\n                var result = gen[key](arg);\n                var value = result.value;\n                var wrappedAwait = value instanceof _AwaitValue;\n                Promise.resolve(wrappedAwait ? value.wrapped : value).then(function(arg) {\n                    if (wrappedAwait) {\n                        resume(\"next\", arg);\n                        return;\n                    }\n                    settle(result.done ? \"return\" : \"normal\", arg);\n                }, function(err) {\n                    resume(\"throw\", err);\n                });\n            } catch (err) {\n                settle(\"throw\", err);\n            }\n        }\n        function settle(type, value) {\n            switch(type){\n                case \"return\":\n                    front.resolve({\n                        value: value,\n                        done: true\n                    });\n                    break;\n                case \"throw\":\n                    front.reject(value);\n                    break;\n                default:\n                    front.resolve({\n                        value: value,\n                        done: false\n                    });\n                    break;\n            }\n            front = front.next;\n            if (front) resume(front.key, front.arg);\n            else back = null;\n        }\n        this._invoke = send;\n        if (typeof gen.return !== \"function\") this.return = undefined;\n    }\n    if (typeof Symbol === \"function\" && Symbol.asyncIterator) _AsyncGenerator.prototype[Symbol.asyncIterator] = function() {\n        return this;\n    };\n    _AsyncGenerator.prototype.next = function(arg) {\n        return this._invoke(\"next\", arg);\n    };\n    _AsyncGenerator.prototype.throw = function(arg) {\n        return this._invoke(\"throw\", arg);\n    };\n    _AsyncGenerator.prototype.return = function(arg) {\n        return this._invoke(\"return\", arg);\n    };\n    function _wrapAsyncGenerator(fn) {\n        return function() {\n            return new _AsyncGenerator(fn.apply(this, arguments));\n        };\n    }\n    function _awaitAsyncGenerator(value) {\n        return new _AwaitValue(value);\n    }\n    function _asyncGeneratorDelegate(inner, awaitWrap) {\n        var iter = {}, waiting = false;\n        function pump(key, value) {\n            waiting = true;\n            value = new Promise(function(resolve) {\n                resolve(inner[key](value));\n            });\n            return {\n                done: false,\n                value: awaitWrap(value)\n            };\n        }\n        if (typeof Symbol === \"function\" && Symbol.iterator) iter[Symbol.iterator] = function() {\n            return this;\n        };\n        iter.next = function(value) {\n            if (waiting) {\n                waiting = false;\n                return value;\n            }\n            return pump(\"next\", value);\n        };\n        if (typeof inner.throw === \"function\") iter.throw = function(value) {\n            if (waiting) {\n                waiting = false;\n                throw value;\n            }\n            return pump(\"throw\", value);\n        };\n        if (typeof inner.return === \"function\") iter.return = function(value) {\n            return pump(\"return\", value);\n        };\n        return iter;\n    }\n    function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n        try {\n            var info = gen[key](arg);\n            var value = info.value;\n        } catch (error) {\n            reject(error);\n            return;\n        }\n        if (info.done) resolve(value);\n        else Promise.resolve(value).then(_next, _throw);\n    }\n    function _asyncToGenerator(fn) {\n        return function() {\n            var self1 = this, args = arguments;\n            return new Promise(function(resolve, reject) {\n                var gen = fn.apply(self1, args);\n                function _next(value) {\n                    asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n                }\n                function _throw(err) {\n                    asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n                }\n                _next(undefined);\n            });\n        };\n    }\n    function _classCallCheck(instance, Constructor) {\n        if (!(instance instanceof Constructor)) throw new TypeError(\"Cannot call a class as a function\");\n    }\n    function _defineProperties(target, props) {\n        for(var i = 0; i < props.length; i++){\n            var descriptor = props[i];\n            descriptor.enumerable = descriptor.enumerable || false;\n            descriptor.configurable = true;\n            if (\"value\" in descriptor) descriptor.writable = true;\n            Object.defineProperty(target, descriptor.key, descriptor);\n        }\n    }\n    function _createClass(Constructor, protoProps, staticProps) {\n        if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n        if (staticProps) _defineProperties(Constructor, staticProps);\n        return Constructor;\n    }\n    function _defineEnumerableProperties(obj, descs) {\n        for(var key in descs){\n            var desc = descs[key];\n            desc.configurable = desc.enumerable = true;\n            if (\"value\" in desc) desc.writable = true;\n            Object.defineProperty(obj, key, desc);\n        }\n        if (Object.getOwnPropertySymbols) {\n            var objectSymbols = Object.getOwnPropertySymbols(descs);\n            for(var i = 0; i < objectSymbols.length; i++){\n                var sym = objectSymbols[i];\n                var desc = descs[sym];\n                desc.configurable = desc.enumerable = true;\n                if (\"value\" in desc) desc.writable = true;\n                Object.defineProperty(obj, sym, desc);\n            }\n        }\n        return obj;\n    }\n    function _defaults(obj, defaults) {\n        var keys = Object.getOwnPropertyNames(defaults);\n        for(var i = 0; i < keys.length; i++){\n            var key = keys[i];\n            var value = Object.getOwnPropertyDescriptor(defaults, key);\n            if (value && value.configurable && obj[key] === undefined) Object.defineProperty(obj, key, value);\n        }\n        return obj;\n    }\n    function _defineProperty(obj, key, value) {\n        if (key in obj) Object.defineProperty(obj, key, {\n            value: value,\n            enumerable: true,\n            configurable: true,\n            writable: true\n        });\n        else obj[key] = value;\n        return obj;\n    }\n    function _extends() {\n        _extends = Object.assign || function(target) {\n            for(var i = 1; i < arguments.length; i++){\n                var source = arguments[i];\n                for(var key in source)if (Object.prototype.hasOwnProperty.call(source, key)) target[key] = source[key];\n            }\n            return target;\n        };\n        return _extends.apply(this, arguments);\n    }\n    function _objectSpread(target) {\n        for(var i = 1; i < arguments.length; i++){\n            var source = arguments[i] != null ? arguments[i] : {};\n            var ownKeys = Object.keys(source);\n            if (typeof Object.getOwnPropertySymbols === \"function\") ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym) {\n                return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n            }));\n            ownKeys.forEach(function(key) {\n                _defineProperty(target, key, source[key]);\n            });\n        }\n        return target;\n    }\n    function ownKeys(object, enumerableOnly) {\n        var keys = Object.keys(object);\n        if (Object.getOwnPropertySymbols) {\n            var symbols = Object.getOwnPropertySymbols(object);\n            if (enumerableOnly) symbols = symbols.filter(function(sym) {\n                return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n            });\n            keys.push.apply(keys, symbols);\n        }\n        return keys;\n    }\n    function _objectSpread2(target) {\n        for(var i = 1; i < arguments.length; i++){\n            var source = arguments[i] != null ? arguments[i] : {};\n            if (i % 2) ownKeys(source, true).forEach(function(key) {\n                _defineProperty(target, key, source[key]);\n            });\n            else if (Object.getOwnPropertyDescriptors) Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n            else ownKeys(source).forEach(function(key) {\n                Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n            });\n        }\n        return target;\n    }\n    function _inherits(subClass, superClass) {\n        if (typeof superClass !== \"function\" && superClass !== null) throw new TypeError(\"Super expression must either be null or a function\");\n        subClass.prototype = Object.create(superClass && superClass.prototype, {\n            constructor: {\n                value: subClass,\n                writable: true,\n                configurable: true\n            }\n        });\n        if (superClass) _setPrototypeOf(subClass, superClass);\n    }\n    function _inheritsLoose(subClass, superClass) {\n        subClass.prototype = Object.create(superClass.prototype);\n        subClass.prototype.constructor = subClass;\n        subClass.__proto__ = superClass;\n    }\n    function _getPrototypeOf(o) {\n        _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n            return o.__proto__ || Object.getPrototypeOf(o);\n        };\n        return _getPrototypeOf(o);\n    }\n    function _setPrototypeOf(o, p) {\n        _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n            o.__proto__ = p;\n            return o;\n        };\n        return _setPrototypeOf(o, p);\n    }\n    function isNativeReflectConstruct() {\n        if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n        if (Reflect.construct.sham) return false;\n        if (typeof Proxy === \"function\") return true;\n        try {\n            Date.prototype.toString.call(Reflect.construct(Date, [], function() {}));\n            return true;\n        } catch (e) {\n            return false;\n        }\n    }\n    function _construct(Parent, args, Class) {\n        if (isNativeReflectConstruct()) _construct = Reflect.construct;\n        else _construct = function _construct(Parent, args, Class) {\n            var a = [\n                null\n            ];\n            a.push.apply(a, args);\n            var Constructor = Function.bind.apply(Parent, a);\n            var instance = new Constructor();\n            if (Class) _setPrototypeOf(instance, Class.prototype);\n            return instance;\n        };\n        return _construct.apply(null, arguments);\n    }\n    function _isNativeFunction(fn) {\n        return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n    }\n    function _wrapNativeSuper(Class) {\n        var _cache = typeof Map === \"function\" ? new Map() : undefined;\n        _wrapNativeSuper = function _wrapNativeSuper(Class) {\n            if (Class === null || !_isNativeFunction(Class)) return Class;\n            if (typeof Class !== \"function\") throw new TypeError(\"Super expression must either be null or a function\");\n            if (typeof _cache !== \"undefined\") {\n                if (_cache.has(Class)) return _cache.get(Class);\n                _cache.set(Class, Wrapper);\n            }\n            function Wrapper() {\n                return _construct(Class, arguments, _getPrototypeOf(this).constructor);\n            }\n            Wrapper.prototype = Object.create(Class.prototype, {\n                constructor: {\n                    value: Wrapper,\n                    enumerable: false,\n                    writable: true,\n                    configurable: true\n                }\n            });\n            return _setPrototypeOf(Wrapper, Class);\n        };\n        return _wrapNativeSuper(Class);\n    }\n    function _instanceof(left, right) {\n        if (right != null && typeof Symbol !== \"undefined\" && right[Symbol.hasInstance]) return !!right[Symbol.hasInstance](left);\n        else return left instanceof right;\n    }\n    function _interopRequireDefault(obj) {\n        return obj && obj.__esModule ? obj : {\n            default: obj\n        };\n    }\n    function _interopRequireWildcard(obj) {\n        if (obj && obj.__esModule) return obj;\n        else {\n            var newObj = {};\n            if (obj != null) {\n                for(var key in obj)if (Object.prototype.hasOwnProperty.call(obj, key)) {\n                    var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {};\n                    if (desc.get || desc.set) Object.defineProperty(newObj, key, desc);\n                    else newObj[key] = obj[key];\n                }\n            }\n            newObj.default = obj;\n            return newObj;\n        }\n    }\n    function _newArrowCheck(innerThis, boundThis) {\n        if (innerThis !== boundThis) throw new TypeError(\"Cannot instantiate an arrow function\");\n    }\n    function _objectDestructuringEmpty(obj) {\n        if (obj == null) throw new TypeError(\"Cannot destructure undefined\");\n    }\n    function _objectWithoutPropertiesLoose(source, excluded) {\n        if (source == null) return {};\n        var target = {};\n        var sourceKeys = Object.keys(source);\n        var key, i;\n        for(i = 0; i < sourceKeys.length; i++){\n            key = sourceKeys[i];\n            if (excluded.indexOf(key) >= 0) continue;\n            target[key] = source[key];\n        }\n        return target;\n    }\n    function _objectWithoutProperties(source, excluded) {\n        if (source == null) return {};\n        var target = _objectWithoutPropertiesLoose(source, excluded);\n        var key, i;\n        if (Object.getOwnPropertySymbols) {\n            var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n            for(i = 0; i < sourceSymbolKeys.length; i++){\n                key = sourceSymbolKeys[i];\n                if (excluded.indexOf(key) >= 0) continue;\n                if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n                target[key] = source[key];\n            }\n        }\n        return target;\n    }\n    function _assertThisInitialized(self1) {\n        if (self1 === void 0) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n        return self1;\n    }\n    function _possibleConstructorReturn(self1, call) {\n        if (call && (typeof call === \"object\" || typeof call === \"function\")) return call;\n        return _assertThisInitialized(self1);\n    }\n    function _superPropBase(object, property) {\n        while(!Object.prototype.hasOwnProperty.call(object, property)){\n            object = _getPrototypeOf(object);\n            if (object === null) break;\n        }\n        return object;\n    }\n    function _get(target, property, receiver) {\n        if (typeof Reflect !== \"undefined\" && Reflect.get) _get = Reflect.get;\n        else _get = function _get(target, property, receiver) {\n            var base = _superPropBase(target, property);\n            if (!base) return;\n            var desc = Object.getOwnPropertyDescriptor(base, property);\n            if (desc.get) return desc.get.call(receiver);\n            return desc.value;\n        };\n        return _get(target, property, receiver || target);\n    }\n    function set(target, property, value, receiver) {\n        if (typeof Reflect !== \"undefined\" && Reflect.set) set = Reflect.set;\n        else set = function set(target, property, value, receiver) {\n            var base = _superPropBase(target, property);\n            var desc;\n            if (base) {\n                desc = Object.getOwnPropertyDescriptor(base, property);\n                if (desc.set) {\n                    desc.set.call(receiver, value);\n                    return true;\n                } else if (!desc.writable) return false;\n            }\n            desc = Object.getOwnPropertyDescriptor(receiver, property);\n            if (desc) {\n                if (!desc.writable) return false;\n                desc.value = value;\n                Object.defineProperty(receiver, property, desc);\n            } else _defineProperty(receiver, property, value);\n            return true;\n        };\n        return set(target, property, value, receiver);\n    }\n    function _set(target, property, value, receiver, isStrict) {\n        var s = set(target, property, value, receiver || target);\n        if (!s && isStrict) throw new Error(\"failed to set property\");\n        return value;\n    }\n    function _taggedTemplateLiteral(strings, raw) {\n        if (!raw) raw = strings.slice(0);\n        return Object.freeze(Object.defineProperties(strings, {\n            raw: {\n                value: Object.freeze(raw)\n            }\n        }));\n    }\n    function _taggedTemplateLiteralLoose(strings, raw) {\n        if (!raw) raw = strings.slice(0);\n        strings.raw = raw;\n        return strings;\n    }\n    function _temporalRef(val1, name) {\n        if (val1 === _temporalUndefined) throw new ReferenceError(name + \" is not defined - temporal dead zone\");\n        else return val1;\n    }\n    function _readOnlyError(name) {\n        throw new Error('\"' + name + '\" is read-only');\n    }\n    function _classNameTDZError(name) {\n        throw new Error('Class \"' + name + '\" cannot be referenced in computed property keys.');\n    }\n    var _temporalUndefined = {};\n    function _slicedToArray(arr, i) {\n        return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n    }\n    function _slicedToArrayLoose(arr, i) {\n        return _arrayWithHoles(arr) || _iterableToArrayLimitLoose(arr, i) || _nonIterableRest();\n    }\n    function _toArray(arr) {\n        return _arrayWithHoles(arr) || _iterableToArray(arr) || _nonIterableRest();\n    }\n    function _toConsumableArray(arr) {\n        return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n    }\n    function _arrayWithoutHoles(arr) {\n        if (Array.isArray(arr)) {\n            for(var i = 0, arr2 = new Array(arr.length); i < arr.length; i++)arr2[i] = arr[i];\n            return arr2;\n        }\n    }\n    function _arrayWithHoles(arr) {\n        if (Array.isArray(arr)) return arr;\n    }\n    function _iterableToArray(iter) {\n        if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n    }\n    function _iterableToArrayLimit(arr, i) {\n        var _arr = [];\n        var _n = true;\n        var _d = false;\n        var _e = undefined;\n        try {\n            for(var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true){\n                _arr.push(_s.value);\n                if (i && _arr.length === i) break;\n            }\n        } catch (err) {\n            _d = true;\n            _e = err;\n        } finally{\n            try {\n                if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n            } finally{\n                if (_d) throw _e;\n            }\n        }\n        return _arr;\n    }\n    function _iterableToArrayLimitLoose(arr, i) {\n        var _arr = [];\n        for(var _iterator = arr[Symbol.iterator](), _step; !(_step = _iterator.next()).done;){\n            _arr.push(_step.value);\n            if (i && _arr.length === i) break;\n        }\n        return _arr;\n    }\n    function _nonIterableSpread() {\n        throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n    }\n    function _nonIterableRest() {\n        throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n    function _skipFirstGeneratorNext(fn) {\n        return function() {\n            var it = fn.apply(this, arguments);\n            it.next();\n            return it;\n        };\n    }\n    function _toPrimitive(input, hint) {\n        if (typeof input !== \"object\" || input === null) return input;\n        var prim = input[Symbol.toPrimitive];\n        if (prim !== undefined) {\n            var res = prim.call(input, hint || \"default\");\n            if (typeof res !== \"object\") return res;\n            throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n        }\n        return (hint === \"string\" ? String : Number)(input);\n    }\n    function _toPropertyKey(arg) {\n        var key = _toPrimitive(arg, \"string\");\n        return typeof key === \"symbol\" ? key : String(key);\n    }\n    function _initializerWarningHelper(descriptor, context) {\n        throw new Error(\"Decorating class property failed. Please ensure that proposal-class-properties is enabled and set to use loose mode. To use proposal-class-properties in spec mode with decorators, wait for the next major version of decorators in stage 2.\");\n    }\n    function _initializerDefineProperty(target, property, descriptor, context) {\n        if (!descriptor) return;\n        Object.defineProperty(target, property, {\n            enumerable: descriptor.enumerable,\n            configurable: descriptor.configurable,\n            writable: descriptor.writable,\n            value: descriptor.initializer ? descriptor.initializer.call(context) : void 0\n        });\n    }\n    function _applyDecoratedDescriptor(target, property, decorators, descriptor, context) {\n        var desc = {};\n        Object.keys(descriptor).forEach(function(key) {\n            desc[key] = descriptor[key];\n        });\n        desc.enumerable = !!desc.enumerable;\n        desc.configurable = !!desc.configurable;\n        if (\"value\" in desc || desc.initializer) desc.writable = true;\n        desc = decorators.slice().reverse().reduce(function(desc, decorator) {\n            return decorator(target, property, desc) || desc;\n        }, desc);\n        if (context && desc.initializer !== void 0) {\n            desc.value = desc.initializer ? desc.initializer.call(context) : void 0;\n            desc.initializer = undefined;\n        }\n        if (desc.initializer === void 0) {\n            Object.defineProperty(target, property, desc);\n            desc = null;\n        }\n        return desc;\n    }\n    var id = 0;\n    function _classPrivateFieldLooseKey(name) {\n        return \"__private_\" + id++ + \"_\" + name;\n    }\n    function _classPrivateFieldLooseBase(receiver, privateKey) {\n        if (!Object.prototype.hasOwnProperty.call(receiver, privateKey)) throw new TypeError(\"attempted to use private field on non-instance\");\n        return receiver;\n    }\n    function _classPrivateFieldGet(receiver, privateMap) {\n        var descriptor = privateMap.get(receiver);\n        if (!descriptor) throw new TypeError(\"attempted to get private field on non-instance\");\n        if (descriptor.get) return descriptor.get.call(receiver);\n        return descriptor.value;\n    }\n    function _classPrivateFieldSet(receiver, privateMap, value) {\n        var descriptor = privateMap.get(receiver);\n        if (!descriptor) throw new TypeError(\"attempted to set private field on non-instance\");\n        if (descriptor.set) descriptor.set.call(receiver, value);\n        else {\n            if (!descriptor.writable) throw new TypeError(\"attempted to set read only private field\");\n            descriptor.value = value;\n        }\n        return value;\n    }\n    function _classPrivateFieldDestructureSet(receiver, privateMap) {\n        if (!privateMap.has(receiver)) throw new TypeError(\"attempted to set private field on non-instance\");\n        var descriptor = privateMap.get(receiver);\n        if (descriptor.set) {\n            if (!(\"__destrObj\" in descriptor)) descriptor.__destrObj = {\n                set value (v){\n                    descriptor.set.call(receiver, v);\n                }\n            };\n            return descriptor.__destrObj;\n        } else {\n            if (!descriptor.writable) throw new TypeError(\"attempted to set read only private field\");\n            return descriptor;\n        }\n    }\n    function _classStaticPrivateFieldSpecGet(receiver, classConstructor, descriptor) {\n        if (receiver !== classConstructor) throw new TypeError(\"Private static access of wrong provenance\");\n        return descriptor.value;\n    }\n    function _classStaticPrivateFieldSpecSet(receiver, classConstructor, descriptor, value) {\n        if (receiver !== classConstructor) throw new TypeError(\"Private static access of wrong provenance\");\n        if (!descriptor.writable) throw new TypeError(\"attempted to set read only private field\");\n        descriptor.value = value;\n        return value;\n    }\n    function _classStaticPrivateMethodGet(receiver, classConstructor, method) {\n        if (receiver !== classConstructor) throw new TypeError(\"Private static access of wrong provenance\");\n        return method;\n    }\n    function _classStaticPrivateMethodSet() {\n        throw new TypeError(\"attempted to set read only static private field\");\n    }\n    function _decorate(decorators, factory, superClass, mixins) {\n        var api = _getDecoratorsApi();\n        if (mixins) for(var i = 0; i < mixins.length; i++)api = mixins[i](api);\n        var r = factory(function initialize(O) {\n            api.initializeInstanceElements(O, decorated.elements);\n        }, superClass);\n        var decorated = api.decorateClass(_coalesceClassElements(r.d.map(_createElementDescriptor)), decorators);\n        api.initializeClassElements(r.F, decorated.elements);\n        return api.runClassFinishers(r.F, decorated.finishers);\n    }\n    function _getDecoratorsApi() {\n        _getDecoratorsApi = function() {\n            return api;\n        };\n        var api = {\n            elementsDefinitionOrder: [\n                [\n                    \"method\"\n                ],\n                [\n                    \"field\"\n                ]\n            ],\n            initializeInstanceElements: function(O, elements) {\n                [\n                    \"method\",\n                    \"field\"\n                ].forEach(function(kind) {\n                    elements.forEach(function(element) {\n                        if (element.kind === kind && element.placement === \"own\") this.defineClassElement(O, element);\n                    }, this);\n                }, this);\n            },\n            initializeClassElements: function(F, elements) {\n                var proto = F.prototype;\n                [\n                    \"method\",\n                    \"field\"\n                ].forEach(function(kind) {\n                    elements.forEach(function(element) {\n                        var placement = element.placement;\n                        if (element.kind === kind && (placement === \"static\" || placement === \"prototype\")) {\n                            var receiver = placement === \"static\" ? F : proto;\n                            this.defineClassElement(receiver, element);\n                        }\n                    }, this);\n                }, this);\n            },\n            defineClassElement: function(receiver, element) {\n                var descriptor = element.descriptor;\n                if (element.kind === \"field\") {\n                    var initializer = element.initializer;\n                    descriptor = {\n                        enumerable: descriptor.enumerable,\n                        writable: descriptor.writable,\n                        configurable: descriptor.configurable,\n                        value: initializer === void 0 ? void 0 : initializer.call(receiver)\n                    };\n                }\n                Object.defineProperty(receiver, element.key, descriptor);\n            },\n            decorateClass: function(elements, decorators) {\n                var newElements = [];\n                var finishers = [];\n                var placements = {\n                    static: [],\n                    prototype: [],\n                    own: []\n                };\n                elements.forEach(function(element) {\n                    this.addElementPlacement(element, placements);\n                }, this);\n                elements.forEach(function(element) {\n                    if (!_hasDecorators(element)) return newElements.push(element);\n                    var elementFinishersExtras = this.decorateElement(element, placements);\n                    newElements.push(elementFinishersExtras.element);\n                    newElements.push.apply(newElements, elementFinishersExtras.extras);\n                    finishers.push.apply(finishers, elementFinishersExtras.finishers);\n                }, this);\n                if (!decorators) return {\n                    elements: newElements,\n                    finishers: finishers\n                };\n                var result = this.decorateConstructor(newElements, decorators);\n                finishers.push.apply(finishers, result.finishers);\n                result.finishers = finishers;\n                return result;\n            },\n            addElementPlacement: function(element, placements, silent) {\n                var keys = placements[element.placement];\n                if (!silent && keys.indexOf(element.key) !== -1) throw new TypeError(\"Duplicated element (\" + element.key + \")\");\n                keys.push(element.key);\n            },\n            decorateElement: function(element, placements) {\n                var extras = [];\n                var finishers = [];\n                for(var decorators = element.decorators, i = decorators.length - 1; i >= 0; i--){\n                    var keys = placements[element.placement];\n                    keys.splice(keys.indexOf(element.key), 1);\n                    var elementObject = this.fromElementDescriptor(element);\n                    var elementFinisherExtras = this.toElementFinisherExtras((0, decorators[i])(elementObject) || elementObject);\n                    element = elementFinisherExtras.element;\n                    this.addElementPlacement(element, placements);\n                    if (elementFinisherExtras.finisher) finishers.push(elementFinisherExtras.finisher);\n                    var newExtras = elementFinisherExtras.extras;\n                    if (newExtras) {\n                        for(var j = 0; j < newExtras.length; j++)this.addElementPlacement(newExtras[j], placements);\n                        extras.push.apply(extras, newExtras);\n                    }\n                }\n                return {\n                    element: element,\n                    finishers: finishers,\n                    extras: extras\n                };\n            },\n            decorateConstructor: function(elements, decorators) {\n                var finishers = [];\n                for(var i = decorators.length - 1; i >= 0; i--){\n                    var obj = this.fromClassDescriptor(elements);\n                    var elementsAndFinisher = this.toClassDescriptor((0, decorators[i])(obj) || obj);\n                    if (elementsAndFinisher.finisher !== undefined) finishers.push(elementsAndFinisher.finisher);\n                    if (elementsAndFinisher.elements !== undefined) {\n                        elements = elementsAndFinisher.elements;\n                        for(var j = 0; j < elements.length - 1; j++)for(var k = j + 1; k < elements.length; k++){\n                            if (elements[j].key === elements[k].key && elements[j].placement === elements[k].placement) throw new TypeError(\"Duplicated element (\" + elements[j].key + \")\");\n                        }\n                    }\n                }\n                return {\n                    elements: elements,\n                    finishers: finishers\n                };\n            },\n            fromElementDescriptor: function(element) {\n                var obj = {\n                    kind: element.kind,\n                    key: element.key,\n                    placement: element.placement,\n                    descriptor: element.descriptor\n                };\n                var desc = {\n                    value: \"Descriptor\",\n                    configurable: true\n                };\n                Object.defineProperty(obj, Symbol.toStringTag, desc);\n                if (element.kind === \"field\") obj.initializer = element.initializer;\n                return obj;\n            },\n            toElementDescriptors: function(elementObjects) {\n                if (elementObjects === undefined) return;\n                return _toArray(elementObjects).map(function(elementObject) {\n                    var element = this.toElementDescriptor(elementObject);\n                    this.disallowProperty(elementObject, \"finisher\", \"An element descriptor\");\n                    this.disallowProperty(elementObject, \"extras\", \"An element descriptor\");\n                    return element;\n                }, this);\n            },\n            toElementDescriptor: function(elementObject) {\n                var kind = String(elementObject.kind);\n                if (kind !== \"method\" && kind !== \"field\") throw new TypeError('An element descriptor\\'s .kind property must be either \"method\" or \"field\", but a decorator created an element descriptor with .kind \"' + kind + '\"');\n                var key = _toPropertyKey(elementObject.key);\n                var placement = String(elementObject.placement);\n                if (placement !== \"static\" && placement !== \"prototype\" && placement !== \"own\") throw new TypeError('An element descriptor\\'s .placement property must be one of \"static\", \"prototype\" or \"own\", but a decorator created an element descriptor with .placement \"' + placement + '\"');\n                var descriptor = elementObject.descriptor;\n                this.disallowProperty(elementObject, \"elements\", \"An element descriptor\");\n                var element = {\n                    kind: kind,\n                    key: key,\n                    placement: placement,\n                    descriptor: Object.assign({}, descriptor)\n                };\n                if (kind !== \"field\") this.disallowProperty(elementObject, \"initializer\", \"A method descriptor\");\n                else {\n                    this.disallowProperty(descriptor, \"get\", \"The property descriptor of a field descriptor\");\n                    this.disallowProperty(descriptor, \"set\", \"The property descriptor of a field descriptor\");\n                    this.disallowProperty(descriptor, \"value\", \"The property descriptor of a field descriptor\");\n                    element.initializer = elementObject.initializer;\n                }\n                return element;\n            },\n            toElementFinisherExtras: function(elementObject) {\n                var element = this.toElementDescriptor(elementObject);\n                var finisher = _optionalCallableProperty(elementObject, \"finisher\");\n                var extras = this.toElementDescriptors(elementObject.extras);\n                return {\n                    element: element,\n                    finisher: finisher,\n                    extras: extras\n                };\n            },\n            fromClassDescriptor: function(elements) {\n                var obj = {\n                    kind: \"class\",\n                    elements: elements.map(this.fromElementDescriptor, this)\n                };\n                var desc = {\n                    value: \"Descriptor\",\n                    configurable: true\n                };\n                Object.defineProperty(obj, Symbol.toStringTag, desc);\n                return obj;\n            },\n            toClassDescriptor: function(obj) {\n                var kind = String(obj.kind);\n                if (kind !== \"class\") throw new TypeError('A class descriptor\\'s .kind property must be \"class\", but a decorator created a class descriptor with .kind \"' + kind + '\"');\n                this.disallowProperty(obj, \"key\", \"A class descriptor\");\n                this.disallowProperty(obj, \"placement\", \"A class descriptor\");\n                this.disallowProperty(obj, \"descriptor\", \"A class descriptor\");\n                this.disallowProperty(obj, \"initializer\", \"A class descriptor\");\n                this.disallowProperty(obj, \"extras\", \"A class descriptor\");\n                var finisher = _optionalCallableProperty(obj, \"finisher\");\n                var elements = this.toElementDescriptors(obj.elements);\n                return {\n                    elements: elements,\n                    finisher: finisher\n                };\n            },\n            runClassFinishers: function(constructor, finishers) {\n                for(var i = 0; i < finishers.length; i++){\n                    var newConstructor = (0, finishers[i])(constructor);\n                    if (newConstructor !== undefined) {\n                        if (typeof newConstructor !== \"function\") throw new TypeError(\"Finishers must return a constructor.\");\n                        constructor = newConstructor;\n                    }\n                }\n                return constructor;\n            },\n            disallowProperty: function(obj, name, objectType) {\n                if (obj[name] !== undefined) throw new TypeError(objectType + \" can't have a .\" + name + \" property.\");\n            }\n        };\n        return api;\n    }\n    function _createElementDescriptor(def) {\n        var key = _toPropertyKey(def.key);\n        var descriptor;\n        if (def.kind === \"method\") descriptor = {\n            value: def.value,\n            writable: true,\n            configurable: true,\n            enumerable: false\n        };\n        else if (def.kind === \"get\") descriptor = {\n            get: def.value,\n            configurable: true,\n            enumerable: false\n        };\n        else if (def.kind === \"set\") descriptor = {\n            set: def.value,\n            configurable: true,\n            enumerable: false\n        };\n        else if (def.kind === \"field\") descriptor = {\n            configurable: true,\n            writable: true,\n            enumerable: true\n        };\n        var element = {\n            kind: def.kind === \"field\" ? \"field\" : \"method\",\n            key: key,\n            placement: def.static ? \"static\" : def.kind === \"field\" ? \"own\" : \"prototype\",\n            descriptor: descriptor\n        };\n        if (def.decorators) element.decorators = def.decorators;\n        if (def.kind === \"field\") element.initializer = def.value;\n        return element;\n    }\n    function _coalesceGetterSetter(element, other) {\n        if (element.descriptor.get !== undefined) other.descriptor.get = element.descriptor.get;\n        else other.descriptor.set = element.descriptor.set;\n    }\n    function _coalesceClassElements(elements) {\n        var newElements = [];\n        var isSameElement = function(other) {\n            return other.kind === \"method\" && other.key === element.key && other.placement === element.placement;\n        };\n        for(var i = 0; i < elements.length; i++){\n            var element = elements[i];\n            var other;\n            if (element.kind === \"method\" && (other = newElements.find(isSameElement))) {\n                if (_isDataDescriptor(element.descriptor) || _isDataDescriptor(other.descriptor)) {\n                    if (_hasDecorators(element) || _hasDecorators(other)) throw new ReferenceError(\"Duplicated methods (\" + element.key + \") can't be decorated.\");\n                    other.descriptor = element.descriptor;\n                } else {\n                    if (_hasDecorators(element)) {\n                        if (_hasDecorators(other)) throw new ReferenceError(\"Decorators can't be placed on different accessors with for the same property (\" + element.key + \").\");\n                        other.decorators = element.decorators;\n                    }\n                    _coalesceGetterSetter(element, other);\n                }\n            } else newElements.push(element);\n        }\n        return newElements;\n    }\n    function _hasDecorators(element) {\n        return element.decorators && element.decorators.length;\n    }\n    function _isDataDescriptor(desc) {\n        return desc !== undefined && !(desc.value === undefined && desc.writable === undefined);\n    }\n    function _optionalCallableProperty(obj, name) {\n        var value = obj[name];\n        if (value !== undefined && typeof value !== \"function\") throw new TypeError(\"Expected '\" + name + \"' to be a function\");\n        return value;\n    }\n    function _classPrivateMethodGet(receiver, privateSet, fn) {\n        if (!privateSet.has(receiver)) throw new TypeError(\"attempted to get private field on non-instance\");\n        return fn;\n    }\n    function _classPrivateMethodSet() {\n        throw new TypeError(\"attempted to reassign private method\");\n    }\n    function _wrapRegExp(re, groups) {\n        _wrapRegExp = function(re, groups) {\n            return new BabelRegExp(re, groups);\n        };\n        var _RegExp = _wrapNativeSuper(RegExp);\n        var _super = RegExp.prototype;\n        var _groups = new WeakMap();\n        function BabelRegExp(re, groups) {\n            var _this = _RegExp.call(this, re);\n            _groups.set(_this, groups);\n            return _this;\n        }\n        _inherits(BabelRegExp, _RegExp);\n        BabelRegExp.prototype.exec = function(str) {\n            var result = _super.exec.call(this, str);\n            if (result) result.groups = buildGroups(result, this);\n            return result;\n        };\n        BabelRegExp.prototype[Symbol.replace] = function(str, substitution) {\n            if (typeof substitution === \"string\") {\n                var groups = _groups.get(this);\n                return _super[Symbol.replace].call(this, str, substitution.replace(/\\$<([^>]+)>/g, function(_, name) {\n                    return \"$\" + groups[name];\n                }));\n            } else if (typeof substitution === \"function\") {\n                var _this = this;\n                return _super[Symbol.replace].call(this, str, function() {\n                    var args = [];\n                    args.push.apply(args, arguments);\n                    if (typeof args[args.length - 1] !== \"object\") args.push(buildGroups(args, _this));\n                    return substitution.apply(this, args);\n                });\n            } else return _super[Symbol.replace].call(this, str, substitution);\n        };\n        function buildGroups(result, re) {\n            var g = _groups.get(re);\n            return Object.keys(g).reduce(function(groups, name) {\n                groups[name] = result[g[name]];\n                return groups;\n            }, Object.create(null));\n        }\n        return _wrapRegExp.apply(this, arguments);\n    }\n    var arrayRemove = function arrayRemove(arr, index) {\n        return arr.splice(index, 1);\n    };\n    var run = function run(cb, sync) {\n        if (sync) cb();\n        else if (document.hidden) Promise.resolve(1).then(cb);\n        else setTimeout(cb, 0);\n    };\n    var on = function on() {\n        var listeners = [];\n        var off = function off(event, cb) {\n            arrayRemove(listeners, listeners.findIndex(function(listener) {\n                return listener.event === event && (listener.cb === cb || !cb);\n            }));\n        };\n        var _fire = function fire(event, args, sync) {\n            listeners.filter(function(listener) {\n                return listener.event === event;\n            }).map(function(listener) {\n                return listener.cb;\n            }).forEach(function(cb) {\n                return run(function() {\n                    return cb.apply(void 0, _toConsumableArray(args));\n                }, sync);\n            });\n        };\n        return {\n            fireSync: function fireSync(event) {\n                for(var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++)args[_key - 1] = arguments[_key];\n                _fire(event, args, true);\n            },\n            fire: function fire(event) {\n                for(var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++)args[_key2 - 1] = arguments[_key2];\n                _fire(event, args, false);\n            },\n            on: function on(event, cb) {\n                listeners.push({\n                    event: event,\n                    cb: cb\n                });\n            },\n            onOnce: function onOnce(event, _cb) {\n                listeners.push({\n                    event: event,\n                    cb: function cb() {\n                        off(event, _cb);\n                        _cb.apply(void 0, arguments);\n                    }\n                });\n            },\n            off: off\n        };\n    };\n    var copyObjectPropertiesToObject = function copyObjectPropertiesToObject(src, target, excluded) {\n        Object.getOwnPropertyNames(src).filter(function(property) {\n            return !excluded.includes(property);\n        }).forEach(function(key) {\n            return Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(src, key));\n        });\n    };\n    var PRIVATE = [\n        \"fire\",\n        \"process\",\n        \"revert\",\n        \"load\",\n        \"on\",\n        \"off\",\n        \"onOnce\",\n        \"retryLoad\",\n        \"extend\",\n        \"archive\",\n        \"archived\",\n        \"release\",\n        \"released\",\n        \"requestProcessing\",\n        \"freeze\"\n    ];\n    var createItemAPI = function createItemAPI(item) {\n        var api = {};\n        copyObjectPropertiesToObject(item, api, PRIVATE);\n        return api;\n    };\n    var removeReleasedItems = function removeReleasedItems(items) {\n        items.forEach(function(item, index) {\n            if (item.released) arrayRemove(items, index);\n        });\n    };\n    var ItemStatus = {\n        INIT: 1,\n        IDLE: 2,\n        PROCESSING_QUEUED: 9,\n        PROCESSING: 3,\n        PROCESSING_COMPLETE: 5,\n        PROCESSING_ERROR: 6,\n        PROCESSING_REVERT_ERROR: 10,\n        LOADING: 7,\n        LOAD_ERROR: 8\n    };\n    var FileOrigin = {\n        INPUT: 1,\n        LIMBO: 2,\n        LOCAL: 3\n    };\n    var getNonNumeric = function getNonNumeric(str) {\n        return /[^0-9]+/.exec(str);\n    };\n    var getDecimalSeparator = function getDecimalSeparator() {\n        return getNonNumeric(1.1.toLocaleString())[0];\n    };\n    var getThousandsSeparator = function getThousandsSeparator() {\n        // Added for browsers that do not return the thousands separator (happend on native browser Android 4.4.4)\n        // We check against the normal toString output and if they're the same return a comma when decimal separator is a dot\n        var decimalSeparator = getDecimalSeparator();\n        var thousandsStringWithSeparator = 1000.0.toLocaleString();\n        var thousandsStringWithoutSeparator = 1000.0.toString();\n        if (thousandsStringWithSeparator !== thousandsStringWithoutSeparator) return getNonNumeric(thousandsStringWithSeparator)[0];\n        return decimalSeparator === \".\" ? \",\" : \".\";\n    };\n    var Type = {\n        BOOLEAN: \"boolean\",\n        INT: \"int\",\n        NUMBER: \"number\",\n        STRING: \"string\",\n        ARRAY: \"array\",\n        OBJECT: \"object\",\n        FUNCTION: \"function\",\n        ACTION: \"action\",\n        SERVER_API: \"serverapi\",\n        REGEX: \"regex\"\n    };\n    // all registered filters\n    var filters = [];\n    // loops over matching filters and passes options to each filter, returning the mapped results\n    var applyFilterChain = function applyFilterChain(key, value, utils) {\n        return new Promise(function(resolve, reject) {\n            // find matching filters for this key\n            var matchingFilters = filters.filter(function(f) {\n                return f.key === key;\n            }).map(function(f) {\n                return f.cb;\n            });\n            // resolve now\n            if (matchingFilters.length === 0) {\n                resolve(value);\n                return;\n            }\n            // first filter to kick things of\n            var initialFilter = matchingFilters.shift();\n            // chain filters\n            matchingFilters.reduce(// loop over promises passing value to next promise\n            function(current, next) {\n                return current.then(function(value) {\n                    return next(value, utils);\n                });\n            }, // call initial filter, will return a promise\n            initialFilter(value, utils)).then(function(value) {\n                return resolve(value);\n            }).catch(function(error) {\n                return reject(error);\n            });\n        });\n    };\n    var applyFilters = function applyFilters(key, value, utils) {\n        return filters.filter(function(f) {\n            return f.key === key;\n        }).map(function(f) {\n            return f.cb(value, utils);\n        });\n    };\n    // adds a new filter to the list\n    var addFilter = function addFilter(key, cb) {\n        return filters.push({\n            key: key,\n            cb: cb\n        });\n    };\n    var extendDefaultOptions = function extendDefaultOptions(additionalOptions) {\n        return Object.assign(defaultOptions, additionalOptions);\n    };\n    var getOptions = function getOptions() {\n        return Object.assign({}, defaultOptions);\n    };\n    var setOptions = function setOptions(opts) {\n        forin(opts, function(key, value) {\n            // key does not exist, so this option cannot be set\n            if (!defaultOptions[key]) return;\n            defaultOptions[key][0] = getValueByType(value, defaultOptions[key][0], defaultOptions[key][1]);\n        });\n    };\n    // default options on app\n    var defaultOptions = {\n        // the id to add to the root element\n        id: [\n            null,\n            Type.STRING\n        ],\n        // input field name to use\n        name: [\n            \"filepond\",\n            Type.STRING\n        ],\n        // disable the field\n        disabled: [\n            false,\n            Type.BOOLEAN\n        ],\n        // classname to put on wrapper\n        className: [\n            null,\n            Type.STRING\n        ],\n        // is the field required\n        required: [\n            false,\n            Type.BOOLEAN\n        ],\n        // Allow media capture when value is set\n        captureMethod: [\n            null,\n            Type.STRING\n        ],\n        // - \"camera\", \"microphone\" or \"camcorder\",\n        // - Does not work with multiple on apple devices\n        // - If set, acceptedFileTypes must be made to match with media wildcard \"image/*\", \"audio/*\" or \"video/*\"\n        // sync `acceptedFileTypes` property with `accept` attribute\n        allowSyncAcceptAttribute: [\n            true,\n            Type.BOOLEAN\n        ],\n        // Feature toggles\n        allowDrop: [\n            true,\n            Type.BOOLEAN\n        ],\n        allowBrowse: [\n            true,\n            Type.BOOLEAN\n        ],\n        allowPaste: [\n            true,\n            Type.BOOLEAN\n        ],\n        allowMultiple: [\n            false,\n            Type.BOOLEAN\n        ],\n        allowReplace: [\n            true,\n            Type.BOOLEAN\n        ],\n        allowRevert: [\n            true,\n            Type.BOOLEAN\n        ],\n        allowRemove: [\n            true,\n            Type.BOOLEAN\n        ],\n        allowProcess: [\n            true,\n            Type.BOOLEAN\n        ],\n        allowReorder: [\n            false,\n            Type.BOOLEAN\n        ],\n        allowDirectoriesOnly: [\n            false,\n            Type.BOOLEAN\n        ],\n        // Try store file if `server` not set\n        storeAsFile: [\n            false,\n            Type.BOOLEAN\n        ],\n        // Revert mode\n        forceRevert: [\n            false,\n            Type.BOOLEAN\n        ],\n        // Input requirements\n        maxFiles: [\n            null,\n            Type.INT\n        ],\n        checkValidity: [\n            false,\n            Type.BOOLEAN\n        ],\n        // Where to put file\n        itemInsertLocationFreedom: [\n            true,\n            Type.BOOLEAN\n        ],\n        itemInsertLocation: [\n            \"before\",\n            Type.STRING\n        ],\n        itemInsertInterval: [\n            75,\n            Type.INT\n        ],\n        // Drag 'n Drop related\n        dropOnPage: [\n            false,\n            Type.BOOLEAN\n        ],\n        dropOnElement: [\n            true,\n            Type.BOOLEAN\n        ],\n        dropValidation: [\n            false,\n            Type.BOOLEAN\n        ],\n        ignoredFiles: [\n            [\n                \".ds_store\",\n                \"thumbs.db\",\n                \"desktop.ini\"\n            ],\n            Type.ARRAY\n        ],\n        // Upload related\n        instantUpload: [\n            true,\n            Type.BOOLEAN\n        ],\n        maxParallelUploads: [\n            2,\n            Type.INT\n        ],\n        allowMinimumUploadDuration: [\n            true,\n            Type.BOOLEAN\n        ],\n        // Chunks\n        chunkUploads: [\n            false,\n            Type.BOOLEAN\n        ],\n        chunkForce: [\n            false,\n            Type.BOOLEAN\n        ],\n        chunkSize: [\n            5000000,\n            Type.INT\n        ],\n        chunkRetryDelays: [\n            [\n                500,\n                1000,\n                3000\n            ],\n            Type.ARRAY\n        ],\n        // The server api end points to use for uploading (see docs)\n        server: [\n            null,\n            Type.SERVER_API\n        ],\n        // File size calculations, can set to 1024, this is only used for display, properties use file size base 1000\n        fileSizeBase: [\n            1000,\n            Type.INT\n        ],\n        // Labels and status messages\n        labelFileSizeBytes: [\n            \"bytes\",\n            Type.STRING\n        ],\n        labelFileSizeKilobytes: [\n            \"KB\",\n            Type.STRING\n        ],\n        labelFileSizeMegabytes: [\n            \"MB\",\n            Type.STRING\n        ],\n        labelFileSizeGigabytes: [\n            \"GB\",\n            Type.STRING\n        ],\n        labelDecimalSeparator: [\n            getDecimalSeparator(),\n            Type.STRING\n        ],\n        labelThousandsSeparator: [\n            getThousandsSeparator(),\n            Type.STRING\n        ],\n        labelIdle: [\n            'Drag & Drop your files or <span class=\"filepond--label-action\">Browse</span>',\n            Type.STRING\n        ],\n        labelInvalidField: [\n            \"Field contains invalid files\",\n            Type.STRING\n        ],\n        labelFileWaitingForSize: [\n            \"Waiting for size\",\n            Type.STRING\n        ],\n        labelFileSizeNotAvailable: [\n            \"Size not available\",\n            Type.STRING\n        ],\n        labelFileCountSingular: [\n            \"file in list\",\n            Type.STRING\n        ],\n        labelFileCountPlural: [\n            \"files in list\",\n            Type.STRING\n        ],\n        labelFileLoading: [\n            \"Loading\",\n            Type.STRING\n        ],\n        labelFileAdded: [\n            \"Added\",\n            Type.STRING\n        ],\n        labelFileLoadError: [\n            \"Error during load\",\n            Type.STRING\n        ],\n        labelFileRemoved: [\n            \"Removed\",\n            Type.STRING\n        ],\n        labelFileRemoveError: [\n            \"Error during remove\",\n            Type.STRING\n        ],\n        labelFileProcessing: [\n            \"Uploading\",\n            Type.STRING\n        ],\n        labelFileProcessingComplete: [\n            \"Upload complete\",\n            Type.STRING\n        ],\n        labelFileProcessingAborted: [\n            \"Upload cancelled\",\n            Type.STRING\n        ],\n        labelFileProcessingError: [\n            \"Error during upload\",\n            Type.STRING\n        ],\n        labelFileProcessingRevertError: [\n            \"Error during revert\",\n            Type.STRING\n        ],\n        labelTapToCancel: [\n            \"tap to cancel\",\n            Type.STRING\n        ],\n        labelTapToRetry: [\n            \"tap to retry\",\n            Type.STRING\n        ],\n        labelTapToUndo: [\n            \"tap to undo\",\n            Type.STRING\n        ],\n        labelButtonRemoveItem: [\n            \"Remove\",\n            Type.STRING\n        ],\n        labelButtonAbortItemLoad: [\n            \"Abort\",\n            Type.STRING\n        ],\n        labelButtonRetryItemLoad: [\n            \"Retry\",\n            Type.STRING\n        ],\n        labelButtonAbortItemProcessing: [\n            \"Cancel\",\n            Type.STRING\n        ],\n        labelButtonUndoItemProcessing: [\n            \"Undo\",\n            Type.STRING\n        ],\n        labelButtonRetryItemProcessing: [\n            \"Retry\",\n            Type.STRING\n        ],\n        labelButtonProcessItem: [\n            \"Upload\",\n            Type.STRING\n        ],\n        // make sure width and height plus viewpox are even numbers so icons are nicely centered\n        iconRemove: [\n            '<svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M11.586 13l-2.293 2.293a1 1 0 0 0 1.414 1.414L13 14.414l2.293 2.293a1 1 0 0 0 1.414-1.414L14.414 13l2.293-2.293a1 1 0 0 0-1.414-1.414L13 11.586l-2.293-2.293a1 1 0 0 0-1.414 1.414L11.586 13z\" fill=\"currentColor\" fill-rule=\"nonzero\"/></svg>',\n            Type.STRING\n        ],\n        iconProcess: [\n            '<svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 10.414v3.585a1 1 0 0 1-2 0v-3.585l-1.293 1.293a1 1 0 0 1-1.414-1.415l3-3a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.415L14 10.414zM9 18a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2H9z\" fill=\"currentColor\" fill-rule=\"evenodd\"/></svg>',\n            Type.STRING\n        ],\n        iconRetry: [\n            '<svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M10.81 9.185l-.038.02A4.997 4.997 0 0 0 8 13.683a5 5 0 0 0 5 5 5 5 0 0 0 5-5 1 1 0 0 1 2 0A7 7 0 1 1 9.722 7.496l-.842-.21a.999.999 0 1 1 .484-1.94l3.23.806c.535.133.86.675.73 1.21l-.804 3.233a.997.997 0 0 1-1.21.73.997.997 0 0 1-.73-1.21l.23-.928v-.002z\" fill=\"currentColor\" fill-rule=\"nonzero\"/></svg>',\n            Type.STRING\n        ],\n        iconUndo: [\n            '<svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M9.185 10.81l.02-.038A4.997 4.997 0 0 1 13.683 8a5 5 0 0 1 5 5 5 5 0 0 1-5 5 1 1 0 0 0 0 2A7 7 0 1 0 7.496 9.722l-.21-.842a.999.999 0 1 0-1.94.484l.806 3.23c.133.535.675.86 1.21.73l3.233-.803a.997.997 0 0 0 .73-1.21.997.997 0 0 0-1.21-.73l-.928.23-.002-.001z\" fill=\"currentColor\" fill-rule=\"nonzero\"/></svg>',\n            Type.STRING\n        ],\n        iconDone: [\n            '<svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M18.293 9.293a1 1 0 0 1 1.414 1.414l-7.002 7a1 1 0 0 1-1.414 0l-3.998-4a1 1 0 1 1 1.414-1.414L12 15.586l6.294-6.293z\" fill=\"currentColor\" fill-rule=\"nonzero\"/></svg>',\n            Type.STRING\n        ],\n        // event handlers\n        oninit: [\n            null,\n            Type.FUNCTION\n        ],\n        onwarning: [\n            null,\n            Type.FUNCTION\n        ],\n        onerror: [\n            null,\n            Type.FUNCTION\n        ],\n        onactivatefile: [\n            null,\n            Type.FUNCTION\n        ],\n        oninitfile: [\n            null,\n            Type.FUNCTION\n        ],\n        onaddfilestart: [\n            null,\n            Type.FUNCTION\n        ],\n        onaddfileprogress: [\n            null,\n            Type.FUNCTION\n        ],\n        onaddfile: [\n            null,\n            Type.FUNCTION\n        ],\n        onprocessfilestart: [\n            null,\n            Type.FUNCTION\n        ],\n        onprocessfileprogress: [\n            null,\n            Type.FUNCTION\n        ],\n        onprocessfileabort: [\n            null,\n            Type.FUNCTION\n        ],\n        onprocessfilerevert: [\n            null,\n            Type.FUNCTION\n        ],\n        onprocessfile: [\n            null,\n            Type.FUNCTION\n        ],\n        onprocessfiles: [\n            null,\n            Type.FUNCTION\n        ],\n        onremovefile: [\n            null,\n            Type.FUNCTION\n        ],\n        onpreparefile: [\n            null,\n            Type.FUNCTION\n        ],\n        onupdatefiles: [\n            null,\n            Type.FUNCTION\n        ],\n        onreorderfiles: [\n            null,\n            Type.FUNCTION\n        ],\n        // hooks\n        beforeDropFile: [\n            null,\n            Type.FUNCTION\n        ],\n        beforeAddFile: [\n            null,\n            Type.FUNCTION\n        ],\n        beforeRemoveFile: [\n            null,\n            Type.FUNCTION\n        ],\n        beforePrepareFile: [\n            null,\n            Type.FUNCTION\n        ],\n        // styles\n        stylePanelLayout: [\n            null,\n            Type.STRING\n        ],\n        stylePanelAspectRatio: [\n            null,\n            Type.STRING\n        ],\n        styleItemPanelAspectRatio: [\n            null,\n            Type.STRING\n        ],\n        styleButtonRemoveItemPosition: [\n            \"left\",\n            Type.STRING\n        ],\n        styleButtonProcessItemPosition: [\n            \"right\",\n            Type.STRING\n        ],\n        styleLoadIndicatorPosition: [\n            \"right\",\n            Type.STRING\n        ],\n        styleProgressIndicatorPosition: [\n            \"right\",\n            Type.STRING\n        ],\n        styleButtonRemoveItemAlign: [\n            false,\n            Type.BOOLEAN\n        ],\n        // custom initial files array\n        files: [\n            [],\n            Type.ARRAY\n        ],\n        // show support by displaying credits\n        credits: [\n            [\n                \"https://pqina.nl/\",\n                \"Powered by PQINA\"\n            ],\n            Type.ARRAY\n        ]\n    };\n    var getItemByQuery = function getItemByQuery(items, query) {\n        // just return first index\n        if (isEmpty(query)) return items[0] || null;\n        // query is index\n        if (isInt(query)) return items[query] || null;\n        // if query is item, get the id\n        if (typeof query === \"object\") query = query.id;\n        // assume query is a string and return item by id\n        return items.find(function(item) {\n            return item.id === query;\n        }) || null;\n    };\n    var getNumericAspectRatioFromString = function getNumericAspectRatioFromString(aspectRatio) {\n        if (isEmpty(aspectRatio)) return aspectRatio;\n        if (/:/.test(aspectRatio)) {\n            var parts = aspectRatio.split(\":\");\n            return parts[1] / parts[0];\n        }\n        return parseFloat(aspectRatio);\n    };\n    var getActiveItems = function getActiveItems(items) {\n        return items.filter(function(item) {\n            return !item.archived;\n        });\n    };\n    var Status = {\n        EMPTY: 0,\n        IDLE: 1,\n        ERROR: 2,\n        BUSY: 3,\n        READY: 4\n    };\n    var res = null;\n    var canUpdateFileInput = function canUpdateFileInput() {\n        if (res === null) try {\n            var dataTransfer = new DataTransfer();\n            dataTransfer.items.add(new File([\n                \"hello world\"\n            ], \"This_Works.txt\"));\n            var el = document.createElement(\"input\");\n            el.setAttribute(\"type\", \"file\");\n            el.files = dataTransfer.files;\n            res = el.files.length === 1;\n        } catch (err) {\n            res = false;\n        }\n        return res;\n    };\n    var ITEM_ERROR = [\n        ItemStatus.LOAD_ERROR,\n        ItemStatus.PROCESSING_ERROR,\n        ItemStatus.PROCESSING_REVERT_ERROR\n    ];\n    var ITEM_BUSY = [\n        ItemStatus.LOADING,\n        ItemStatus.PROCESSING,\n        ItemStatus.PROCESSING_QUEUED,\n        ItemStatus.INIT\n    ];\n    var ITEM_READY = [\n        ItemStatus.PROCESSING_COMPLETE\n    ];\n    var isItemInErrorState = function isItemInErrorState(item) {\n        return ITEM_ERROR.includes(item.status);\n    };\n    var isItemInBusyState = function isItemInBusyState(item) {\n        return ITEM_BUSY.includes(item.status);\n    };\n    var isItemInReadyState = function isItemInReadyState(item) {\n        return ITEM_READY.includes(item.status);\n    };\n    var isAsync = function isAsync(state) {\n        return isObject(state.options.server) && (isObject(state.options.server.process) || isFunction(state.options.server.process));\n    };\n    var queries = function queries(state) {\n        return {\n            GET_STATUS: function GET_STATUS() {\n                var items = getActiveItems(state.items);\n                var EMPTY = Status.EMPTY, ERROR = Status.ERROR, BUSY = Status.BUSY, IDLE = Status.IDLE, READY = Status.READY;\n                if (items.length === 0) return EMPTY;\n                if (items.some(isItemInErrorState)) return ERROR;\n                if (items.some(isItemInBusyState)) return BUSY;\n                if (items.some(isItemInReadyState)) return READY;\n                return IDLE;\n            },\n            GET_ITEM: function GET_ITEM(query) {\n                return getItemByQuery(state.items, query);\n            },\n            GET_ACTIVE_ITEM: function GET_ACTIVE_ITEM(query) {\n                return getItemByQuery(getActiveItems(state.items), query);\n            },\n            GET_ACTIVE_ITEMS: function GET_ACTIVE_ITEMS() {\n                return getActiveItems(state.items);\n            },\n            GET_ITEMS: function GET_ITEMS() {\n                return state.items;\n            },\n            GET_ITEM_NAME: function GET_ITEM_NAME(query) {\n                var item = getItemByQuery(state.items, query);\n                return item ? item.filename : null;\n            },\n            GET_ITEM_SIZE: function GET_ITEM_SIZE(query) {\n                var item = getItemByQuery(state.items, query);\n                return item ? item.fileSize : null;\n            },\n            GET_STYLES: function GET_STYLES() {\n                return Object.keys(state.options).filter(function(key) {\n                    return /^style/.test(key);\n                }).map(function(option1) {\n                    return {\n                        name: option1,\n                        value: state.options[option1]\n                    };\n                });\n            },\n            GET_PANEL_ASPECT_RATIO: function GET_PANEL_ASPECT_RATIO() {\n                var isShapeCircle = /circle/.test(state.options.stylePanelLayout);\n                var aspectRatio = isShapeCircle ? 1 : getNumericAspectRatioFromString(state.options.stylePanelAspectRatio);\n                return aspectRatio;\n            },\n            GET_ITEM_PANEL_ASPECT_RATIO: function GET_ITEM_PANEL_ASPECT_RATIO() {\n                return state.options.styleItemPanelAspectRatio;\n            },\n            GET_ITEMS_BY_STATUS: function GET_ITEMS_BY_STATUS(status) {\n                return getActiveItems(state.items).filter(function(item) {\n                    return item.status === status;\n                });\n            },\n            GET_TOTAL_ITEMS: function GET_TOTAL_ITEMS() {\n                return getActiveItems(state.items).length;\n            },\n            SHOULD_UPDATE_FILE_INPUT: function SHOULD_UPDATE_FILE_INPUT() {\n                return state.options.storeAsFile && canUpdateFileInput() && !isAsync(state);\n            },\n            IS_ASYNC: function IS_ASYNC() {\n                return isAsync(state);\n            },\n            GET_FILE_SIZE_LABELS: function GET_FILE_SIZE_LABELS(query) {\n                return {\n                    labelBytes: query(\"GET_LABEL_FILE_SIZE_BYTES\") || undefined,\n                    labelKilobytes: query(\"GET_LABEL_FILE_SIZE_KILOBYTES\") || undefined,\n                    labelMegabytes: query(\"GET_LABEL_FILE_SIZE_MEGABYTES\") || undefined,\n                    labelGigabytes: query(\"GET_LABEL_FILE_SIZE_GIGABYTES\") || undefined\n                };\n            }\n        };\n    };\n    var hasRoomForItem = function hasRoomForItem(state) {\n        var count = getActiveItems(state.items).length;\n        // if cannot have multiple items, to add one item it should currently not contain items\n        if (!state.options.allowMultiple) return count === 0;\n        // if allows multiple items, we check if a max item count has been set, if not, there's no limit\n        var maxFileCount = state.options.maxFiles;\n        if (maxFileCount === null) return true;\n        // we check if the current count is smaller than the max count, if so, another file can still be added\n        if (count < maxFileCount) return true;\n        // no more room for another file\n        return false;\n    };\n    var limit = function limit(value, min, max) {\n        return Math.max(Math.min(max, value), min);\n    };\n    var arrayInsert = function arrayInsert(arr, index, item) {\n        return arr.splice(index, 0, item);\n    };\n    var insertItem = function insertItem(items, item, index) {\n        if (isEmpty(item)) return null;\n        // if index is undefined, append\n        if (typeof index === \"undefined\") {\n            items.push(item);\n            return item;\n        }\n        // limit the index to the size of the items array\n        index = limit(index, 0, items.length);\n        // add item to array\n        arrayInsert(items, index, item);\n        // expose\n        return item;\n    };\n    var isBase64DataURI = function isBase64DataURI(str) {\n        return /^\\s*data:([a-z]+\\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\\-._~:@\\/?%\\s]*)\\s*$/i.test(str);\n    };\n    var getFilenameFromURL = function getFilenameFromURL(url) {\n        return (\"\" + url).split(\"/\").pop().split(\"?\").shift();\n    };\n    var getExtensionFromFilename = function getExtensionFromFilename(name) {\n        return name.split(\".\").pop();\n    };\n    var guesstimateExtension = function guesstimateExtension(type) {\n        // if no extension supplied, exit here\n        if (typeof type !== \"string\") return \"\";\n        // get subtype\n        var subtype = type.split(\"/\").pop();\n        // is svg subtype\n        if (/svg/.test(subtype)) return \"svg\";\n        if (/zip|compressed/.test(subtype)) return \"zip\";\n        if (/plain/.test(subtype)) return \"txt\";\n        if (/msword/.test(subtype)) return \"doc\";\n        // if is valid subtype\n        if (/[a-z]+/.test(subtype)) {\n            // always use jpg extension\n            if (subtype === \"jpeg\") return \"jpg\";\n            // return subtype\n            return subtype;\n        }\n        return \"\";\n    };\n    var leftPad = function leftPad(value) {\n        var padding = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"\";\n        return (padding + value).slice(-padding.length);\n    };\n    var getDateString = function getDateString() {\n        var date = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new Date();\n        return date.getFullYear() + \"-\" + leftPad(date.getMonth() + 1, \"00\") + \"-\" + leftPad(date.getDate(), \"00\") + \"_\" + leftPad(date.getHours(), \"00\") + \"-\" + leftPad(date.getMinutes(), \"00\") + \"-\" + leftPad(date.getSeconds(), \"00\");\n    };\n    var getFileFromBlob = function getFileFromBlob(blob, filename) {\n        var type = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n        var extension = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n        var file = typeof type === \"string\" ? blob.slice(0, blob.size, type) : blob.slice(0, blob.size, blob.type);\n        file.lastModifiedDate = new Date();\n        // copy relative path\n        if (blob._relativePath) file._relativePath = blob._relativePath;\n        // if blob has name property, use as filename if no filename supplied\n        if (!isString(filename)) filename = getDateString();\n        // if filename supplied but no extension and filename has extension\n        if (filename && extension === null && getExtensionFromFilename(filename)) file.name = filename;\n        else {\n            extension = extension || guesstimateExtension(file.type);\n            file.name = filename + (extension ? \".\" + extension : \"\");\n        }\n        return file;\n    };\n    var getBlobBuilder = function getBlobBuilder() {\n        return window.BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder;\n    };\n    var createBlob = function createBlob(arrayBuffer, mimeType) {\n        var BB = getBlobBuilder();\n        if (BB) {\n            var bb = new BB();\n            bb.append(arrayBuffer);\n            return bb.getBlob(mimeType);\n        }\n        return new Blob([\n            arrayBuffer\n        ], {\n            type: mimeType\n        });\n    };\n    var getBlobFromByteStringWithMimeType = function getBlobFromByteStringWithMimeType(byteString, mimeType) {\n        var ab = new ArrayBuffer(byteString.length);\n        var ia = new Uint8Array(ab);\n        for(var i = 0; i < byteString.length; i++)ia[i] = byteString.charCodeAt(i);\n        return createBlob(ab, mimeType);\n    };\n    var getMimeTypeFromBase64DataURI = function getMimeTypeFromBase64DataURI(dataURI) {\n        return (/^data:(.+);/.exec(dataURI) || [])[1] || null;\n    };\n    var getBase64DataFromBase64DataURI = function getBase64DataFromBase64DataURI(dataURI) {\n        // get data part of string (remove data:image/jpeg...,)\n        var data = dataURI.split(\",\")[1];\n        // remove any whitespace as that causes InvalidCharacterError in IE\n        return data.replace(/\\s/g, \"\");\n    };\n    var getByteStringFromBase64DataURI = function getByteStringFromBase64DataURI(dataURI) {\n        return atob(getBase64DataFromBase64DataURI(dataURI));\n    };\n    var getBlobFromBase64DataURI = function getBlobFromBase64DataURI(dataURI) {\n        var mimeType = getMimeTypeFromBase64DataURI(dataURI);\n        var byteString = getByteStringFromBase64DataURI(dataURI);\n        return getBlobFromByteStringWithMimeType(byteString, mimeType);\n    };\n    var getFileFromBase64DataURI = function getFileFromBase64DataURI(dataURI, filename, extension) {\n        return getFileFromBlob(getBlobFromBase64DataURI(dataURI), filename, null, extension);\n    };\n    var getFileNameFromHeader = function getFileNameFromHeader(header) {\n        // test if is content disposition header, if not exit\n        if (!/^content-disposition:/i.test(header)) return null;\n        // get filename parts\n        var matches = header.split(/filename=|filename\\*=.+''/).splice(1).map(function(name) {\n            return name.trim().replace(/^[\"']|[;\"']{0,2}$/g, \"\");\n        }).filter(function(name) {\n            return name.length;\n        });\n        return matches.length ? decodeURI(matches[matches.length - 1]) : null;\n    };\n    var getFileSizeFromHeader = function getFileSizeFromHeader(header) {\n        if (/content-length:/i.test(header)) {\n            var size = header.match(/[0-9]+/)[0];\n            return size ? parseInt(size, 10) : null;\n        }\n        return null;\n    };\n    var getTranfserIdFromHeader = function getTranfserIdFromHeader(header) {\n        if (/x-content-transfer-id:/i.test(header)) {\n            var id = (header.split(\":\")[1] || \"\").trim();\n            return id || null;\n        }\n        return null;\n    };\n    var getFileInfoFromHeaders = function getFileInfoFromHeaders(headers) {\n        var info = {\n            source: null,\n            name: null,\n            size: null\n        };\n        var rows = headers.split(\"\\n\");\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n        try {\n            for(var _iterator = rows[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true){\n                var header = _step.value;\n                var name = getFileNameFromHeader(header);\n                if (name) {\n                    info.name = name;\n                    continue;\n                }\n                var size = getFileSizeFromHeader(header);\n                if (size) {\n                    info.size = size;\n                    continue;\n                }\n                var source = getTranfserIdFromHeader(header);\n                if (source) {\n                    info.source = source;\n                    continue;\n                }\n            }\n        } catch (err) {\n            _didIteratorError = true;\n            _iteratorError = err;\n        } finally{\n            try {\n                if (!_iteratorNormalCompletion && _iterator.return != null) _iterator.return();\n            } finally{\n                if (_didIteratorError) throw _iteratorError;\n            }\n        }\n        return info;\n    };\n    var createFileLoader = function createFileLoader(fetchFn) {\n        var state = {\n            source: null,\n            complete: false,\n            progress: 0,\n            size: null,\n            timestamp: null,\n            duration: 0,\n            request: null\n        };\n        var getProgress = function getProgress() {\n            return state.progress;\n        };\n        var abort = function abort() {\n            if (state.request && state.request.abort) state.request.abort();\n        };\n        // load source\n        var load = function load() {\n            // get quick reference\n            var source = state.source;\n            api.fire(\"init\", source);\n            // Load Files\n            if (source instanceof File) api.fire(\"load\", source);\n            else if (source instanceof Blob) // Load blobs, set default name to current date\n            api.fire(\"load\", getFileFromBlob(source, source.name));\n            else if (isBase64DataURI(source)) // Load base 64, set default name to current date\n            api.fire(\"load\", getFileFromBase64DataURI(source));\n            else // Deal as if is external URL, let's load it!\n            loadURL(source);\n        };\n        // loads a url\n        var loadURL = function loadURL(url) {\n            // is remote url and no fetch method supplied\n            if (!fetchFn) {\n                api.fire(\"error\", {\n                    type: \"error\",\n                    body: \"Can't load URL\",\n                    code: 400\n                });\n                return;\n            }\n            // set request start\n            state.timestamp = Date.now();\n            // load file\n            state.request = fetchFn(url, function(response) {\n                // update duration\n                state.duration = Date.now() - state.timestamp;\n                // done!\n                state.complete = true;\n                // turn blob response into a file\n                if (response instanceof Blob) response = getFileFromBlob(response, response.name || getFilenameFromURL(url));\n                api.fire(\"load\", // if has received blob, we go with blob, if no response, we return null\n                response instanceof Blob ? response : response ? response.body : null);\n            }, function(error) {\n                api.fire(\"error\", typeof error === \"string\" ? {\n                    type: \"error\",\n                    code: 0,\n                    body: error\n                } : error);\n            }, function(computable, current, total) {\n                // collected some meta data already\n                if (total) state.size = total;\n                // update duration\n                state.duration = Date.now() - state.timestamp;\n                // if we can't compute progress, we're not going to fire progress events\n                if (!computable) {\n                    state.progress = null;\n                    return;\n                }\n                // update progress percentage\n                state.progress = current / total;\n                // expose\n                api.fire(\"progress\", state.progress);\n            }, function() {\n                api.fire(\"abort\");\n            }, function(response) {\n                var fileinfo = getFileInfoFromHeaders(typeof response === \"string\" ? response : response.headers);\n                api.fire(\"meta\", {\n                    size: state.size || fileinfo.size,\n                    filename: fileinfo.name,\n                    source: fileinfo.source\n                });\n            });\n        };\n        var api = Object.assign({}, on(), {\n            setSource: function setSource(source) {\n                return state.source = source;\n            },\n            getProgress: getProgress,\n            abort: abort,\n            load: load\n        });\n        return api;\n    };\n    var isGet = function isGet(method) {\n        return /GET|HEAD/.test(method);\n    };\n    var sendRequest = function sendRequest(data, url, options) {\n        var api = {\n            onheaders: function onheaders() {},\n            onprogress: function onprogress() {},\n            onload: function onload() {},\n            ontimeout: function ontimeout() {},\n            onerror: function onerror() {},\n            onabort: function onabort() {},\n            abort: function abort() {\n                aborted = true;\n                xhr.abort();\n            }\n        };\n        // timeout identifier, only used when timeout is defined\n        var aborted = false;\n        var headersReceived = false;\n        // set default options\n        options = Object.assign({\n            method: \"POST\",\n            headers: {},\n            withCredentials: false\n        }, options);\n        // encode url\n        url = encodeURI(url);\n        // if method is GET, add any received data to url\n        if (isGet(options.method) && data) url = \"\" + url + encodeURIComponent(typeof data === \"string\" ? data : JSON.stringify(data));\n        // create request\n        var xhr = new XMLHttpRequest();\n        // progress of load\n        var process = isGet(options.method) ? xhr : xhr.upload;\n        process.onprogress = function(e) {\n            // no progress event when aborted ( onprogress is called once after abort() )\n            if (aborted) return;\n            api.onprogress(e.lengthComputable, e.loaded, e.total);\n        };\n        // tries to get header info to the app as fast as possible\n        xhr.onreadystatechange = function() {\n            // not interesting in these states ('unsent' and 'openend' as they don't give us any additional info)\n            if (xhr.readyState < 2) return;\n            // no server response\n            if (xhr.readyState === 4 && xhr.status === 0) return;\n            if (headersReceived) return;\n            headersReceived = true;\n            // we've probably received some useful data in response headers\n            api.onheaders(xhr);\n        };\n        // load successful\n        xhr.onload = function() {\n            // is classified as valid response\n            if (xhr.status >= 200 && xhr.status < 300) api.onload(xhr);\n            else api.onerror(xhr);\n        };\n        // error during load\n        xhr.onerror = function() {\n            return api.onerror(xhr);\n        };\n        // request aborted\n        xhr.onabort = function() {\n            aborted = true;\n            api.onabort();\n        };\n        // request timeout\n        xhr.ontimeout = function() {\n            return api.ontimeout(xhr);\n        };\n        // open up open up!\n        xhr.open(options.method, url, true);\n        // set timeout if defined (do it after open so IE11 plays ball)\n        if (isInt(options.timeout)) xhr.timeout = options.timeout;\n        // add headers\n        Object.keys(options.headers).forEach(function(key) {\n            var value = unescape(encodeURIComponent(options.headers[key]));\n            xhr.setRequestHeader(key, value);\n        });\n        // set type of response\n        if (options.responseType) xhr.responseType = options.responseType;\n        // set credentials\n        if (options.withCredentials) xhr.withCredentials = true;\n        // let's send our data\n        xhr.send(data);\n        return api;\n    };\n    var createResponse = function createResponse(type, code, body, headers) {\n        return {\n            type: type,\n            code: code,\n            body: body,\n            headers: headers\n        };\n    };\n    var createTimeoutResponse = function createTimeoutResponse(cb) {\n        return function(xhr) {\n            cb(createResponse(\"error\", 0, \"Timeout\", xhr.getAllResponseHeaders()));\n        };\n    };\n    var hasQS = function hasQS(str) {\n        return /\\?/.test(str);\n    };\n    var buildURL = function buildURL() {\n        var url = \"\";\n        for(var _len = arguments.length, parts = new Array(_len), _key = 0; _key < _len; _key++)parts[_key] = arguments[_key];\n        parts.forEach(function(part) {\n            url += hasQS(url) && hasQS(part) ? part.replace(/\\?/, \"&\") : part;\n        });\n        return url;\n    };\n    var createFetchFunction = function createFetchFunction() {\n        var apiUrl = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n        var action = arguments.length > 1 ? arguments[1] : undefined;\n        // custom handler (should also handle file, load, error, progress and abort)\n        if (typeof action === \"function\") return action;\n        // no action supplied\n        if (!action || !isString(action.url)) return null;\n        // set onload hanlder\n        var onload = action.onload || function(res) {\n            return res;\n        };\n        var onerror = action.onerror || function(res) {\n            return null;\n        };\n        // internal handler\n        return function(url, load, error, progress, abort, headers) {\n            // do local or remote request based on if the url is external\n            var request = sendRequest(url, buildURL(apiUrl, action.url), Object.assign({}, action, {\n                responseType: \"blob\"\n            }));\n            request.onload = function(xhr) {\n                // get headers\n                var headers = xhr.getAllResponseHeaders();\n                // get filename\n                var filename = getFileInfoFromHeaders(headers).name || getFilenameFromURL(url);\n                // create response\n                load(createResponse(\"load\", xhr.status, action.method === \"HEAD\" ? null : getFileFromBlob(onload(xhr.response), filename), headers));\n            };\n            request.onerror = function(xhr) {\n                error(createResponse(\"error\", xhr.status, onerror(xhr.response) || xhr.statusText, xhr.getAllResponseHeaders()));\n            };\n            request.onheaders = function(xhr) {\n                headers(createResponse(\"headers\", xhr.status, null, xhr.getAllResponseHeaders()));\n            };\n            request.ontimeout = createTimeoutResponse(error);\n            request.onprogress = progress;\n            request.onabort = abort;\n            // should return request\n            return request;\n        };\n    };\n    var ChunkStatus = {\n        QUEUED: 0,\n        COMPLETE: 1,\n        PROCESSING: 2,\n        ERROR: 3,\n        WAITING: 4\n    };\n    /*\n                                                       function signature:\n                                                         (file, metadata, load, error, progress, abort, transfer, options) => {\n                                                           return {\n                                                           abort:() => {}\n                                                         }\n                                                       }\n                                                       */ // apiUrl, action, name, file, metadata, load, error, progress, abort, transfer, options\n    var processFileChunked = function processFileChunked(apiUrl, action, name, file, metadata, load, error, progress, abort, transfer, options) {\n        // all chunks\n        var chunks = [];\n        var chunkTransferId = options.chunkTransferId, chunkServer = options.chunkServer, chunkSize = options.chunkSize, chunkRetryDelays = options.chunkRetryDelays;\n        // default state\n        var state = {\n            serverId: chunkTransferId,\n            aborted: false\n        };\n        // set onload handlers\n        var ondata = action.ondata || function(fd) {\n            return fd;\n        };\n        var onload = action.onload || function(xhr, method) {\n            return method === \"HEAD\" ? xhr.getResponseHeader(\"Upload-Offset\") : xhr.response;\n        };\n        var onerror = action.onerror || function(res) {\n            return null;\n        };\n        // create server hook\n        var requestTransferId = function requestTransferId(cb) {\n            var formData = new FormData();\n            // add metadata under same name\n            if (isObject(metadata)) formData.append(name, JSON.stringify(metadata));\n            var headers = typeof action.headers === \"function\" ? action.headers(file, metadata) : Object.assign({}, action.headers, {\n                \"Upload-Length\": file.size\n            });\n            var requestParams = Object.assign({}, action, {\n                headers: headers\n            });\n            // send request object\n            var request = sendRequest(ondata(formData), buildURL(apiUrl, action.url), requestParams);\n            request.onload = function(xhr) {\n                return cb(onload(xhr, requestParams.method));\n            };\n            request.onerror = function(xhr) {\n                return error(createResponse(\"error\", xhr.status, onerror(xhr.response) || xhr.statusText, xhr.getAllResponseHeaders()));\n            };\n            request.ontimeout = createTimeoutResponse(error);\n        };\n        var requestTransferOffset = function requestTransferOffset(cb) {\n            var requestUrl = buildURL(apiUrl, chunkServer.url, state.serverId);\n            var headers = typeof action.headers === \"function\" ? action.headers(state.serverId) : Object.assign({}, action.headers);\n            var requestParams = {\n                headers: headers,\n                method: \"HEAD\"\n            };\n            var request = sendRequest(null, requestUrl, requestParams);\n            request.onload = function(xhr) {\n                return cb(onload(xhr, requestParams.method));\n            };\n            request.onerror = function(xhr) {\n                return error(createResponse(\"error\", xhr.status, onerror(xhr.response) || xhr.statusText, xhr.getAllResponseHeaders()));\n            };\n            request.ontimeout = createTimeoutResponse(error);\n        };\n        // create chunks\n        var lastChunkIndex = Math.floor(file.size / chunkSize);\n        for(var i = 0; i <= lastChunkIndex; i++){\n            var offset = i * chunkSize;\n            var data = file.slice(offset, offset + chunkSize, \"application/offset+octet-stream\");\n            chunks[i] = {\n                index: i,\n                size: data.size,\n                offset: offset,\n                data: data,\n                file: file,\n                progress: 0,\n                retries: _toConsumableArray(chunkRetryDelays),\n                status: ChunkStatus.QUEUED,\n                error: null,\n                request: null,\n                timeout: null\n            };\n        }\n        var completeProcessingChunks = function completeProcessingChunks() {\n            return load(state.serverId);\n        };\n        var canProcessChunk = function canProcessChunk(chunk) {\n            return chunk.status === ChunkStatus.QUEUED || chunk.status === ChunkStatus.ERROR;\n        };\n        var processChunk = function processChunk(chunk) {\n            // processing is paused, wait here\n            if (state.aborted) return;\n            // get next chunk to process\n            chunk = chunk || chunks.find(canProcessChunk);\n            // no more chunks to process\n            if (!chunk) {\n                // all done?\n                if (chunks.every(function(chunk) {\n                    return chunk.status === ChunkStatus.COMPLETE;\n                })) completeProcessingChunks();\n                // no chunk to handle\n                return;\n            }\n            // now processing this chunk\n            chunk.status = ChunkStatus.PROCESSING;\n            chunk.progress = null;\n            // allow parsing of formdata\n            var ondata = chunkServer.ondata || function(fd) {\n                return fd;\n            };\n            var onerror = chunkServer.onerror || function(res) {\n                return null;\n            };\n            // send request object\n            var requestUrl = buildURL(apiUrl, chunkServer.url, state.serverId);\n            var headers = typeof chunkServer.headers === \"function\" ? chunkServer.headers(chunk) : Object.assign({}, chunkServer.headers, {\n                \"Content-Type\": \"application/offset+octet-stream\",\n                \"Upload-Offset\": chunk.offset,\n                \"Upload-Length\": file.size,\n                \"Upload-Name\": file.name\n            });\n            var request = chunk.request = sendRequest(ondata(chunk.data), requestUrl, Object.assign({}, chunkServer, {\n                headers: headers\n            }));\n            request.onload = function() {\n                // done!\n                chunk.status = ChunkStatus.COMPLETE;\n                // remove request reference\n                chunk.request = null;\n                // start processing more chunks\n                processChunks();\n            };\n            request.onprogress = function(lengthComputable, loaded, total) {\n                chunk.progress = lengthComputable ? loaded : null;\n                updateTotalProgress();\n            };\n            request.onerror = function(xhr) {\n                chunk.status = ChunkStatus.ERROR;\n                chunk.request = null;\n                chunk.error = onerror(xhr.response) || xhr.statusText;\n                if (!retryProcessChunk(chunk)) error(createResponse(\"error\", xhr.status, onerror(xhr.response) || xhr.statusText, xhr.getAllResponseHeaders()));\n            };\n            request.ontimeout = function(xhr) {\n                chunk.status = ChunkStatus.ERROR;\n                chunk.request = null;\n                if (!retryProcessChunk(chunk)) createTimeoutResponse(error)(xhr);\n            };\n            request.onabort = function() {\n                chunk.status = ChunkStatus.QUEUED;\n                chunk.request = null;\n                abort();\n            };\n        };\n        var retryProcessChunk = function retryProcessChunk(chunk) {\n            // no more retries left\n            if (chunk.retries.length === 0) return false;\n            // new retry\n            chunk.status = ChunkStatus.WAITING;\n            clearTimeout(chunk.timeout);\n            chunk.timeout = setTimeout(function() {\n                processChunk(chunk);\n            }, chunk.retries.shift());\n            // we're going to retry\n            return true;\n        };\n        var updateTotalProgress = function updateTotalProgress() {\n            // calculate total progress fraction\n            var totalBytesTransfered = chunks.reduce(function(p, chunk) {\n                if (p === null || chunk.progress === null) return null;\n                return p + chunk.progress;\n            }, 0);\n            // can't compute progress\n            if (totalBytesTransfered === null) return progress(false, 0, 0);\n            // calculate progress values\n            var totalSize = chunks.reduce(function(total, chunk) {\n                return total + chunk.size;\n            }, 0);\n            // can update progress indicator\n            progress(true, totalBytesTransfered, totalSize);\n        };\n        // process new chunks\n        var processChunks = function processChunks() {\n            var totalProcessing = chunks.filter(function(chunk) {\n                return chunk.status === ChunkStatus.PROCESSING;\n            }).length;\n            if (totalProcessing >= 1) return;\n            processChunk();\n        };\n        var abortChunks = function abortChunks() {\n            chunks.forEach(function(chunk) {\n                clearTimeout(chunk.timeout);\n                if (chunk.request) chunk.request.abort();\n            });\n        };\n        // let's go!\n        if (!state.serverId) requestTransferId(function(serverId) {\n            // stop here if aborted, might have happened in between request and callback\n            if (state.aborted) return;\n            // pass back to item so we can use it if something goes wrong\n            transfer(serverId);\n            // store internally\n            state.serverId = serverId;\n            processChunks();\n        });\n        else requestTransferOffset(function(offset) {\n            // stop here if aborted, might have happened in between request and callback\n            if (state.aborted) return;\n            // mark chunks with lower offset as complete\n            chunks.filter(function(chunk) {\n                return chunk.offset < offset;\n            }).forEach(function(chunk) {\n                chunk.status = ChunkStatus.COMPLETE;\n                chunk.progress = chunk.size;\n            });\n            // continue processing\n            processChunks();\n        });\n        return {\n            abort: function abort() {\n                state.aborted = true;\n                abortChunks();\n            }\n        };\n    };\n    /*\n                                                               function signature:\n                                                                 (file, metadata, load, error, progress, abort) => {\n                                                                   return {\n                                                                   abort:() => {}\n                                                                 }\n                                                               }\n                                                               */ var createFileProcessorFunction = function createFileProcessorFunction(apiUrl, action, name, options) {\n        return function(file, metadata, load, error, progress, abort, transfer) {\n            // no file received\n            if (!file) return;\n            // if was passed a file, and we can chunk it, exit here\n            var canChunkUpload = options.chunkUploads;\n            var shouldChunkUpload = canChunkUpload && file.size > options.chunkSize;\n            var willChunkUpload = canChunkUpload && (shouldChunkUpload || options.chunkForce);\n            if (file instanceof Blob && willChunkUpload) return processFileChunked(apiUrl, action, name, file, metadata, load, error, progress, abort, transfer, options);\n            // set handlers\n            var ondata = action.ondata || function(fd) {\n                return fd;\n            };\n            var onload = action.onload || function(res) {\n                return res;\n            };\n            var onerror = action.onerror || function(res) {\n                return null;\n            };\n            var headers = typeof action.headers === \"function\" ? action.headers(file, metadata) || {} : Object.assign({}, action.headers);\n            var requestParams = Object.assign({}, action, {\n                headers: headers\n            });\n            // create formdata object\n            var formData = new FormData();\n            // add metadata under same name\n            if (isObject(metadata)) formData.append(name, JSON.stringify(metadata));\n            // Turn into an array of objects so no matter what the input, we can handle it the same way\n            (file instanceof Blob ? [\n                {\n                    name: null,\n                    file: file\n                }\n            ] : file).forEach(function(item) {\n                formData.append(name, item.file, item.name === null ? item.file.name : \"\" + item.name + item.file.name);\n            });\n            // send request object\n            var request = sendRequest(ondata(formData), buildURL(apiUrl, action.url), requestParams);\n            request.onload = function(xhr) {\n                load(createResponse(\"load\", xhr.status, onload(xhr.response), xhr.getAllResponseHeaders()));\n            };\n            request.onerror = function(xhr) {\n                error(createResponse(\"error\", xhr.status, onerror(xhr.response) || xhr.statusText, xhr.getAllResponseHeaders()));\n            };\n            request.ontimeout = createTimeoutResponse(error);\n            request.onprogress = progress;\n            request.onabort = abort;\n            // should return request\n            return request;\n        };\n    };\n    var createProcessorFunction = function createProcessorFunction() {\n        var apiUrl = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n        var action = arguments.length > 1 ? arguments[1] : undefined;\n        var name = arguments.length > 2 ? arguments[2] : undefined;\n        var options = arguments.length > 3 ? arguments[3] : undefined;\n        // custom handler (should also handle file, load, error, progress and abort)\n        if (typeof action === \"function\") return function() {\n            for(var _len = arguments.length, params = new Array(_len), _key = 0; _key < _len; _key++)params[_key] = arguments[_key];\n            return action.apply(void 0, [\n                name\n            ].concat(params, [\n                options\n            ]));\n        };\n        // no action supplied\n        if (!action || !isString(action.url)) return null;\n        // internal handler\n        return createFileProcessorFunction(apiUrl, action, name, options);\n    };\n    /*\n                                                      function signature:\n                                                      (uniqueFileId, load, error) => { }\n                                                      */ var createRevertFunction = function createRevertFunction() {\n        var apiUrl = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n        var action = arguments.length > 1 ? arguments[1] : undefined;\n        // is custom implementation\n        if (typeof action === \"function\") return action;\n        // no action supplied, return stub function, interface will work, but file won't be removed\n        if (!action || !isString(action.url)) return function(uniqueFileId, load) {\n            return load();\n        };\n        // set onload hanlder\n        var onload = action.onload || function(res) {\n            return res;\n        };\n        var onerror = action.onerror || function(res) {\n            return null;\n        };\n        // internal implementation\n        return function(uniqueFileId, load, error) {\n            var request = sendRequest(uniqueFileId, apiUrl + action.url, action // contains method, headers and withCredentials properties\n            );\n            request.onload = function(xhr) {\n                load(createResponse(\"load\", xhr.status, onload(xhr.response), xhr.getAllResponseHeaders()));\n            };\n            request.onerror = function(xhr) {\n                error(createResponse(\"error\", xhr.status, onerror(xhr.response) || xhr.statusText, xhr.getAllResponseHeaders()));\n            };\n            request.ontimeout = createTimeoutResponse(error);\n            return request;\n        };\n    };\n    var getRandomNumber = function getRandomNumber() {\n        var min = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n        var max = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n        return min + Math.random() * (max - min);\n    };\n    var createPerceivedPerformanceUpdater = function createPerceivedPerformanceUpdater(cb) {\n        var duration = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1000;\n        var offset = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n        var tickMin = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 25;\n        var tickMax = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 250;\n        var timeout = null;\n        var start = Date.now();\n        var tick = function tick() {\n            var runtime = Date.now() - start;\n            var delay = getRandomNumber(tickMin, tickMax);\n            if (runtime + delay > duration) delay = runtime + delay - duration;\n            var progress = runtime / duration;\n            if (progress >= 1 || document.hidden) {\n                cb(1);\n                return;\n            }\n            cb(progress);\n            timeout = setTimeout(tick, delay);\n        };\n        if (duration > 0) tick();\n        return {\n            clear: function clear() {\n                clearTimeout(timeout);\n            }\n        };\n    };\n    var createFileProcessor = function createFileProcessor(processFn, options) {\n        var state = {\n            complete: false,\n            perceivedProgress: 0,\n            perceivedPerformanceUpdater: null,\n            progress: null,\n            timestamp: null,\n            perceivedDuration: 0,\n            duration: 0,\n            request: null,\n            response: null\n        };\n        var allowMinimumUploadDuration = options.allowMinimumUploadDuration;\n        var process = function process(file, metadata) {\n            var progressFn = function progressFn() {\n                // we've not yet started the real download, stop here\n                // the request might not go through, for instance, there might be some server trouble\n                // if state.progress is null, the server does not allow computing progress and we show the spinner instead\n                if (state.duration === 0 || state.progress === null) return;\n                // as we're now processing, fire the progress event\n                api.fire(\"progress\", api.getProgress());\n            };\n            var completeFn = function completeFn() {\n                state.complete = true;\n                api.fire(\"load-perceived\", state.response.body);\n            };\n            // let's start processing\n            api.fire(\"start\");\n            // set request start\n            state.timestamp = Date.now();\n            // create perceived performance progress indicator\n            state.perceivedPerformanceUpdater = createPerceivedPerformanceUpdater(function(progress) {\n                state.perceivedProgress = progress;\n                state.perceivedDuration = Date.now() - state.timestamp;\n                progressFn();\n                // if fake progress is done, and a response has been received,\n                // and we've not yet called the complete method\n                if (state.response && state.perceivedProgress === 1 && !state.complete) // we done!\n                completeFn();\n            }, // random delay as in a list of files you start noticing\n            // files uploading at the exact same speed\n            allowMinimumUploadDuration ? getRandomNumber(750, 1500) : 0);\n            // remember request so we can abort it later\n            state.request = processFn(// the file to process\n            file, // the metadata to send along\n            metadata, // callbacks (load, error, progress, abort, transfer)\n            // load expects the body to be a server id if\n            // you want to make use of revert\n            function(response) {\n                // we put the response in state so we can access\n                // it outside of this method\n                state.response = isObject(response) ? response : {\n                    type: \"load\",\n                    code: 200,\n                    body: \"\" + response,\n                    headers: {}\n                };\n                // update duration\n                state.duration = Date.now() - state.timestamp;\n                // force progress to 1 as we're now done\n                state.progress = 1;\n                // actual load is done let's share results\n                api.fire(\"load\", state.response.body);\n                // we are really done\n                // if perceived progress is 1 ( wait for perceived progress to complete )\n                // or if server does not support progress ( null )\n                if (!allowMinimumUploadDuration || allowMinimumUploadDuration && state.perceivedProgress === 1) completeFn();\n            }, // error is expected to be an object with type, code, body\n            function(error) {\n                // cancel updater\n                state.perceivedPerformanceUpdater.clear();\n                // update others about this error\n                api.fire(\"error\", isObject(error) ? error : {\n                    type: \"error\",\n                    code: 0,\n                    body: \"\" + error\n                });\n            }, // actual processing progress\n            function(computable, current, total) {\n                // update actual duration\n                state.duration = Date.now() - state.timestamp;\n                // update actual progress\n                state.progress = computable ? current / total : null;\n                progressFn();\n            }, // abort does not expect a value\n            function() {\n                // stop updater\n                state.perceivedPerformanceUpdater.clear();\n                // fire the abort event so we can switch visuals\n                api.fire(\"abort\", state.response ? state.response.body : null);\n            }, // register the id for this transfer\n            function(transferId) {\n                api.fire(\"transfer\", transferId);\n            });\n        };\n        var abort = function abort() {\n            // no request running, can't abort\n            if (!state.request) return;\n            // stop updater\n            state.perceivedPerformanceUpdater.clear();\n            // abort actual request\n            if (state.request.abort) state.request.abort();\n            // if has response object, we've completed the request\n            state.complete = true;\n        };\n        var reset = function reset() {\n            abort();\n            state.complete = false;\n            state.perceivedProgress = 0;\n            state.progress = 0;\n            state.timestamp = null;\n            state.perceivedDuration = 0;\n            state.duration = 0;\n            state.request = null;\n            state.response = null;\n        };\n        var getProgress = allowMinimumUploadDuration ? function() {\n            return state.progress ? Math.min(state.progress, state.perceivedProgress) : null;\n        } : function() {\n            return state.progress || null;\n        };\n        var getDuration = allowMinimumUploadDuration ? function() {\n            return Math.min(state.duration, state.perceivedDuration);\n        } : function() {\n            return state.duration;\n        };\n        var api = Object.assign({}, on(), {\n            process: process,\n            abort: abort,\n            getProgress: getProgress,\n            getDuration: getDuration,\n            reset: reset\n        });\n        return api;\n    };\n    var getFilenameWithoutExtension = function getFilenameWithoutExtension(name) {\n        return name.substring(0, name.lastIndexOf(\".\")) || name;\n    };\n    var createFileStub = function createFileStub(source) {\n        var data = [\n            source.name,\n            source.size,\n            source.type\n        ];\n        // is blob or base64, then we need to set the name\n        if (source instanceof Blob || isBase64DataURI(source)) data[0] = source.name || getDateString();\n        else if (isBase64DataURI(source)) {\n            // if is base64 data uri we need to determine the average size and type\n            data[1] = source.length;\n            data[2] = getMimeTypeFromBase64DataURI(source);\n        } else if (isString(source)) {\n            // url\n            data[0] = getFilenameFromURL(source);\n            data[1] = 0;\n            data[2] = \"application/octet-stream\";\n        }\n        return {\n            name: data[0],\n            size: data[1],\n            type: data[2]\n        };\n    };\n    var isFile = function isFile(value) {\n        return !!(value instanceof File || value instanceof Blob && value.name);\n    };\n    var deepCloneObject = function deepCloneObject(src) {\n        if (!isObject(src)) return src;\n        var target = isArray(src) ? [] : {};\n        for(var key in src){\n            if (!src.hasOwnProperty(key)) continue;\n            var v1 = src[key];\n            target[key] = v1 && isObject(v1) ? deepCloneObject(v1) : v1;\n        }\n        return target;\n    };\n    var createItem = function createItem() {\n        var origin = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n        var serverFileReference = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n        var file = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n        // unique id for this item, is used to identify the item across views\n        var id = getUniqueId();\n        /**\n         * Internal item state\n         */ var state = {\n            // is archived\n            archived: false,\n            // if is frozen, no longer fires events\n            frozen: false,\n            // removed from view\n            released: false,\n            // original source\n            source: null,\n            // file model reference\n            file: file,\n            // id of file on server\n            serverFileReference: serverFileReference,\n            // id of file transfer on server\n            transferId: null,\n            // is aborted\n            processingAborted: false,\n            // current item status\n            status: serverFileReference ? ItemStatus.PROCESSING_COMPLETE : ItemStatus.INIT,\n            // active processes\n            activeLoader: null,\n            activeProcessor: null\n        };\n        // callback used when abort processing is called to link back to the resolve method\n        var abortProcessingRequestComplete = null;\n        /**\n         * Externally added item metadata\n         */ var metadata = {};\n        // item data\n        var setStatus = function setStatus(status) {\n            return state.status = status;\n        };\n        // fire event unless the item has been archived\n        var fire = function fire(event) {\n            if (state.released || state.frozen) return;\n            for(var _len = arguments.length, params = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++)params[_key - 1] = arguments[_key];\n            api.fire.apply(api, [\n                event\n            ].concat(params));\n        };\n        // file data\n        var getFileExtension = function getFileExtension() {\n            return getExtensionFromFilename(state.file.name);\n        };\n        var getFileType = function getFileType() {\n            return state.file.type;\n        };\n        var getFileSize = function getFileSize() {\n            return state.file.size;\n        };\n        var getFile = function getFile() {\n            return state.file;\n        };\n        //\n        // logic to load a file\n        //\n        var load = function load(source, loader, onload) {\n            // remember the original item source\n            state.source = source;\n            // source is known\n            api.fireSync(\"init\");\n            // file stub is already there\n            if (state.file) {\n                api.fireSync(\"load-skip\");\n                return;\n            }\n            // set a stub file object while loading the actual data\n            state.file = createFileStub(source);\n            // starts loading\n            loader.on(\"init\", function() {\n                fire(\"load-init\");\n            });\n            // we'eve received a size indication, let's update the stub\n            loader.on(\"meta\", function(meta) {\n                // set size of file stub\n                state.file.size = meta.size;\n                // set name of file stub\n                state.file.filename = meta.filename;\n                // if has received source, we done\n                if (meta.source) {\n                    origin = FileOrigin.LIMBO;\n                    state.serverFileReference = meta.source;\n                    state.status = ItemStatus.PROCESSING_COMPLETE;\n                }\n                // size has been updated\n                fire(\"load-meta\");\n            });\n            // the file is now loading we need to update the progress indicators\n            loader.on(\"progress\", function(progress) {\n                setStatus(ItemStatus.LOADING);\n                fire(\"load-progress\", progress);\n            });\n            // an error was thrown while loading the file, we need to switch to error state\n            loader.on(\"error\", function(error) {\n                setStatus(ItemStatus.LOAD_ERROR);\n                fire(\"load-request-error\", error);\n            });\n            // user or another process aborted the file load (cannot retry)\n            loader.on(\"abort\", function() {\n                setStatus(ItemStatus.INIT);\n                fire(\"load-abort\");\n            });\n            // done loading\n            loader.on(\"load\", function(file) {\n                // as we've now loaded the file the loader is no longer required\n                state.activeLoader = null;\n                // called when file has loaded succesfully\n                var success = function success(result) {\n                    // set (possibly) transformed file\n                    state.file = isFile(result) ? result : state.file;\n                    // file received\n                    if (origin === FileOrigin.LIMBO && state.serverFileReference) setStatus(ItemStatus.PROCESSING_COMPLETE);\n                    else setStatus(ItemStatus.IDLE);\n                    fire(\"load\");\n                };\n                var error = function error(result) {\n                    // set original file\n                    state.file = file;\n                    fire(\"load-meta\");\n                    setStatus(ItemStatus.LOAD_ERROR);\n                    fire(\"load-file-error\", result);\n                };\n                // if we already have a server file reference, we don't need to call the onload method\n                if (state.serverFileReference) {\n                    success(file);\n                    return;\n                }\n                // no server id, let's give this file the full treatment\n                onload(file, success, error);\n            });\n            // set loader source data\n            loader.setSource(source);\n            // set as active loader\n            state.activeLoader = loader;\n            // load the source data\n            loader.load();\n        };\n        var retryLoad = function retryLoad() {\n            if (!state.activeLoader) return;\n            state.activeLoader.load();\n        };\n        var abortLoad = function abortLoad() {\n            if (state.activeLoader) {\n                state.activeLoader.abort();\n                return;\n            }\n            setStatus(ItemStatus.INIT);\n            fire(\"load-abort\");\n        };\n        //\n        // logic to process a file\n        //\n        var process = function process(processor, onprocess) {\n            // processing was aborted\n            if (state.processingAborted) {\n                state.processingAborted = false;\n                return;\n            }\n            // now processing\n            setStatus(ItemStatus.PROCESSING);\n            // reset abort callback\n            abortProcessingRequestComplete = null;\n            // if no file loaded we'll wait for the load event\n            if (!(state.file instanceof Blob)) {\n                api.on(\"load\", function() {\n                    process(processor, onprocess);\n                });\n                return;\n            }\n            // setup processor\n            processor.on(\"load\", function(serverFileReference) {\n                // need this id to be able to revert the upload\n                state.transferId = null;\n                state.serverFileReference = serverFileReference;\n            });\n            // register transfer id\n            processor.on(\"transfer\", function(transferId) {\n                // need this id to be able to revert the upload\n                state.transferId = transferId;\n            });\n            processor.on(\"load-perceived\", function(serverFileReference) {\n                // no longer required\n                state.activeProcessor = null;\n                // need this id to be able to rever the upload\n                state.transferId = null;\n                state.serverFileReference = serverFileReference;\n                setStatus(ItemStatus.PROCESSING_COMPLETE);\n                fire(\"process-complete\", serverFileReference);\n            });\n            processor.on(\"start\", function() {\n                fire(\"process-start\");\n            });\n            processor.on(\"error\", function(error) {\n                state.activeProcessor = null;\n                setStatus(ItemStatus.PROCESSING_ERROR);\n                fire(\"process-error\", error);\n            });\n            processor.on(\"abort\", function(serverFileReference) {\n                state.activeProcessor = null;\n                // if file was uploaded but processing was cancelled during perceived processor time store file reference\n                state.serverFileReference = serverFileReference;\n                setStatus(ItemStatus.IDLE);\n                fire(\"process-abort\");\n                // has timeout so doesn't interfere with remove action\n                if (abortProcessingRequestComplete) abortProcessingRequestComplete();\n            });\n            processor.on(\"progress\", function(progress) {\n                fire(\"process-progress\", progress);\n            });\n            // when successfully transformed\n            var success = function success(file) {\n                // if was archived in the mean time, don't process\n                if (state.archived) return;\n                // process file!\n                processor.process(file, Object.assign({}, metadata));\n            };\n            // something went wrong during transform phase\n            var error = console.error;\n            // start processing the file\n            onprocess(state.file, success, error);\n            // set as active processor\n            state.activeProcessor = processor;\n        };\n        var requestProcessing = function requestProcessing() {\n            state.processingAborted = false;\n            setStatus(ItemStatus.PROCESSING_QUEUED);\n        };\n        var abortProcessing = function abortProcessing() {\n            return new Promise(function(resolve) {\n                if (!state.activeProcessor) {\n                    state.processingAborted = true;\n                    setStatus(ItemStatus.IDLE);\n                    fire(\"process-abort\");\n                    resolve();\n                    return;\n                }\n                abortProcessingRequestComplete = function abortProcessingRequestComplete() {\n                    resolve();\n                };\n                state.activeProcessor.abort();\n            });\n        };\n        //\n        // logic to revert a processed file\n        //\n        var revert = function revert(revertFileUpload, forceRevert) {\n            return new Promise(function(resolve, reject) {\n                // a completed upload will have a serverFileReference, a failed chunked upload where\n                // getting a serverId succeeded but >=0 chunks have been uploaded will have transferId set\n                var serverTransferId = state.serverFileReference !== null ? state.serverFileReference : state.transferId;\n                // cannot revert without a server id for this process\n                if (serverTransferId === null) {\n                    resolve();\n                    return;\n                }\n                // revert the upload (fire and forget)\n                revertFileUpload(serverTransferId, function() {\n                    // reset file server id and transfer id as now it's not available on the server\n                    state.serverFileReference = null;\n                    state.transferId = null;\n                    resolve();\n                }, function(error) {\n                    // don't set error state when reverting is optional, it will always resolve\n                    if (!forceRevert) {\n                        resolve();\n                        return;\n                    }\n                    // oh no errors\n                    setStatus(ItemStatus.PROCESSING_REVERT_ERROR);\n                    fire(\"process-revert-error\");\n                    reject(error);\n                });\n                // fire event\n                setStatus(ItemStatus.IDLE);\n                fire(\"process-revert\");\n            });\n        };\n        // exposed methods\n        var _setMetadata = function setMetadata(key, value, silent) {\n            var keys = key.split(\".\");\n            var root = keys[0];\n            var last = keys.pop();\n            var data = metadata;\n            keys.forEach(function(key) {\n                return data = data[key];\n            });\n            // compare old value against new value, if they're the same, we're not updating\n            if (JSON.stringify(data[last]) === JSON.stringify(value)) return;\n            // update value\n            data[last] = value;\n            // fire update\n            fire(\"metadata-update\", {\n                key: root,\n                value: metadata[root],\n                silent: silent\n            });\n        };\n        var getMetadata = function getMetadata(key) {\n            return deepCloneObject(key ? metadata[key] : metadata);\n        };\n        var api = Object.assign({\n            id: {\n                get: function get() {\n                    return id;\n                }\n            },\n            origin: {\n                get: function get() {\n                    return origin;\n                },\n                set: function set(value) {\n                    return origin = value;\n                }\n            },\n            serverId: {\n                get: function get() {\n                    return state.serverFileReference;\n                }\n            },\n            transferId: {\n                get: function get() {\n                    return state.transferId;\n                }\n            },\n            status: {\n                get: function get() {\n                    return state.status;\n                }\n            },\n            filename: {\n                get: function get() {\n                    return state.file.name;\n                }\n            },\n            filenameWithoutExtension: {\n                get: function get() {\n                    return getFilenameWithoutExtension(state.file.name);\n                }\n            },\n            fileExtension: {\n                get: getFileExtension\n            },\n            fileType: {\n                get: getFileType\n            },\n            fileSize: {\n                get: getFileSize\n            },\n            file: {\n                get: getFile\n            },\n            relativePath: {\n                get: function get() {\n                    return state.file._relativePath;\n                }\n            },\n            source: {\n                get: function get() {\n                    return state.source;\n                }\n            },\n            getMetadata: getMetadata,\n            setMetadata: function setMetadata(key, value, silent) {\n                if (isObject(key)) {\n                    var data = key;\n                    Object.keys(data).forEach(function(key) {\n                        _setMetadata(key, data[key], value);\n                    });\n                    return key;\n                }\n                _setMetadata(key, value, silent);\n                return value;\n            },\n            extend: function extend(name, handler) {\n                return itemAPI[name] = handler;\n            },\n            abortLoad: abortLoad,\n            retryLoad: retryLoad,\n            requestProcessing: requestProcessing,\n            abortProcessing: abortProcessing,\n            load: load,\n            process: process,\n            revert: revert\n        }, on(), {\n            freeze: function freeze() {\n                return state.frozen = true;\n            },\n            release: function release() {\n                return state.released = true;\n            },\n            released: {\n                get: function get() {\n                    return state.released;\n                }\n            },\n            archive: function archive() {\n                return state.archived = true;\n            },\n            archived: {\n                get: function get() {\n                    return state.archived;\n                }\n            }\n        });\n        // create it here instead of returning it instantly so we can extend it later\n        var itemAPI = createObject(api);\n        return itemAPI;\n    };\n    var getItemIndexByQuery = function getItemIndexByQuery(items, query) {\n        // just return first index\n        if (isEmpty(query)) return 0;\n        // invalid queries\n        if (!isString(query)) return -1;\n        // return item by id (or -1 if not found)\n        return items.findIndex(function(item) {\n            return item.id === query;\n        });\n    };\n    var getItemById = function getItemById(items, itemId) {\n        var index = getItemIndexByQuery(items, itemId);\n        if (index < 0) return;\n        return items[index] || null;\n    };\n    var fetchBlob = function fetchBlob(url, load, error, progress, abort, headers) {\n        var request = sendRequest(null, url, {\n            method: \"GET\",\n            responseType: \"blob\"\n        });\n        request.onload = function(xhr) {\n            // get headers\n            var headers = xhr.getAllResponseHeaders();\n            // get filename\n            var filename = getFileInfoFromHeaders(headers).name || getFilenameFromURL(url);\n            // create response\n            load(createResponse(\"load\", xhr.status, getFileFromBlob(xhr.response, filename), headers));\n        };\n        request.onerror = function(xhr) {\n            error(createResponse(\"error\", xhr.status, xhr.statusText, xhr.getAllResponseHeaders()));\n        };\n        request.onheaders = function(xhr) {\n            headers(createResponse(\"headers\", xhr.status, null, xhr.getAllResponseHeaders()));\n        };\n        request.ontimeout = createTimeoutResponse(error);\n        request.onprogress = progress;\n        request.onabort = abort;\n        // should return request\n        return request;\n    };\n    var getDomainFromURL = function getDomainFromURL(url) {\n        if (url.indexOf(\"//\") === 0) url = location.protocol + url;\n        return url.toLowerCase().replace(\"blob:\", \"\").replace(/([a-z])?:\\/\\//, \"$1\").split(\"/\")[0];\n    };\n    var isExternalURL = function isExternalURL(url) {\n        return (url.indexOf(\":\") > -1 || url.indexOf(\"//\") > -1) && getDomainFromURL(location.href) !== getDomainFromURL(url);\n    };\n    var dynamicLabel = function dynamicLabel(label) {\n        return function() {\n            return isFunction(label) ? label.apply(void 0, arguments) : label;\n        };\n    };\n    var isMockItem = function isMockItem(item) {\n        return !isFile(item.file);\n    };\n    var listUpdated = function listUpdated(dispatch, state) {\n        clearTimeout(state.listUpdateTimeout);\n        state.listUpdateTimeout = setTimeout(function() {\n            dispatch(\"DID_UPDATE_ITEMS\", {\n                items: getActiveItems(state.items)\n            });\n        }, 0);\n    };\n    var optionalPromise = function optionalPromise(fn) {\n        for(var _len = arguments.length, params = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++)params[_key - 1] = arguments[_key];\n        return new Promise(function(resolve) {\n            if (!fn) return resolve(true);\n            var result = fn.apply(void 0, params);\n            if (result == null) return resolve(true);\n            if (typeof result === \"boolean\") return resolve(result);\n            if (typeof result.then === \"function\") result.then(resolve);\n        });\n    };\n    var sortItems = function sortItems(state, compare) {\n        state.items.sort(function(a, b) {\n            return compare(createItemAPI(a), createItemAPI(b));\n        });\n    };\n    // returns item based on state\n    var getItemByQueryFromState = function getItemByQueryFromState(state, itemHandler) {\n        return function() {\n            var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n            var query = _ref.query, _ref$success = _ref.success, success = _ref$success === void 0 ? function() {} : _ref$success, _ref$failure = _ref.failure, failure = _ref$failure === void 0 ? function() {} : _ref$failure, options = _objectWithoutProperties(_ref, [\n                \"query\",\n                \"success\",\n                \"failure\"\n            ]);\n            var item = getItemByQuery(state.items, query);\n            if (!item) {\n                failure({\n                    error: createResponse(\"error\", 0, \"Item not found\"),\n                    file: null\n                });\n                return;\n            }\n            itemHandler(item, success, failure, options || {});\n        };\n    };\n    var actions = function actions(dispatch, query, state) {\n        return {\n            /**\n             * Aborts all ongoing processes\n             */ ABORT_ALL: function ABORT_ALL() {\n                getActiveItems(state.items).forEach(function(item) {\n                    item.freeze();\n                    item.abortLoad();\n                    item.abortProcessing();\n                });\n            },\n            /**\n             * Sets initial files\n             */ DID_SET_FILES: function DID_SET_FILES(_ref2) {\n                var _ref2$value = _ref2.value, value = _ref2$value === void 0 ? [] : _ref2$value;\n                // map values to file objects\n                var files = value.map(function(file) {\n                    return {\n                        source: file.source ? file.source : file,\n                        options: file.options\n                    };\n                });\n                // loop over files, if file is in list, leave it be, if not, remove\n                // test if items should be moved\n                var activeItems = getActiveItems(state.items);\n                activeItems.forEach(function(item) {\n                    // if item not is in new value, remove\n                    if (!files.find(function(file) {\n                        return file.source === item.source || file.source === item.file;\n                    })) dispatch(\"REMOVE_ITEM\", {\n                        query: item,\n                        remove: false\n                    });\n                });\n                // add new files\n                activeItems = getActiveItems(state.items);\n                files.forEach(function(file, index) {\n                    // if file is already in list\n                    if (activeItems.find(function(item) {\n                        return item.source === file.source || item.file === file.source;\n                    })) return;\n                    // not in list, add\n                    dispatch(\"ADD_ITEM\", Object.assign({}, file, {\n                        interactionMethod: InteractionMethod.NONE,\n                        index: index\n                    }));\n                });\n            },\n            DID_UPDATE_ITEM_METADATA: function DID_UPDATE_ITEM_METADATA(_ref3) {\n                var id = _ref3.id, action = _ref3.action, change = _ref3.change;\n                // don't do anything\n                if (change.silent) return;\n                // if is called multiple times in close succession we combined all calls together to save resources\n                clearTimeout(state.itemUpdateTimeout);\n                state.itemUpdateTimeout = setTimeout(function() {\n                    var item = getItemById(state.items, id);\n                    // only revert and attempt to upload when we're uploading to a server\n                    if (!query(\"IS_ASYNC\")) {\n                        // should we update the output data\n                        applyFilterChain(\"SHOULD_PREPARE_OUTPUT\", false, {\n                            item: item,\n                            query: query,\n                            action: action,\n                            change: change\n                        }).then(function(shouldPrepareOutput) {\n                            // plugins determined the output data should be prepared (or not), can be adjusted with beforePrepareOutput hook\n                            var beforePrepareFile = query(\"GET_BEFORE_PREPARE_FILE\");\n                            if (beforePrepareFile) shouldPrepareOutput = beforePrepareFile(item, shouldPrepareOutput);\n                            if (!shouldPrepareOutput) return;\n                            dispatch(\"REQUEST_PREPARE_OUTPUT\", {\n                                query: id,\n                                item: item,\n                                success: function success(file) {\n                                    dispatch(\"DID_PREPARE_OUTPUT\", {\n                                        id: id,\n                                        file: file\n                                    });\n                                }\n                            }, true);\n                        });\n                        return;\n                    }\n                    // if is local item we need to enable upload button so change can be propagated to server\n                    if (item.origin === FileOrigin.LOCAL) dispatch(\"DID_LOAD_ITEM\", {\n                        id: item.id,\n                        error: null,\n                        serverFileReference: item.source\n                    });\n                    // for async scenarios\n                    var upload = function upload() {\n                        // we push this forward a bit so the interface is updated correctly\n                        setTimeout(function() {\n                            dispatch(\"REQUEST_ITEM_PROCESSING\", {\n                                query: id\n                            });\n                        }, 32);\n                    };\n                    var revert = function revert(doUpload) {\n                        item.revert(createRevertFunction(state.options.server.url, state.options.server.revert), query(\"GET_FORCE_REVERT\")).then(doUpload ? upload : function() {}).catch(function() {});\n                    };\n                    var abort = function abort(doUpload) {\n                        item.abortProcessing().then(doUpload ? upload : function() {});\n                    };\n                    // if we should re-upload the file immediately\n                    if (item.status === ItemStatus.PROCESSING_COMPLETE) return revert(state.options.instantUpload);\n                    // if currently uploading, cancel upload\n                    if (item.status === ItemStatus.PROCESSING) return abort(state.options.instantUpload);\n                    if (state.options.instantUpload) upload();\n                }, 0);\n            },\n            MOVE_ITEM: function MOVE_ITEM(_ref4) {\n                var query = _ref4.query, index = _ref4.index;\n                var item = getItemByQuery(state.items, query);\n                if (!item) return;\n                var currentIndex = state.items.indexOf(item);\n                index = limit(index, 0, state.items.length - 1);\n                if (currentIndex === index) return;\n                state.items.splice(index, 0, state.items.splice(currentIndex, 1)[0]);\n            },\n            SORT: function SORT(_ref5) {\n                var compare = _ref5.compare;\n                sortItems(state, compare);\n                dispatch(\"DID_SORT_ITEMS\", {\n                    items: query(\"GET_ACTIVE_ITEMS\")\n                });\n            },\n            ADD_ITEMS: function ADD_ITEMS(_ref6) {\n                var items = _ref6.items, index = _ref6.index, interactionMethod = _ref6.interactionMethod, _ref6$success = _ref6.success, success = _ref6$success === void 0 ? function() {} : _ref6$success, _ref6$failure = _ref6.failure, failure = _ref6$failure === void 0 ? function() {} : _ref6$failure;\n                var currentIndex = index;\n                if (index === -1 || typeof index === \"undefined\") {\n                    var insertLocation = query(\"GET_ITEM_INSERT_LOCATION\");\n                    var totalItems = query(\"GET_TOTAL_ITEMS\");\n                    currentIndex = insertLocation === \"before\" ? 0 : totalItems;\n                }\n                var ignoredFiles = query(\"GET_IGNORED_FILES\");\n                var isValidFile = function isValidFile(source) {\n                    return isFile(source) ? !ignoredFiles.includes(source.name.toLowerCase()) : !isEmpty(source);\n                };\n                var validItems = items.filter(isValidFile);\n                var promises = validItems.map(function(source) {\n                    return new Promise(function(resolve, reject) {\n                        dispatch(\"ADD_ITEM\", {\n                            interactionMethod: interactionMethod,\n                            source: source.source || source,\n                            success: resolve,\n                            failure: reject,\n                            index: currentIndex++,\n                            options: source.options || {}\n                        });\n                    });\n                });\n                Promise.all(promises).then(success).catch(failure);\n            },\n            /**\n             * @param source\n             * @param index\n             * @param interactionMethod\n             */ ADD_ITEM: function ADD_ITEM(_ref7) {\n                var source = _ref7.source, _ref7$index = _ref7.index, index = _ref7$index === void 0 ? -1 : _ref7$index, interactionMethod = _ref7.interactionMethod, _ref7$success = _ref7.success, success = _ref7$success === void 0 ? function() {} : _ref7$success, _ref7$failure = _ref7.failure, failure = _ref7$failure === void 0 ? function() {} : _ref7$failure, _ref7$options = _ref7.options, options = _ref7$options === void 0 ? {} : _ref7$options;\n                // if no source supplied\n                if (isEmpty(source)) {\n                    failure({\n                        error: createResponse(\"error\", 0, \"No source\"),\n                        file: null\n                    });\n                    return;\n                }\n                // filter out invalid file items, used to filter dropped directory contents\n                if (isFile(source) && state.options.ignoredFiles.includes(source.name.toLowerCase())) // fail silently\n                return;\n                // test if there's still room in the list of files\n                if (!hasRoomForItem(state)) {\n                    // if multiple allowed, we can't replace\n                    // or if only a single item is allowed but we're not allowed to replace it we exit\n                    if (state.options.allowMultiple || !state.options.allowMultiple && !state.options.allowReplace) {\n                        var error = createResponse(\"warning\", 0, \"Max files\");\n                        dispatch(\"DID_THROW_MAX_FILES\", {\n                            source: source,\n                            error: error\n                        });\n                        failure({\n                            error: error,\n                            file: null\n                        });\n                        return;\n                    }\n                    // let's replace the item\n                    // id of first item we're about to remove\n                    var _item = getActiveItems(state.items)[0];\n                    // if has been processed remove it from the server as well\n                    if (_item.status === ItemStatus.PROCESSING_COMPLETE || _item.status === ItemStatus.PROCESSING_REVERT_ERROR) {\n                        var forceRevert = query(\"GET_FORCE_REVERT\");\n                        _item.revert(createRevertFunction(state.options.server.url, state.options.server.revert), forceRevert).then(function() {\n                            if (!forceRevert) return;\n                            // try to add now\n                            dispatch(\"ADD_ITEM\", {\n                                source: source,\n                                index: index,\n                                interactionMethod: interactionMethod,\n                                success: success,\n                                failure: failure,\n                                options: options\n                            });\n                        }).catch(function() {}); // no need to handle this catch state for now\n                        if (forceRevert) return;\n                    }\n                    // remove first item as it will be replaced by this item\n                    dispatch(\"REMOVE_ITEM\", {\n                        query: _item.id\n                    });\n                }\n                // where did the file originate\n                var origin = options.type === \"local\" ? FileOrigin.LOCAL : options.type === \"limbo\" ? FileOrigin.LIMBO : FileOrigin.INPUT;\n                // create a new blank item\n                var item = createItem(// where did this file come from\n                origin, // an input file never has a server file reference\n                origin === FileOrigin.INPUT ? null : source, // file mock data, if defined\n                options.file);\n                // set initial meta data\n                Object.keys(options.metadata || {}).forEach(function(key) {\n                    item.setMetadata(key, options.metadata[key]);\n                });\n                // created the item, let plugins add methods\n                applyFilters(\"DID_CREATE_ITEM\", item, {\n                    query: query,\n                    dispatch: dispatch\n                });\n                // where to insert new items\n                var itemInsertLocation = query(\"GET_ITEM_INSERT_LOCATION\");\n                // adjust index if is not allowed to pick location\n                if (!state.options.itemInsertLocationFreedom) index = itemInsertLocation === \"before\" ? -1 : state.items.length;\n                // add item to list\n                insertItem(state.items, item, index);\n                // sort items in list\n                if (isFunction(itemInsertLocation) && source) sortItems(state, itemInsertLocation);\n                // get a quick reference to the item id\n                var id = item.id;\n                // observe item events\n                item.on(\"init\", function() {\n                    dispatch(\"DID_INIT_ITEM\", {\n                        id: id\n                    });\n                });\n                item.on(\"load-init\", function() {\n                    dispatch(\"DID_START_ITEM_LOAD\", {\n                        id: id\n                    });\n                });\n                item.on(\"load-meta\", function() {\n                    dispatch(\"DID_UPDATE_ITEM_META\", {\n                        id: id\n                    });\n                });\n                item.on(\"load-progress\", function(progress) {\n                    dispatch(\"DID_UPDATE_ITEM_LOAD_PROGRESS\", {\n                        id: id,\n                        progress: progress\n                    });\n                });\n                item.on(\"load-request-error\", function(error) {\n                    var mainStatus = dynamicLabel(state.options.labelFileLoadError)(error);\n                    // is client error, no way to recover\n                    if (error.code >= 400 && error.code < 500) {\n                        dispatch(\"DID_THROW_ITEM_INVALID\", {\n                            id: id,\n                            error: error,\n                            status: {\n                                main: mainStatus,\n                                sub: error.code + \" (\" + error.body + \")\"\n                            }\n                        });\n                        // reject the file so can be dealt with through API\n                        failure({\n                            error: error,\n                            file: createItemAPI(item)\n                        });\n                        return;\n                    }\n                    // is possible server error, so might be possible to retry\n                    dispatch(\"DID_THROW_ITEM_LOAD_ERROR\", {\n                        id: id,\n                        error: error,\n                        status: {\n                            main: mainStatus,\n                            sub: state.options.labelTapToRetry\n                        }\n                    });\n                });\n                item.on(\"load-file-error\", function(error) {\n                    dispatch(\"DID_THROW_ITEM_INVALID\", {\n                        id: id,\n                        error: error.status,\n                        status: error.status\n                    });\n                    failure({\n                        error: error.status,\n                        file: createItemAPI(item)\n                    });\n                });\n                item.on(\"load-abort\", function() {\n                    dispatch(\"REMOVE_ITEM\", {\n                        query: id\n                    });\n                });\n                item.on(\"load-skip\", function() {\n                    dispatch(\"COMPLETE_LOAD_ITEM\", {\n                        query: id,\n                        item: item,\n                        data: {\n                            source: source,\n                            success: success\n                        }\n                    });\n                });\n                item.on(\"load\", function() {\n                    var handleAdd = function handleAdd(shouldAdd) {\n                        // no should not add this file\n                        if (!shouldAdd) {\n                            dispatch(\"REMOVE_ITEM\", {\n                                query: id\n                            });\n                            return;\n                        }\n                        // now interested in metadata updates\n                        item.on(\"metadata-update\", function(change) {\n                            dispatch(\"DID_UPDATE_ITEM_METADATA\", {\n                                id: id,\n                                change: change\n                            });\n                        });\n                        // let plugins decide if the output data should be prepared at this point\n                        // means we'll do this and wait for idle state\n                        applyFilterChain(\"SHOULD_PREPARE_OUTPUT\", false, {\n                            item: item,\n                            query: query\n                        }).then(function(shouldPrepareOutput) {\n                            // plugins determined the output data should be prepared (or not), can be adjusted with beforePrepareOutput hook\n                            var beforePrepareFile = query(\"GET_BEFORE_PREPARE_FILE\");\n                            if (beforePrepareFile) shouldPrepareOutput = beforePrepareFile(item, shouldPrepareOutput);\n                            var loadComplete = function loadComplete() {\n                                dispatch(\"COMPLETE_LOAD_ITEM\", {\n                                    query: id,\n                                    item: item,\n                                    data: {\n                                        source: source,\n                                        success: success\n                                    }\n                                });\n                                listUpdated(dispatch, state);\n                            };\n                            // exit\n                            if (shouldPrepareOutput) {\n                                // wait for idle state and then run PREPARE_OUTPUT\n                                dispatch(\"REQUEST_PREPARE_OUTPUT\", {\n                                    query: id,\n                                    item: item,\n                                    success: function success(file) {\n                                        dispatch(\"DID_PREPARE_OUTPUT\", {\n                                            id: id,\n                                            file: file\n                                        });\n                                        loadComplete();\n                                    }\n                                }, true);\n                                return;\n                            }\n                            loadComplete();\n                        });\n                    };\n                    // item loaded, allow plugins to\n                    // - read data (quickly)\n                    // - add metadata\n                    applyFilterChain(\"DID_LOAD_ITEM\", item, {\n                        query: query,\n                        dispatch: dispatch\n                    }).then(function() {\n                        optionalPromise(query(\"GET_BEFORE_ADD_FILE\"), createItemAPI(item)).then(handleAdd);\n                    }).catch(function(e) {\n                        if (!e || !e.error || !e.status) return handleAdd(false);\n                        dispatch(\"DID_THROW_ITEM_INVALID\", {\n                            id: id,\n                            error: e.error,\n                            status: e.status\n                        });\n                    });\n                });\n                item.on(\"process-start\", function() {\n                    dispatch(\"DID_START_ITEM_PROCESSING\", {\n                        id: id\n                    });\n                });\n                item.on(\"process-progress\", function(progress) {\n                    dispatch(\"DID_UPDATE_ITEM_PROCESS_PROGRESS\", {\n                        id: id,\n                        progress: progress\n                    });\n                });\n                item.on(\"process-error\", function(error) {\n                    dispatch(\"DID_THROW_ITEM_PROCESSING_ERROR\", {\n                        id: id,\n                        error: error,\n                        status: {\n                            main: dynamicLabel(state.options.labelFileProcessingError)(error),\n                            sub: state.options.labelTapToRetry\n                        }\n                    });\n                });\n                item.on(\"process-revert-error\", function(error) {\n                    dispatch(\"DID_THROW_ITEM_PROCESSING_REVERT_ERROR\", {\n                        id: id,\n                        error: error,\n                        status: {\n                            main: dynamicLabel(state.options.labelFileProcessingRevertError)(error),\n                            sub: state.options.labelTapToRetry\n                        }\n                    });\n                });\n                item.on(\"process-complete\", function(serverFileReference) {\n                    dispatch(\"DID_COMPLETE_ITEM_PROCESSING\", {\n                        id: id,\n                        error: null,\n                        serverFileReference: serverFileReference\n                    });\n                    dispatch(\"DID_DEFINE_VALUE\", {\n                        id: id,\n                        value: serverFileReference\n                    });\n                });\n                item.on(\"process-abort\", function() {\n                    dispatch(\"DID_ABORT_ITEM_PROCESSING\", {\n                        id: id\n                    });\n                });\n                item.on(\"process-revert\", function() {\n                    dispatch(\"DID_REVERT_ITEM_PROCESSING\", {\n                        id: id\n                    });\n                    dispatch(\"DID_DEFINE_VALUE\", {\n                        id: id,\n                        value: null\n                    });\n                });\n                // let view know the item has been inserted\n                dispatch(\"DID_ADD_ITEM\", {\n                    id: id,\n                    index: index,\n                    interactionMethod: interactionMethod\n                });\n                listUpdated(dispatch, state);\n                // start loading the source\n                var _ref8 = state.options.server || {}, url = _ref8.url, load = _ref8.load, restore = _ref8.restore, fetch = _ref8.fetch;\n                item.load(source, // this creates a function that loads the file based on the type of file (string, base64, blob, file) and location of file (local, remote, limbo)\n                createFileLoader(origin === FileOrigin.INPUT ? isString(source) && isExternalURL(source) ? fetch ? createFetchFunction(url, fetch) : fetchBlob // remote url\n                 : fetchBlob // try to fetch url\n                 : origin === FileOrigin.LIMBO ? createFetchFunction(url, restore) // limbo\n                 : createFetchFunction(url, load) // local\n                ), // called when the file is loaded so it can be piped through the filters\n                function(file, success, error) {\n                    // let's process the file\n                    applyFilterChain(\"LOAD_FILE\", file, {\n                        query: query\n                    }).then(success).catch(error);\n                });\n            },\n            REQUEST_PREPARE_OUTPUT: function REQUEST_PREPARE_OUTPUT(_ref9) {\n                var item = _ref9.item, success = _ref9.success, _ref9$failure = _ref9.failure, failure = _ref9$failure === void 0 ? function() {} : _ref9$failure;\n                // error response if item archived\n                var err = {\n                    error: createResponse(\"error\", 0, \"Item not found\"),\n                    file: null\n                };\n                // don't handle archived items, an item could have been archived (load aborted) while waiting to be prepared\n                if (item.archived) return failure(err);\n                // allow plugins to alter the file data\n                applyFilterChain(\"PREPARE_OUTPUT\", item.file, {\n                    query: query,\n                    item: item\n                }).then(function(result) {\n                    applyFilterChain(\"COMPLETE_PREPARE_OUTPUT\", result, {\n                        query: query,\n                        item: item\n                    }).then(function(result) {\n                        // don't handle archived items, an item could have been archived (load aborted) while being prepared\n                        if (item.archived) return failure(err);\n                        // we done!\n                        success(result);\n                    });\n                });\n            },\n            COMPLETE_LOAD_ITEM: function COMPLETE_LOAD_ITEM(_ref10) {\n                var item = _ref10.item, data = _ref10.data;\n                var success = data.success, source = data.source;\n                // sort items in list\n                var itemInsertLocation = query(\"GET_ITEM_INSERT_LOCATION\");\n                if (isFunction(itemInsertLocation) && source) sortItems(state, itemInsertLocation);\n                // let interface know the item has loaded\n                dispatch(\"DID_LOAD_ITEM\", {\n                    id: item.id,\n                    error: null,\n                    serverFileReference: item.origin === FileOrigin.INPUT ? null : source\n                });\n                // item has been successfully loaded and added to the\n                // list of items so can now be safely returned for use\n                success(createItemAPI(item));\n                // if this is a local server file we need to show a different state\n                if (item.origin === FileOrigin.LOCAL) {\n                    dispatch(\"DID_LOAD_LOCAL_ITEM\", {\n                        id: item.id\n                    });\n                    return;\n                }\n                // if is a temp server file we prevent async upload call here (as the file is already on the server)\n                if (item.origin === FileOrigin.LIMBO) {\n                    dispatch(\"DID_COMPLETE_ITEM_PROCESSING\", {\n                        id: item.id,\n                        error: null,\n                        serverFileReference: source\n                    });\n                    dispatch(\"DID_DEFINE_VALUE\", {\n                        id: item.id,\n                        value: item.serverId || source\n                    });\n                    return;\n                }\n                // id we are allowed to upload the file immediately, lets do it\n                if (query(\"IS_ASYNC\") && state.options.instantUpload) dispatch(\"REQUEST_ITEM_PROCESSING\", {\n                    query: item.id\n                });\n            },\n            RETRY_ITEM_LOAD: getItemByQueryFromState(state, function(item) {\n                // try loading the source one more time\n                item.retryLoad();\n            }),\n            REQUEST_ITEM_PREPARE: getItemByQueryFromState(state, function(item, _success, failure) {\n                dispatch(\"REQUEST_PREPARE_OUTPUT\", {\n                    query: item.id,\n                    item: item,\n                    success: function success(file) {\n                        dispatch(\"DID_PREPARE_OUTPUT\", {\n                            id: item.id,\n                            file: file\n                        });\n                        _success({\n                            file: item,\n                            output: file\n                        });\n                    },\n                    failure: failure\n                }, true);\n            }),\n            REQUEST_ITEM_PROCESSING: getItemByQueryFromState(state, function(item, success, failure) {\n                // cannot be queued (or is already queued)\n                var itemCanBeQueuedForProcessing = // waiting for something\n                item.status === ItemStatus.IDLE || // processing went wrong earlier\n                item.status === ItemStatus.PROCESSING_ERROR;\n                // not ready to be processed\n                if (!itemCanBeQueuedForProcessing) {\n                    var processNow = function processNow() {\n                        return dispatch(\"REQUEST_ITEM_PROCESSING\", {\n                            query: item,\n                            success: success,\n                            failure: failure\n                        });\n                    };\n                    var process = function process() {\n                        return document.hidden ? processNow() : setTimeout(processNow, 32);\n                    };\n                    // if already done processing or tried to revert but didn't work, try again\n                    if (item.status === ItemStatus.PROCESSING_COMPLETE || item.status === ItemStatus.PROCESSING_REVERT_ERROR) item.revert(createRevertFunction(state.options.server.url, state.options.server.revert), query(\"GET_FORCE_REVERT\")).then(process).catch(function() {}); // don't continue with processing if something went wrong\n                    else if (item.status === ItemStatus.PROCESSING) item.abortProcessing().then(process);\n                    return;\n                }\n                // already queued for processing\n                if (item.status === ItemStatus.PROCESSING_QUEUED) return;\n                item.requestProcessing();\n                dispatch(\"DID_REQUEST_ITEM_PROCESSING\", {\n                    id: item.id\n                });\n                dispatch(\"PROCESS_ITEM\", {\n                    query: item,\n                    success: success,\n                    failure: failure\n                }, true);\n            }),\n            PROCESS_ITEM: getItemByQueryFromState(state, function(item, success, failure) {\n                var maxParallelUploads = query(\"GET_MAX_PARALLEL_UPLOADS\");\n                var totalCurrentUploads = query(\"GET_ITEMS_BY_STATUS\", ItemStatus.PROCESSING).length;\n                // queue and wait till queue is freed up\n                if (totalCurrentUploads === maxParallelUploads) {\n                    // queue for later processing\n                    state.processingQueue.push({\n                        id: item.id,\n                        success: success,\n                        failure: failure\n                    });\n                    // stop it!\n                    return;\n                }\n                // if was not queued or is already processing exit here\n                if (item.status === ItemStatus.PROCESSING) return;\n                var processNext = function processNext() {\n                    // process queueud items\n                    var queueEntry = state.processingQueue.shift();\n                    // no items left\n                    if (!queueEntry) return;\n                    // get item reference\n                    var id = queueEntry.id, success = queueEntry.success, failure = queueEntry.failure;\n                    var itemReference = getItemByQuery(state.items, id);\n                    // if item was archived while in queue, jump to next\n                    if (!itemReference || itemReference.archived) {\n                        processNext();\n                        return;\n                    }\n                    // process queued item\n                    dispatch(\"PROCESS_ITEM\", {\n                        query: id,\n                        success: success,\n                        failure: failure\n                    }, true);\n                };\n                // we done function\n                item.onOnce(\"process-complete\", function() {\n                    success(createItemAPI(item));\n                    processNext();\n                    // if origin is local, and we're instant uploading, trigger remove of original\n                    // as revert will remove file from list\n                    var server = state.options.server;\n                    var instantUpload = state.options.instantUpload;\n                    if (instantUpload && item.origin === FileOrigin.LOCAL && isFunction(server.remove)) {\n                        var noop = function noop() {};\n                        item.origin = FileOrigin.LIMBO;\n                        state.options.server.remove(item.source, noop, noop);\n                    }\n                    // All items processed? No errors?\n                    var allItemsProcessed = query(\"GET_ITEMS_BY_STATUS\", ItemStatus.PROCESSING_COMPLETE).length === state.items.length;\n                    if (allItemsProcessed) dispatch(\"DID_COMPLETE_ITEM_PROCESSING_ALL\");\n                });\n                // we error function\n                item.onOnce(\"process-error\", function(error) {\n                    failure({\n                        error: error,\n                        file: createItemAPI(item)\n                    });\n                    processNext();\n                });\n                // start file processing\n                var options = state.options;\n                item.process(createFileProcessor(createProcessorFunction(options.server.url, options.server.process, options.name, {\n                    chunkTransferId: item.transferId,\n                    chunkServer: options.server.patch,\n                    chunkUploads: options.chunkUploads,\n                    chunkForce: options.chunkForce,\n                    chunkSize: options.chunkSize,\n                    chunkRetryDelays: options.chunkRetryDelays\n                }), {\n                    allowMinimumUploadDuration: query(\"GET_ALLOW_MINIMUM_UPLOAD_DURATION\")\n                }), // called when the file is about to be processed so it can be piped through the transform filters\n                function(file, success, error) {\n                    // allow plugins to alter the file data\n                    applyFilterChain(\"PREPARE_OUTPUT\", file, {\n                        query: query,\n                        item: item\n                    }).then(function(file) {\n                        dispatch(\"DID_PREPARE_OUTPUT\", {\n                            id: item.id,\n                            file: file\n                        });\n                        success(file);\n                    }).catch(error);\n                });\n            }),\n            RETRY_ITEM_PROCESSING: getItemByQueryFromState(state, function(item) {\n                dispatch(\"REQUEST_ITEM_PROCESSING\", {\n                    query: item\n                });\n            }),\n            REQUEST_REMOVE_ITEM: getItemByQueryFromState(state, function(item) {\n                optionalPromise(query(\"GET_BEFORE_REMOVE_FILE\"), createItemAPI(item)).then(function(shouldRemove) {\n                    if (!shouldRemove) return;\n                    dispatch(\"REMOVE_ITEM\", {\n                        query: item\n                    });\n                });\n            }),\n            RELEASE_ITEM: getItemByQueryFromState(state, function(item) {\n                item.release();\n            }),\n            REMOVE_ITEM: getItemByQueryFromState(state, function(item, success, failure, options) {\n                var removeFromView = function removeFromView() {\n                    // get id reference\n                    var id = item.id;\n                    // archive the item, this does not remove it from the list\n                    getItemById(state.items, id).archive();\n                    // tell the view the item has been removed\n                    dispatch(\"DID_REMOVE_ITEM\", {\n                        error: null,\n                        id: id,\n                        item: item\n                    });\n                    // now the list has been modified\n                    listUpdated(dispatch, state);\n                    // correctly removed\n                    success(createItemAPI(item));\n                };\n                // if this is a local file and the `server.remove` function has been configured,\n                // send source there so dev can remove file from server\n                var server = state.options.server;\n                if (item.origin === FileOrigin.LOCAL && server && isFunction(server.remove) && options.remove !== false) {\n                    dispatch(\"DID_START_ITEM_REMOVE\", {\n                        id: item.id\n                    });\n                    server.remove(item.source, function() {\n                        return removeFromView();\n                    }, function(status) {\n                        dispatch(\"DID_THROW_ITEM_REMOVE_ERROR\", {\n                            id: item.id,\n                            error: createResponse(\"error\", 0, status, null),\n                            status: {\n                                main: dynamicLabel(state.options.labelFileRemoveError)(status),\n                                sub: state.options.labelTapToRetry\n                            }\n                        });\n                    });\n                } else {\n                    // if is requesting revert and can revert need to call revert handler (not calling request_ because that would also trigger beforeRemoveHook)\n                    if (options.revert && item.origin !== FileOrigin.LOCAL && item.serverId !== null || // if chunked uploads are enabled and we're uploading in chunks for this specific file\n                    // or if the file isn't big enough for chunked uploads but chunkForce is set then call\n                    // revert before removing from the view...\n                    state.options.chunkUploads && item.file.size > state.options.chunkSize || state.options.chunkUploads && state.options.chunkForce) item.revert(createRevertFunction(state.options.server.url, state.options.server.revert), query(\"GET_FORCE_REVERT\"));\n                    // can now safely remove from view\n                    removeFromView();\n                }\n            }),\n            ABORT_ITEM_LOAD: getItemByQueryFromState(state, function(item) {\n                item.abortLoad();\n            }),\n            ABORT_ITEM_PROCESSING: getItemByQueryFromState(state, function(item) {\n                // test if is already processed\n                if (item.serverId) {\n                    dispatch(\"REVERT_ITEM_PROCESSING\", {\n                        id: item.id\n                    });\n                    return;\n                }\n                // abort\n                item.abortProcessing().then(function() {\n                    var shouldRemove = state.options.instantUpload;\n                    if (shouldRemove) dispatch(\"REMOVE_ITEM\", {\n                        query: item.id\n                    });\n                });\n            }),\n            REQUEST_REVERT_ITEM_PROCESSING: getItemByQueryFromState(state, function(item) {\n                // not instant uploading, revert immediately\n                if (!state.options.instantUpload) {\n                    dispatch(\"REVERT_ITEM_PROCESSING\", {\n                        query: item\n                    });\n                    return;\n                }\n                // if we're instant uploading the file will also be removed if we revert,\n                // so if a before remove file hook is defined we need to run it now\n                var handleRevert = function handleRevert(shouldRevert) {\n                    if (!shouldRevert) return;\n                    dispatch(\"REVERT_ITEM_PROCESSING\", {\n                        query: item\n                    });\n                };\n                var fn = query(\"GET_BEFORE_REMOVE_FILE\");\n                if (!fn) return handleRevert(true);\n                var requestRemoveResult = fn(createItemAPI(item));\n                if (requestRemoveResult == null) // undefined or null\n                return handleRevert(true);\n                if (typeof requestRemoveResult === \"boolean\") return handleRevert(requestRemoveResult);\n                if (typeof requestRemoveResult.then === \"function\") requestRemoveResult.then(handleRevert);\n            }),\n            REVERT_ITEM_PROCESSING: getItemByQueryFromState(state, function(item) {\n                item.revert(createRevertFunction(state.options.server.url, state.options.server.revert), query(\"GET_FORCE_REVERT\")).then(function() {\n                    var shouldRemove = state.options.instantUpload || isMockItem(item);\n                    if (shouldRemove) dispatch(\"REMOVE_ITEM\", {\n                        query: item.id\n                    });\n                }).catch(function() {});\n            }),\n            SET_OPTIONS: function SET_OPTIONS(_ref11) {\n                var options = _ref11.options;\n                // get all keys passed\n                var optionKeys = Object.keys(options);\n                // get prioritized keyed to include (remove once not in options object)\n                var prioritizedOptionKeys = PrioritizedOptions.filter(function(key) {\n                    return optionKeys.includes(key);\n                });\n                // order the keys, prioritized first, then rest\n                var orderedOptionKeys = [].concat(_toConsumableArray(prioritizedOptionKeys), _toConsumableArray(Object.keys(options).filter(function(key) {\n                    return !prioritizedOptionKeys.includes(key);\n                })));\n                // dispatch set event for each option\n                orderedOptionKeys.forEach(function(key) {\n                    dispatch(\"SET_\" + fromCamels(key, \"_\").toUpperCase(), {\n                        value: options[key]\n                    });\n                });\n            }\n        };\n    };\n    var PrioritizedOptions = [\n        \"server\"\n    ];\n    var formatFilename = function formatFilename(name) {\n        return name;\n    };\n    var createElement$1 = function createElement(tagName) {\n        return document.createElement(tagName);\n    };\n    var text = function text(node, value) {\n        var textNode = node.childNodes[0];\n        if (!textNode) {\n            textNode = document.createTextNode(value);\n            node.appendChild(textNode);\n        } else if (value !== textNode.nodeValue) textNode.nodeValue = value;\n    };\n    var polarToCartesian = function polarToCartesian(centerX, centerY, radius, angleInDegrees) {\n        var angleInRadians = (angleInDegrees % 360 - 90) * Math.PI / 180.0;\n        return {\n            x: centerX + radius * Math.cos(angleInRadians),\n            y: centerY + radius * Math.sin(angleInRadians)\n        };\n    };\n    var describeArc = function describeArc(x, y, radius, startAngle, endAngle, arcSweep) {\n        var start = polarToCartesian(x, y, radius, endAngle);\n        var end = polarToCartesian(x, y, radius, startAngle);\n        return [\n            \"M\",\n            start.x,\n            start.y,\n            \"A\",\n            radius,\n            radius,\n            0,\n            arcSweep,\n            0,\n            end.x,\n            end.y\n        ].join(\" \");\n    };\n    var percentageArc = function percentageArc(x, y, radius, from, to) {\n        var arcSweep = 1;\n        if (to > from && to - from <= 0.5) arcSweep = 0;\n        if (from > to && from - to >= 0.5) arcSweep = 0;\n        return describeArc(x, y, radius, Math.min(0.9999, from) * 360, Math.min(0.9999, to) * 360, arcSweep);\n    };\n    var create = function create(_ref) {\n        var root = _ref.root, props = _ref.props;\n        // start at 0\n        props.spin = false;\n        props.progress = 0;\n        props.opacity = 0;\n        // svg\n        var svg = createElement(\"svg\");\n        root.ref.path = createElement(\"path\", {\n            \"stroke-width\": 2,\n            \"stroke-linecap\": \"round\"\n        });\n        svg.appendChild(root.ref.path);\n        root.ref.svg = svg;\n        root.appendChild(svg);\n    };\n    var write = function write(_ref2) {\n        var root = _ref2.root, props = _ref2.props;\n        if (props.opacity === 0) return;\n        if (props.align) root.element.dataset.align = props.align;\n        // get width of stroke\n        var ringStrokeWidth = parseInt(attr(root.ref.path, \"stroke-width\"), 10);\n        // calculate size of ring\n        var size = root.rect.element.width * 0.5;\n        // ring state\n        var ringFrom = 0;\n        var ringTo = 0;\n        // now in busy mode\n        if (props.spin) {\n            ringFrom = 0;\n            ringTo = 0.5;\n        } else {\n            ringFrom = 0;\n            ringTo = props.progress;\n        }\n        // get arc path\n        var coordinates = percentageArc(size, size, size - ringStrokeWidth, ringFrom, ringTo);\n        // update progress bar\n        attr(root.ref.path, \"d\", coordinates);\n        // hide while contains 0 value\n        attr(root.ref.path, \"stroke-opacity\", props.spin || props.progress > 0 ? 1 : 0);\n    };\n    var progressIndicator = createView({\n        tag: \"div\",\n        name: \"progress-indicator\",\n        ignoreRectUpdate: true,\n        ignoreRect: true,\n        create: create,\n        write: write,\n        mixins: {\n            apis: [\n                \"progress\",\n                \"spin\",\n                \"align\"\n            ],\n            styles: [\n                \"opacity\"\n            ],\n            animations: {\n                opacity: {\n                    type: \"tween\",\n                    duration: 500\n                },\n                progress: {\n                    type: \"spring\",\n                    stiffness: 0.95,\n                    damping: 0.65,\n                    mass: 10\n                }\n            }\n        }\n    });\n    var create$1 = function create(_ref) {\n        var root = _ref.root, props = _ref.props;\n        root.element.innerHTML = (props.icon || \"\") + (\"<span>\" + props.label + \"</span>\");\n        props.isDisabled = false;\n    };\n    var write$1 = function write(_ref2) {\n        var root = _ref2.root, props = _ref2.props;\n        var isDisabled = props.isDisabled;\n        var shouldDisable = root.query(\"GET_DISABLED\") || props.opacity === 0;\n        if (shouldDisable && !isDisabled) {\n            props.isDisabled = true;\n            attr(root.element, \"disabled\", \"disabled\");\n        } else if (!shouldDisable && isDisabled) {\n            props.isDisabled = false;\n            root.element.removeAttribute(\"disabled\");\n        }\n    };\n    var fileActionButton = createView({\n        tag: \"button\",\n        attributes: {\n            type: \"button\"\n        },\n        ignoreRect: true,\n        ignoreRectUpdate: true,\n        name: \"file-action-button\",\n        mixins: {\n            apis: [\n                \"label\"\n            ],\n            styles: [\n                \"translateX\",\n                \"translateY\",\n                \"scaleX\",\n                \"scaleY\",\n                \"opacity\"\n            ],\n            animations: {\n                scaleX: \"spring\",\n                scaleY: \"spring\",\n                translateX: \"spring\",\n                translateY: \"spring\",\n                opacity: {\n                    type: \"tween\",\n                    duration: 250\n                }\n            },\n            listeners: true\n        },\n        create: create$1,\n        write: write$1\n    });\n    var toNaturalFileSize = function toNaturalFileSize(bytes) {\n        var decimalSeparator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \".\";\n        var base = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1000;\n        var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n        var _options$labelBytes = options.labelBytes, labelBytes = _options$labelBytes === void 0 ? \"bytes\" : _options$labelBytes, _options$labelKilobyt = options.labelKilobytes, labelKilobytes = _options$labelKilobyt === void 0 ? \"KB\" : _options$labelKilobyt, _options$labelMegabyt = options.labelMegabytes, labelMegabytes = _options$labelMegabyt === void 0 ? \"MB\" : _options$labelMegabyt, _options$labelGigabyt = options.labelGigabytes, labelGigabytes = _options$labelGigabyt === void 0 ? \"GB\" : _options$labelGigabyt;\n        // no negative byte sizes\n        bytes = Math.round(Math.abs(bytes));\n        var KB = base;\n        var MB = base * base;\n        var GB = base * base * base;\n        // just bytes\n        if (bytes < KB) return bytes + \" \" + labelBytes;\n        // kilobytes\n        if (bytes < MB) return Math.floor(bytes / KB) + \" \" + labelKilobytes;\n        // megabytes\n        if (bytes < GB) return removeDecimalsWhenZero(bytes / MB, 1, decimalSeparator) + \" \" + labelMegabytes;\n        // gigabytes\n        return removeDecimalsWhenZero(bytes / GB, 2, decimalSeparator) + \" \" + labelGigabytes;\n    };\n    var removeDecimalsWhenZero = function removeDecimalsWhenZero(value, decimalCount, separator) {\n        return value.toFixed(decimalCount).split(\".\").filter(function(part) {\n            return part !== \"0\";\n        }).join(separator);\n    };\n    var create$2 = function create(_ref) {\n        var root = _ref.root, props = _ref.props;\n        // filename\n        var fileName = createElement$1(\"span\");\n        fileName.className = \"filepond--file-info-main\";\n        // hide for screenreaders\n        // the file is contained in a fieldset with legend that contains the filename\n        // no need to read it twice\n        attr(fileName, \"aria-hidden\", \"true\");\n        root.appendChild(fileName);\n        root.ref.fileName = fileName;\n        // filesize\n        var fileSize = createElement$1(\"span\");\n        fileSize.className = \"filepond--file-info-sub\";\n        root.appendChild(fileSize);\n        root.ref.fileSize = fileSize;\n        // set initial values\n        text(fileSize, root.query(\"GET_LABEL_FILE_WAITING_FOR_SIZE\"));\n        text(fileName, formatFilename(root.query(\"GET_ITEM_NAME\", props.id)));\n    };\n    var updateFile = function updateFile(_ref2) {\n        var root = _ref2.root, props = _ref2.props;\n        text(root.ref.fileSize, toNaturalFileSize(root.query(\"GET_ITEM_SIZE\", props.id), \".\", root.query(\"GET_FILE_SIZE_BASE\"), root.query(\"GET_FILE_SIZE_LABELS\", root.query)));\n        text(root.ref.fileName, formatFilename(root.query(\"GET_ITEM_NAME\", props.id)));\n    };\n    var updateFileSizeOnError = function updateFileSizeOnError(_ref3) {\n        var root = _ref3.root, props = _ref3.props;\n        // if size is available don't fallback to unknown size message\n        if (isInt(root.query(\"GET_ITEM_SIZE\", props.id))) {\n            updateFile({\n                root: root,\n                props: props\n            });\n            return;\n        }\n        text(root.ref.fileSize, root.query(\"GET_LABEL_FILE_SIZE_NOT_AVAILABLE\"));\n    };\n    var fileInfo = createView({\n        name: \"file-info\",\n        ignoreRect: true,\n        ignoreRectUpdate: true,\n        write: createRoute({\n            DID_LOAD_ITEM: updateFile,\n            DID_UPDATE_ITEM_META: updateFile,\n            DID_THROW_ITEM_LOAD_ERROR: updateFileSizeOnError,\n            DID_THROW_ITEM_INVALID: updateFileSizeOnError\n        }),\n        didCreateView: function didCreateView(root) {\n            applyFilters(\"CREATE_VIEW\", Object.assign({}, root, {\n                view: root\n            }));\n        },\n        create: create$2,\n        mixins: {\n            styles: [\n                \"translateX\",\n                \"translateY\"\n            ],\n            animations: {\n                translateX: \"spring\",\n                translateY: \"spring\"\n            }\n        }\n    });\n    var toPercentage = function toPercentage(value) {\n        return Math.round(value * 100);\n    };\n    var create$3 = function create(_ref) {\n        var root = _ref.root;\n        // main status\n        var main = createElement$1(\"span\");\n        main.className = \"filepond--file-status-main\";\n        root.appendChild(main);\n        root.ref.main = main;\n        // sub status\n        var sub = createElement$1(\"span\");\n        sub.className = \"filepond--file-status-sub\";\n        root.appendChild(sub);\n        root.ref.sub = sub;\n        didSetItemLoadProgress({\n            root: root,\n            action: {\n                progress: null\n            }\n        });\n    };\n    var didSetItemLoadProgress = function didSetItemLoadProgress(_ref2) {\n        var root = _ref2.root, action = _ref2.action;\n        var title = action.progress === null ? root.query(\"GET_LABEL_FILE_LOADING\") : root.query(\"GET_LABEL_FILE_LOADING\") + \" \" + toPercentage(action.progress) + \"%\";\n        text(root.ref.main, title);\n        text(root.ref.sub, root.query(\"GET_LABEL_TAP_TO_CANCEL\"));\n    };\n    var didSetItemProcessProgress = function didSetItemProcessProgress(_ref3) {\n        var root = _ref3.root, action = _ref3.action;\n        var title = action.progress === null ? root.query(\"GET_LABEL_FILE_PROCESSING\") : root.query(\"GET_LABEL_FILE_PROCESSING\") + \" \" + toPercentage(action.progress) + \"%\";\n        text(root.ref.main, title);\n        text(root.ref.sub, root.query(\"GET_LABEL_TAP_TO_CANCEL\"));\n    };\n    var didRequestItemProcessing = function didRequestItemProcessing(_ref4) {\n        var root = _ref4.root;\n        text(root.ref.main, root.query(\"GET_LABEL_FILE_PROCESSING\"));\n        text(root.ref.sub, root.query(\"GET_LABEL_TAP_TO_CANCEL\"));\n    };\n    var didAbortItemProcessing = function didAbortItemProcessing(_ref5) {\n        var root = _ref5.root;\n        text(root.ref.main, root.query(\"GET_LABEL_FILE_PROCESSING_ABORTED\"));\n        text(root.ref.sub, root.query(\"GET_LABEL_TAP_TO_RETRY\"));\n    };\n    var didCompleteItemProcessing = function didCompleteItemProcessing(_ref6) {\n        var root = _ref6.root;\n        text(root.ref.main, root.query(\"GET_LABEL_FILE_PROCESSING_COMPLETE\"));\n        text(root.ref.sub, root.query(\"GET_LABEL_TAP_TO_UNDO\"));\n    };\n    var clear = function clear(_ref7) {\n        var root = _ref7.root;\n        text(root.ref.main, \"\");\n        text(root.ref.sub, \"\");\n    };\n    var error = function error(_ref8) {\n        var root = _ref8.root, action = _ref8.action;\n        text(root.ref.main, action.status.main);\n        text(root.ref.sub, action.status.sub);\n    };\n    var fileStatus = createView({\n        name: \"file-status\",\n        ignoreRect: true,\n        ignoreRectUpdate: true,\n        write: createRoute({\n            DID_LOAD_ITEM: clear,\n            DID_REVERT_ITEM_PROCESSING: clear,\n            DID_REQUEST_ITEM_PROCESSING: didRequestItemProcessing,\n            DID_ABORT_ITEM_PROCESSING: didAbortItemProcessing,\n            DID_COMPLETE_ITEM_PROCESSING: didCompleteItemProcessing,\n            DID_UPDATE_ITEM_PROCESS_PROGRESS: didSetItemProcessProgress,\n            DID_UPDATE_ITEM_LOAD_PROGRESS: didSetItemLoadProgress,\n            DID_THROW_ITEM_LOAD_ERROR: error,\n            DID_THROW_ITEM_INVALID: error,\n            DID_THROW_ITEM_PROCESSING_ERROR: error,\n            DID_THROW_ITEM_PROCESSING_REVERT_ERROR: error,\n            DID_THROW_ITEM_REMOVE_ERROR: error\n        }),\n        didCreateView: function didCreateView(root) {\n            applyFilters(\"CREATE_VIEW\", Object.assign({}, root, {\n                view: root\n            }));\n        },\n        create: create$3,\n        mixins: {\n            styles: [\n                \"translateX\",\n                \"translateY\",\n                \"opacity\"\n            ],\n            animations: {\n                opacity: {\n                    type: \"tween\",\n                    duration: 250\n                },\n                translateX: \"spring\",\n                translateY: \"spring\"\n            }\n        }\n    });\n    /**\n     * Button definitions for the file view\n     */ var Buttons = {\n        AbortItemLoad: {\n            label: \"GET_LABEL_BUTTON_ABORT_ITEM_LOAD\",\n            action: \"ABORT_ITEM_LOAD\",\n            className: \"filepond--action-abort-item-load\",\n            align: \"LOAD_INDICATOR_POSITION\"\n        },\n        RetryItemLoad: {\n            label: \"GET_LABEL_BUTTON_RETRY_ITEM_LOAD\",\n            action: \"RETRY_ITEM_LOAD\",\n            icon: \"GET_ICON_RETRY\",\n            className: \"filepond--action-retry-item-load\",\n            align: \"BUTTON_PROCESS_ITEM_POSITION\"\n        },\n        RemoveItem: {\n            label: \"GET_LABEL_BUTTON_REMOVE_ITEM\",\n            action: \"REQUEST_REMOVE_ITEM\",\n            icon: \"GET_ICON_REMOVE\",\n            className: \"filepond--action-remove-item\",\n            align: \"BUTTON_REMOVE_ITEM_POSITION\"\n        },\n        ProcessItem: {\n            label: \"GET_LABEL_BUTTON_PROCESS_ITEM\",\n            action: \"REQUEST_ITEM_PROCESSING\",\n            icon: \"GET_ICON_PROCESS\",\n            className: \"filepond--action-process-item\",\n            align: \"BUTTON_PROCESS_ITEM_POSITION\"\n        },\n        AbortItemProcessing: {\n            label: \"GET_LABEL_BUTTON_ABORT_ITEM_PROCESSING\",\n            action: \"ABORT_ITEM_PROCESSING\",\n            className: \"filepond--action-abort-item-processing\",\n            align: \"BUTTON_PROCESS_ITEM_POSITION\"\n        },\n        RetryItemProcessing: {\n            label: \"GET_LABEL_BUTTON_RETRY_ITEM_PROCESSING\",\n            action: \"RETRY_ITEM_PROCESSING\",\n            icon: \"GET_ICON_RETRY\",\n            className: \"filepond--action-retry-item-processing\",\n            align: \"BUTTON_PROCESS_ITEM_POSITION\"\n        },\n        RevertItemProcessing: {\n            label: \"GET_LABEL_BUTTON_UNDO_ITEM_PROCESSING\",\n            action: \"REQUEST_REVERT_ITEM_PROCESSING\",\n            icon: \"GET_ICON_UNDO\",\n            className: \"filepond--action-revert-item-processing\",\n            align: \"BUTTON_PROCESS_ITEM_POSITION\"\n        }\n    };\n    // make a list of buttons, we can then remove buttons from this list if they're disabled\n    var ButtonKeys = [];\n    forin(Buttons, function(key) {\n        ButtonKeys.push(key);\n    });\n    var calculateFileInfoOffset = function calculateFileInfoOffset(root) {\n        if (getRemoveIndicatorAligment(root) === \"right\") return 0;\n        var buttonRect = root.ref.buttonRemoveItem.rect.element;\n        return buttonRect.hidden ? null : buttonRect.width + buttonRect.left;\n    };\n    var calculateButtonWidth = function calculateButtonWidth(root) {\n        var buttonRect = root.ref.buttonAbortItemLoad.rect.element;\n        return buttonRect.width;\n    };\n    // Force on full pixels so text stays crips\n    var calculateFileVerticalCenterOffset = function calculateFileVerticalCenterOffset(root) {\n        return Math.floor(root.ref.buttonRemoveItem.rect.element.height / 4);\n    };\n    var calculateFileHorizontalCenterOffset = function calculateFileHorizontalCenterOffset(root) {\n        return Math.floor(root.ref.buttonRemoveItem.rect.element.left / 2);\n    };\n    var getLoadIndicatorAlignment = function getLoadIndicatorAlignment(root) {\n        return root.query(\"GET_STYLE_LOAD_INDICATOR_POSITION\");\n    };\n    var getProcessIndicatorAlignment = function getProcessIndicatorAlignment(root) {\n        return root.query(\"GET_STYLE_PROGRESS_INDICATOR_POSITION\");\n    };\n    var getRemoveIndicatorAligment = function getRemoveIndicatorAligment(root) {\n        return root.query(\"GET_STYLE_BUTTON_REMOVE_ITEM_POSITION\");\n    };\n    var DefaultStyle = {\n        buttonAbortItemLoad: {\n            opacity: 0\n        },\n        buttonRetryItemLoad: {\n            opacity: 0\n        },\n        buttonRemoveItem: {\n            opacity: 0\n        },\n        buttonProcessItem: {\n            opacity: 0\n        },\n        buttonAbortItemProcessing: {\n            opacity: 0\n        },\n        buttonRetryItemProcessing: {\n            opacity: 0\n        },\n        buttonRevertItemProcessing: {\n            opacity: 0\n        },\n        loadProgressIndicator: {\n            opacity: 0,\n            align: getLoadIndicatorAlignment\n        },\n        processProgressIndicator: {\n            opacity: 0,\n            align: getProcessIndicatorAlignment\n        },\n        processingCompleteIndicator: {\n            opacity: 0,\n            scaleX: 0.75,\n            scaleY: 0.75\n        },\n        info: {\n            translateX: 0,\n            translateY: 0,\n            opacity: 0\n        },\n        status: {\n            translateX: 0,\n            translateY: 0,\n            opacity: 0\n        }\n    };\n    var IdleStyle = {\n        buttonRemoveItem: {\n            opacity: 1\n        },\n        buttonProcessItem: {\n            opacity: 1\n        },\n        info: {\n            translateX: calculateFileInfoOffset\n        },\n        status: {\n            translateX: calculateFileInfoOffset\n        }\n    };\n    var ProcessingStyle = {\n        buttonAbortItemProcessing: {\n            opacity: 1\n        },\n        processProgressIndicator: {\n            opacity: 1\n        },\n        status: {\n            opacity: 1\n        }\n    };\n    var StyleMap = {\n        DID_THROW_ITEM_INVALID: {\n            buttonRemoveItem: {\n                opacity: 1\n            },\n            info: {\n                translateX: calculateFileInfoOffset\n            },\n            status: {\n                translateX: calculateFileInfoOffset,\n                opacity: 1\n            }\n        },\n        DID_START_ITEM_LOAD: {\n            buttonAbortItemLoad: {\n                opacity: 1\n            },\n            loadProgressIndicator: {\n                opacity: 1\n            },\n            status: {\n                opacity: 1\n            }\n        },\n        DID_THROW_ITEM_LOAD_ERROR: {\n            buttonRetryItemLoad: {\n                opacity: 1\n            },\n            buttonRemoveItem: {\n                opacity: 1\n            },\n            info: {\n                translateX: calculateFileInfoOffset\n            },\n            status: {\n                opacity: 1\n            }\n        },\n        DID_START_ITEM_REMOVE: {\n            processProgressIndicator: {\n                opacity: 1,\n                align: getRemoveIndicatorAligment\n            },\n            info: {\n                translateX: calculateFileInfoOffset\n            },\n            status: {\n                opacity: 0\n            }\n        },\n        DID_THROW_ITEM_REMOVE_ERROR: {\n            processProgressIndicator: {\n                opacity: 0,\n                align: getRemoveIndicatorAligment\n            },\n            buttonRemoveItem: {\n                opacity: 1\n            },\n            info: {\n                translateX: calculateFileInfoOffset\n            },\n            status: {\n                opacity: 1,\n                translateX: calculateFileInfoOffset\n            }\n        },\n        DID_LOAD_ITEM: IdleStyle,\n        DID_LOAD_LOCAL_ITEM: {\n            buttonRemoveItem: {\n                opacity: 1\n            },\n            info: {\n                translateX: calculateFileInfoOffset\n            },\n            status: {\n                translateX: calculateFileInfoOffset\n            }\n        },\n        DID_START_ITEM_PROCESSING: ProcessingStyle,\n        DID_REQUEST_ITEM_PROCESSING: ProcessingStyle,\n        DID_UPDATE_ITEM_PROCESS_PROGRESS: ProcessingStyle,\n        DID_COMPLETE_ITEM_PROCESSING: {\n            buttonRevertItemProcessing: {\n                opacity: 1\n            },\n            info: {\n                opacity: 1\n            },\n            status: {\n                opacity: 1\n            }\n        },\n        DID_THROW_ITEM_PROCESSING_ERROR: {\n            buttonRemoveItem: {\n                opacity: 1\n            },\n            buttonRetryItemProcessing: {\n                opacity: 1\n            },\n            status: {\n                opacity: 1\n            },\n            info: {\n                translateX: calculateFileInfoOffset\n            }\n        },\n        DID_THROW_ITEM_PROCESSING_REVERT_ERROR: {\n            buttonRevertItemProcessing: {\n                opacity: 1\n            },\n            status: {\n                opacity: 1\n            },\n            info: {\n                opacity: 1\n            }\n        },\n        DID_ABORT_ITEM_PROCESSING: {\n            buttonRemoveItem: {\n                opacity: 1\n            },\n            buttonProcessItem: {\n                opacity: 1\n            },\n            info: {\n                translateX: calculateFileInfoOffset\n            },\n            status: {\n                opacity: 1\n            }\n        },\n        DID_REVERT_ITEM_PROCESSING: IdleStyle\n    };\n    // complete indicator view\n    var processingCompleteIndicatorView = createView({\n        create: function create(_ref) {\n            var root = _ref.root;\n            root.element.innerHTML = root.query(\"GET_ICON_DONE\");\n        },\n        name: \"processing-complete-indicator\",\n        ignoreRect: true,\n        mixins: {\n            styles: [\n                \"scaleX\",\n                \"scaleY\",\n                \"opacity\"\n            ],\n            animations: {\n                scaleX: \"spring\",\n                scaleY: \"spring\",\n                opacity: {\n                    type: \"tween\",\n                    duration: 250\n                }\n            }\n        }\n    });\n    /**\n     * Creates the file view\n     */ var create$4 = function create(_ref2) {\n        var root = _ref2.root, props = _ref2.props;\n        // copy Buttons object\n        var LocalButtons = Object.keys(Buttons).reduce(function(prev, curr) {\n            prev[curr] = Object.assign({}, Buttons[curr]);\n            return prev;\n        }, {});\n        var id = props.id;\n        // allow reverting upload\n        var allowRevert = root.query(\"GET_ALLOW_REVERT\");\n        // allow remove file\n        var allowRemove = root.query(\"GET_ALLOW_REMOVE\");\n        // allow processing upload\n        var allowProcess = root.query(\"GET_ALLOW_PROCESS\");\n        // is instant uploading, need this to determine the icon of the undo button\n        var instantUpload = root.query(\"GET_INSTANT_UPLOAD\");\n        // is async set up\n        var isAsync = root.query(\"IS_ASYNC\");\n        // should align remove item buttons\n        var alignRemoveItemButton = root.query(\"GET_STYLE_BUTTON_REMOVE_ITEM_ALIGN\");\n        // enabled buttons array\n        var buttonFilter;\n        if (isAsync) {\n            if (allowProcess && !allowRevert) // only remove revert button\n            buttonFilter = function buttonFilter(key) {\n                return !/RevertItemProcessing/.test(key);\n            };\n            else if (!allowProcess && allowRevert) // only remove process button\n            buttonFilter = function buttonFilter(key) {\n                return !/ProcessItem|RetryItemProcessing|AbortItemProcessing/.test(key);\n            };\n            else if (!allowProcess && !allowRevert) // remove all process buttons\n            buttonFilter = function buttonFilter(key) {\n                return !/Process/.test(key);\n            };\n        } else // no process controls available\n        buttonFilter = function buttonFilter(key) {\n            return !/Process/.test(key);\n        };\n        var enabledButtons = buttonFilter ? ButtonKeys.filter(buttonFilter) : ButtonKeys.concat();\n        // update icon and label for revert button when instant uploading\n        if (instantUpload && allowRevert) {\n            LocalButtons[\"RevertItemProcessing\"].label = \"GET_LABEL_BUTTON_REMOVE_ITEM\";\n            LocalButtons[\"RevertItemProcessing\"].icon = \"GET_ICON_REMOVE\";\n        }\n        // remove last button (revert) if not allowed\n        if (isAsync && !allowRevert) {\n            var map = StyleMap[\"DID_COMPLETE_ITEM_PROCESSING\"];\n            map.info.translateX = calculateFileHorizontalCenterOffset;\n            map.info.translateY = calculateFileVerticalCenterOffset;\n            map.status.translateY = calculateFileVerticalCenterOffset;\n            map.processingCompleteIndicator = {\n                opacity: 1,\n                scaleX: 1,\n                scaleY: 1\n            };\n        }\n        // should align center\n        if (isAsync && !allowProcess) {\n            [\n                \"DID_START_ITEM_PROCESSING\",\n                \"DID_REQUEST_ITEM_PROCESSING\",\n                \"DID_UPDATE_ITEM_PROCESS_PROGRESS\",\n                \"DID_THROW_ITEM_PROCESSING_ERROR\"\n            ].forEach(function(key) {\n                StyleMap[key].status.translateY = calculateFileVerticalCenterOffset;\n            });\n            StyleMap[\"DID_THROW_ITEM_PROCESSING_ERROR\"].status.translateX = calculateButtonWidth;\n        }\n        // move remove button to right\n        if (alignRemoveItemButton && allowRevert) {\n            LocalButtons[\"RevertItemProcessing\"].align = \"BUTTON_REMOVE_ITEM_POSITION\";\n            var _map = StyleMap[\"DID_COMPLETE_ITEM_PROCESSING\"];\n            _map.info.translateX = calculateFileInfoOffset;\n            _map.status.translateY = calculateFileVerticalCenterOffset;\n            _map.processingCompleteIndicator = {\n                opacity: 1,\n                scaleX: 1,\n                scaleY: 1\n            };\n        }\n        // show/hide RemoveItem button\n        if (!allowRemove) LocalButtons[\"RemoveItem\"].disabled = true;\n        // create the button views\n        forin(LocalButtons, function(key, definition) {\n            // create button\n            var buttonView = root.createChildView(fileActionButton, {\n                label: root.query(definition.label),\n                icon: root.query(definition.icon),\n                opacity: 0\n            });\n            // should be appended?\n            if (enabledButtons.includes(key)) root.appendChildView(buttonView);\n            // toggle\n            if (definition.disabled) {\n                buttonView.element.setAttribute(\"disabled\", \"disabled\");\n                buttonView.element.setAttribute(\"hidden\", \"hidden\");\n            }\n            // add position attribute\n            buttonView.element.dataset.align = root.query(\"GET_STYLE_\" + definition.align);\n            // add class\n            buttonView.element.classList.add(definition.className);\n            // handle interactions\n            buttonView.on(\"click\", function(e) {\n                e.stopPropagation();\n                if (definition.disabled) return;\n                root.dispatch(definition.action, {\n                    query: id\n                });\n            });\n            // set reference\n            root.ref[\"button\" + key] = buttonView;\n        });\n        // checkmark\n        root.ref.processingCompleteIndicator = root.appendChildView(root.createChildView(processingCompleteIndicatorView));\n        root.ref.processingCompleteIndicator.element.dataset.align = root.query(\"GET_STYLE_BUTTON_PROCESS_ITEM_POSITION\");\n        // create file info view\n        root.ref.info = root.appendChildView(root.createChildView(fileInfo, {\n            id: id\n        }));\n        // create file status view\n        root.ref.status = root.appendChildView(root.createChildView(fileStatus, {\n            id: id\n        }));\n        // add progress indicators\n        var loadIndicatorView = root.appendChildView(root.createChildView(progressIndicator, {\n            opacity: 0,\n            align: root.query(\"GET_STYLE_LOAD_INDICATOR_POSITION\")\n        }));\n        loadIndicatorView.element.classList.add(\"filepond--load-indicator\");\n        root.ref.loadProgressIndicator = loadIndicatorView;\n        var progressIndicatorView = root.appendChildView(root.createChildView(progressIndicator, {\n            opacity: 0,\n            align: root.query(\"GET_STYLE_PROGRESS_INDICATOR_POSITION\")\n        }));\n        progressIndicatorView.element.classList.add(\"filepond--process-indicator\");\n        root.ref.processProgressIndicator = progressIndicatorView;\n        // current active styles\n        root.ref.activeStyles = [];\n    };\n    var write$2 = function write(_ref3) {\n        var root = _ref3.root, actions = _ref3.actions, props = _ref3.props;\n        // route actions\n        route({\n            root: root,\n            actions: actions,\n            props: props\n        });\n        // select last state change action\n        var action = actions.concat().filter(function(action) {\n            return /^DID_/.test(action.type);\n        }).reverse().find(function(action) {\n            return StyleMap[action.type];\n        });\n        // a new action happened, let's get the matching styles\n        if (action) {\n            // define new active styles\n            root.ref.activeStyles = [];\n            var stylesToApply = StyleMap[action.type];\n            forin(DefaultStyle, function(name, defaultStyles) {\n                // get reference to control\n                var control = root.ref[name];\n                // loop over all styles for this control\n                forin(defaultStyles, function(key, defaultValue) {\n                    var value = stylesToApply[name] && typeof stylesToApply[name][key] !== \"undefined\" ? stylesToApply[name][key] : defaultValue;\n                    root.ref.activeStyles.push({\n                        control: control,\n                        key: key,\n                        value: value\n                    });\n                });\n            });\n        }\n        // apply active styles to element\n        root.ref.activeStyles.forEach(function(_ref4) {\n            var control = _ref4.control, key = _ref4.key, value = _ref4.value;\n            control[key] = typeof value === \"function\" ? value(root) : value;\n        });\n    };\n    var route = createRoute({\n        DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING: function DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING(_ref5) {\n            var root = _ref5.root, action = _ref5.action;\n            root.ref.buttonAbortItemProcessing.label = action.value;\n        },\n        DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD: function DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD(_ref6) {\n            var root = _ref6.root, action = _ref6.action;\n            root.ref.buttonAbortItemLoad.label = action.value;\n        },\n        DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL: function DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL(_ref7) {\n            var root = _ref7.root, action = _ref7.action;\n            root.ref.buttonAbortItemRemoval.label = action.value;\n        },\n        DID_REQUEST_ITEM_PROCESSING: function DID_REQUEST_ITEM_PROCESSING(_ref8) {\n            var root = _ref8.root;\n            root.ref.processProgressIndicator.spin = true;\n            root.ref.processProgressIndicator.progress = 0;\n        },\n        DID_START_ITEM_LOAD: function DID_START_ITEM_LOAD(_ref9) {\n            var root = _ref9.root;\n            root.ref.loadProgressIndicator.spin = true;\n            root.ref.loadProgressIndicator.progress = 0;\n        },\n        DID_START_ITEM_REMOVE: function DID_START_ITEM_REMOVE(_ref10) {\n            var root = _ref10.root;\n            root.ref.processProgressIndicator.spin = true;\n            root.ref.processProgressIndicator.progress = 0;\n        },\n        DID_UPDATE_ITEM_LOAD_PROGRESS: function DID_UPDATE_ITEM_LOAD_PROGRESS(_ref11) {\n            var root = _ref11.root, action = _ref11.action;\n            root.ref.loadProgressIndicator.spin = false;\n            root.ref.loadProgressIndicator.progress = action.progress;\n        },\n        DID_UPDATE_ITEM_PROCESS_PROGRESS: function DID_UPDATE_ITEM_PROCESS_PROGRESS(_ref12) {\n            var root = _ref12.root, action = _ref12.action;\n            root.ref.processProgressIndicator.spin = false;\n            root.ref.processProgressIndicator.progress = action.progress;\n        }\n    });\n    var file = createView({\n        create: create$4,\n        write: write$2,\n        didCreateView: function didCreateView(root) {\n            applyFilters(\"CREATE_VIEW\", Object.assign({}, root, {\n                view: root\n            }));\n        },\n        name: \"file\"\n    });\n    /**\n     * Creates the file view\n     */ var create$5 = function create(_ref) {\n        var root = _ref.root, props = _ref.props;\n        // filename\n        root.ref.fileName = createElement$1(\"legend\");\n        root.appendChild(root.ref.fileName);\n        // file appended\n        root.ref.file = root.appendChildView(root.createChildView(file, {\n            id: props.id\n        }));\n        // data has moved to data.js\n        root.ref.data = false;\n    };\n    /**\n     * Data storage\n     */ var didLoadItem = function didLoadItem(_ref2) {\n        var root = _ref2.root, props = _ref2.props;\n        // updates the legend of the fieldset so screenreaders can better group buttons\n        text(root.ref.fileName, formatFilename(root.query(\"GET_ITEM_NAME\", props.id)));\n    };\n    var fileWrapper = createView({\n        create: create$5,\n        ignoreRect: true,\n        write: createRoute({\n            DID_LOAD_ITEM: didLoadItem\n        }),\n        didCreateView: function didCreateView(root) {\n            applyFilters(\"CREATE_VIEW\", Object.assign({}, root, {\n                view: root\n            }));\n        },\n        tag: \"fieldset\",\n        name: \"file-wrapper\"\n    });\n    var PANEL_SPRING_PROPS = {\n        type: \"spring\",\n        damping: 0.6,\n        mass: 7\n    };\n    var create$6 = function create(_ref) {\n        var root = _ref.root, props = _ref.props;\n        [\n            {\n                name: \"top\"\n            },\n            {\n                name: \"center\",\n                props: {\n                    translateY: null,\n                    scaleY: null\n                },\n                mixins: {\n                    animations: {\n                        scaleY: PANEL_SPRING_PROPS\n                    },\n                    styles: [\n                        \"translateY\",\n                        \"scaleY\"\n                    ]\n                }\n            },\n            {\n                name: \"bottom\",\n                props: {\n                    translateY: null\n                },\n                mixins: {\n                    animations: {\n                        translateY: PANEL_SPRING_PROPS\n                    },\n                    styles: [\n                        \"translateY\"\n                    ]\n                }\n            }\n        ].forEach(function(section) {\n            createSection(root, section, props.name);\n        });\n        root.element.classList.add(\"filepond--\" + props.name);\n        root.ref.scalable = null;\n    };\n    var createSection = function createSection(root, section, className) {\n        var viewConstructor = createView({\n            name: \"panel-\" + section.name + \" filepond--\" + className,\n            mixins: section.mixins,\n            ignoreRectUpdate: true\n        });\n        var view = root.createChildView(viewConstructor, section.props);\n        root.ref[section.name] = root.appendChildView(view);\n    };\n    var write$3 = function write(_ref2) {\n        var root = _ref2.root, props = _ref2.props;\n        // update scalable state\n        if (root.ref.scalable === null || props.scalable !== root.ref.scalable) {\n            root.ref.scalable = isBoolean(props.scalable) ? props.scalable : true;\n            root.element.dataset.scalable = root.ref.scalable;\n        }\n        // no height, can't set\n        if (!props.height) return;\n        // get child rects\n        var topRect = root.ref.top.rect.element;\n        var bottomRect = root.ref.bottom.rect.element;\n        // make sure height never is smaller than bottom and top seciton heights combined (will probably never happen, but who knows)\n        var height = Math.max(topRect.height + bottomRect.height, props.height);\n        // offset center part\n        root.ref.center.translateY = topRect.height;\n        // scale center part\n        // use math ceil to prevent transparent lines because of rounding errors\n        root.ref.center.scaleY = (height - topRect.height - bottomRect.height) / 100;\n        // offset bottom part\n        root.ref.bottom.translateY = height - bottomRect.height;\n    };\n    var panel = createView({\n        name: \"panel\",\n        read: function read(_ref3) {\n            var root = _ref3.root, props = _ref3.props;\n            return props.heightCurrent = root.ref.bottom.translateY;\n        },\n        write: write$3,\n        create: create$6,\n        ignoreRect: true,\n        mixins: {\n            apis: [\n                \"height\",\n                \"heightCurrent\",\n                \"scalable\"\n            ]\n        }\n    });\n    var createDragHelper = function createDragHelper(items) {\n        var itemIds = items.map(function(item) {\n            return item.id;\n        });\n        var prevIndex = undefined;\n        return {\n            setIndex: function setIndex(index) {\n                prevIndex = index;\n            },\n            getIndex: function getIndex() {\n                return prevIndex;\n            },\n            getItemIndex: function getItemIndex(item) {\n                return itemIds.indexOf(item.id);\n            }\n        };\n    };\n    var ITEM_TRANSLATE_SPRING = {\n        type: \"spring\",\n        stiffness: 0.75,\n        damping: 0.45,\n        mass: 10\n    };\n    var ITEM_SCALE_SPRING = \"spring\";\n    var StateMap = {\n        DID_START_ITEM_LOAD: \"busy\",\n        DID_UPDATE_ITEM_LOAD_PROGRESS: \"loading\",\n        DID_THROW_ITEM_INVALID: \"load-invalid\",\n        DID_THROW_ITEM_LOAD_ERROR: \"load-error\",\n        DID_LOAD_ITEM: \"idle\",\n        DID_THROW_ITEM_REMOVE_ERROR: \"remove-error\",\n        DID_START_ITEM_REMOVE: \"busy\",\n        DID_START_ITEM_PROCESSING: \"busy processing\",\n        DID_REQUEST_ITEM_PROCESSING: \"busy processing\",\n        DID_UPDATE_ITEM_PROCESS_PROGRESS: \"processing\",\n        DID_COMPLETE_ITEM_PROCESSING: \"processing-complete\",\n        DID_THROW_ITEM_PROCESSING_ERROR: \"processing-error\",\n        DID_THROW_ITEM_PROCESSING_REVERT_ERROR: \"processing-revert-error\",\n        DID_ABORT_ITEM_PROCESSING: \"cancelled\",\n        DID_REVERT_ITEM_PROCESSING: \"idle\"\n    };\n    /**\n     * Creates the file view\n     */ var create$7 = function create(_ref) {\n        var root = _ref.root, props = _ref.props;\n        // select\n        root.ref.handleClick = function(e) {\n            return root.dispatch(\"DID_ACTIVATE_ITEM\", {\n                id: props.id\n            });\n        };\n        // set id\n        root.element.id = \"filepond--item-\" + props.id;\n        root.element.addEventListener(\"click\", root.ref.handleClick);\n        // file view\n        root.ref.container = root.appendChildView(root.createChildView(fileWrapper, {\n            id: props.id\n        }));\n        // file panel\n        root.ref.panel = root.appendChildView(root.createChildView(panel, {\n            name: \"item-panel\"\n        }));\n        // default start height\n        root.ref.panel.height = null;\n        // by default not marked for removal\n        props.markedForRemoval = false;\n        // if not allowed to reorder file items, exit here\n        if (!root.query(\"GET_ALLOW_REORDER\")) return;\n        // set to idle so shows grab cursor\n        root.element.dataset.dragState = \"idle\";\n        var grab = function grab(e) {\n            if (!e.isPrimary) return;\n            var removedActivateListener = false;\n            var origin = {\n                x: e.pageX,\n                y: e.pageY\n            };\n            props.dragOrigin = {\n                x: root.translateX,\n                y: root.translateY\n            };\n            props.dragCenter = {\n                x: e.offsetX,\n                y: e.offsetY\n            };\n            var dragState = createDragHelper(root.query(\"GET_ACTIVE_ITEMS\"));\n            root.dispatch(\"DID_GRAB_ITEM\", {\n                id: props.id,\n                dragState: dragState\n            });\n            var drag = function drag(e) {\n                if (!e.isPrimary) return;\n                e.stopPropagation();\n                e.preventDefault();\n                props.dragOffset = {\n                    x: e.pageX - origin.x,\n                    y: e.pageY - origin.y\n                };\n                // if dragged stop listening to clicks, will re-add when done dragging\n                var dist = props.dragOffset.x * props.dragOffset.x + props.dragOffset.y * props.dragOffset.y;\n                if (dist > 16 && !removedActivateListener) {\n                    removedActivateListener = true;\n                    root.element.removeEventListener(\"click\", root.ref.handleClick);\n                }\n                root.dispatch(\"DID_DRAG_ITEM\", {\n                    id: props.id,\n                    dragState: dragState\n                });\n            };\n            var drop = function drop(e) {\n                if (!e.isPrimary) return;\n                document.removeEventListener(\"pointermove\", drag);\n                document.removeEventListener(\"pointerup\", drop);\n                props.dragOffset = {\n                    x: e.pageX - origin.x,\n                    y: e.pageY - origin.y\n                };\n                root.dispatch(\"DID_DROP_ITEM\", {\n                    id: props.id,\n                    dragState: dragState\n                });\n                // start listening to clicks again\n                if (removedActivateListener) setTimeout(function() {\n                    return root.element.addEventListener(\"click\", root.ref.handleClick);\n                }, 0);\n            };\n            document.addEventListener(\"pointermove\", drag);\n            document.addEventListener(\"pointerup\", drop);\n        };\n        root.element.addEventListener(\"pointerdown\", grab);\n    };\n    var route$1 = createRoute({\n        DID_UPDATE_PANEL_HEIGHT: function DID_UPDATE_PANEL_HEIGHT(_ref2) {\n            var root = _ref2.root, action = _ref2.action;\n            root.height = action.height;\n        }\n    });\n    var write$4 = createRoute({\n        DID_GRAB_ITEM: function DID_GRAB_ITEM(_ref3) {\n            var root = _ref3.root, props = _ref3.props;\n            props.dragOrigin = {\n                x: root.translateX,\n                y: root.translateY\n            };\n        },\n        DID_DRAG_ITEM: function DID_DRAG_ITEM(_ref4) {\n            var root = _ref4.root;\n            root.element.dataset.dragState = \"drag\";\n        },\n        DID_DROP_ITEM: function DID_DROP_ITEM(_ref5) {\n            var root = _ref5.root, props = _ref5.props;\n            props.dragOffset = null;\n            props.dragOrigin = null;\n            root.element.dataset.dragState = \"drop\";\n        }\n    }, function(_ref6) {\n        var root = _ref6.root, actions = _ref6.actions, props = _ref6.props, shouldOptimize = _ref6.shouldOptimize;\n        if (root.element.dataset.dragState === \"drop\") {\n            if (root.scaleX <= 1) root.element.dataset.dragState = \"idle\";\n        }\n        // select last state change action\n        var action = actions.concat().filter(function(action) {\n            return /^DID_/.test(action.type);\n        }).reverse().find(function(action) {\n            return StateMap[action.type];\n        });\n        // no need to set same state twice\n        if (action && action.type !== props.currentState) {\n            // set current state\n            props.currentState = action.type;\n            // set state\n            root.element.dataset.filepondItemState = StateMap[props.currentState] || \"\";\n        }\n        // route actions\n        var aspectRatio = root.query(\"GET_ITEM_PANEL_ASPECT_RATIO\") || root.query(\"GET_PANEL_ASPECT_RATIO\");\n        if (!aspectRatio) {\n            route$1({\n                root: root,\n                actions: actions,\n                props: props\n            });\n            if (!root.height && root.ref.container.rect.element.height > 0) root.height = root.ref.container.rect.element.height;\n        } else if (!shouldOptimize) root.height = root.rect.element.width * aspectRatio;\n        // sync panel height with item height\n        if (shouldOptimize) root.ref.panel.height = null;\n        root.ref.panel.height = root.height;\n    });\n    var item = createView({\n        create: create$7,\n        write: write$4,\n        destroy: function destroy(_ref7) {\n            var root = _ref7.root, props = _ref7.props;\n            root.element.removeEventListener(\"click\", root.ref.handleClick);\n            root.dispatch(\"RELEASE_ITEM\", {\n                query: props.id\n            });\n        },\n        tag: \"li\",\n        name: \"item\",\n        mixins: {\n            apis: [\n                \"id\",\n                \"interactionMethod\",\n                \"markedForRemoval\",\n                \"spawnDate\",\n                \"dragCenter\",\n                \"dragOrigin\",\n                \"dragOffset\"\n            ],\n            styles: [\n                \"translateX\",\n                \"translateY\",\n                \"scaleX\",\n                \"scaleY\",\n                \"opacity\",\n                \"height\"\n            ],\n            animations: {\n                scaleX: ITEM_SCALE_SPRING,\n                scaleY: ITEM_SCALE_SPRING,\n                translateX: ITEM_TRANSLATE_SPRING,\n                translateY: ITEM_TRANSLATE_SPRING,\n                opacity: {\n                    type: \"tween\",\n                    duration: 150\n                }\n            }\n        }\n    });\n    var getItemsPerRow = function(horizontalSpace, itemWidth) {\n        // add one pixel leeway, when using percentages for item width total items can be 1.99 per row\n        return Math.max(1, Math.floor((horizontalSpace + 1) / itemWidth));\n    };\n    var getItemIndexByPosition = function getItemIndexByPosition(view, children, positionInView) {\n        if (!positionInView) return;\n        var horizontalSpace = view.rect.element.width;\n        // const children = view.childViews;\n        var l = children.length;\n        var last = null;\n        // -1, don't move items to accomodate (either add to top or bottom)\n        if (l === 0 || positionInView.top < children[0].rect.element.top) return -1;\n        // let's get the item width\n        var item = children[0];\n        var itemRect = item.rect.element;\n        var itemHorizontalMargin = itemRect.marginLeft + itemRect.marginRight;\n        var itemWidth = itemRect.width + itemHorizontalMargin;\n        var itemsPerRow = getItemsPerRow(horizontalSpace, itemWidth);\n        // stack\n        if (itemsPerRow === 1) {\n            for(var index = 0; index < l; index++){\n                var child = children[index];\n                var childMid = child.rect.outer.top + child.rect.element.height * 0.5;\n                if (positionInView.top < childMid) return index;\n            }\n            return l;\n        }\n        // grid\n        var itemVerticalMargin = itemRect.marginTop + itemRect.marginBottom;\n        var itemHeight = itemRect.height + itemVerticalMargin;\n        for(var _index = 0; _index < l; _index++){\n            var indexX = _index % itemsPerRow;\n            var indexY = Math.floor(_index / itemsPerRow);\n            var offsetX = indexX * itemWidth;\n            var offsetY = indexY * itemHeight;\n            var itemTop = offsetY - itemRect.marginTop;\n            var itemRight = offsetX + itemWidth;\n            var itemBottom = offsetY + itemHeight + itemRect.marginBottom;\n            if (positionInView.top < itemBottom && positionInView.top > itemTop) {\n                if (positionInView.left < itemRight) return _index;\n                else if (_index !== l - 1) last = _index;\n                else last = null;\n            }\n        }\n        if (last !== null) return last;\n        return l;\n    };\n    var dropAreaDimensions = {\n        height: 0,\n        width: 0,\n        get getHeight () {\n            return this.height;\n        },\n        set setHeight (val){\n            if (this.height === 0 || val === 0) this.height = val;\n        },\n        get getWidth () {\n            return this.width;\n        },\n        set setWidth (val){\n            if (this.width === 0 || val === 0) this.width = val;\n        },\n        setDimensions: function setDimensions(height, width) {\n            if (this.height === 0 || height === 0) this.height = height;\n            if (this.width === 0 || width === 0) this.width = width;\n        }\n    };\n    var create$8 = function create(_ref) {\n        var root = _ref.root;\n        // need to set role to list as otherwise it won't be read as a list by VoiceOver\n        attr(root.element, \"role\", \"list\");\n        root.ref.lastItemSpanwDate = Date.now();\n    };\n    /**\n     * Inserts a new item\n     * @param root\n     * @param action\n     */ var addItemView = function addItemView(_ref2) {\n        var root = _ref2.root, action = _ref2.action;\n        var id = action.id, index = action.index, interactionMethod = action.interactionMethod;\n        root.ref.addIndex = index;\n        var now = Date.now();\n        var spawnDate = now;\n        var opacity = 1;\n        if (interactionMethod !== InteractionMethod.NONE) {\n            opacity = 0;\n            var cooldown = root.query(\"GET_ITEM_INSERT_INTERVAL\");\n            var dist = now - root.ref.lastItemSpanwDate;\n            spawnDate = dist < cooldown ? now + (cooldown - dist) : now;\n        }\n        root.ref.lastItemSpanwDate = spawnDate;\n        root.appendChildView(root.createChildView(// view type\n        item, // props\n        {\n            spawnDate: spawnDate,\n            id: id,\n            opacity: opacity,\n            interactionMethod: interactionMethod\n        }), index);\n    };\n    var moveItem = function moveItem(item, x, y) {\n        var vx = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n        var vy = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\n        // set to null to remove animation while dragging\n        if (item.dragOffset) {\n            item.translateX = null;\n            item.translateY = null;\n            item.translateX = item.dragOrigin.x + item.dragOffset.x;\n            item.translateY = item.dragOrigin.y + item.dragOffset.y;\n            item.scaleX = 1.025;\n            item.scaleY = 1.025;\n        } else {\n            item.translateX = x;\n            item.translateY = y;\n            if (Date.now() > item.spawnDate) {\n                // reveal element\n                if (item.opacity === 0) introItemView(item, x, y, vx, vy);\n                // make sure is default scale every frame\n                item.scaleX = 1;\n                item.scaleY = 1;\n                item.opacity = 1;\n            }\n        }\n    };\n    var introItemView = function introItemView(item, x, y, vx, vy) {\n        if (item.interactionMethod === InteractionMethod.NONE) {\n            item.translateX = null;\n            item.translateX = x;\n            item.translateY = null;\n            item.translateY = y;\n        } else if (item.interactionMethod === InteractionMethod.DROP) {\n            item.translateX = null;\n            item.translateX = x - vx * 20;\n            item.translateY = null;\n            item.translateY = y - vy * 10;\n            item.scaleX = 0.8;\n            item.scaleY = 0.8;\n        } else if (item.interactionMethod === InteractionMethod.BROWSE) {\n            item.translateY = null;\n            item.translateY = y - 30;\n        } else if (item.interactionMethod === InteractionMethod.API) {\n            item.translateX = null;\n            item.translateX = x - 30;\n            item.translateY = null;\n        }\n    };\n    /**\n     * Removes an existing item\n     * @param root\n     * @param action\n     */ var removeItemView = function removeItemView(_ref3) {\n        var root = _ref3.root, action = _ref3.action;\n        var id = action.id;\n        // get the view matching the given id\n        var view = root.childViews.find(function(child) {\n            return child.id === id;\n        });\n        // if no view found, exit\n        if (!view) return;\n        // animate view out of view\n        view.scaleX = 0.9;\n        view.scaleY = 0.9;\n        view.opacity = 0;\n        // mark for removal\n        view.markedForRemoval = true;\n    };\n    var getItemHeight = function getItemHeight(child) {\n        return child.rect.element.height + child.rect.element.marginBottom * 0.5 + child.rect.element.marginTop * 0.5;\n    };\n    var getItemWidth = function getItemWidth(child) {\n        return child.rect.element.width + child.rect.element.marginLeft * 0.5 + child.rect.element.marginRight * 0.5;\n    };\n    var dragItem = function dragItem(_ref4) {\n        var root = _ref4.root, action = _ref4.action;\n        var id = action.id, dragState = action.dragState;\n        // reference to item\n        var item = root.query(\"GET_ITEM\", {\n            id: id\n        });\n        // get the view matching the given id\n        var view = root.childViews.find(function(child) {\n            return child.id === id;\n        });\n        var numItems = root.childViews.length;\n        var oldIndex = dragState.getItemIndex(item);\n        // if no view found, exit\n        if (!view) return;\n        var dragPosition = {\n            x: view.dragOrigin.x + view.dragOffset.x + view.dragCenter.x,\n            y: view.dragOrigin.y + view.dragOffset.y + view.dragCenter.y\n        };\n        // get drag area dimensions\n        var dragHeight = getItemHeight(view);\n        var dragWidth = getItemWidth(view);\n        // get rows and columns (There will always be at least one row and one column if a file is present)\n        var cols = Math.floor(root.rect.outer.width / dragWidth);\n        if (cols > numItems) cols = numItems;\n        // rows are used to find when we have left the preview area bounding box\n        var rows = Math.floor(numItems / cols + 1);\n        dropAreaDimensions.setHeight = dragHeight * rows;\n        dropAreaDimensions.setWidth = dragWidth * cols;\n        // get new index of dragged item\n        var location1 = {\n            y: Math.floor(dragPosition.y / dragHeight),\n            x: Math.floor(dragPosition.x / dragWidth),\n            getGridIndex: function getGridIndex() {\n                if (dragPosition.y > dropAreaDimensions.getHeight || dragPosition.y < 0 || dragPosition.x > dropAreaDimensions.getWidth || dragPosition.x < 0) return oldIndex;\n                return this.y * cols + this.x;\n            },\n            getColIndex: function getColIndex() {\n                var items = root.query(\"GET_ACTIVE_ITEMS\");\n                var visibleChildren = root.childViews.filter(function(child) {\n                    return child.rect.element.height;\n                });\n                var children = items.map(function(item) {\n                    return visibleChildren.find(function(childView) {\n                        return childView.id === item.id;\n                    });\n                });\n                var currentIndex = children.findIndex(function(child) {\n                    return child === view;\n                });\n                var dragHeight = getItemHeight(view);\n                var l = children.length;\n                var idx = l;\n                var childHeight = 0;\n                var childBottom = 0;\n                var childTop = 0;\n                for(var i = 0; i < l; i++){\n                    childHeight = getItemHeight(children[i]);\n                    childTop = childBottom;\n                    childBottom = childTop + childHeight;\n                    if (dragPosition.y < childBottom) {\n                        if (currentIndex > i) {\n                            if (dragPosition.y < childTop + dragHeight) {\n                                idx = i;\n                                break;\n                            }\n                            continue;\n                        }\n                        idx = i;\n                        break;\n                    }\n                }\n                return idx;\n            }\n        };\n        // get new index\n        var index = cols > 1 ? location1.getGridIndex() : location1.getColIndex();\n        root.dispatch(\"MOVE_ITEM\", {\n            query: view,\n            index: index\n        });\n        // if the index of the item changed, dispatch reorder action\n        var currentIndex = dragState.getIndex();\n        if (currentIndex === undefined || currentIndex !== index) {\n            dragState.setIndex(index);\n            if (currentIndex === undefined) return;\n            root.dispatch(\"DID_REORDER_ITEMS\", {\n                items: root.query(\"GET_ACTIVE_ITEMS\"),\n                origin: oldIndex,\n                target: index\n            });\n        }\n    };\n    /**\n     * Setup action routes\n     */ var route$2 = createRoute({\n        DID_ADD_ITEM: addItemView,\n        DID_REMOVE_ITEM: removeItemView,\n        DID_DRAG_ITEM: dragItem\n    });\n    /**\n     * Write to view\n     * @param root\n     * @param actions\n     * @param props\n     */ var write$5 = function write(_ref5) {\n        var root = _ref5.root, props = _ref5.props, actions = _ref5.actions, shouldOptimize = _ref5.shouldOptimize;\n        // route actions\n        route$2({\n            root: root,\n            props: props,\n            actions: actions\n        });\n        var dragCoordinates = props.dragCoordinates;\n        // available space on horizontal axis\n        var horizontalSpace = root.rect.element.width;\n        // only draw children that have dimensions\n        var visibleChildren = root.childViews.filter(function(child) {\n            return child.rect.element.height;\n        });\n        // sort based on current active items\n        var children = root.query(\"GET_ACTIVE_ITEMS\").map(function(item) {\n            return visibleChildren.find(function(child) {\n                return child.id === item.id;\n            });\n        }).filter(function(item) {\n            return item;\n        });\n        // get index\n        var dragIndex = dragCoordinates ? getItemIndexByPosition(root, children, dragCoordinates) : null;\n        // add index is used to reserve the dropped/added item index till the actual item is rendered\n        var addIndex = root.ref.addIndex || null;\n        // add index no longer needed till possibly next draw\n        root.ref.addIndex = null;\n        var dragIndexOffset = 0;\n        var removeIndexOffset = 0;\n        var addIndexOffset = 0;\n        if (children.length === 0) return;\n        var childRect = children[0].rect.element;\n        var itemVerticalMargin = childRect.marginTop + childRect.marginBottom;\n        var itemHorizontalMargin = childRect.marginLeft + childRect.marginRight;\n        var itemWidth = childRect.width + itemHorizontalMargin;\n        var itemHeight = childRect.height + itemVerticalMargin;\n        var itemsPerRow = getItemsPerRow(horizontalSpace, itemWidth);\n        // stack\n        if (itemsPerRow === 1) {\n            var offsetY = 0;\n            var dragOffset = 0;\n            children.forEach(function(child, index) {\n                if (dragIndex) {\n                    var dist = index - dragIndex;\n                    if (dist === -2) dragOffset = -itemVerticalMargin * 0.25;\n                    else if (dist === -1) dragOffset = -itemVerticalMargin * 0.75;\n                    else if (dist === 0) dragOffset = itemVerticalMargin * 0.75;\n                    else if (dist === 1) dragOffset = itemVerticalMargin * 0.25;\n                    else dragOffset = 0;\n                }\n                if (shouldOptimize) {\n                    child.translateX = null;\n                    child.translateY = null;\n                }\n                if (!child.markedForRemoval) moveItem(child, 0, offsetY + dragOffset);\n                var itemHeight = child.rect.element.height + itemVerticalMargin;\n                var visualHeight = itemHeight * (child.markedForRemoval ? child.opacity : 1);\n                offsetY += visualHeight;\n            });\n        } else {\n            var prevX = 0;\n            var prevY = 0;\n            children.forEach(function(child, index) {\n                if (index === dragIndex) dragIndexOffset = 1;\n                if (index === addIndex) addIndexOffset += 1;\n                if (child.markedForRemoval && child.opacity < 0.5) removeIndexOffset -= 1;\n                var visualIndex = index + addIndexOffset + dragIndexOffset + removeIndexOffset;\n                var indexX = visualIndex % itemsPerRow;\n                var indexY = Math.floor(visualIndex / itemsPerRow);\n                var offsetX = indexX * itemWidth;\n                var offsetY = indexY * itemHeight;\n                var vectorX = Math.sign(offsetX - prevX);\n                var vectorY = Math.sign(offsetY - prevY);\n                prevX = offsetX;\n                prevY = offsetY;\n                if (child.markedForRemoval) return;\n                if (shouldOptimize) {\n                    child.translateX = null;\n                    child.translateY = null;\n                }\n                moveItem(child, offsetX, offsetY, vectorX, vectorY);\n            });\n        }\n    };\n    /**\n     * Filters actions that are meant specifically for a certain child of the list\n     * @param child\n     * @param actions\n     */ var filterSetItemActions = function filterSetItemActions(child, actions) {\n        return actions.filter(function(action) {\n            // if action has an id, filter out actions that don't have this child id\n            if (action.data && action.data.id) return child.id === action.data.id;\n            // allow all other actions\n            return true;\n        });\n    };\n    var list = createView({\n        create: create$8,\n        write: write$5,\n        tag: \"ul\",\n        name: \"list\",\n        didWriteView: function didWriteView(_ref6) {\n            var root = _ref6.root;\n            root.childViews.filter(function(view) {\n                return view.markedForRemoval && view.opacity === 0 && view.resting;\n            }).forEach(function(view) {\n                view._destroy();\n                root.removeChildView(view);\n            });\n        },\n        filterFrameActionsForChild: filterSetItemActions,\n        mixins: {\n            apis: [\n                \"dragCoordinates\"\n            ]\n        }\n    });\n    var create$9 = function create(_ref) {\n        var root = _ref.root, props = _ref.props;\n        root.ref.list = root.appendChildView(root.createChildView(list));\n        props.dragCoordinates = null;\n        props.overflowing = false;\n    };\n    var storeDragCoordinates = function storeDragCoordinates(_ref2) {\n        var root = _ref2.root, props = _ref2.props, action = _ref2.action;\n        if (!root.query(\"GET_ITEM_INSERT_LOCATION_FREEDOM\")) return;\n        props.dragCoordinates = {\n            left: action.position.scopeLeft - root.ref.list.rect.element.left,\n            top: action.position.scopeTop - (root.rect.outer.top + root.rect.element.marginTop + root.rect.element.scrollTop)\n        };\n    };\n    var clearDragCoordinates = function clearDragCoordinates(_ref3) {\n        var props = _ref3.props;\n        props.dragCoordinates = null;\n    };\n    var route$3 = createRoute({\n        DID_DRAG: storeDragCoordinates,\n        DID_END_DRAG: clearDragCoordinates\n    });\n    var write$6 = function write(_ref4) {\n        var root = _ref4.root, props = _ref4.props, actions = _ref4.actions;\n        // route actions\n        route$3({\n            root: root,\n            props: props,\n            actions: actions\n        });\n        // current drag position\n        root.ref.list.dragCoordinates = props.dragCoordinates;\n        // if currently overflowing but no longer received overflow\n        if (props.overflowing && !props.overflow) {\n            props.overflowing = false;\n            // reset overflow state\n            root.element.dataset.state = \"\";\n            root.height = null;\n        }\n        // if is not overflowing currently but does receive overflow value\n        if (props.overflow) {\n            var newHeight = Math.round(props.overflow);\n            if (newHeight !== root.height) {\n                props.overflowing = true;\n                root.element.dataset.state = \"overflow\";\n                root.height = newHeight;\n            }\n        }\n    };\n    var listScroller = createView({\n        create: create$9,\n        write: write$6,\n        name: \"list-scroller\",\n        mixins: {\n            apis: [\n                \"overflow\",\n                \"dragCoordinates\"\n            ],\n            styles: [\n                \"height\",\n                \"translateY\"\n            ],\n            animations: {\n                translateY: \"spring\"\n            }\n        }\n    });\n    var attrToggle = function attrToggle(element, name, state) {\n        var enabledValue = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : \"\";\n        if (state) attr(element, name, enabledValue);\n        else element.removeAttribute(name);\n    };\n    var resetFileInput = function resetFileInput(input) {\n        // no value, no need to reset\n        if (!input || input.value === \"\") return;\n        try {\n            // for modern browsers\n            input.value = \"\";\n        } catch (err) {}\n        // for IE10\n        if (input.value) {\n            // quickly append input to temp form and reset form\n            var form = createElement$1(\"form\");\n            var parentNode = input.parentNode;\n            var ref = input.nextSibling;\n            form.appendChild(input);\n            form.reset();\n            // re-inject input where it originally was\n            if (ref) parentNode.insertBefore(input, ref);\n            else parentNode.appendChild(input);\n        }\n    };\n    var create$a = function create(_ref) {\n        var root = _ref.root, props = _ref.props;\n        // set id so can be referenced from outside labels\n        root.element.id = \"filepond--browser-\" + props.id;\n        // set name of element (is removed when a value is set)\n        attr(root.element, \"name\", root.query(\"GET_NAME\"));\n        // we have to link this element to the status element\n        attr(root.element, \"aria-controls\", \"filepond--assistant-\" + props.id);\n        // set label, we use labelled by as otherwise the screenreader does not read the \"browse\" text in the label (as it has tabindex: 0)\n        attr(root.element, \"aria-labelledby\", \"filepond--drop-label-\" + props.id);\n        // set configurable props\n        setAcceptedFileTypes({\n            root: root,\n            action: {\n                value: root.query(\"GET_ACCEPTED_FILE_TYPES\")\n            }\n        });\n        toggleAllowMultiple({\n            root: root,\n            action: {\n                value: root.query(\"GET_ALLOW_MULTIPLE\")\n            }\n        });\n        toggleDirectoryFilter({\n            root: root,\n            action: {\n                value: root.query(\"GET_ALLOW_DIRECTORIES_ONLY\")\n            }\n        });\n        toggleDisabled({\n            root: root\n        });\n        toggleRequired({\n            root: root,\n            action: {\n                value: root.query(\"GET_REQUIRED\")\n            }\n        });\n        setCaptureMethod({\n            root: root,\n            action: {\n                value: root.query(\"GET_CAPTURE_METHOD\")\n            }\n        });\n        // handle changes to the input field\n        root.ref.handleChange = function(e) {\n            if (!root.element.value) return;\n            // extract files and move value of webkitRelativePath path to _relativePath\n            var files = Array.from(root.element.files).map(function(file) {\n                file._relativePath = file.webkitRelativePath;\n                return file;\n            });\n            // we add a little delay so the OS file select window can move out of the way before we add our file\n            setTimeout(function() {\n                // load files\n                props.onload(files);\n                // reset input, it's just for exposing a method to drop files, should not retain any state\n                resetFileInput(root.element);\n            }, 250);\n        };\n        root.element.addEventListener(\"change\", root.ref.handleChange);\n    };\n    var setAcceptedFileTypes = function setAcceptedFileTypes(_ref2) {\n        var root = _ref2.root, action = _ref2.action;\n        if (!root.query(\"GET_ALLOW_SYNC_ACCEPT_ATTRIBUTE\")) return;\n        attrToggle(root.element, \"accept\", !!action.value, action.value ? action.value.join(\",\") : \"\");\n    };\n    var toggleAllowMultiple = function toggleAllowMultiple(_ref3) {\n        var root = _ref3.root, action = _ref3.action;\n        attrToggle(root.element, \"multiple\", action.value);\n    };\n    var toggleDirectoryFilter = function toggleDirectoryFilter(_ref4) {\n        var root = _ref4.root, action = _ref4.action;\n        attrToggle(root.element, \"webkitdirectory\", action.value);\n    };\n    var toggleDisabled = function toggleDisabled(_ref5) {\n        var root = _ref5.root;\n        var isDisabled = root.query(\"GET_DISABLED\");\n        var doesAllowBrowse = root.query(\"GET_ALLOW_BROWSE\");\n        var disableField = isDisabled || !doesAllowBrowse;\n        attrToggle(root.element, \"disabled\", disableField);\n    };\n    var toggleRequired = function toggleRequired(_ref6) {\n        var root = _ref6.root, action = _ref6.action;\n        // want to remove required, always possible\n        if (!action.value) attrToggle(root.element, \"required\", false);\n        else if (root.query(\"GET_TOTAL_ITEMS\") === 0) attrToggle(root.element, \"required\", true);\n    };\n    var setCaptureMethod = function setCaptureMethod(_ref7) {\n        var root = _ref7.root, action = _ref7.action;\n        attrToggle(root.element, \"capture\", !!action.value, action.value === true ? \"\" : action.value);\n    };\n    var updateRequiredStatus = function updateRequiredStatus(_ref8) {\n        var root = _ref8.root;\n        var element = root.element;\n        // always remove the required attribute when more than zero items\n        if (root.query(\"GET_TOTAL_ITEMS\") > 0) {\n            attrToggle(element, \"required\", false);\n            attrToggle(element, \"name\", false);\n        } else {\n            // add name attribute\n            attrToggle(element, \"name\", true, root.query(\"GET_NAME\"));\n            // remove any validation messages\n            var shouldCheckValidity = root.query(\"GET_CHECK_VALIDITY\");\n            if (shouldCheckValidity) element.setCustomValidity(\"\");\n            // we only add required if the field has been deemed required\n            if (root.query(\"GET_REQUIRED\")) attrToggle(element, \"required\", true);\n        }\n    };\n    var updateFieldValidityStatus = function updateFieldValidityStatus(_ref9) {\n        var root = _ref9.root;\n        var shouldCheckValidity = root.query(\"GET_CHECK_VALIDITY\");\n        if (!shouldCheckValidity) return;\n        root.element.setCustomValidity(root.query(\"GET_LABEL_INVALID_FIELD\"));\n    };\n    var browser = createView({\n        tag: \"input\",\n        name: \"browser\",\n        ignoreRect: true,\n        ignoreRectUpdate: true,\n        attributes: {\n            type: \"file\"\n        },\n        create: create$a,\n        destroy: function destroy(_ref10) {\n            var root = _ref10.root;\n            root.element.removeEventListener(\"change\", root.ref.handleChange);\n        },\n        write: createRoute({\n            DID_LOAD_ITEM: updateRequiredStatus,\n            DID_REMOVE_ITEM: updateRequiredStatus,\n            DID_THROW_ITEM_INVALID: updateFieldValidityStatus,\n            DID_SET_DISABLED: toggleDisabled,\n            DID_SET_ALLOW_BROWSE: toggleDisabled,\n            DID_SET_ALLOW_DIRECTORIES_ONLY: toggleDirectoryFilter,\n            DID_SET_ALLOW_MULTIPLE: toggleAllowMultiple,\n            DID_SET_ACCEPTED_FILE_TYPES: setAcceptedFileTypes,\n            DID_SET_CAPTURE_METHOD: setCaptureMethod,\n            DID_SET_REQUIRED: toggleRequired\n        })\n    });\n    var Key = {\n        ENTER: 13,\n        SPACE: 32\n    };\n    var create$b = function create(_ref) {\n        var root = _ref.root, props = _ref.props;\n        // create the label and link it to the file browser\n        var label = createElement$1(\"label\");\n        attr(label, \"for\", \"filepond--browser-\" + props.id);\n        // use for labeling file input (aria-labelledby on file input)\n        attr(label, \"id\", \"filepond--drop-label-\" + props.id);\n        // hide the label for screenreaders, the input element will read the contents of the label when it's focussed. If we don't set aria-hidden the screenreader will also navigate the contents of the label separately from the input.\n        attr(label, \"aria-hidden\", \"true\");\n        // handle keys\n        root.ref.handleKeyDown = function(e) {\n            var isActivationKey = e.keyCode === Key.ENTER || e.keyCode === Key.SPACE;\n            if (!isActivationKey) return;\n            // stops from triggering the element a second time\n            e.preventDefault();\n            // click link (will then in turn activate file input)\n            root.ref.label.click();\n        };\n        root.ref.handleClick = function(e) {\n            var isLabelClick = e.target === label || label.contains(e.target);\n            // don't want to click twice\n            if (isLabelClick) return;\n            // click link (will then in turn activate file input)\n            root.ref.label.click();\n        };\n        // attach events\n        label.addEventListener(\"keydown\", root.ref.handleKeyDown);\n        root.element.addEventListener(\"click\", root.ref.handleClick);\n        // update\n        updateLabelValue(label, props.caption);\n        // add!\n        root.appendChild(label);\n        root.ref.label = label;\n    };\n    var updateLabelValue = function updateLabelValue(label, value) {\n        label.innerHTML = value;\n        var clickable = label.querySelector(\".filepond--label-action\");\n        if (clickable) attr(clickable, \"tabindex\", \"0\");\n        return value;\n    };\n    var dropLabel = createView({\n        name: \"drop-label\",\n        ignoreRect: true,\n        create: create$b,\n        destroy: function destroy(_ref2) {\n            var root = _ref2.root;\n            root.ref.label.addEventListener(\"keydown\", root.ref.handleKeyDown);\n            root.element.removeEventListener(\"click\", root.ref.handleClick);\n        },\n        write: createRoute({\n            DID_SET_LABEL_IDLE: function DID_SET_LABEL_IDLE(_ref3) {\n                var root = _ref3.root, action = _ref3.action;\n                updateLabelValue(root.ref.label, action.value);\n            }\n        }),\n        mixins: {\n            styles: [\n                \"opacity\",\n                \"translateX\",\n                \"translateY\"\n            ],\n            animations: {\n                opacity: {\n                    type: \"tween\",\n                    duration: 150\n                },\n                translateX: \"spring\",\n                translateY: \"spring\"\n            }\n        }\n    });\n    var blob = createView({\n        name: \"drip-blob\",\n        ignoreRect: true,\n        mixins: {\n            styles: [\n                \"translateX\",\n                \"translateY\",\n                \"scaleX\",\n                \"scaleY\",\n                \"opacity\"\n            ],\n            animations: {\n                scaleX: \"spring\",\n                scaleY: \"spring\",\n                translateX: \"spring\",\n                translateY: \"spring\",\n                opacity: {\n                    type: \"tween\",\n                    duration: 250\n                }\n            }\n        }\n    });\n    var addBlob = function addBlob(_ref) {\n        var root = _ref.root;\n        var centerX = root.rect.element.width * 0.5;\n        var centerY = root.rect.element.height * 0.5;\n        root.ref.blob = root.appendChildView(root.createChildView(blob, {\n            opacity: 0,\n            scaleX: 2.5,\n            scaleY: 2.5,\n            translateX: centerX,\n            translateY: centerY\n        }));\n    };\n    var moveBlob = function moveBlob(_ref2) {\n        var root = _ref2.root, action = _ref2.action;\n        if (!root.ref.blob) {\n            addBlob({\n                root: root\n            });\n            return;\n        }\n        root.ref.blob.translateX = action.position.scopeLeft;\n        root.ref.blob.translateY = action.position.scopeTop;\n        root.ref.blob.scaleX = 1;\n        root.ref.blob.scaleY = 1;\n        root.ref.blob.opacity = 1;\n    };\n    var hideBlob = function hideBlob(_ref3) {\n        var root = _ref3.root;\n        if (!root.ref.blob) return;\n        root.ref.blob.opacity = 0;\n    };\n    var explodeBlob = function explodeBlob(_ref4) {\n        var root = _ref4.root;\n        if (!root.ref.blob) return;\n        root.ref.blob.scaleX = 2.5;\n        root.ref.blob.scaleY = 2.5;\n        root.ref.blob.opacity = 0;\n    };\n    var write$7 = function write(_ref5) {\n        var root = _ref5.root, props = _ref5.props, actions = _ref5.actions;\n        route$4({\n            root: root,\n            props: props,\n            actions: actions\n        });\n        var blob = root.ref.blob;\n        if (actions.length === 0 && blob && blob.opacity === 0) {\n            root.removeChildView(blob);\n            root.ref.blob = null;\n        }\n    };\n    var route$4 = createRoute({\n        DID_DRAG: moveBlob,\n        DID_DROP: explodeBlob,\n        DID_END_DRAG: hideBlob\n    });\n    var drip = createView({\n        ignoreRect: true,\n        ignoreRectUpdate: true,\n        name: \"drip\",\n        write: write$7\n    });\n    var setInputFiles = function setInputFiles(element, files) {\n        try {\n            // Create a DataTransfer instance and add a newly created file\n            var dataTransfer = new DataTransfer();\n            files.forEach(function(file) {\n                if (file instanceof File) dataTransfer.items.add(file);\n                else dataTransfer.items.add(new File([\n                    file\n                ], file.name, {\n                    type: file.type\n                }));\n            });\n            // Assign the DataTransfer files list to the file input\n            element.files = dataTransfer.files;\n        } catch (err) {\n            return false;\n        }\n        return true;\n    };\n    var create$c = function create(_ref) {\n        var root = _ref.root;\n        return root.ref.fields = {};\n    };\n    var getField = function getField(root, id) {\n        return root.ref.fields[id];\n    };\n    var syncFieldPositionsWithItems = function syncFieldPositionsWithItems(root) {\n        root.query(\"GET_ACTIVE_ITEMS\").forEach(function(item) {\n            if (!root.ref.fields[item.id]) return;\n            root.element.appendChild(root.ref.fields[item.id]);\n        });\n    };\n    var didReorderItems = function didReorderItems(_ref2) {\n        var root = _ref2.root;\n        return syncFieldPositionsWithItems(root);\n    };\n    var didAddItem = function didAddItem(_ref3) {\n        var root = _ref3.root, action = _ref3.action;\n        var fileItem = root.query(\"GET_ITEM\", action.id);\n        var isLocalFile = fileItem.origin === FileOrigin.LOCAL;\n        var shouldUseFileInput = !isLocalFile && root.query(\"SHOULD_UPDATE_FILE_INPUT\");\n        var dataContainer = createElement$1(\"input\");\n        dataContainer.type = shouldUseFileInput ? \"file\" : \"hidden\";\n        dataContainer.name = root.query(\"GET_NAME\");\n        dataContainer.disabled = root.query(\"GET_DISABLED\");\n        root.ref.fields[action.id] = dataContainer;\n        syncFieldPositionsWithItems(root);\n    };\n    var didLoadItem$1 = function didLoadItem(_ref4) {\n        var root = _ref4.root, action = _ref4.action;\n        var field = getField(root, action.id);\n        if (!field) return;\n        // store server ref in hidden input\n        if (action.serverFileReference !== null) field.value = action.serverFileReference;\n        // store file item in file input\n        if (!root.query(\"SHOULD_UPDATE_FILE_INPUT\")) return;\n        var fileItem = root.query(\"GET_ITEM\", action.id);\n        setInputFiles(field, [\n            fileItem.file\n        ]);\n    };\n    var didPrepareOutput = function didPrepareOutput(_ref5) {\n        var root = _ref5.root, action = _ref5.action;\n        // this timeout pushes the handler after 'load'\n        if (!root.query(\"SHOULD_UPDATE_FILE_INPUT\")) return;\n        setTimeout(function() {\n            var field = getField(root, action.id);\n            if (!field) return;\n            setInputFiles(field, [\n                action.file\n            ]);\n        }, 0);\n    };\n    var didSetDisabled = function didSetDisabled(_ref6) {\n        var root = _ref6.root;\n        root.element.disabled = root.query(\"GET_DISABLED\");\n    };\n    var didRemoveItem = function didRemoveItem(_ref7) {\n        var root = _ref7.root, action = _ref7.action;\n        var field = getField(root, action.id);\n        if (!field) return;\n        if (field.parentNode) field.parentNode.removeChild(field);\n        delete root.ref.fields[action.id];\n    };\n    // only runs for server files. will refuse to update the value if the field\n    // is a file field\n    var didDefineValue = function didDefineValue(_ref8) {\n        var root = _ref8.root, action = _ref8.action;\n        var field = getField(root, action.id);\n        if (!field) return;\n        if (action.value === null) // clear field value\n        field.removeAttribute(\"value\");\n        else // set field value\n        if (field.type != \"file\") field.value = action.value;\n        syncFieldPositionsWithItems(root);\n    };\n    var write$8 = createRoute({\n        DID_SET_DISABLED: didSetDisabled,\n        DID_ADD_ITEM: didAddItem,\n        DID_LOAD_ITEM: didLoadItem$1,\n        DID_REMOVE_ITEM: didRemoveItem,\n        DID_DEFINE_VALUE: didDefineValue,\n        DID_PREPARE_OUTPUT: didPrepareOutput,\n        DID_REORDER_ITEMS: didReorderItems,\n        DID_SORT_ITEMS: didReorderItems\n    });\n    var data = createView({\n        tag: \"fieldset\",\n        name: \"data\",\n        create: create$c,\n        write: write$8,\n        ignoreRect: true\n    });\n    var getRootNode = function getRootNode(element) {\n        return \"getRootNode\" in element ? element.getRootNode() : document;\n    };\n    var images = [\n        \"jpg\",\n        \"jpeg\",\n        \"png\",\n        \"gif\",\n        \"bmp\",\n        \"webp\",\n        \"svg\",\n        \"tiff\"\n    ];\n    var text$1 = [\n        \"css\",\n        \"csv\",\n        \"html\",\n        \"txt\"\n    ];\n    var map = {\n        zip: \"zip|compressed\",\n        epub: \"application/epub+zip\"\n    };\n    var guesstimateMimeType = function guesstimateMimeType() {\n        var extension = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n        extension = extension.toLowerCase();\n        if (images.includes(extension)) return \"image/\" + (extension === \"jpg\" ? \"jpeg\" : extension === \"svg\" ? \"svg+xml\" : extension);\n        if (text$1.includes(extension)) return \"text/\" + extension;\n        return map[extension] || \"\";\n    };\n    var requestDataTransferItems = function requestDataTransferItems(dataTransfer) {\n        return new Promise(function(resolve, reject) {\n            // try to get links from transfer, if found we'll exit immediately (unless a file is in the dataTransfer as well, this is because Firefox could represent the file as a URL and a file object at the same time)\n            var links = getLinks(dataTransfer);\n            if (links.length && !hasFiles(dataTransfer)) return resolve(links);\n            // try to get files from the transfer\n            getFiles(dataTransfer).then(resolve);\n        });\n    };\n    /**\n     * Test if datatransfer has files\n     */ var hasFiles = function hasFiles(dataTransfer) {\n        if (dataTransfer.files) return dataTransfer.files.length > 0;\n        return false;\n    };\n    /**\n     * Extracts files from a DataTransfer object\n     */ var getFiles = function getFiles(dataTransfer) {\n        return new Promise(function(resolve, reject) {\n            // get the transfer items as promises\n            var promisedFiles = (dataTransfer.items ? Array.from(dataTransfer.items) : [])// only keep file system items (files and directories)\n            .filter(function(item) {\n                return isFileSystemItem(item);\n            })// map each item to promise\n            .map(function(item) {\n                return getFilesFromItem(item);\n            });\n            // if is empty, see if we can extract some info from the files property as a fallback\n            if (!promisedFiles.length) {\n                // TODO: test for directories (should not be allowed)\n                // Use FileReader, problem is that the files property gets lost in the process\n                resolve(dataTransfer.files ? Array.from(dataTransfer.files) : []);\n                return;\n            }\n            // done!\n            Promise.all(promisedFiles).then(function(returnedFileGroups) {\n                // flatten groups\n                var files = [];\n                returnedFileGroups.forEach(function(group) {\n                    files.push.apply(files, group);\n                });\n                // done (filter out empty files)!\n                resolve(files.filter(function(file) {\n                    return file;\n                }).map(function(file) {\n                    if (!file._relativePath) file._relativePath = file.webkitRelativePath;\n                    return file;\n                }));\n            }).catch(console.error);\n        });\n    };\n    var isFileSystemItem = function isFileSystemItem(item) {\n        if (isEntry(item)) {\n            var entry = getAsEntry(item);\n            if (entry) return entry.isFile || entry.isDirectory;\n        }\n        return item.kind === \"file\";\n    };\n    var getFilesFromItem = function getFilesFromItem(item) {\n        return new Promise(function(resolve, reject) {\n            if (isDirectoryEntry(item)) {\n                getFilesInDirectory(getAsEntry(item)).then(resolve).catch(reject);\n                return;\n            }\n            resolve([\n                item.getAsFile()\n            ]);\n        });\n    };\n    var getFilesInDirectory = function getFilesInDirectory(entry) {\n        return new Promise(function(resolve, reject) {\n            var files = [];\n            // the total entries to read\n            var dirCounter = 0;\n            var fileCounter = 0;\n            var resolveIfDone = function resolveIfDone() {\n                if (fileCounter === 0 && dirCounter === 0) resolve(files);\n            };\n            // the recursive function\n            var readEntries = function readEntries(dirEntry) {\n                dirCounter++;\n                var directoryReader = dirEntry.createReader();\n                // directories are returned in batches, we need to process all batches before we're done\n                var readBatch = function readBatch() {\n                    directoryReader.readEntries(function(entries) {\n                        if (entries.length === 0) {\n                            dirCounter--;\n                            resolveIfDone();\n                            return;\n                        }\n                        entries.forEach(function(entry) {\n                            // recursively read more directories\n                            if (entry.isDirectory) readEntries(entry);\n                            else {\n                                // read as file\n                                fileCounter++;\n                                entry.file(function(file) {\n                                    var correctedFile = correctMissingFileType(file);\n                                    if (entry.fullPath) correctedFile._relativePath = entry.fullPath;\n                                    files.push(correctedFile);\n                                    fileCounter--;\n                                    resolveIfDone();\n                                });\n                            }\n                        });\n                        // try to get next batch of files\n                        readBatch();\n                    }, reject);\n                };\n                // read first batch of files\n                readBatch();\n            };\n            // go!\n            readEntries(entry);\n        });\n    };\n    var correctMissingFileType = function correctMissingFileType(file) {\n        if (file.type.length) return file;\n        var date = file.lastModifiedDate;\n        var name = file.name;\n        var type = guesstimateMimeType(getExtensionFromFilename(file.name));\n        if (!type.length) return file;\n        file = file.slice(0, file.size, type);\n        file.name = name;\n        file.lastModifiedDate = date;\n        return file;\n    };\n    var isDirectoryEntry = function isDirectoryEntry(item) {\n        return isEntry(item) && (getAsEntry(item) || {}).isDirectory;\n    };\n    var isEntry = function isEntry(item) {\n        return \"webkitGetAsEntry\" in item;\n    };\n    var getAsEntry = function getAsEntry(item) {\n        return item.webkitGetAsEntry();\n    };\n    /**\n     * Extracts links from a DataTransfer object\n     */ var getLinks = function getLinks(dataTransfer) {\n        var links = [];\n        try {\n            // look in meta data property\n            links = getLinksFromTransferMetaData(dataTransfer);\n            if (links.length) return links;\n            links = getLinksFromTransferURLData(dataTransfer);\n        } catch (e) {\n        // nope nope nope (probably IE trouble)\n        }\n        return links;\n    };\n    var getLinksFromTransferURLData = function getLinksFromTransferURLData(dataTransfer) {\n        var data = dataTransfer.getData(\"url\");\n        if (typeof data === \"string\" && data.length) return [\n            data\n        ];\n        return [];\n    };\n    var getLinksFromTransferMetaData = function getLinksFromTransferMetaData(dataTransfer) {\n        var data = dataTransfer.getData(\"text/html\");\n        if (typeof data === \"string\" && data.length) {\n            var matches = data.match(/src\\s*=\\s*\"(.+?)\"/);\n            if (matches) return [\n                matches[1]\n            ];\n        }\n        return [];\n    };\n    var dragNDropObservers = [];\n    var eventPosition = function eventPosition(e) {\n        return {\n            pageLeft: e.pageX,\n            pageTop: e.pageY,\n            scopeLeft: e.offsetX || e.layerX,\n            scopeTop: e.offsetY || e.layerY\n        };\n    };\n    var createDragNDropClient = function createDragNDropClient(element, scopeToObserve, filterElement) {\n        var observer = getDragNDropObserver(scopeToObserve);\n        var client = {\n            element: element,\n            filterElement: filterElement,\n            state: null,\n            ondrop: function ondrop() {},\n            onenter: function onenter() {},\n            ondrag: function ondrag() {},\n            onexit: function onexit() {},\n            onload: function onload() {},\n            allowdrop: function allowdrop() {}\n        };\n        client.destroy = observer.addListener(client);\n        return client;\n    };\n    var getDragNDropObserver = function getDragNDropObserver(element) {\n        // see if already exists, if so, return\n        var observer = dragNDropObservers.find(function(item) {\n            return item.element === element;\n        });\n        if (observer) return observer;\n        // create new observer, does not yet exist for this element\n        var newObserver = createDragNDropObserver(element);\n        dragNDropObservers.push(newObserver);\n        return newObserver;\n    };\n    var createDragNDropObserver = function createDragNDropObserver(element) {\n        var clients = [];\n        var routes = {\n            dragenter: dragenter,\n            dragover: dragover,\n            dragleave: dragleave,\n            drop: drop\n        };\n        var handlers = {};\n        forin(routes, function(event, createHandler) {\n            handlers[event] = createHandler(element, clients);\n            element.addEventListener(event, handlers[event], false);\n        });\n        var observer = {\n            element: element,\n            addListener: function addListener(client) {\n                // add as client\n                clients.push(client);\n                // return removeListener function\n                return function() {\n                    // remove client\n                    clients.splice(clients.indexOf(client), 1);\n                    // if no more clients, clean up observer\n                    if (clients.length === 0) {\n                        dragNDropObservers.splice(dragNDropObservers.indexOf(observer), 1);\n                        forin(routes, function(event) {\n                            element.removeEventListener(event, handlers[event], false);\n                        });\n                    }\n                };\n            }\n        };\n        return observer;\n    };\n    var elementFromPoint = function elementFromPoint(root, point) {\n        if (!(\"elementFromPoint\" in root)) root = document;\n        return root.elementFromPoint(point.x, point.y);\n    };\n    var isEventTarget = function isEventTarget(e, target) {\n        // get root\n        var root = getRootNode(target);\n        // get element at position\n        // if root is not actual shadow DOM and does not have elementFromPoint method, use the one on document\n        var elementAtPosition = elementFromPoint(root, {\n            x: e.pageX - window.pageXOffset,\n            y: e.pageY - window.pageYOffset\n        });\n        // test if target is the element or if one of its children is\n        return elementAtPosition === target || target.contains(elementAtPosition);\n    };\n    var initialTarget = null;\n    var setDropEffect = function setDropEffect(dataTransfer, effect) {\n        // is in try catch as IE11 will throw error if not\n        try {\n            dataTransfer.dropEffect = effect;\n        } catch (e) {}\n    };\n    var dragenter = function dragenter(root, clients) {\n        return function(e) {\n            e.preventDefault();\n            initialTarget = e.target;\n            clients.forEach(function(client) {\n                var element = client.element, onenter = client.onenter;\n                if (isEventTarget(e, element)) {\n                    client.state = \"enter\";\n                    // fire enter event\n                    onenter(eventPosition(e));\n                }\n            });\n        };\n    };\n    var dragover = function dragover(root, clients) {\n        return function(e) {\n            e.preventDefault();\n            var dataTransfer = e.dataTransfer;\n            requestDataTransferItems(dataTransfer).then(function(items) {\n                var overDropTarget = false;\n                clients.some(function(client) {\n                    var filterElement = client.filterElement, element = client.element, onenter = client.onenter, onexit = client.onexit, ondrag = client.ondrag, allowdrop = client.allowdrop;\n                    // by default we can drop\n                    setDropEffect(dataTransfer, \"copy\");\n                    // allow transfer of these items\n                    var allowsTransfer = allowdrop(items);\n                    // only used when can be dropped on page\n                    if (!allowsTransfer) {\n                        setDropEffect(dataTransfer, \"none\");\n                        return;\n                    }\n                    // targetting this client\n                    if (isEventTarget(e, element)) {\n                        overDropTarget = true;\n                        // had no previous state, means we are entering this client\n                        if (client.state === null) {\n                            client.state = \"enter\";\n                            onenter(eventPosition(e));\n                            return;\n                        }\n                        // now over element (no matter if it allows the drop or not)\n                        client.state = \"over\";\n                        // needs to allow transfer\n                        if (filterElement && !allowsTransfer) {\n                            setDropEffect(dataTransfer, \"none\");\n                            return;\n                        }\n                        // dragging\n                        ondrag(eventPosition(e));\n                    } else {\n                        // should be over an element to drop\n                        if (filterElement && !overDropTarget) setDropEffect(dataTransfer, \"none\");\n                        // might have just left this client?\n                        if (client.state) {\n                            client.state = null;\n                            onexit(eventPosition(e));\n                        }\n                    }\n                });\n            });\n        };\n    };\n    var drop = function drop(root, clients) {\n        return function(e) {\n            e.preventDefault();\n            var dataTransfer = e.dataTransfer;\n            requestDataTransferItems(dataTransfer).then(function(items) {\n                clients.forEach(function(client) {\n                    var filterElement = client.filterElement, element = client.element, ondrop = client.ondrop, onexit = client.onexit, allowdrop = client.allowdrop;\n                    client.state = null;\n                    // if we're filtering on element we need to be over the element to drop\n                    if (filterElement && !isEventTarget(e, element)) return;\n                    // no transfer for this client\n                    if (!allowdrop(items)) return onexit(eventPosition(e));\n                    // we can drop these items on this client\n                    ondrop(eventPosition(e), items);\n                });\n            });\n        };\n    };\n    var dragleave = function dragleave(root, clients) {\n        return function(e) {\n            if (initialTarget !== e.target) return;\n            clients.forEach(function(client) {\n                var onexit = client.onexit;\n                client.state = null;\n                onexit(eventPosition(e));\n            });\n        };\n    };\n    var createHopper = function createHopper(scope, validateItems, options) {\n        // is now hopper scope\n        scope.classList.add(\"filepond--hopper\");\n        // shortcuts\n        var catchesDropsOnPage = options.catchesDropsOnPage, requiresDropOnElement = options.requiresDropOnElement, _options$filterItems = options.filterItems, filterItems = _options$filterItems === void 0 ? function(items) {\n            return items;\n        } : _options$filterItems;\n        // create a dnd client\n        var client = createDragNDropClient(scope, catchesDropsOnPage ? document.documentElement : scope, requiresDropOnElement);\n        // current client state\n        var lastState = \"\";\n        var currentState = \"\";\n        // determines if a file may be dropped\n        client.allowdrop = function(items) {\n            // TODO: if we can, throw error to indicate the items cannot by dropped\n            return validateItems(filterItems(items));\n        };\n        client.ondrop = function(position, items) {\n            var filteredItems = filterItems(items);\n            if (!validateItems(filteredItems)) {\n                api.ondragend(position);\n                return;\n            }\n            currentState = \"drag-drop\";\n            api.onload(filteredItems, position);\n        };\n        client.ondrag = function(position) {\n            api.ondrag(position);\n        };\n        client.onenter = function(position) {\n            currentState = \"drag-over\";\n            api.ondragstart(position);\n        };\n        client.onexit = function(position) {\n            currentState = \"drag-exit\";\n            api.ondragend(position);\n        };\n        var api = {\n            updateHopperState: function updateHopperState() {\n                if (lastState !== currentState) {\n                    scope.dataset.hopperState = currentState;\n                    lastState = currentState;\n                }\n            },\n            onload: function onload() {},\n            ondragstart: function ondragstart() {},\n            ondrag: function ondrag() {},\n            ondragend: function ondragend() {},\n            destroy: function destroy() {\n                // destroy client\n                client.destroy();\n            }\n        };\n        return api;\n    };\n    var listening = false;\n    var listeners$1 = [];\n    var handlePaste = function handlePaste(e) {\n        // if is pasting in input or textarea and the target is outside of a filepond scope, ignore\n        var activeEl = document.activeElement;\n        if (activeEl && /textarea|input/i.test(activeEl.nodeName)) {\n            // test textarea or input is contained in filepond root\n            var inScope = false;\n            var element = activeEl;\n            while(element !== document.body){\n                if (element.classList.contains(\"filepond--root\")) {\n                    inScope = true;\n                    break;\n                }\n                element = element.parentNode;\n            }\n            if (!inScope) return;\n        }\n        requestDataTransferItems(e.clipboardData).then(function(files) {\n            // no files received\n            if (!files.length) return;\n            // notify listeners of received files\n            listeners$1.forEach(function(listener) {\n                return listener(files);\n            });\n        });\n    };\n    var listen = function listen(cb) {\n        // can't add twice\n        if (listeners$1.includes(cb)) return;\n        // add initial listener\n        listeners$1.push(cb);\n        // setup paste listener for entire page\n        if (listening) return;\n        listening = true;\n        document.addEventListener(\"paste\", handlePaste);\n    };\n    var unlisten = function unlisten(listener) {\n        arrayRemove(listeners$1, listeners$1.indexOf(listener));\n        // clean up\n        if (listeners$1.length === 0) {\n            document.removeEventListener(\"paste\", handlePaste);\n            listening = false;\n        }\n    };\n    var createPaster = function createPaster() {\n        var cb = function cb(files) {\n            api.onload(files);\n        };\n        var api = {\n            destroy: function destroy() {\n                unlisten(cb);\n            },\n            onload: function onload() {}\n        };\n        listen(cb);\n        return api;\n    };\n    /**\n     * Creates the file view\n     */ var create$d = function create(_ref) {\n        var root = _ref.root, props = _ref.props;\n        root.element.id = \"filepond--assistant-\" + props.id;\n        attr(root.element, \"role\", \"status\");\n        attr(root.element, \"aria-live\", \"polite\");\n        attr(root.element, \"aria-relevant\", \"additions\");\n    };\n    var addFilesNotificationTimeout = null;\n    var notificationClearTimeout = null;\n    var filenames = [];\n    var assist = function assist(root, message) {\n        root.element.textContent = message;\n    };\n    var clear$1 = function clear(root) {\n        root.element.textContent = \"\";\n    };\n    var listModified = function listModified(root, filename, label) {\n        var total = root.query(\"GET_TOTAL_ITEMS\");\n        assist(root, label + \" \" + filename + \", \" + total + \" \" + (total === 1 ? root.query(\"GET_LABEL_FILE_COUNT_SINGULAR\") : root.query(\"GET_LABEL_FILE_COUNT_PLURAL\")));\n        // clear group after set amount of time so the status is not read twice\n        clearTimeout(notificationClearTimeout);\n        notificationClearTimeout = setTimeout(function() {\n            clear$1(root);\n        }, 1500);\n    };\n    var isUsingFilePond = function isUsingFilePond(root) {\n        return root.element.parentNode.contains(document.activeElement);\n    };\n    var itemAdded = function itemAdded(_ref2) {\n        var root = _ref2.root, action = _ref2.action;\n        if (!isUsingFilePond(root)) return;\n        root.element.textContent = \"\";\n        var item = root.query(\"GET_ITEM\", action.id);\n        filenames.push(item.filename);\n        clearTimeout(addFilesNotificationTimeout);\n        addFilesNotificationTimeout = setTimeout(function() {\n            listModified(root, filenames.join(\", \"), root.query(\"GET_LABEL_FILE_ADDED\"));\n            filenames.length = 0;\n        }, 750);\n    };\n    var itemRemoved = function itemRemoved(_ref3) {\n        var root = _ref3.root, action = _ref3.action;\n        if (!isUsingFilePond(root)) return;\n        var item = action.item;\n        listModified(root, item.filename, root.query(\"GET_LABEL_FILE_REMOVED\"));\n    };\n    var itemProcessed = function itemProcessed(_ref4) {\n        var root = _ref4.root, action = _ref4.action;\n        // will also notify the user when FilePond is not being used, as the user might be occupied with other activities while uploading a file\n        var item = root.query(\"GET_ITEM\", action.id);\n        var filename = item.filename;\n        var label = root.query(\"GET_LABEL_FILE_PROCESSING_COMPLETE\");\n        assist(root, filename + \" \" + label);\n    };\n    var itemProcessedUndo = function itemProcessedUndo(_ref5) {\n        var root = _ref5.root, action = _ref5.action;\n        var item = root.query(\"GET_ITEM\", action.id);\n        var filename = item.filename;\n        var label = root.query(\"GET_LABEL_FILE_PROCESSING_ABORTED\");\n        assist(root, filename + \" \" + label);\n    };\n    var itemError = function itemError(_ref6) {\n        var root = _ref6.root, action = _ref6.action;\n        var item = root.query(\"GET_ITEM\", action.id);\n        var filename = item.filename;\n        // will also notify the user when FilePond is not being used, as the user might be occupied with other activities while uploading a file\n        assist(root, action.status.main + \" \" + filename + \" \" + action.status.sub);\n    };\n    var assistant = createView({\n        create: create$d,\n        ignoreRect: true,\n        ignoreRectUpdate: true,\n        write: createRoute({\n            DID_LOAD_ITEM: itemAdded,\n            DID_REMOVE_ITEM: itemRemoved,\n            DID_COMPLETE_ITEM_PROCESSING: itemProcessed,\n            DID_ABORT_ITEM_PROCESSING: itemProcessedUndo,\n            DID_REVERT_ITEM_PROCESSING: itemProcessedUndo,\n            DID_THROW_ITEM_REMOVE_ERROR: itemError,\n            DID_THROW_ITEM_LOAD_ERROR: itemError,\n            DID_THROW_ITEM_INVALID: itemError,\n            DID_THROW_ITEM_PROCESSING_ERROR: itemError\n        }),\n        tag: \"span\",\n        name: \"assistant\"\n    });\n    var toCamels = function toCamels(string) {\n        var separator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"-\";\n        return string.replace(new RegExp(separator + \".\", \"g\"), function(sub) {\n            return sub.charAt(1).toUpperCase();\n        });\n    };\n    var debounce = function debounce(func) {\n        var interval = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 16;\n        var immidiateOnly = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n        var last = Date.now();\n        var timeout = null;\n        return function() {\n            for(var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++)args[_key] = arguments[_key];\n            clearTimeout(timeout);\n            var dist = Date.now() - last;\n            var fn = function fn() {\n                last = Date.now();\n                func.apply(void 0, args);\n            };\n            if (dist < interval) // we need to delay by the difference between interval and dist\n            // for example: if distance is 10 ms and interval is 16 ms,\n            // we need to wait an additional 6ms before calling the function)\n            {\n                if (!immidiateOnly) timeout = setTimeout(fn, interval - dist);\n            } else // go!\n            fn();\n        };\n    };\n    var MAX_FILES_LIMIT = 1000000;\n    var prevent = function prevent(e) {\n        return e.preventDefault();\n    };\n    var create$e = function create(_ref) {\n        var root = _ref.root, props = _ref.props;\n        // Add id\n        var id = root.query(\"GET_ID\");\n        if (id) root.element.id = id;\n        // Add className\n        var className = root.query(\"GET_CLASS_NAME\");\n        if (className) className.split(\" \").filter(function(name) {\n            return name.length;\n        }).forEach(function(name) {\n            root.element.classList.add(name);\n        });\n        // Field label\n        root.ref.label = root.appendChildView(root.createChildView(dropLabel, Object.assign({}, props, {\n            translateY: null,\n            caption: root.query(\"GET_LABEL_IDLE\")\n        })));\n        // List of items\n        root.ref.list = root.appendChildView(root.createChildView(listScroller, {\n            translateY: null\n        }));\n        // Background panel\n        root.ref.panel = root.appendChildView(root.createChildView(panel, {\n            name: \"panel-root\"\n        }));\n        // Assistant notifies assistive tech when content changes\n        root.ref.assistant = root.appendChildView(root.createChildView(assistant, Object.assign({}, props)));\n        // Data\n        root.ref.data = root.appendChildView(root.createChildView(data, Object.assign({}, props)));\n        // Measure (tests if fixed height was set)\n        // DOCTYPE needs to be set for this to work\n        root.ref.measure = createElement$1(\"div\");\n        root.ref.measure.style.height = \"100%\";\n        root.element.appendChild(root.ref.measure);\n        // information on the root height or fixed height status\n        root.ref.bounds = null;\n        // apply initial style properties\n        root.query(\"GET_STYLES\").filter(function(style) {\n            return !isEmpty(style.value);\n        }).map(function(_ref2) {\n            var name = _ref2.name, value = _ref2.value;\n            root.element.dataset[name] = value;\n        });\n        // determine if width changed\n        root.ref.widthPrevious = null;\n        root.ref.widthUpdated = debounce(function() {\n            root.ref.updateHistory = [];\n            root.dispatch(\"DID_RESIZE_ROOT\");\n        }, 250);\n        // history of updates\n        root.ref.previousAspectRatio = null;\n        root.ref.updateHistory = [];\n        // prevent scrolling and zooming on iOS (only if supports pointer events, for then we can enable reorder)\n        var canHover = window.matchMedia(\"(pointer: fine) and (hover: hover)\").matches;\n        var hasPointerEvents = \"PointerEvent\" in window;\n        if (root.query(\"GET_ALLOW_REORDER\") && hasPointerEvents && !canHover) {\n            root.element.addEventListener(\"touchmove\", prevent, {\n                passive: false\n            });\n            root.element.addEventListener(\"gesturestart\", prevent);\n        }\n        // add credits\n        var credits = root.query(\"GET_CREDITS\");\n        var hasCredits = credits.length === 2;\n        if (hasCredits) {\n            var frag = document.createElement(\"a\");\n            frag.className = \"filepond--credits\";\n            frag.setAttribute(\"aria-hidden\", \"true\");\n            frag.href = credits[0];\n            frag.tabindex = -1;\n            frag.target = \"_blank\";\n            frag.rel = \"noopener noreferrer\";\n            frag.textContent = credits[1];\n            root.element.appendChild(frag);\n            root.ref.credits = frag;\n        }\n    };\n    var write$9 = function write(_ref3) {\n        var root = _ref3.root, props = _ref3.props, actions = _ref3.actions;\n        // route actions\n        route$5({\n            root: root,\n            props: props,\n            actions: actions\n        });\n        // apply style properties\n        actions.filter(function(action) {\n            return /^DID_SET_STYLE_/.test(action.type);\n        }).filter(function(action) {\n            return !isEmpty(action.data.value);\n        }).map(function(_ref4) {\n            var type = _ref4.type, data = _ref4.data;\n            var name = toCamels(type.substring(8).toLowerCase(), \"_\");\n            root.element.dataset[name] = data.value;\n            root.invalidateLayout();\n        });\n        if (root.rect.element.hidden) return;\n        if (root.rect.element.width !== root.ref.widthPrevious) {\n            root.ref.widthPrevious = root.rect.element.width;\n            root.ref.widthUpdated();\n        }\n        // get box bounds, we do this only once\n        var bounds = root.ref.bounds;\n        if (!bounds) {\n            bounds = root.ref.bounds = calculateRootBoundingBoxHeight(root);\n            // destroy measure element\n            root.element.removeChild(root.ref.measure);\n            root.ref.measure = null;\n        }\n        // get quick references to various high level parts of the upload tool\n        var _root$ref = root.ref, hopper = _root$ref.hopper, label = _root$ref.label, list = _root$ref.list, panel = _root$ref.panel;\n        // sets correct state to hopper scope\n        if (hopper) hopper.updateHopperState();\n        // bool to indicate if we're full or not\n        var aspectRatio = root.query(\"GET_PANEL_ASPECT_RATIO\");\n        var isMultiItem = root.query(\"GET_ALLOW_MULTIPLE\");\n        var totalItems = root.query(\"GET_TOTAL_ITEMS\");\n        var maxItems = isMultiItem ? root.query(\"GET_MAX_FILES\") || MAX_FILES_LIMIT : 1;\n        var atMaxCapacity = totalItems === maxItems;\n        // action used to add item\n        var addAction = actions.find(function(action) {\n            return action.type === \"DID_ADD_ITEM\";\n        });\n        // if reached max capacity and we've just reached it\n        if (atMaxCapacity && addAction) {\n            // get interaction type\n            var interactionMethod = addAction.data.interactionMethod;\n            // hide label\n            label.opacity = 0;\n            if (isMultiItem) label.translateY = -40;\n            else {\n                if (interactionMethod === InteractionMethod.API) label.translateX = 40;\n                else if (interactionMethod === InteractionMethod.BROWSE) label.translateY = 40;\n                else label.translateY = 30;\n            }\n        } else if (!atMaxCapacity) {\n            label.opacity = 1;\n            label.translateX = 0;\n            label.translateY = 0;\n        }\n        var listItemMargin = calculateListItemMargin(root);\n        var listHeight = calculateListHeight(root);\n        var labelHeight = label.rect.element.height;\n        var currentLabelHeight = !isMultiItem || atMaxCapacity ? 0 : labelHeight;\n        var listMarginTop = atMaxCapacity ? list.rect.element.marginTop : 0;\n        var listMarginBottom = totalItems === 0 ? 0 : list.rect.element.marginBottom;\n        var visualHeight = currentLabelHeight + listMarginTop + listHeight.visual + listMarginBottom;\n        var boundsHeight = currentLabelHeight + listMarginTop + listHeight.bounds + listMarginBottom;\n        // link list to label bottom position\n        list.translateY = Math.max(0, currentLabelHeight - list.rect.element.marginTop) - listItemMargin.top;\n        if (aspectRatio) {\n            // fixed aspect ratio\n            // calculate height based on width\n            var width = root.rect.element.width;\n            var height = width * aspectRatio;\n            // clear history if aspect ratio has changed\n            if (aspectRatio !== root.ref.previousAspectRatio) {\n                root.ref.previousAspectRatio = aspectRatio;\n                root.ref.updateHistory = [];\n            }\n            // remember this width\n            var history = root.ref.updateHistory;\n            history.push(width);\n            var MAX_BOUNCES = 2;\n            if (history.length > MAX_BOUNCES * 2) {\n                var l = history.length;\n                var bottom = l - 10;\n                var bounces = 0;\n                for(var i = l; i >= bottom; i--){\n                    if (history[i] === history[i - 2]) bounces++;\n                    if (bounces >= MAX_BOUNCES) // dont adjust height\n                    return;\n                }\n            }\n            // fix height of panel so it adheres to aspect ratio\n            panel.scalable = false;\n            panel.height = height;\n            // available height for list\n            var listAvailableHeight = // the height of the panel minus the label height\n            height - currentLabelHeight - // the room we leave open between the end of the list and the panel bottom\n            (listMarginBottom - listItemMargin.bottom) - // if we're full we need to leave some room between the top of the panel and the list\n            (atMaxCapacity ? listMarginTop : 0);\n            if (listHeight.visual > listAvailableHeight) list.overflow = listAvailableHeight;\n            else list.overflow = null;\n            // set container bounds (so pushes siblings downwards)\n            root.height = height;\n        } else if (bounds.fixedHeight) {\n            // fixed height\n            // fix height of panel\n            panel.scalable = false;\n            // available height for list\n            var _listAvailableHeight = // the height of the panel minus the label height\n            bounds.fixedHeight - currentLabelHeight - // the room we leave open between the end of the list and the panel bottom\n            (listMarginBottom - listItemMargin.bottom) - // if we're full we need to leave some room between the top of the panel and the list\n            (atMaxCapacity ? listMarginTop : 0);\n            // set list height\n            if (listHeight.visual > _listAvailableHeight) list.overflow = _listAvailableHeight;\n            else list.overflow = null;\n        // no need to set container bounds as these are handles by CSS fixed height\n        } else if (bounds.cappedHeight) {\n            // max-height\n            // not a fixed height panel\n            var isCappedHeight = visualHeight >= bounds.cappedHeight;\n            var panelHeight = Math.min(bounds.cappedHeight, visualHeight);\n            panel.scalable = true;\n            panel.height = isCappedHeight ? panelHeight : panelHeight - listItemMargin.top - listItemMargin.bottom;\n            // available height for list\n            var _listAvailableHeight2 = // the height of the panel minus the label height\n            panelHeight - currentLabelHeight - // the room we leave open between the end of the list and the panel bottom\n            (listMarginBottom - listItemMargin.bottom) - // if we're full we need to leave some room between the top of the panel and the list\n            (atMaxCapacity ? listMarginTop : 0);\n            // set list height (if is overflowing)\n            if (visualHeight > bounds.cappedHeight && listHeight.visual > _listAvailableHeight2) list.overflow = _listAvailableHeight2;\n            else list.overflow = null;\n            // set container bounds (so pushes siblings downwards)\n            root.height = Math.min(bounds.cappedHeight, boundsHeight - listItemMargin.top - listItemMargin.bottom);\n        } else {\n            // flexible height\n            // not a fixed height panel\n            var itemMargin = totalItems > 0 ? listItemMargin.top + listItemMargin.bottom : 0;\n            panel.scalable = true;\n            panel.height = Math.max(labelHeight, visualHeight - itemMargin);\n            // set container bounds (so pushes siblings downwards)\n            root.height = Math.max(labelHeight, boundsHeight - itemMargin);\n        }\n        // move credits to bottom\n        if (root.ref.credits && panel.heightCurrent) root.ref.credits.style.transform = \"translateY(\" + panel.heightCurrent + \"px)\";\n    };\n    var calculateListItemMargin = function calculateListItemMargin(root) {\n        var item = root.ref.list.childViews[0].childViews[0];\n        return item ? {\n            top: item.rect.element.marginTop,\n            bottom: item.rect.element.marginBottom\n        } : {\n            top: 0,\n            bottom: 0\n        };\n    };\n    var calculateListHeight = function calculateListHeight(root) {\n        var visual = 0;\n        var bounds = 0;\n        // get file list reference\n        var scrollList = root.ref.list;\n        var itemList = scrollList.childViews[0];\n        var visibleChildren = itemList.childViews.filter(function(child) {\n            return child.rect.element.height;\n        });\n        var children = root.query(\"GET_ACTIVE_ITEMS\").map(function(item) {\n            return visibleChildren.find(function(child) {\n                return child.id === item.id;\n            });\n        }).filter(function(item) {\n            return item;\n        });\n        // no children, done!\n        if (children.length === 0) return {\n            visual: visual,\n            bounds: bounds\n        };\n        var horizontalSpace = itemList.rect.element.width;\n        var dragIndex = getItemIndexByPosition(itemList, children, scrollList.dragCoordinates);\n        var childRect = children[0].rect.element;\n        var itemVerticalMargin = childRect.marginTop + childRect.marginBottom;\n        var itemHorizontalMargin = childRect.marginLeft + childRect.marginRight;\n        var itemWidth = childRect.width + itemHorizontalMargin;\n        var itemHeight = childRect.height + itemVerticalMargin;\n        var newItem = typeof dragIndex !== \"undefined\" && dragIndex >= 0 ? 1 : 0;\n        var removedItem = children.find(function(child) {\n            return child.markedForRemoval && child.opacity < 0.45;\n        }) ? -1 : 0;\n        var verticalItemCount = children.length + newItem + removedItem;\n        var itemsPerRow = getItemsPerRow(horizontalSpace, itemWidth);\n        // stack\n        if (itemsPerRow === 1) children.forEach(function(item) {\n            var height = item.rect.element.height + itemVerticalMargin;\n            bounds += height;\n            visual += height * item.opacity;\n        });\n        else {\n            bounds = Math.ceil(verticalItemCount / itemsPerRow) * itemHeight;\n            visual = bounds;\n        }\n        return {\n            visual: visual,\n            bounds: bounds\n        };\n    };\n    var calculateRootBoundingBoxHeight = function calculateRootBoundingBoxHeight(root) {\n        var height = root.ref.measureHeight || null;\n        var cappedHeight = parseInt(root.style.maxHeight, 10) || null;\n        var fixedHeight = height === 0 ? null : height;\n        return {\n            cappedHeight: cappedHeight,\n            fixedHeight: fixedHeight\n        };\n    };\n    var exceedsMaxFiles = function exceedsMaxFiles(root, items) {\n        var allowReplace = root.query(\"GET_ALLOW_REPLACE\");\n        var allowMultiple = root.query(\"GET_ALLOW_MULTIPLE\");\n        var totalItems = root.query(\"GET_TOTAL_ITEMS\");\n        var maxItems = root.query(\"GET_MAX_FILES\");\n        // total amount of items being dragged\n        var totalBrowseItems = items.length;\n        // if does not allow multiple items and dragging more than one item\n        if (!allowMultiple && totalBrowseItems > 1) {\n            root.dispatch(\"DID_THROW_MAX_FILES\", {\n                source: items,\n                error: createResponse(\"warning\", 0, \"Max files\")\n            });\n            return true;\n        }\n        // limit max items to one if not allowed to drop multiple items\n        maxItems = allowMultiple ? maxItems : 1;\n        if (!allowMultiple && allowReplace) // There is only one item, so there is room to replace or add an item\n        return false;\n        // no more room?\n        var hasMaxItems = isInt(maxItems);\n        if (hasMaxItems && totalItems + totalBrowseItems > maxItems) {\n            root.dispatch(\"DID_THROW_MAX_FILES\", {\n                source: items,\n                error: createResponse(\"warning\", 0, \"Max files\")\n            });\n            return true;\n        }\n        return false;\n    };\n    var getDragIndex = function getDragIndex(list, children, position) {\n        var itemList = list.childViews[0];\n        return getItemIndexByPosition(itemList, children, {\n            left: position.scopeLeft - itemList.rect.element.left,\n            top: position.scopeTop - (list.rect.outer.top + list.rect.element.marginTop + list.rect.element.scrollTop)\n        });\n    };\n    /**\n     * Enable or disable file drop functionality\n     */ var toggleDrop = function toggleDrop(root) {\n        var isAllowed = root.query(\"GET_ALLOW_DROP\");\n        var isDisabled = root.query(\"GET_DISABLED\");\n        var enabled = isAllowed && !isDisabled;\n        if (enabled && !root.ref.hopper) {\n            var hopper = createHopper(root.element, function(items) {\n                // allow quick validation of dropped items\n                var beforeDropFile = root.query(\"GET_BEFORE_DROP_FILE\") || function() {\n                    return true;\n                };\n                // all items should be validated by all filters as valid\n                var dropValidation = root.query(\"GET_DROP_VALIDATION\");\n                return dropValidation ? items.every(function(item) {\n                    return applyFilters(\"ALLOW_HOPPER_ITEM\", item, {\n                        query: root.query\n                    }).every(function(result) {\n                        return result === true;\n                    }) && beforeDropFile(item);\n                }) : true;\n            }, {\n                filterItems: function filterItems(items) {\n                    var ignoredFiles = root.query(\"GET_IGNORED_FILES\");\n                    return items.filter(function(item) {\n                        if (isFile(item)) return !ignoredFiles.includes(item.name.toLowerCase());\n                        return true;\n                    });\n                },\n                catchesDropsOnPage: root.query(\"GET_DROP_ON_PAGE\"),\n                requiresDropOnElement: root.query(\"GET_DROP_ON_ELEMENT\")\n            });\n            hopper.onload = function(items, position) {\n                // get item children elements and sort based on list sort\n                var list = root.ref.list.childViews[0];\n                var visibleChildren = list.childViews.filter(function(child) {\n                    return child.rect.element.height;\n                });\n                var children = root.query(\"GET_ACTIVE_ITEMS\").map(function(item) {\n                    return visibleChildren.find(function(child) {\n                        return child.id === item.id;\n                    });\n                }).filter(function(item) {\n                    return item;\n                });\n                applyFilterChain(\"ADD_ITEMS\", items, {\n                    dispatch: root.dispatch\n                }).then(function(queue) {\n                    // these files don't fit so stop here\n                    if (exceedsMaxFiles(root, queue)) return false;\n                    // go\n                    root.dispatch(\"ADD_ITEMS\", {\n                        items: queue,\n                        index: getDragIndex(root.ref.list, children, position),\n                        interactionMethod: InteractionMethod.DROP\n                    });\n                });\n                root.dispatch(\"DID_DROP\", {\n                    position: position\n                });\n                root.dispatch(\"DID_END_DRAG\", {\n                    position: position\n                });\n            };\n            hopper.ondragstart = function(position) {\n                root.dispatch(\"DID_START_DRAG\", {\n                    position: position\n                });\n            };\n            hopper.ondrag = debounce(function(position) {\n                root.dispatch(\"DID_DRAG\", {\n                    position: position\n                });\n            });\n            hopper.ondragend = function(position) {\n                root.dispatch(\"DID_END_DRAG\", {\n                    position: position\n                });\n            };\n            root.ref.hopper = hopper;\n            root.ref.drip = root.appendChildView(root.createChildView(drip));\n        } else if (!enabled && root.ref.hopper) {\n            root.ref.hopper.destroy();\n            root.ref.hopper = null;\n            root.removeChildView(root.ref.drip);\n        }\n    };\n    /**\n     * Enable or disable browse functionality\n     */ var toggleBrowse = function toggleBrowse(root, props) {\n        var isAllowed = root.query(\"GET_ALLOW_BROWSE\");\n        var isDisabled = root.query(\"GET_DISABLED\");\n        var enabled = isAllowed && !isDisabled;\n        if (enabled && !root.ref.browser) root.ref.browser = root.appendChildView(root.createChildView(browser, Object.assign({}, props, {\n            onload: function onload(items) {\n                applyFilterChain(\"ADD_ITEMS\", items, {\n                    dispatch: root.dispatch\n                }).then(function(queue) {\n                    // these files don't fit so stop here\n                    if (exceedsMaxFiles(root, queue)) return false;\n                    // add items!\n                    root.dispatch(\"ADD_ITEMS\", {\n                        items: queue,\n                        index: -1,\n                        interactionMethod: InteractionMethod.BROWSE\n                    });\n                });\n            }\n        })), 0);\n        else if (!enabled && root.ref.browser) {\n            root.removeChildView(root.ref.browser);\n            root.ref.browser = null;\n        }\n    };\n    /**\n     * Enable or disable paste functionality\n     */ var togglePaste = function togglePaste(root) {\n        var isAllowed = root.query(\"GET_ALLOW_PASTE\");\n        var isDisabled = root.query(\"GET_DISABLED\");\n        var enabled = isAllowed && !isDisabled;\n        if (enabled && !root.ref.paster) {\n            root.ref.paster = createPaster();\n            root.ref.paster.onload = function(items) {\n                applyFilterChain(\"ADD_ITEMS\", items, {\n                    dispatch: root.dispatch\n                }).then(function(queue) {\n                    // these files don't fit so stop here\n                    if (exceedsMaxFiles(root, queue)) return false;\n                    // add items!\n                    root.dispatch(\"ADD_ITEMS\", {\n                        items: queue,\n                        index: -1,\n                        interactionMethod: InteractionMethod.PASTE\n                    });\n                });\n            };\n        } else if (!enabled && root.ref.paster) {\n            root.ref.paster.destroy();\n            root.ref.paster = null;\n        }\n    };\n    /**\n     * Route actions\n     */ var route$5 = createRoute({\n        DID_SET_ALLOW_BROWSE: function DID_SET_ALLOW_BROWSE(_ref5) {\n            var root = _ref5.root, props = _ref5.props;\n            toggleBrowse(root, props);\n        },\n        DID_SET_ALLOW_DROP: function DID_SET_ALLOW_DROP(_ref6) {\n            var root = _ref6.root;\n            toggleDrop(root);\n        },\n        DID_SET_ALLOW_PASTE: function DID_SET_ALLOW_PASTE(_ref7) {\n            var root = _ref7.root;\n            togglePaste(root);\n        },\n        DID_SET_DISABLED: function DID_SET_DISABLED(_ref8) {\n            var root = _ref8.root, props = _ref8.props;\n            toggleDrop(root);\n            togglePaste(root);\n            toggleBrowse(root, props);\n            var isDisabled = root.query(\"GET_DISABLED\");\n            if (isDisabled) root.element.dataset.disabled = \"disabled\";\n            else // delete root.element.dataset.disabled; <= this does not work on iOS 10\n            root.element.removeAttribute(\"data-disabled\");\n        }\n    });\n    var root = createView({\n        name: \"root\",\n        read: function read(_ref9) {\n            var root = _ref9.root;\n            if (root.ref.measure) root.ref.measureHeight = root.ref.measure.offsetHeight;\n        },\n        create: create$e,\n        write: write$9,\n        destroy: function destroy(_ref10) {\n            var root = _ref10.root;\n            if (root.ref.paster) root.ref.paster.destroy();\n            if (root.ref.hopper) root.ref.hopper.destroy();\n            root.element.removeEventListener(\"touchmove\", prevent);\n            root.element.removeEventListener(\"gesturestart\", prevent);\n        },\n        mixins: {\n            styles: [\n                \"height\"\n            ]\n        }\n    });\n    // creates the app\n    var createApp = function createApp() {\n        var initialOptions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        // let element\n        var originalElement = null;\n        // get default options\n        var defaultOptions = getOptions();\n        // create the data store, this will contain all our app info\n        var store = createStore(// initial state (should be serializable)\n        createInitialState(defaultOptions), // queries\n        [\n            queries,\n            createOptionQueries(defaultOptions)\n        ], // action handlers\n        [\n            actions,\n            createOptionActions(defaultOptions)\n        ]);\n        // set initial options\n        store.dispatch(\"SET_OPTIONS\", {\n            options: initialOptions\n        });\n        // kick thread if visibility changes\n        var visibilityHandler = function visibilityHandler() {\n            if (document.hidden) return;\n            store.dispatch(\"KICK\");\n        };\n        document.addEventListener(\"visibilitychange\", visibilityHandler);\n        // re-render on window resize start and finish\n        var resizeDoneTimer = null;\n        var isResizing = false;\n        var isResizingHorizontally = false;\n        var initialWindowWidth = null;\n        var currentWindowWidth = null;\n        var resizeHandler = function resizeHandler() {\n            if (!isResizing) isResizing = true;\n            clearTimeout(resizeDoneTimer);\n            resizeDoneTimer = setTimeout(function() {\n                isResizing = false;\n                initialWindowWidth = null;\n                currentWindowWidth = null;\n                if (isResizingHorizontally) {\n                    isResizingHorizontally = false;\n                    store.dispatch(\"DID_STOP_RESIZE\");\n                }\n            }, 500);\n        };\n        window.addEventListener(\"resize\", resizeHandler);\n        // render initial view\n        var view = root(store, {\n            id: getUniqueId()\n        });\n        //\n        // PRIVATE API -------------------------------------------------------------------------------------\n        //\n        var isResting = false;\n        var isHidden = false;\n        var readWriteApi = {\n            // necessary for update loop\n            /**\n             * Reads from dom (never call manually)\n             * @private\n             */ _read: function _read() {\n                // test if we're resizing horizontally\n                // TODO: see if we can optimize this by measuring root rect\n                if (isResizing) {\n                    currentWindowWidth = window.innerWidth;\n                    if (!initialWindowWidth) initialWindowWidth = currentWindowWidth;\n                    if (!isResizingHorizontally && currentWindowWidth !== initialWindowWidth) {\n                        store.dispatch(\"DID_START_RESIZE\");\n                        isResizingHorizontally = true;\n                    }\n                }\n                if (isHidden && isResting) // test if is no longer hidden\n                isResting = view.element.offsetParent === null;\n                // if resting, no need to read as numbers will still all be correct\n                if (isResting) return;\n                // read view data\n                view._read();\n                // if is hidden we need to know so we exit rest mode when revealed\n                isHidden = view.rect.element.hidden;\n            },\n            /**\n             * Writes to dom (never call manually)\n             * @private\n             */ _write: function _write(ts) {\n                // get all actions from store\n                var actions = store.processActionQueue()// filter out set actions (these will automatically trigger DID_SET)\n                .filter(function(action) {\n                    return !/^SET_/.test(action.type);\n                });\n                // if was idling and no actions stop here\n                if (isResting && !actions.length) return;\n                // some actions might trigger events\n                routeActionsToEvents(actions);\n                // update the view\n                isResting = view._write(ts, actions, isResizingHorizontally);\n                // will clean up all archived items\n                removeReleasedItems(store.query(\"GET_ITEMS\"));\n                // now idling\n                if (isResting) store.processDispatchQueue();\n            }\n        };\n        //\n        // EXPOSE EVENTS -------------------------------------------------------------------------------------\n        //\n        var createEvent = function createEvent(name) {\n            return function(data) {\n                // create default event\n                var event = {\n                    type: name\n                };\n                // no data to add\n                if (!data) return event;\n                // copy relevant props\n                if (data.hasOwnProperty(\"error\")) event.error = data.error ? Object.assign({}, data.error) : null;\n                if (data.status) event.status = Object.assign({}, data.status);\n                if (data.file) event.output = data.file;\n                // only source is available, else add item if possible\n                if (data.source) event.file = data.source;\n                else if (data.item || data.id) {\n                    var item = data.item ? data.item : store.query(\"GET_ITEM\", data.id);\n                    event.file = item ? createItemAPI(item) : null;\n                }\n                // map all items in a possible items array\n                if (data.items) event.items = data.items.map(createItemAPI);\n                // if this is a progress event add the progress amount\n                if (/progress/.test(name)) event.progress = data.progress;\n                // copy relevant props\n                if (data.hasOwnProperty(\"origin\") && data.hasOwnProperty(\"target\")) {\n                    event.origin = data.origin;\n                    event.target = data.target;\n                }\n                return event;\n            };\n        };\n        var eventRoutes = {\n            DID_DESTROY: createEvent(\"destroy\"),\n            DID_INIT: createEvent(\"init\"),\n            DID_THROW_MAX_FILES: createEvent(\"warning\"),\n            DID_INIT_ITEM: createEvent(\"initfile\"),\n            DID_START_ITEM_LOAD: createEvent(\"addfilestart\"),\n            DID_UPDATE_ITEM_LOAD_PROGRESS: createEvent(\"addfileprogress\"),\n            DID_LOAD_ITEM: createEvent(\"addfile\"),\n            DID_THROW_ITEM_INVALID: [\n                createEvent(\"error\"),\n                createEvent(\"addfile\")\n            ],\n            DID_THROW_ITEM_LOAD_ERROR: [\n                createEvent(\"error\"),\n                createEvent(\"addfile\")\n            ],\n            DID_THROW_ITEM_REMOVE_ERROR: [\n                createEvent(\"error\"),\n                createEvent(\"removefile\")\n            ],\n            DID_PREPARE_OUTPUT: createEvent(\"preparefile\"),\n            DID_START_ITEM_PROCESSING: createEvent(\"processfilestart\"),\n            DID_UPDATE_ITEM_PROCESS_PROGRESS: createEvent(\"processfileprogress\"),\n            DID_ABORT_ITEM_PROCESSING: createEvent(\"processfileabort\"),\n            DID_COMPLETE_ITEM_PROCESSING: createEvent(\"processfile\"),\n            DID_COMPLETE_ITEM_PROCESSING_ALL: createEvent(\"processfiles\"),\n            DID_REVERT_ITEM_PROCESSING: createEvent(\"processfilerevert\"),\n            DID_THROW_ITEM_PROCESSING_ERROR: [\n                createEvent(\"error\"),\n                createEvent(\"processfile\")\n            ],\n            DID_REMOVE_ITEM: createEvent(\"removefile\"),\n            DID_UPDATE_ITEMS: createEvent(\"updatefiles\"),\n            DID_ACTIVATE_ITEM: createEvent(\"activatefile\"),\n            DID_REORDER_ITEMS: createEvent(\"reorderfiles\")\n        };\n        var exposeEvent = function exposeEvent(event) {\n            // create event object to be dispatched\n            var detail = Object.assign({\n                pond: exports1\n            }, event);\n            delete detail.type;\n            view.element.dispatchEvent(new CustomEvent(\"FilePond:\" + event.type, {\n                // event info\n                detail: detail,\n                // event behaviour\n                bubbles: true,\n                cancelable: true,\n                composed: true\n            }));\n            // event object to params used for `on()` event handlers and callbacks `oninit()`\n            var params = [];\n            // if is possible error event, make it the first param\n            if (event.hasOwnProperty(\"error\")) params.push(event.error);\n            // file is always section\n            if (event.hasOwnProperty(\"file\")) params.push(event.file);\n            // append other props\n            var filtered = [\n                \"type\",\n                \"error\",\n                \"file\"\n            ];\n            Object.keys(event).filter(function(key) {\n                return !filtered.includes(key);\n            }).forEach(function(key) {\n                return params.push(event[key]);\n            });\n            // on(type, () => { })\n            exports1.fire.apply(exports1, [\n                event.type\n            ].concat(params));\n            // oninit = () => {}\n            var handler = store.query(\"GET_ON\" + event.type.toUpperCase());\n            if (handler) handler.apply(void 0, params);\n        };\n        var routeActionsToEvents = function routeActionsToEvents(actions) {\n            if (!actions.length) return;\n            actions.filter(function(action) {\n                return eventRoutes[action.type];\n            }).forEach(function(action) {\n                var routes = eventRoutes[action.type];\n                (Array.isArray(routes) ? routes : [\n                    routes\n                ]).forEach(function(route) {\n                    // this isn't fantastic, but because of the stacking of settimeouts plugins can handle the did_load before the did_init\n                    if (action.type === \"DID_INIT_ITEM\") exposeEvent(route(action.data));\n                    else setTimeout(function() {\n                        exposeEvent(route(action.data));\n                    }, 0);\n                });\n            });\n        };\n        //\n        // PUBLIC API -------------------------------------------------------------------------------------\n        //\n        var setOptions = function setOptions(options) {\n            return store.dispatch(\"SET_OPTIONS\", {\n                options: options\n            });\n        };\n        var getFile = function getFile(query) {\n            return store.query(\"GET_ACTIVE_ITEM\", query);\n        };\n        var prepareFile = function prepareFile(query) {\n            return new Promise(function(resolve, reject) {\n                store.dispatch(\"REQUEST_ITEM_PREPARE\", {\n                    query: query,\n                    success: function success(item) {\n                        resolve(item);\n                    },\n                    failure: function failure(error) {\n                        reject(error);\n                    }\n                });\n            });\n        };\n        var addFile = function addFile(source) {\n            var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n            return new Promise(function(resolve, reject) {\n                addFiles([\n                    {\n                        source: source,\n                        options: options\n                    }\n                ], {\n                    index: options.index\n                }).then(function(items) {\n                    return resolve(items && items[0]);\n                }).catch(reject);\n            });\n        };\n        var isFilePondFile = function isFilePondFile(obj) {\n            return obj.file && obj.id;\n        };\n        var removeFile = function removeFile(query, options) {\n            // if only passed options\n            if (typeof query === \"object\" && !isFilePondFile(query) && !options) {\n                options = query;\n                query = undefined;\n            }\n            // request item removal\n            store.dispatch(\"REMOVE_ITEM\", Object.assign({}, options, {\n                query: query\n            }));\n            // see if item has been removed\n            return store.query(\"GET_ACTIVE_ITEM\", query) === null;\n        };\n        var addFiles = function addFiles() {\n            for(var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++)args[_key] = arguments[_key];\n            return new Promise(function(resolve, reject) {\n                var sources = [];\n                var options = {};\n                // user passed a sources array\n                if (isArray(args[0])) {\n                    sources.push.apply(sources, args[0]);\n                    Object.assign(options, args[1] || {});\n                } else {\n                    // user passed sources as arguments, last one might be options object\n                    var lastArgument = args[args.length - 1];\n                    if (typeof lastArgument === \"object\" && !(lastArgument instanceof Blob)) Object.assign(options, args.pop());\n                    // add rest to sources\n                    sources.push.apply(sources, args);\n                }\n                store.dispatch(\"ADD_ITEMS\", {\n                    items: sources,\n                    index: options.index,\n                    interactionMethod: InteractionMethod.API,\n                    success: resolve,\n                    failure: reject\n                });\n            });\n        };\n        var getFiles = function getFiles() {\n            return store.query(\"GET_ACTIVE_ITEMS\");\n        };\n        var processFile = function processFile(query) {\n            return new Promise(function(resolve, reject) {\n                store.dispatch(\"REQUEST_ITEM_PROCESSING\", {\n                    query: query,\n                    success: function success(item) {\n                        resolve(item);\n                    },\n                    failure: function failure(error) {\n                        reject(error);\n                    }\n                });\n            });\n        };\n        var prepareFiles = function prepareFiles() {\n            for(var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++)args[_key2] = arguments[_key2];\n            var queries = Array.isArray(args[0]) ? args[0] : args;\n            var items = queries.length ? queries : getFiles();\n            return Promise.all(items.map(prepareFile));\n        };\n        var processFiles = function processFiles() {\n            for(var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++)args[_key3] = arguments[_key3];\n            var queries = Array.isArray(args[0]) ? args[0] : args;\n            if (!queries.length) {\n                var files = getFiles().filter(function(item) {\n                    return !(item.status === ItemStatus.IDLE && item.origin === FileOrigin.LOCAL) && item.status !== ItemStatus.PROCESSING && item.status !== ItemStatus.PROCESSING_COMPLETE && item.status !== ItemStatus.PROCESSING_REVERT_ERROR;\n                });\n                return Promise.all(files.map(processFile));\n            }\n            return Promise.all(queries.map(processFile));\n        };\n        var removeFiles = function removeFiles() {\n            for(var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++)args[_key4] = arguments[_key4];\n            var queries = Array.isArray(args[0]) ? args[0] : args;\n            var options;\n            if (typeof queries[queries.length - 1] === \"object\") options = queries.pop();\n            else if (Array.isArray(args[0])) options = args[1];\n            var files = getFiles();\n            if (!queries.length) return Promise.all(files.map(function(file) {\n                return removeFile(file, options);\n            }));\n            // when removing by index the indexes shift after each file removal so we need to convert indexes to ids\n            var mappedQueries = queries.map(function(query) {\n                return isNumber(query) ? files[query] ? files[query].id : null : query;\n            }).filter(function(query) {\n                return query;\n            });\n            return mappedQueries.map(function(q) {\n                return removeFile(q, options);\n            });\n        };\n        var exports1 = Object.assign({}, on(), {}, readWriteApi, {}, createOptionAPI(store, defaultOptions), {\n            /**\n                 * Override options defined in options object\n                 * @param options\n                 */ setOptions: setOptions,\n            /**\n                 * Load the given file\n                 * @param source - the source of the file (either a File, base64 data uri or url)\n                 * @param options - object, { index: 0 }\n                 */ addFile: addFile,\n            /**\n                 * Load the given files\n                 * @param sources - the sources of the files to load\n                 * @param options - object, { index: 0 }\n                 */ addFiles: addFiles,\n            /**\n                 * Returns the file objects matching the given query\n                 * @param query { string, number, null }\n                 */ getFile: getFile,\n            /**\n                 * Upload file with given name\n                 * @param query { string, number, null  }\n                 */ processFile: processFile,\n            /**\n                 * Request prepare output for file with given name\n                 * @param query { string, number, null  }\n                 */ prepareFile: prepareFile,\n            /**\n                 * Removes a file by its name\n                 * @param query { string, number, null  }\n                 */ removeFile: removeFile,\n            /**\n                 * Moves a file to a new location in the files list\n                 */ moveFile: function moveFile(query, index) {\n                return store.dispatch(\"MOVE_ITEM\", {\n                    query: query,\n                    index: index\n                });\n            },\n            /**\n                 * Returns all files (wrapped in public api)\n                 */ getFiles: getFiles,\n            /**\n                 * Starts uploading all files\n                 */ processFiles: processFiles,\n            /**\n                 * Clears all files from the files list\n                 */ removeFiles: removeFiles,\n            /**\n                 * Starts preparing output of all files\n                 */ prepareFiles: prepareFiles,\n            /**\n                 * Sort list of files\n                 */ sort: function sort(compare) {\n                return store.dispatch(\"SORT\", {\n                    compare: compare\n                });\n            },\n            /**\n                 * Browse the file system for a file\n                 */ browse: function browse() {\n                // needs to be trigger directly as user action needs to be traceable (is not traceable in requestAnimationFrame)\n                var input = view.element.querySelector(\"input[type=file]\");\n                if (input) input.click();\n            },\n            /**\n                 * Destroys the app\n                 */ destroy: function destroy() {\n                // request destruction\n                exports1.fire(\"destroy\", view.element);\n                // stop active processes (file uploads, fetches, stuff like that)\n                // loop over items and depending on states call abort for ongoing processes\n                store.dispatch(\"ABORT_ALL\");\n                // destroy view\n                view._destroy();\n                // stop listening to resize\n                window.removeEventListener(\"resize\", resizeHandler);\n                // stop listening to the visiblitychange event\n                document.removeEventListener(\"visibilitychange\", visibilityHandler);\n                // dispatch destroy\n                store.dispatch(\"DID_DESTROY\");\n            },\n            /**\n                 * Inserts the plugin before the target element\n                 */ insertBefore: function insertBefore$1(element) {\n                return insertBefore(view.element, element);\n            },\n            /**\n                 * Inserts the plugin after the target element\n                 */ insertAfter: function insertAfter$1(element) {\n                return insertAfter(view.element, element);\n            },\n            /**\n                 * Appends the plugin to the target element\n                 */ appendTo: function appendTo(element) {\n                return element.appendChild(view.element);\n            },\n            /**\n                 * Replaces an element with the app\n                 */ replaceElement: function replaceElement(element) {\n                // insert the app before the element\n                insertBefore(view.element, element);\n                // remove the original element\n                element.parentNode.removeChild(element);\n                // remember original element\n                originalElement = element;\n            },\n            /**\n                 * Restores the original element\n                 */ restoreElement: function restoreElement() {\n                if (!originalElement) return; // no element to restore\n                // restore original element\n                insertAfter(originalElement, view.element);\n                // remove our element\n                view.element.parentNode.removeChild(view.element);\n                // remove reference\n                originalElement = null;\n            },\n            /**\n                 * Returns true if the app root is attached to given element\n                 * @param element\n                 */ isAttachedTo: function isAttachedTo(element) {\n                return view.element === element || originalElement === element;\n            },\n            /**\n                 * Returns the root element\n                 */ element: {\n                get: function get() {\n                    return view.element;\n                }\n            },\n            /**\n                 * Returns the current pond status\n                 */ status: {\n                get: function get() {\n                    return store.query(\"GET_STATUS\");\n                }\n            }\n        });\n        // Done!\n        store.dispatch(\"DID_INIT\");\n        // create actual api object\n        return createObject(exports1);\n    };\n    var createAppObject = function createAppObject() {\n        var customOptions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        // default options\n        var defaultOptions = {};\n        forin(getOptions(), function(key, value) {\n            defaultOptions[key] = value[0];\n        });\n        // set app options\n        var app = createApp(Object.assign({}, defaultOptions, {}, customOptions));\n        // return the plugin instance\n        return app;\n    };\n    var lowerCaseFirstLetter = function lowerCaseFirstLetter(string) {\n        return string.charAt(0).toLowerCase() + string.slice(1);\n    };\n    var attributeNameToPropertyName = function attributeNameToPropertyName(attributeName) {\n        return toCamels(attributeName.replace(/^data-/, \"\"));\n    };\n    var mapObject = function mapObject(object, propertyMap) {\n        // remove unwanted\n        forin(propertyMap, function(selector, mapping) {\n            forin(object, function(property, value) {\n                // create regexp shortcut\n                var selectorRegExp = new RegExp(selector);\n                // tests if\n                var matches = selectorRegExp.test(property);\n                // no match, skip\n                if (!matches) return;\n                // if there's a mapping, the original property is always removed\n                delete object[property];\n                // should only remove, we done!\n                if (mapping === false) return;\n                // move value to new property\n                if (isString(mapping)) {\n                    object[mapping] = value;\n                    return;\n                }\n                // move to group\n                var group = mapping.group;\n                if (isObject(mapping) && !object[group]) object[group] = {};\n                object[group][lowerCaseFirstLetter(property.replace(selectorRegExp, \"\"))] = value;\n            });\n            // do submapping\n            if (mapping.mapping) mapObject(object[mapping.group], mapping.mapping);\n        });\n    };\n    var getAttributesAsObject = function getAttributesAsObject(node) {\n        var attributeMapping = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        // turn attributes into object\n        var attributes = [];\n        forin(node.attributes, function(index) {\n            attributes.push(node.attributes[index]);\n        });\n        var output = attributes.filter(function(attribute) {\n            return attribute.name;\n        }).reduce(function(obj, attribute) {\n            var value = attr(node, attribute.name);\n            obj[attributeNameToPropertyName(attribute.name)] = value === attribute.name ? true : value;\n            return obj;\n        }, {});\n        // do mapping of object properties\n        mapObject(output, attributeMapping);\n        return output;\n    };\n    var createAppAtElement = function createAppAtElement(element) {\n        var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        // how attributes of the input element are mapped to the options for the plugin\n        var attributeMapping = {\n            // translate to other name\n            \"^class$\": \"className\",\n            \"^multiple$\": \"allowMultiple\",\n            \"^capture$\": \"captureMethod\",\n            \"^webkitdirectory$\": \"allowDirectoriesOnly\",\n            // group under single property\n            \"^server\": {\n                group: \"server\",\n                mapping: {\n                    \"^process\": {\n                        group: \"process\"\n                    },\n                    \"^revert\": {\n                        group: \"revert\"\n                    },\n                    \"^fetch\": {\n                        group: \"fetch\"\n                    },\n                    \"^restore\": {\n                        group: \"restore\"\n                    },\n                    \"^load\": {\n                        group: \"load\"\n                    }\n                }\n            },\n            // don't include in object\n            \"^type$\": false,\n            \"^files$\": false\n        };\n        // add additional option translators\n        applyFilters(\"SET_ATTRIBUTE_TO_OPTION_MAP\", attributeMapping);\n        // create final options object by setting options object and then overriding options supplied on element\n        var mergedOptions = Object.assign({}, options);\n        var attributeOptions = getAttributesAsObject(element.nodeName === \"FIELDSET\" ? element.querySelector(\"input[type=file]\") : element, attributeMapping);\n        // merge with options object\n        Object.keys(attributeOptions).forEach(function(key) {\n            if (isObject(attributeOptions[key])) {\n                if (!isObject(mergedOptions[key])) mergedOptions[key] = {};\n                Object.assign(mergedOptions[key], attributeOptions[key]);\n            } else mergedOptions[key] = attributeOptions[key];\n        });\n        // if parent is a fieldset, get files from parent by selecting all input fields that are not file upload fields\n        // these will then be automatically set to the initial files\n        mergedOptions.files = (options.files || []).concat(Array.from(element.querySelectorAll(\"input:not([type=file])\")).map(function(input) {\n            return {\n                source: input.value,\n                options: {\n                    type: input.dataset.type\n                }\n            };\n        }));\n        // build plugin\n        var app = createAppObject(mergedOptions);\n        // add already selected files\n        if (element.files) Array.from(element.files).forEach(function(file) {\n            app.addFile(file);\n        });\n        // replace the target element\n        app.replaceElement(element);\n        // expose\n        return app;\n    };\n    // if an element is passed, we create the instance at that element, if not, we just create an up object\n    var createApp$1 = function createApp() {\n        return isNode(arguments.length <= 0 ? undefined : arguments[0]) ? createAppAtElement.apply(void 0, arguments) : createAppObject.apply(void 0, arguments);\n    };\n    var PRIVATE_METHODS = [\n        \"fire\",\n        \"_read\",\n        \"_write\"\n    ];\n    var createAppAPI = function createAppAPI(app) {\n        var api = {};\n        copyObjectPropertiesToObject(app, api, PRIVATE_METHODS);\n        return api;\n    };\n    /**\n     * Replaces placeholders in given string with replacements\n     * @param string - \"Foo {bar}\"\"\n     * @param replacements - { \"bar\": 10 }\n     */ var replaceInString = function replaceInString(string, replacements) {\n        return string.replace(/(?:{([a-zA-Z]+)})/g, function(match, group) {\n            return replacements[group];\n        });\n    };\n    var createWorker = function createWorker(fn) {\n        var workerBlob = new Blob([\n            \"(\",\n            fn.toString(),\n            \")()\"\n        ], {\n            type: \"application/javascript\"\n        });\n        var workerURL = URL.createObjectURL(workerBlob);\n        var worker = new Worker(workerURL);\n        return {\n            transfer: function transfer(message, cb) {},\n            post: function post(message, cb, transferList) {\n                var id = getUniqueId();\n                worker.onmessage = function(e) {\n                    if (e.data.id === id) cb(e.data.message);\n                };\n                worker.postMessage({\n                    id: id,\n                    message: message\n                }, transferList);\n            },\n            terminate: function terminate() {\n                worker.terminate();\n                URL.revokeObjectURL(workerURL);\n            }\n        };\n    };\n    var loadImage = function loadImage(url) {\n        return new Promise(function(resolve, reject) {\n            var img = new Image();\n            img.onload = function() {\n                resolve(img);\n            };\n            img.onerror = function(e) {\n                reject(e);\n            };\n            img.src = url;\n        });\n    };\n    var renameFile = function renameFile(file, name) {\n        var renamedFile = file.slice(0, file.size, file.type);\n        renamedFile.lastModifiedDate = file.lastModifiedDate;\n        renamedFile.name = name;\n        return renamedFile;\n    };\n    var copyFile = function copyFile(file) {\n        return renameFile(file, file.name);\n    };\n    // already registered plugins (can't register twice)\n    var registeredPlugins = [];\n    // pass utils to plugin\n    var createAppPlugin = function createAppPlugin(plugin) {\n        // already registered\n        if (registeredPlugins.includes(plugin)) return;\n        // remember this plugin\n        registeredPlugins.push(plugin);\n        // setup!\n        var pluginOutline = plugin({\n            addFilter: addFilter,\n            utils: {\n                Type: Type,\n                forin: forin,\n                isString: isString,\n                isFile: isFile,\n                toNaturalFileSize: toNaturalFileSize,\n                replaceInString: replaceInString,\n                getExtensionFromFilename: getExtensionFromFilename,\n                getFilenameWithoutExtension: getFilenameWithoutExtension,\n                guesstimateMimeType: guesstimateMimeType,\n                getFileFromBlob: getFileFromBlob,\n                getFilenameFromURL: getFilenameFromURL,\n                createRoute: createRoute,\n                createWorker: createWorker,\n                createView: createView,\n                createItemAPI: createItemAPI,\n                loadImage: loadImage,\n                copyFile: copyFile,\n                renameFile: renameFile,\n                createBlob: createBlob,\n                applyFilterChain: applyFilterChain,\n                text: text,\n                getNumericAspectRatioFromString: getNumericAspectRatioFromString\n            },\n            views: {\n                fileActionButton: fileActionButton\n            }\n        });\n        // add plugin options to default options\n        extendDefaultOptions(pluginOutline.options);\n    };\n    // feature detection used by supported() method\n    var isOperaMini = function isOperaMini() {\n        return Object.prototype.toString.call(window.operamini) === \"[object OperaMini]\";\n    };\n    var hasPromises = function hasPromises() {\n        return \"Promise\" in window;\n    };\n    var hasBlobSlice = function hasBlobSlice() {\n        return \"slice\" in Blob.prototype;\n    };\n    var hasCreateObjectURL = function hasCreateObjectURL() {\n        return \"URL\" in window && \"createObjectURL\" in window.URL;\n    };\n    var hasVisibility = function hasVisibility() {\n        return \"visibilityState\" in document;\n    };\n    var hasTiming = function hasTiming() {\n        return \"performance\" in window;\n    }; // iOS 8.x\n    var hasCSSSupports = function hasCSSSupports() {\n        return \"supports\" in (window.CSS || {});\n    }; // use to detect Safari 9+\n    var isIE11 = function isIE11() {\n        return /MSIE|Trident/.test(window.navigator.userAgent);\n    };\n    var supported = function() {\n        // Runs immediately and then remembers result for subsequent calls\n        var isSupported = // Has to be a browser\n        isBrowser() && // Can't run on Opera Mini due to lack of everything\n        !isOperaMini() && // Require these APIs to feature detect a modern browser\n        hasVisibility() && hasPromises() && hasBlobSlice() && hasCreateObjectURL() && hasTiming() && // doesn't need CSSSupports but is a good way to detect Safari 9+ (we do want to support IE11 though)\n        (hasCSSSupports() || isIE11());\n        return function() {\n            return isSupported;\n        };\n    }();\n    /**\n     * Plugin internal state (over all instances)\n     */ var state = {\n        // active app instances, used to redraw the apps and to find the later\n        apps: []\n    };\n    // plugin name\n    var name = \"filepond\";\n    /**\n     * Public Plugin methods\n     */ var fn = function fn() {};\n    exports1.Status = {};\n    exports1.FileStatus = {};\n    exports1.FileOrigin = {};\n    exports1.OptionTypes = {};\n    exports1.create = fn;\n    exports1.destroy = fn;\n    exports1.parse = fn;\n    exports1.find = fn;\n    exports1.registerPlugin = fn;\n    exports1.getOptions = fn;\n    exports1.setOptions = fn;\n    // if not supported, no API\n    if (supported()) {\n        // start painter and fire load event\n        createPainter(function() {\n            state.apps.forEach(function(app) {\n                return app._read();\n            });\n        }, function(ts) {\n            state.apps.forEach(function(app) {\n                return app._write(ts);\n            });\n        });\n        // fire loaded event so we know when FilePond is available\n        var dispatch = function dispatch() {\n            // let others know we have area ready\n            document.dispatchEvent(new CustomEvent(\"FilePond:loaded\", {\n                detail: {\n                    supported: supported,\n                    create: exports1.create,\n                    destroy: exports1.destroy,\n                    parse: exports1.parse,\n                    find: exports1.find,\n                    registerPlugin: exports1.registerPlugin,\n                    setOptions: exports1.setOptions\n                }\n            }));\n            // clean up event\n            document.removeEventListener(\"DOMContentLoaded\", dispatch);\n        };\n        if (document.readyState !== \"loading\") // move to back of execution queue, FilePond should have been exported by then\n        setTimeout(function() {\n            return dispatch();\n        }, 0);\n        else document.addEventListener(\"DOMContentLoaded\", dispatch);\n        // updates the OptionTypes object based on the current options\n        var updateOptionTypes = function updateOptionTypes() {\n            return forin(getOptions(), function(key, value) {\n                exports1.OptionTypes[key] = value[1];\n            });\n        };\n        exports1.Status = Object.assign({}, Status);\n        exports1.FileOrigin = Object.assign({}, FileOrigin);\n        exports1.FileStatus = Object.assign({}, ItemStatus);\n        exports1.OptionTypes = {};\n        updateOptionTypes();\n        // create method, creates apps and adds them to the app array\n        exports1.create = function create() {\n            var app = createApp$1.apply(void 0, arguments);\n            app.on(\"destroy\", exports1.destroy);\n            state.apps.push(app);\n            return createAppAPI(app);\n        };\n        // destroys apps and removes them from the app array\n        exports1.destroy = function destroy(hook) {\n            // returns true if the app was destroyed successfully\n            var indexToRemove = state.apps.findIndex(function(app) {\n                return app.isAttachedTo(hook);\n            });\n            if (indexToRemove >= 0) {\n                // remove from apps\n                var app = state.apps.splice(indexToRemove, 1)[0];\n                // restore original dom element\n                app.restoreElement();\n                return true;\n            }\n            return false;\n        };\n        // parses the given context for plugins (does not include the context element itself)\n        exports1.parse = function parse(context) {\n            // get all possible hooks\n            var matchedHooks = Array.from(context.querySelectorAll(\".\" + name));\n            // filter out already active hooks\n            var newHooks = matchedHooks.filter(function(newHook) {\n                return !state.apps.find(function(app) {\n                    return app.isAttachedTo(newHook);\n                });\n            });\n            // create new instance for each hook\n            return newHooks.map(function(hook) {\n                return exports1.create(hook);\n            });\n        };\n        // returns an app based on the given element hook\n        exports1.find = function find(hook) {\n            var app = state.apps.find(function(app) {\n                return app.isAttachedTo(hook);\n            });\n            if (!app) return null;\n            return createAppAPI(app);\n        };\n        // adds a plugin extension\n        exports1.registerPlugin = function registerPlugin() {\n            for(var _len = arguments.length, plugins = new Array(_len), _key = 0; _key < _len; _key++)plugins[_key] = arguments[_key];\n            // register plugins\n            plugins.forEach(createAppPlugin);\n            // update OptionTypes, each plugin might have extended the default options\n            updateOptionTypes();\n        };\n        exports1.getOptions = function getOptions$1() {\n            var opts = {};\n            forin(getOptions(), function(key, value) {\n                opts[key] = value[0];\n            });\n            return opts;\n        };\n        exports1.setOptions = function setOptions$1(opts) {\n            if (isObject(opts)) {\n                // update existing plugins\n                state.apps.forEach(function(app) {\n                    app.setOptions(opts);\n                });\n                // override defaults\n                setOptions(opts);\n            }\n            // return new options\n            return exports1.getOptions();\n        };\n    }\n    exports1.supported = supported;\n    Object.defineProperty(exports1, \"__esModule\", {\n        value: true\n    });\n});\n\n});\n\nparcelRegister(\"3KeIy\", function(module, exports) {\n/*!\n * FilePondPluginFileValidateSize 2.2.8\n * Licensed under MIT, https://opensource.org/licenses/MIT/\n * Please visit https://pqina.nl/filepond/ for details.\n */ /* eslint-disable */ (function(global, factory) {\n    module.exports = factory();\n})(module.exports, function() {\n    \"use strict\";\n    var plugin = function plugin(_ref) {\n        var addFilter = _ref.addFilter, utils = _ref.utils;\n        // get quick reference to Type utils\n        var Type = utils.Type, replaceInString = utils.replaceInString, toNaturalFileSize = utils.toNaturalFileSize;\n        // filtering if an item is allowed in hopper\n        addFilter(\"ALLOW_HOPPER_ITEM\", function(file, _ref2) {\n            var query = _ref2.query;\n            if (!query(\"GET_ALLOW_FILE_SIZE_VALIDATION\")) return true;\n            var sizeMax = query(\"GET_MAX_FILE_SIZE\");\n            if (sizeMax !== null && file.size > sizeMax) return false;\n            var sizeMin = query(\"GET_MIN_FILE_SIZE\");\n            if (sizeMin !== null && file.size < sizeMin) return false;\n            return true;\n        });\n        // called for each file that is loaded\n        // right before it is set to the item state\n        // should return a promise\n        addFilter(\"LOAD_FILE\", function(file, _ref3) {\n            var query = _ref3.query;\n            return new Promise(function(resolve, reject) {\n                // if not allowed, all fine, exit\n                if (!query(\"GET_ALLOW_FILE_SIZE_VALIDATION\")) return resolve(file);\n                // check if file should be filtered\n                var fileFilter = query(\"GET_FILE_VALIDATE_SIZE_FILTER\");\n                if (fileFilter && !fileFilter(file)) return resolve(file);\n                // reject or resolve based on file size\n                var sizeMax = query(\"GET_MAX_FILE_SIZE\");\n                if (sizeMax !== null && file.size > sizeMax) {\n                    reject({\n                        status: {\n                            main: query(\"GET_LABEL_MAX_FILE_SIZE_EXCEEDED\"),\n                            sub: replaceInString(query(\"GET_LABEL_MAX_FILE_SIZE\"), {\n                                filesize: toNaturalFileSize(sizeMax, \".\", query(\"GET_FILE_SIZE_BASE\"), query(\"GET_FILE_SIZE_LABELS\", query))\n                            })\n                        }\n                    });\n                    return;\n                }\n                // reject or resolve based on file size\n                var sizeMin = query(\"GET_MIN_FILE_SIZE\");\n                if (sizeMin !== null && file.size < sizeMin) {\n                    reject({\n                        status: {\n                            main: query(\"GET_LABEL_MIN_FILE_SIZE_EXCEEDED\"),\n                            sub: replaceInString(query(\"GET_LABEL_MIN_FILE_SIZE\"), {\n                                filesize: toNaturalFileSize(sizeMin, \".\", query(\"GET_FILE_SIZE_BASE\"), query(\"GET_FILE_SIZE_LABELS\", query))\n                            })\n                        }\n                    });\n                    return;\n                }\n                // returns the current option value\n                var totalSizeMax = query(\"GET_MAX_TOTAL_FILE_SIZE\");\n                if (totalSizeMax !== null) {\n                    // get the current total file size\n                    var currentTotalSize = query(\"GET_ACTIVE_ITEMS\").reduce(function(total, item) {\n                        return total + item.fileSize;\n                    }, 0);\n                    // get the size of the new file\n                    if (currentTotalSize > totalSizeMax) {\n                        reject({\n                            status: {\n                                main: query(\"GET_LABEL_MAX_TOTAL_FILE_SIZE_EXCEEDED\"),\n                                sub: replaceInString(query(\"GET_LABEL_MAX_TOTAL_FILE_SIZE\"), {\n                                    filesize: toNaturalFileSize(totalSizeMax, \".\", query(\"GET_FILE_SIZE_BASE\"), query(\"GET_FILE_SIZE_LABELS\", query))\n                                })\n                            }\n                        });\n                        return;\n                    }\n                }\n                // file is fine, let's pass it back\n                resolve(file);\n            });\n        });\n        return {\n            options: {\n                // Enable or disable file type validation\n                allowFileSizeValidation: [\n                    true,\n                    Type.BOOLEAN\n                ],\n                // Max individual file size in bytes\n                maxFileSize: [\n                    null,\n                    Type.INT\n                ],\n                // Min individual file size in bytes\n                minFileSize: [\n                    null,\n                    Type.INT\n                ],\n                // Max total file size in bytes\n                maxTotalFileSize: [\n                    null,\n                    Type.INT\n                ],\n                // Filter the files that need to be validated for size\n                fileValidateSizeFilter: [\n                    null,\n                    Type.FUNCTION\n                ],\n                // error labels\n                labelMinFileSizeExceeded: [\n                    \"File is too small\",\n                    Type.STRING\n                ],\n                labelMinFileSize: [\n                    \"Minimum file size is {filesize}\",\n                    Type.STRING\n                ],\n                labelMaxFileSizeExceeded: [\n                    \"File is too large\",\n                    Type.STRING\n                ],\n                labelMaxFileSize: [\n                    \"Maximum file size is {filesize}\",\n                    Type.STRING\n                ],\n                labelMaxTotalFileSizeExceeded: [\n                    \"Maximum total size exceeded\",\n                    Type.STRING\n                ],\n                labelMaxTotalFileSize: [\n                    \"Maximum total file size is {filesize}\",\n                    Type.STRING\n                ]\n            }\n        };\n    };\n    // fire pluginloaded event if running in browser, this allows registering the plugin when using async script tags\n    var isBrowser = typeof window !== \"undefined\" && typeof window.document !== \"undefined\";\n    if (isBrowser) document.dispatchEvent(new CustomEvent(\"FilePond:pluginloaded\", {\n        detail: plugin\n    }));\n    return plugin;\n});\n\n});\n\nparcelRegister(\"gmco5\", function(module, exports) {\n/*!\n * FilePondPluginFileValidateType 1.2.9\n * Licensed under MIT, https://opensource.org/licenses/MIT/\n * Please visit https://pqina.nl/filepond/ for details.\n */ /* eslint-disable */ (function(global, factory) {\n    module.exports = factory();\n})(module.exports, function() {\n    \"use strict\";\n    var plugin = function plugin(_ref) {\n        var addFilter = _ref.addFilter, utils = _ref.utils;\n        // get quick reference to Type utils\n        var Type = utils.Type, isString = utils.isString, replaceInString = utils.replaceInString, guesstimateMimeType = utils.guesstimateMimeType, getExtensionFromFilename = utils.getExtensionFromFilename, getFilenameFromURL = utils.getFilenameFromURL;\n        var mimeTypeMatchesWildCard = function mimeTypeMatchesWildCard(mimeType, wildcard) {\n            var mimeTypeGroup = (/^[^/]+/.exec(mimeType) || []).pop(); // image/png -> image\n            var wildcardGroup = wildcard.slice(0, -2); // image/* -> image\n            return mimeTypeGroup === wildcardGroup;\n        };\n        var isValidMimeType = function isValidMimeType(acceptedTypes, userInputType) {\n            return acceptedTypes.some(function(acceptedType) {\n                // accepted is wildcard mime type\n                if (/\\*$/.test(acceptedType)) return mimeTypeMatchesWildCard(userInputType, acceptedType);\n                // is normal mime type\n                return acceptedType === userInputType;\n            });\n        };\n        var getItemType = function getItemType(item) {\n            // if the item is a url we guess the mime type by the extension\n            var type = \"\";\n            if (isString(item)) {\n                var filename = getFilenameFromURL(item);\n                var extension = getExtensionFromFilename(filename);\n                if (extension) type = guesstimateMimeType(extension);\n            } else type = item.type;\n            return type;\n        };\n        var validateFile = function validateFile(item, acceptedFileTypes, typeDetector) {\n            // no types defined, everything is allowed \\o/\n            if (acceptedFileTypes.length === 0) return true;\n            // gets the item type\n            var type = getItemType(item);\n            // no type detector, test now\n            if (!typeDetector) return isValidMimeType(acceptedFileTypes, type);\n            // use type detector\n            return new Promise(function(resolve, reject) {\n                typeDetector(item, type).then(function(detectedType) {\n                    if (isValidMimeType(acceptedFileTypes, detectedType)) resolve();\n                    else reject();\n                }).catch(reject);\n            });\n        };\n        var applyMimeTypeMap = function applyMimeTypeMap(map) {\n            return function(acceptedFileType) {\n                return map[acceptedFileType] === null ? false : map[acceptedFileType] || acceptedFileType;\n            };\n        };\n        // setup attribute mapping for accept\n        addFilter(\"SET_ATTRIBUTE_TO_OPTION_MAP\", function(map) {\n            return Object.assign(map, {\n                accept: \"acceptedFileTypes\"\n            });\n        });\n        // filtering if an item is allowed in hopper\n        addFilter(\"ALLOW_HOPPER_ITEM\", function(file, _ref2) {\n            var query = _ref2.query;\n            // if we are not doing file type validation exit\n            if (!query(\"GET_ALLOW_FILE_TYPE_VALIDATION\")) return true;\n            // we validate the file against the accepted file types\n            return validateFile(file, query(\"GET_ACCEPTED_FILE_TYPES\"));\n        });\n        // called for each file that is loaded\n        // right before it is set to the item state\n        // should return a promise\n        addFilter(\"LOAD_FILE\", function(file, _ref3) {\n            var query = _ref3.query;\n            return new Promise(function(resolve, reject) {\n                if (!query(\"GET_ALLOW_FILE_TYPE_VALIDATION\")) {\n                    resolve(file);\n                    return;\n                }\n                var acceptedFileTypes = query(\"GET_ACCEPTED_FILE_TYPES\");\n                // custom type detector method\n                var typeDetector = query(\"GET_FILE_VALIDATE_TYPE_DETECT_TYPE\");\n                // if invalid, exit here\n                var validationResult = validateFile(file, acceptedFileTypes, typeDetector);\n                var handleRejection = function handleRejection() {\n                    var acceptedFileTypesMapped = acceptedFileTypes.map(applyMimeTypeMap(query(\"GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES_MAP\"))).filter(function(label) {\n                        return label !== false;\n                    });\n                    var acceptedFileTypesMappedUnique = acceptedFileTypesMapped.filter(function(item, index) {\n                        return acceptedFileTypesMapped.indexOf(item) === index;\n                    });\n                    reject({\n                        status: {\n                            main: query(\"GET_LABEL_FILE_TYPE_NOT_ALLOWED\"),\n                            sub: replaceInString(query(\"GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES\"), {\n                                allTypes: acceptedFileTypesMappedUnique.join(\", \"),\n                                allButLastType: acceptedFileTypesMappedUnique.slice(0, -1).join(\", \"),\n                                lastType: acceptedFileTypesMappedUnique[acceptedFileTypesMappedUnique.length - 1]\n                            })\n                        }\n                    });\n                };\n                // has returned new filename immidiately\n                if (typeof validationResult === \"boolean\") {\n                    if (!validationResult) return handleRejection();\n                    return resolve(file);\n                }\n                // is promise\n                validationResult.then(function() {\n                    resolve(file);\n                }).catch(handleRejection);\n            });\n        });\n        // expose plugin\n        return {\n            // default options\n            options: {\n                // Enable or disable file type validation\n                allowFileTypeValidation: [\n                    true,\n                    Type.BOOLEAN\n                ],\n                // What file types to accept\n                acceptedFileTypes: [\n                    [],\n                    Type.ARRAY\n                ],\n                // - must be comma separated\n                // - mime types: image/png, image/jpeg, image/gif\n                // - extensions: .png, .jpg, .jpeg ( not enabled yet )\n                // - wildcards: image/*\n                // label to show when a type is not allowed\n                labelFileTypeNotAllowed: [\n                    \"File is of invalid type\",\n                    Type.STRING\n                ],\n                // nicer label\n                fileValidateTypeLabelExpectedTypes: [\n                    \"Expects {allButLastType} or {lastType}\",\n                    Type.STRING\n                ],\n                // map mime types to extensions\n                fileValidateTypeLabelExpectedTypesMap: [\n                    {},\n                    Type.OBJECT\n                ],\n                // Custom function to detect type of file\n                fileValidateTypeDetectType: [\n                    null,\n                    Type.FUNCTION\n                ]\n            }\n        };\n    };\n    // fire pluginloaded event if running in browser, this allows registering the plugin when using async script tags\n    var isBrowser = typeof window !== \"undefined\" && typeof window.document !== \"undefined\";\n    if (isBrowser) document.dispatchEvent(new CustomEvent(\"FilePond:pluginloaded\", {\n        detail: plugin\n    }));\n    return plugin;\n});\n\n});\n\n\n})();\n//# sourceMappingURL=filepond.8361a518.js.map\n","import * as FilePond from \"filepond\";\nimport FilePondPluginFileValidateSize from \"filepond-plugin-file-validate-size\";\nimport FilePondPluginFileValidateType from \"filepond-plugin-file-validate-type\";\nimport \"filepond/dist/filepond.min.css\";\n\nexport {\n  FilePond,\n  FilePondPluginFileValidateSize,\n  FilePondPluginFileValidateType,\n};\n","/*!\n * FilePond 4.30.6\n * Licensed under MIT, https://opensource.org/licenses/MIT/\n * Please visit https://pqina.nl/filepond/ for details.\n */\n\n/* eslint-disable */\n\n(function(global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined'\n        ? factory(exports)\n        : typeof define === 'function' && define.amd\n        ? define(['exports'], factory)\n        : ((global = global || self), factory((global.FilePond = {})));\n})(this, function(exports) {\n    'use strict';\n\n    var isNode = function isNode(value) {\n        return value instanceof HTMLElement;\n    };\n\n    var createStore = function createStore(initialState) {\n        var queries = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n        var actions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n        // internal state\n        var state = Object.assign({}, initialState);\n\n        // contains all actions for next frame, is clear when actions are requested\n        var actionQueue = [];\n        var dispatchQueue = [];\n\n        // returns a duplicate of the current state\n        var getState = function getState() {\n            return Object.assign({}, state);\n        };\n\n        // returns a duplicate of the actions array and clears the actions array\n        var processActionQueue = function processActionQueue() {\n            // create copy of actions queue\n            var queue = [].concat(actionQueue);\n\n            // clear actions queue (we don't want no double actions)\n            actionQueue.length = 0;\n\n            return queue;\n        };\n\n        // processes actions that might block the main UI thread\n        var processDispatchQueue = function processDispatchQueue() {\n            // create copy of actions queue\n            var queue = [].concat(dispatchQueue);\n\n            // clear actions queue (we don't want no double actions)\n            dispatchQueue.length = 0;\n\n            // now dispatch these actions\n            queue.forEach(function(_ref) {\n                var type = _ref.type,\n                    data = _ref.data;\n                dispatch(type, data);\n            });\n        };\n\n        // adds a new action, calls its handler and\n        var dispatch = function dispatch(type, data, isBlocking) {\n            // is blocking action (should never block if document is hidden)\n            if (isBlocking && !document.hidden) {\n                dispatchQueue.push({ type: type, data: data });\n                return;\n            }\n\n            // if this action has a handler, handle the action\n            if (actionHandlers[type]) {\n                actionHandlers[type](data);\n            }\n\n            // now add action\n            actionQueue.push({\n                type: type,\n                data: data,\n            });\n        };\n\n        var query = function query(str) {\n            var _queryHandles;\n            for (\n                var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1;\n                _key < _len;\n                _key++\n            ) {\n                args[_key - 1] = arguments[_key];\n            }\n            return queryHandles[str]\n                ? (_queryHandles = queryHandles)[str].apply(_queryHandles, args)\n                : null;\n        };\n\n        var api = {\n            getState: getState,\n            processActionQueue: processActionQueue,\n            processDispatchQueue: processDispatchQueue,\n            dispatch: dispatch,\n            query: query,\n        };\n\n        var queryHandles = {};\n        queries.forEach(function(query) {\n            queryHandles = Object.assign({}, query(state), {}, queryHandles);\n        });\n\n        var actionHandlers = {};\n        actions.forEach(function(action) {\n            actionHandlers = Object.assign({}, action(dispatch, query, state), {}, actionHandlers);\n        });\n\n        return api;\n    };\n\n    var defineProperty = function defineProperty(obj, property, definition) {\n        if (typeof definition === 'function') {\n            obj[property] = definition;\n            return;\n        }\n        Object.defineProperty(obj, property, Object.assign({}, definition));\n    };\n\n    var forin = function forin(obj, cb) {\n        for (var key in obj) {\n            if (!obj.hasOwnProperty(key)) {\n                continue;\n            }\n\n            cb(key, obj[key]);\n        }\n    };\n\n    var createObject = function createObject(definition) {\n        var obj = {};\n        forin(definition, function(property) {\n            defineProperty(obj, property, definition[property]);\n        });\n        return obj;\n    };\n\n    var attr = function attr(node, name) {\n        var value = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n        if (value === null) {\n            return node.getAttribute(name) || node.hasAttribute(name);\n        }\n        node.setAttribute(name, value);\n    };\n\n    var ns = 'http://www.w3.org/2000/svg';\n    var svgElements = ['svg', 'path']; // only svg elements used\n\n    var isSVGElement = function isSVGElement(tag) {\n        return svgElements.includes(tag);\n    };\n\n    var createElement = function createElement(tag, className) {\n        var attributes = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n        if (typeof className === 'object') {\n            attributes = className;\n            className = null;\n        }\n        var element = isSVGElement(tag)\n            ? document.createElementNS(ns, tag)\n            : document.createElement(tag);\n        if (className) {\n            if (isSVGElement(tag)) {\n                attr(element, 'class', className);\n            } else {\n                element.className = className;\n            }\n        }\n        forin(attributes, function(name, value) {\n            attr(element, name, value);\n        });\n        return element;\n    };\n\n    var appendChild = function appendChild(parent) {\n        return function(child, index) {\n            if (typeof index !== 'undefined' && parent.children[index]) {\n                parent.insertBefore(child, parent.children[index]);\n            } else {\n                parent.appendChild(child);\n            }\n        };\n    };\n\n    var appendChildView = function appendChildView(parent, childViews) {\n        return function(view, index) {\n            if (typeof index !== 'undefined') {\n                childViews.splice(index, 0, view);\n            } else {\n                childViews.push(view);\n            }\n\n            return view;\n        };\n    };\n\n    var removeChildView = function removeChildView(parent, childViews) {\n        return function(view) {\n            // remove from child views\n            childViews.splice(childViews.indexOf(view), 1);\n\n            // remove the element\n            if (view.element.parentNode) {\n                parent.removeChild(view.element);\n            }\n\n            return view;\n        };\n    };\n\n    var IS_BROWSER = (function() {\n        return typeof window !== 'undefined' && typeof window.document !== 'undefined';\n    })();\n    var isBrowser = function isBrowser() {\n        return IS_BROWSER;\n    };\n\n    var testElement = isBrowser() ? createElement('svg') : {};\n    var getChildCount =\n        'children' in testElement\n            ? function(el) {\n                  return el.children.length;\n              }\n            : function(el) {\n                  return el.childNodes.length;\n              };\n\n    var getViewRect = function getViewRect(elementRect, childViews, offset, scale) {\n        var left = offset[0] || elementRect.left;\n        var top = offset[1] || elementRect.top;\n        var right = left + elementRect.width;\n        var bottom = top + elementRect.height * (scale[1] || 1);\n\n        var rect = {\n            // the rectangle of the element itself\n            element: Object.assign({}, elementRect),\n\n            // the rectangle of the element expanded to contain its children, does not include any margins\n            inner: {\n                left: elementRect.left,\n                top: elementRect.top,\n                right: elementRect.right,\n                bottom: elementRect.bottom,\n            },\n\n            // the rectangle of the element expanded to contain its children including own margin and child margins\n            // margins will be added after we've recalculated the size\n            outer: {\n                left: left,\n                top: top,\n                right: right,\n                bottom: bottom,\n            },\n        };\n\n        // expand rect to fit all child rectangles\n        childViews\n            .filter(function(childView) {\n                return !childView.isRectIgnored();\n            })\n            .map(function(childView) {\n                return childView.rect;\n            })\n            .forEach(function(childViewRect) {\n                expandRect(rect.inner, Object.assign({}, childViewRect.inner));\n                expandRect(rect.outer, Object.assign({}, childViewRect.outer));\n            });\n\n        // calculate inner width and height\n        calculateRectSize(rect.inner);\n\n        // append additional margin (top and left margins are included in top and left automatically)\n        rect.outer.bottom += rect.element.marginBottom;\n        rect.outer.right += rect.element.marginRight;\n\n        // calculate outer width and height\n        calculateRectSize(rect.outer);\n\n        return rect;\n    };\n\n    var expandRect = function expandRect(parent, child) {\n        // adjust for parent offset\n        child.top += parent.top;\n        child.right += parent.left;\n        child.bottom += parent.top;\n        child.left += parent.left;\n\n        if (child.bottom > parent.bottom) {\n            parent.bottom = child.bottom;\n        }\n\n        if (child.right > parent.right) {\n            parent.right = child.right;\n        }\n    };\n\n    var calculateRectSize = function calculateRectSize(rect) {\n        rect.width = rect.right - rect.left;\n        rect.height = rect.bottom - rect.top;\n    };\n\n    var isNumber = function isNumber(value) {\n        return typeof value === 'number';\n    };\n\n    /**\n     * Determines if position is at destination\n     * @param position\n     * @param destination\n     * @param velocity\n     * @param errorMargin\n     * @returns {boolean}\n     */\n    var thereYet = function thereYet(position, destination, velocity) {\n        var errorMargin = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0.001;\n        return Math.abs(position - destination) < errorMargin && Math.abs(velocity) < errorMargin;\n    };\n\n    /**\n     * Spring animation\n     */\n    var spring =\n        // default options\n        function spring() // method definition\n        {\n            var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n                _ref$stiffness = _ref.stiffness,\n                stiffness = _ref$stiffness === void 0 ? 0.5 : _ref$stiffness,\n                _ref$damping = _ref.damping,\n                damping = _ref$damping === void 0 ? 0.75 : _ref$damping,\n                _ref$mass = _ref.mass,\n                mass = _ref$mass === void 0 ? 10 : _ref$mass;\n            var target = null;\n            var position = null;\n            var velocity = 0;\n            var resting = false;\n\n            // updates spring state\n            var interpolate = function interpolate(ts, skipToEndState) {\n                // in rest, don't animate\n                if (resting) return;\n\n                // need at least a target or position to do springy things\n                if (!(isNumber(target) && isNumber(position))) {\n                    resting = true;\n                    velocity = 0;\n                    return;\n                }\n\n                // calculate spring force\n                var f = -(position - target) * stiffness;\n\n                // update velocity by adding force based on mass\n                velocity += f / mass;\n\n                // update position by adding velocity\n                position += velocity;\n\n                // slow down based on amount of damping\n                velocity *= damping;\n\n                // we've arrived if we're near target and our velocity is near zero\n                if (thereYet(position, target, velocity) || skipToEndState) {\n                    position = target;\n                    velocity = 0;\n                    resting = true;\n\n                    // we done\n                    api.onupdate(position);\n                    api.oncomplete(position);\n                } else {\n                    // progress update\n                    api.onupdate(position);\n                }\n            };\n\n            /**\n             * Set new target value\n             * @param value\n             */\n            var setTarget = function setTarget(value) {\n                // if currently has no position, set target and position to this value\n                if (isNumber(value) && !isNumber(position)) {\n                    position = value;\n                }\n\n                // next target value will not be animated to\n                if (target === null) {\n                    target = value;\n                    position = value;\n                }\n\n                // let start moving to target\n                target = value;\n\n                // already at target\n                if (position === target || typeof target === 'undefined') {\n                    // now resting as target is current position, stop moving\n                    resting = true;\n                    velocity = 0;\n\n                    // done!\n                    api.onupdate(position);\n                    api.oncomplete(position);\n\n                    return;\n                }\n\n                resting = false;\n            };\n\n            // need 'api' to call onupdate callback\n            var api = createObject({\n                interpolate: interpolate,\n                target: {\n                    set: setTarget,\n                    get: function get() {\n                        return target;\n                    },\n                },\n\n                resting: {\n                    get: function get() {\n                        return resting;\n                    },\n                },\n\n                onupdate: function onupdate(value) {},\n                oncomplete: function oncomplete(value) {},\n            });\n\n            return api;\n        };\n\n    var easeLinear = function easeLinear(t) {\n        return t;\n    };\n    var easeInOutQuad = function easeInOutQuad(t) {\n        return t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n    };\n\n    var tween =\n        // default values\n        function tween() // method definition\n        {\n            var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n                _ref$duration = _ref.duration,\n                duration = _ref$duration === void 0 ? 500 : _ref$duration,\n                _ref$easing = _ref.easing,\n                easing = _ref$easing === void 0 ? easeInOutQuad : _ref$easing,\n                _ref$delay = _ref.delay,\n                delay = _ref$delay === void 0 ? 0 : _ref$delay;\n            var start = null;\n            var t;\n            var p;\n            var resting = true;\n            var reverse = false;\n            var target = null;\n\n            var interpolate = function interpolate(ts, skipToEndState) {\n                if (resting || target === null) return;\n\n                if (start === null) {\n                    start = ts;\n                }\n\n                if (ts - start < delay) return;\n\n                t = ts - start - delay;\n\n                if (t >= duration || skipToEndState) {\n                    t = 1;\n                    p = reverse ? 0 : 1;\n                    api.onupdate(p * target);\n                    api.oncomplete(p * target);\n                    resting = true;\n                } else {\n                    p = t / duration;\n                    api.onupdate((t >= 0 ? easing(reverse ? 1 - p : p) : 0) * target);\n                }\n            };\n\n            // need 'api' to call onupdate callback\n            var api = createObject({\n                interpolate: interpolate,\n                target: {\n                    get: function get() {\n                        return reverse ? 0 : target;\n                    },\n                    set: function set(value) {\n                        // is initial value\n                        if (target === null) {\n                            target = value;\n                            api.onupdate(value);\n                            api.oncomplete(value);\n                            return;\n                        }\n\n                        // want to tween to a smaller value and have a current value\n                        if (value < target) {\n                            target = 1;\n                            reverse = true;\n                        } else {\n                            // not tweening to a smaller value\n                            reverse = false;\n                            target = value;\n                        }\n\n                        // let's go!\n                        resting = false;\n                        start = null;\n                    },\n                },\n\n                resting: {\n                    get: function get() {\n                        return resting;\n                    },\n                },\n\n                onupdate: function onupdate(value) {},\n                oncomplete: function oncomplete(value) {},\n            });\n\n            return api;\n        };\n\n    var animator = {\n        spring: spring,\n        tween: tween,\n    };\n\n    /*\n                       { type: 'spring', stiffness: .5, damping: .75, mass: 10 };\n                       { translation: { type: 'spring', ... }, ... }\n                       { translation: { x: { type: 'spring', ... } } }\n                      */\n    var createAnimator = function createAnimator(definition, category, property) {\n        // default is single definition\n        // we check if transform is set, if so, we check if property is set\n        var def =\n            definition[category] && typeof definition[category][property] === 'object'\n                ? definition[category][property]\n                : definition[category] || definition;\n\n        var type = typeof def === 'string' ? def : def.type;\n        var props = typeof def === 'object' ? Object.assign({}, def) : {};\n\n        return animator[type] ? animator[type](props) : null;\n    };\n\n    var addGetSet = function addGetSet(keys, obj, props) {\n        var overwrite = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n        obj = Array.isArray(obj) ? obj : [obj];\n        obj.forEach(function(o) {\n            keys.forEach(function(key) {\n                var name = key;\n                var getter = function getter() {\n                    return props[key];\n                };\n                var setter = function setter(value) {\n                    return (props[key] = value);\n                };\n\n                if (typeof key === 'object') {\n                    name = key.key;\n                    getter = key.getter || getter;\n                    setter = key.setter || setter;\n                }\n\n                if (o[name] && !overwrite) {\n                    return;\n                }\n\n                o[name] = {\n                    get: getter,\n                    set: setter,\n                };\n            });\n        });\n    };\n\n    // add to state,\n    // add getters and setters to internal and external api (if not set)\n    // setup animators\n\n    var animations = function animations(_ref) {\n        var mixinConfig = _ref.mixinConfig,\n            viewProps = _ref.viewProps,\n            viewInternalAPI = _ref.viewInternalAPI,\n            viewExternalAPI = _ref.viewExternalAPI;\n        // initial properties\n        var initialProps = Object.assign({}, viewProps);\n\n        // list of all active animations\n        var animations = [];\n\n        // setup animators\n        forin(mixinConfig, function(property, animation) {\n            var animator = createAnimator(animation);\n            if (!animator) {\n                return;\n            }\n\n            // when the animator updates, update the view state value\n            animator.onupdate = function(value) {\n                viewProps[property] = value;\n            };\n\n            // set animator target\n            animator.target = initialProps[property];\n\n            // when value is set, set the animator target value\n            var prop = {\n                key: property,\n                setter: function setter(value) {\n                    // if already at target, we done!\n                    if (animator.target === value) {\n                        return;\n                    }\n\n                    animator.target = value;\n                },\n                getter: function getter() {\n                    return viewProps[property];\n                },\n            };\n\n            // add getters and setters\n            addGetSet([prop], [viewInternalAPI, viewExternalAPI], viewProps, true);\n\n            // add it to the list for easy updating from the _write method\n            animations.push(animator);\n        });\n\n        // expose internal write api\n        return {\n            write: function write(ts) {\n                var skipToEndState = document.hidden;\n                var resting = true;\n                animations.forEach(function(animation) {\n                    if (!animation.resting) resting = false;\n                    animation.interpolate(ts, skipToEndState);\n                });\n                return resting;\n            },\n            destroy: function destroy() {},\n        };\n    };\n\n    var addEvent = function addEvent(element) {\n        return function(type, fn) {\n            element.addEventListener(type, fn);\n        };\n    };\n\n    var removeEvent = function removeEvent(element) {\n        return function(type, fn) {\n            element.removeEventListener(type, fn);\n        };\n    };\n\n    // mixin\n    var listeners = function listeners(_ref) {\n        var mixinConfig = _ref.mixinConfig,\n            viewProps = _ref.viewProps,\n            viewInternalAPI = _ref.viewInternalAPI,\n            viewExternalAPI = _ref.viewExternalAPI,\n            viewState = _ref.viewState,\n            view = _ref.view;\n        var events = [];\n\n        var add = addEvent(view.element);\n        var remove = removeEvent(view.element);\n\n        viewExternalAPI.on = function(type, fn) {\n            events.push({\n                type: type,\n                fn: fn,\n            });\n\n            add(type, fn);\n        };\n\n        viewExternalAPI.off = function(type, fn) {\n            events.splice(\n                events.findIndex(function(event) {\n                    return event.type === type && event.fn === fn;\n                }),\n                1\n            );\n\n            remove(type, fn);\n        };\n\n        return {\n            write: function write() {\n                // not busy\n                return true;\n            },\n            destroy: function destroy() {\n                events.forEach(function(event) {\n                    remove(event.type, event.fn);\n                });\n            },\n        };\n    };\n\n    // add to external api and link to props\n\n    var apis = function apis(_ref) {\n        var mixinConfig = _ref.mixinConfig,\n            viewProps = _ref.viewProps,\n            viewExternalAPI = _ref.viewExternalAPI;\n        addGetSet(mixinConfig, viewExternalAPI, viewProps);\n    };\n\n    var isDefined = function isDefined(value) {\n        return value != null;\n    };\n\n    // add to state,\n    // add getters and setters to internal and external api (if not set)\n    // set initial state based on props in viewProps\n    // apply as transforms each frame\n\n    var defaults = {\n        opacity: 1,\n        scaleX: 1,\n        scaleY: 1,\n        translateX: 0,\n        translateY: 0,\n        rotateX: 0,\n        rotateY: 0,\n        rotateZ: 0,\n        originX: 0,\n        originY: 0,\n    };\n\n    var styles = function styles(_ref) {\n        var mixinConfig = _ref.mixinConfig,\n            viewProps = _ref.viewProps,\n            viewInternalAPI = _ref.viewInternalAPI,\n            viewExternalAPI = _ref.viewExternalAPI,\n            view = _ref.view;\n        // initial props\n        var initialProps = Object.assign({}, viewProps);\n\n        // current props\n        var currentProps = {};\n\n        // we will add those properties to the external API and link them to the viewState\n        addGetSet(mixinConfig, [viewInternalAPI, viewExternalAPI], viewProps);\n\n        // override rect on internal and external rect getter so it takes in account transforms\n        var getOffset = function getOffset() {\n            return [viewProps['translateX'] || 0, viewProps['translateY'] || 0];\n        };\n\n        var getScale = function getScale() {\n            return [viewProps['scaleX'] || 0, viewProps['scaleY'] || 0];\n        };\n        var getRect = function getRect() {\n            return view.rect\n                ? getViewRect(view.rect, view.childViews, getOffset(), getScale())\n                : null;\n        };\n        viewInternalAPI.rect = { get: getRect };\n        viewExternalAPI.rect = { get: getRect };\n\n        // apply view props\n        mixinConfig.forEach(function(key) {\n            viewProps[key] =\n                typeof initialProps[key] === 'undefined' ? defaults[key] : initialProps[key];\n        });\n\n        // expose api\n        return {\n            write: function write() {\n                // see if props have changed\n                if (!propsHaveChanged(currentProps, viewProps)) {\n                    return;\n                }\n\n                // moves element to correct position on screen\n                applyStyles(view.element, viewProps);\n\n                // store new transforms\n                Object.assign(currentProps, Object.assign({}, viewProps));\n\n                // no longer busy\n                return true;\n            },\n            destroy: function destroy() {},\n        };\n    };\n\n    var propsHaveChanged = function propsHaveChanged(currentProps, newProps) {\n        // different amount of keys\n        if (Object.keys(currentProps).length !== Object.keys(newProps).length) {\n            return true;\n        }\n\n        // lets analyze the individual props\n        for (var prop in newProps) {\n            if (newProps[prop] !== currentProps[prop]) {\n                return true;\n            }\n        }\n\n        return false;\n    };\n\n    var applyStyles = function applyStyles(element, _ref2) {\n        var opacity = _ref2.opacity,\n            perspective = _ref2.perspective,\n            translateX = _ref2.translateX,\n            translateY = _ref2.translateY,\n            scaleX = _ref2.scaleX,\n            scaleY = _ref2.scaleY,\n            rotateX = _ref2.rotateX,\n            rotateY = _ref2.rotateY,\n            rotateZ = _ref2.rotateZ,\n            originX = _ref2.originX,\n            originY = _ref2.originY,\n            width = _ref2.width,\n            height = _ref2.height;\n\n        var transforms = '';\n        var styles = '';\n\n        // handle transform origin\n        if (isDefined(originX) || isDefined(originY)) {\n            styles += 'transform-origin: ' + (originX || 0) + 'px ' + (originY || 0) + 'px;';\n        }\n\n        // transform order is relevant\n        // 0. perspective\n        if (isDefined(perspective)) {\n            transforms += 'perspective(' + perspective + 'px) ';\n        }\n\n        // 1. translate\n        if (isDefined(translateX) || isDefined(translateY)) {\n            transforms +=\n                'translate3d(' + (translateX || 0) + 'px, ' + (translateY || 0) + 'px, 0) ';\n        }\n\n        // 2. scale\n        if (isDefined(scaleX) || isDefined(scaleY)) {\n            transforms +=\n                'scale3d(' +\n                (isDefined(scaleX) ? scaleX : 1) +\n                ', ' +\n                (isDefined(scaleY) ? scaleY : 1) +\n                ', 1) ';\n        }\n\n        // 3. rotate\n        if (isDefined(rotateZ)) {\n            transforms += 'rotateZ(' + rotateZ + 'rad) ';\n        }\n\n        if (isDefined(rotateX)) {\n            transforms += 'rotateX(' + rotateX + 'rad) ';\n        }\n\n        if (isDefined(rotateY)) {\n            transforms += 'rotateY(' + rotateY + 'rad) ';\n        }\n\n        // add transforms\n        if (transforms.length) {\n            styles += 'transform:' + transforms + ';';\n        }\n\n        // add opacity\n        if (isDefined(opacity)) {\n            styles += 'opacity:' + opacity + ';';\n\n            // if we reach zero, we make the element inaccessible\n            if (opacity === 0) {\n                styles += 'visibility:hidden;';\n            }\n\n            // if we're below 100% opacity this element can't be clicked\n            if (opacity < 1) {\n                styles += 'pointer-events:none;';\n            }\n        }\n\n        // add height\n        if (isDefined(height)) {\n            styles += 'height:' + height + 'px;';\n        }\n\n        // add width\n        if (isDefined(width)) {\n            styles += 'width:' + width + 'px;';\n        }\n\n        // apply styles\n        var elementCurrentStyle = element.elementCurrentStyle || '';\n\n        // if new styles does not match current styles, lets update!\n        if (styles.length !== elementCurrentStyle.length || styles !== elementCurrentStyle) {\n            element.style.cssText = styles;\n            // store current styles so we can compare them to new styles later on\n            // _not_ getting the style value is faster\n            element.elementCurrentStyle = styles;\n        }\n    };\n\n    var Mixins = {\n        styles: styles,\n        listeners: listeners,\n        animations: animations,\n        apis: apis,\n    };\n\n    var updateRect = function updateRect() {\n        var rect = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        var element = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        var style = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n        if (!element.layoutCalculated) {\n            rect.paddingTop = parseInt(style.paddingTop, 10) || 0;\n            rect.marginTop = parseInt(style.marginTop, 10) || 0;\n            rect.marginRight = parseInt(style.marginRight, 10) || 0;\n            rect.marginBottom = parseInt(style.marginBottom, 10) || 0;\n            rect.marginLeft = parseInt(style.marginLeft, 10) || 0;\n            element.layoutCalculated = true;\n        }\n\n        rect.left = element.offsetLeft || 0;\n        rect.top = element.offsetTop || 0;\n        rect.width = element.offsetWidth || 0;\n        rect.height = element.offsetHeight || 0;\n\n        rect.right = rect.left + rect.width;\n        rect.bottom = rect.top + rect.height;\n\n        rect.scrollTop = element.scrollTop;\n\n        rect.hidden = element.offsetParent === null;\n\n        return rect;\n    };\n\n    var createView =\n        // default view definition\n        function createView() {\n            var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n                _ref$tag = _ref.tag,\n                tag = _ref$tag === void 0 ? 'div' : _ref$tag,\n                _ref$name = _ref.name,\n                name = _ref$name === void 0 ? null : _ref$name,\n                _ref$attributes = _ref.attributes,\n                attributes = _ref$attributes === void 0 ? {} : _ref$attributes,\n                _ref$read = _ref.read,\n                read = _ref$read === void 0 ? function() {} : _ref$read,\n                _ref$write = _ref.write,\n                write = _ref$write === void 0 ? function() {} : _ref$write,\n                _ref$create = _ref.create,\n                create = _ref$create === void 0 ? function() {} : _ref$create,\n                _ref$destroy = _ref.destroy,\n                destroy = _ref$destroy === void 0 ? function() {} : _ref$destroy,\n                _ref$filterFrameActio = _ref.filterFrameActionsForChild,\n                filterFrameActionsForChild =\n                    _ref$filterFrameActio === void 0\n                        ? function(child, actions) {\n                              return actions;\n                          }\n                        : _ref$filterFrameActio,\n                _ref$didCreateView = _ref.didCreateView,\n                didCreateView = _ref$didCreateView === void 0 ? function() {} : _ref$didCreateView,\n                _ref$didWriteView = _ref.didWriteView,\n                didWriteView = _ref$didWriteView === void 0 ? function() {} : _ref$didWriteView,\n                _ref$ignoreRect = _ref.ignoreRect,\n                ignoreRect = _ref$ignoreRect === void 0 ? false : _ref$ignoreRect,\n                _ref$ignoreRectUpdate = _ref.ignoreRectUpdate,\n                ignoreRectUpdate = _ref$ignoreRectUpdate === void 0 ? false : _ref$ignoreRectUpdate,\n                _ref$mixins = _ref.mixins,\n                mixins = _ref$mixins === void 0 ? [] : _ref$mixins;\n            return function(\n                // each view requires reference to store\n                store\n            ) {\n                var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n                // root element should not be changed\n                var element = createElement(tag, 'filepond--' + name, attributes);\n\n                // style reference should also not be changed\n                var style = window.getComputedStyle(element, null);\n\n                // element rectangle\n                var rect = updateRect();\n                var frameRect = null;\n\n                // rest state\n                var isResting = false;\n\n                // pretty self explanatory\n                var childViews = [];\n\n                // loaded mixins\n                var activeMixins = [];\n\n                // references to created children\n                var ref = {};\n\n                // state used for each instance\n                var state = {};\n\n                // list of writers that will be called to update this view\n                var writers = [\n                    write, // default writer\n                ];\n\n                var readers = [\n                    read, // default reader\n                ];\n\n                var destroyers = [\n                    destroy, // default destroy\n                ];\n\n                // core view methods\n                var getElement = function getElement() {\n                    return element;\n                };\n                var getChildViews = function getChildViews() {\n                    return childViews.concat();\n                };\n                var getReference = function getReference() {\n                    return ref;\n                };\n                var createChildView = function createChildView(store) {\n                    return function(view, props) {\n                        return view(store, props);\n                    };\n                };\n                var getRect = function getRect() {\n                    if (frameRect) {\n                        return frameRect;\n                    }\n                    frameRect = getViewRect(rect, childViews, [0, 0], [1, 1]);\n                    return frameRect;\n                };\n                var getStyle = function getStyle() {\n                    return style;\n                };\n\n                /**\n                 * Read data from DOM\n                 * @private\n                 */\n                var _read = function _read() {\n                    frameRect = null;\n\n                    // read child views\n                    childViews.forEach(function(child) {\n                        return child._read();\n                    });\n\n                    var shouldUpdate = !(ignoreRectUpdate && rect.width && rect.height);\n                    if (shouldUpdate) {\n                        updateRect(rect, element, style);\n                    }\n\n                    // readers\n                    var api = { root: internalAPI, props: props, rect: rect };\n                    readers.forEach(function(reader) {\n                        return reader(api);\n                    });\n                };\n\n                /**\n                 * Write data to DOM\n                 * @private\n                 */\n                var _write = function _write(ts, frameActions, shouldOptimize) {\n                    // if no actions, we assume that the view is resting\n                    var resting = frameActions.length === 0;\n\n                    // writers\n                    writers.forEach(function(writer) {\n                        var writerResting = writer({\n                            props: props,\n                            root: internalAPI,\n                            actions: frameActions,\n                            timestamp: ts,\n                            shouldOptimize: shouldOptimize,\n                        });\n\n                        if (writerResting === false) {\n                            resting = false;\n                        }\n                    });\n\n                    // run mixins\n                    activeMixins.forEach(function(mixin) {\n                        // if one of the mixins is still busy after write operation, we are not resting\n                        var mixinResting = mixin.write(ts);\n                        if (mixinResting === false) {\n                            resting = false;\n                        }\n                    });\n\n                    // updates child views that are currently attached to the DOM\n                    childViews\n                        .filter(function(child) {\n                            return !!child.element.parentNode;\n                        })\n                        .forEach(function(child) {\n                            // if a child view is not resting, we are not resting\n                            var childResting = child._write(\n                                ts,\n                                filterFrameActionsForChild(child, frameActions),\n                                shouldOptimize\n                            );\n\n                            if (!childResting) {\n                                resting = false;\n                            }\n                        });\n\n                    // append new elements to DOM and update those\n                    childViews\n                        //.filter(child => !child.element.parentNode)\n                        .forEach(function(child, index) {\n                            // skip\n                            if (child.element.parentNode) {\n                                return;\n                            }\n\n                            // append to DOM\n                            internalAPI.appendChild(child.element, index);\n\n                            // call read (need to know the size of these elements)\n                            child._read();\n\n                            // re-call write\n                            child._write(\n                                ts,\n                                filterFrameActionsForChild(child, frameActions),\n                                shouldOptimize\n                            );\n\n                            // we just added somthing to the dom, no rest\n                            resting = false;\n                        });\n\n                    // update resting state\n                    isResting = resting;\n\n                    didWriteView({\n                        props: props,\n                        root: internalAPI,\n                        actions: frameActions,\n                        timestamp: ts,\n                    });\n\n                    // let parent know if we are resting\n                    return resting;\n                };\n\n                var _destroy = function _destroy() {\n                    activeMixins.forEach(function(mixin) {\n                        return mixin.destroy();\n                    });\n                    destroyers.forEach(function(destroyer) {\n                        destroyer({ root: internalAPI, props: props });\n                    });\n                    childViews.forEach(function(child) {\n                        return child._destroy();\n                    });\n                };\n\n                // sharedAPI\n                var sharedAPIDefinition = {\n                    element: {\n                        get: getElement,\n                    },\n\n                    style: {\n                        get: getStyle,\n                    },\n\n                    childViews: {\n                        get: getChildViews,\n                    },\n                };\n\n                // private API definition\n                var internalAPIDefinition = Object.assign({}, sharedAPIDefinition, {\n                    rect: {\n                        get: getRect,\n                    },\n\n                    // access to custom children references\n                    ref: {\n                        get: getReference,\n                    },\n\n                    // dom modifiers\n                    is: function is(needle) {\n                        return name === needle;\n                    },\n                    appendChild: appendChild(element),\n                    createChildView: createChildView(store),\n                    linkView: function linkView(view) {\n                        childViews.push(view);\n                        return view;\n                    },\n                    unlinkView: function unlinkView(view) {\n                        childViews.splice(childViews.indexOf(view), 1);\n                    },\n                    appendChildView: appendChildView(element, childViews),\n                    removeChildView: removeChildView(element, childViews),\n                    registerWriter: function registerWriter(writer) {\n                        return writers.push(writer);\n                    },\n                    registerReader: function registerReader(reader) {\n                        return readers.push(reader);\n                    },\n                    registerDestroyer: function registerDestroyer(destroyer) {\n                        return destroyers.push(destroyer);\n                    },\n                    invalidateLayout: function invalidateLayout() {\n                        return (element.layoutCalculated = false);\n                    },\n\n                    // access to data store\n                    dispatch: store.dispatch,\n                    query: store.query,\n                });\n\n                // public view API methods\n                var externalAPIDefinition = {\n                    element: {\n                        get: getElement,\n                    },\n\n                    childViews: {\n                        get: getChildViews,\n                    },\n\n                    rect: {\n                        get: getRect,\n                    },\n\n                    resting: {\n                        get: function get() {\n                            return isResting;\n                        },\n                    },\n\n                    isRectIgnored: function isRectIgnored() {\n                        return ignoreRect;\n                    },\n                    _read: _read,\n                    _write: _write,\n                    _destroy: _destroy,\n                };\n\n                // mixin API methods\n                var mixinAPIDefinition = Object.assign({}, sharedAPIDefinition, {\n                    rect: {\n                        get: function get() {\n                            return rect;\n                        },\n                    },\n                });\n\n                // add mixin functionality\n                Object.keys(mixins)\n                    .sort(function(a, b) {\n                        // move styles to the back of the mixin list (so adjustments of other mixins are applied to the props correctly)\n                        if (a === 'styles') {\n                            return 1;\n                        } else if (b === 'styles') {\n                            return -1;\n                        }\n                        return 0;\n                    })\n                    .forEach(function(key) {\n                        var mixinAPI = Mixins[key]({\n                            mixinConfig: mixins[key],\n                            viewProps: props,\n                            viewState: state,\n                            viewInternalAPI: internalAPIDefinition,\n                            viewExternalAPI: externalAPIDefinition,\n                            view: createObject(mixinAPIDefinition),\n                        });\n\n                        if (mixinAPI) {\n                            activeMixins.push(mixinAPI);\n                        }\n                    });\n\n                // construct private api\n                var internalAPI = createObject(internalAPIDefinition);\n\n                // create the view\n                create({\n                    root: internalAPI,\n                    props: props,\n                });\n\n                // append created child views to root node\n                var childCount = getChildCount(element); // need to know the current child count so appending happens in correct order\n                childViews.forEach(function(child, index) {\n                    internalAPI.appendChild(child.element, childCount + index);\n                });\n\n                // call did create\n                didCreateView(internalAPI);\n\n                // expose public api\n                return createObject(externalAPIDefinition);\n            };\n        };\n\n    var createPainter = function createPainter(read, write) {\n        var fps = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 60;\n\n        var name = '__framePainter';\n\n        // set global painter\n        if (window[name]) {\n            window[name].readers.push(read);\n            window[name].writers.push(write);\n            return;\n        }\n\n        window[name] = {\n            readers: [read],\n            writers: [write],\n        };\n\n        var painter = window[name];\n\n        var interval = 1000 / fps;\n        var last = null;\n        var id = null;\n        var requestTick = null;\n        var cancelTick = null;\n\n        var setTimerType = function setTimerType() {\n            if (document.hidden) {\n                requestTick = function requestTick() {\n                    return window.setTimeout(function() {\n                        return tick(performance.now());\n                    }, interval);\n                };\n                cancelTick = function cancelTick() {\n                    return window.clearTimeout(id);\n                };\n            } else {\n                requestTick = function requestTick() {\n                    return window.requestAnimationFrame(tick);\n                };\n                cancelTick = function cancelTick() {\n                    return window.cancelAnimationFrame(id);\n                };\n            }\n        };\n\n        document.addEventListener('visibilitychange', function() {\n            if (cancelTick) cancelTick();\n            setTimerType();\n            tick(performance.now());\n        });\n\n        var tick = function tick(ts) {\n            // queue next tick\n            id = requestTick(tick);\n\n            // limit fps\n            if (!last) {\n                last = ts;\n            }\n\n            var delta = ts - last;\n\n            if (delta <= interval) {\n                // skip frame\n                return;\n            }\n\n            // align next frame\n            last = ts - (delta % interval);\n\n            // update view\n            painter.readers.forEach(function(read) {\n                return read();\n            });\n            painter.writers.forEach(function(write) {\n                return write(ts);\n            });\n        };\n\n        setTimerType();\n        tick(performance.now());\n\n        return {\n            pause: function pause() {\n                cancelTick(id);\n            },\n        };\n    };\n\n    var createRoute = function createRoute(routes, fn) {\n        return function(_ref) {\n            var root = _ref.root,\n                props = _ref.props,\n                _ref$actions = _ref.actions,\n                actions = _ref$actions === void 0 ? [] : _ref$actions,\n                timestamp = _ref.timestamp,\n                shouldOptimize = _ref.shouldOptimize;\n            actions\n                .filter(function(action) {\n                    return routes[action.type];\n                })\n                .forEach(function(action) {\n                    return routes[action.type]({\n                        root: root,\n                        props: props,\n                        action: action.data,\n                        timestamp: timestamp,\n                        shouldOptimize: shouldOptimize,\n                    });\n                });\n\n            if (fn) {\n                fn({\n                    root: root,\n                    props: props,\n                    actions: actions,\n                    timestamp: timestamp,\n                    shouldOptimize: shouldOptimize,\n                });\n            }\n        };\n    };\n\n    var insertBefore = function insertBefore(newNode, referenceNode) {\n        return referenceNode.parentNode.insertBefore(newNode, referenceNode);\n    };\n\n    var insertAfter = function insertAfter(newNode, referenceNode) {\n        return referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);\n    };\n\n    var isArray = function isArray(value) {\n        return Array.isArray(value);\n    };\n\n    var isEmpty = function isEmpty(value) {\n        return value == null;\n    };\n\n    var trim = function trim(str) {\n        return str.trim();\n    };\n\n    var toString = function toString(value) {\n        return '' + value;\n    };\n\n    var toArray = function toArray(value) {\n        var splitter = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ',';\n        if (isEmpty(value)) {\n            return [];\n        }\n        if (isArray(value)) {\n            return value;\n        }\n        return toString(value)\n            .split(splitter)\n            .map(trim)\n            .filter(function(str) {\n                return str.length;\n            });\n    };\n\n    var isBoolean = function isBoolean(value) {\n        return typeof value === 'boolean';\n    };\n\n    var toBoolean = function toBoolean(value) {\n        return isBoolean(value) ? value : value === 'true';\n    };\n\n    var isString = function isString(value) {\n        return typeof value === 'string';\n    };\n\n    var toNumber = function toNumber(value) {\n        return isNumber(value)\n            ? value\n            : isString(value)\n            ? toString(value).replace(/[a-z]+/gi, '')\n            : 0;\n    };\n\n    var toInt = function toInt(value) {\n        return parseInt(toNumber(value), 10);\n    };\n\n    var toFloat = function toFloat(value) {\n        return parseFloat(toNumber(value));\n    };\n\n    var isInt = function isInt(value) {\n        return isNumber(value) && isFinite(value) && Math.floor(value) === value;\n    };\n\n    var toBytes = function toBytes(value) {\n        var base = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1000;\n        // is in bytes\n        if (isInt(value)) {\n            return value;\n        }\n\n        // is natural file size\n        var naturalFileSize = toString(value).trim();\n\n        // if is value in megabytes\n        if (/MB$/i.test(naturalFileSize)) {\n            naturalFileSize = naturalFileSize.replace(/MB$i/, '').trim();\n            return toInt(naturalFileSize) * base * base;\n        }\n\n        // if is value in kilobytes\n        if (/KB/i.test(naturalFileSize)) {\n            naturalFileSize = naturalFileSize.replace(/KB$i/, '').trim();\n            return toInt(naturalFileSize) * base;\n        }\n\n        return toInt(naturalFileSize);\n    };\n\n    var isFunction = function isFunction(value) {\n        return typeof value === 'function';\n    };\n\n    var toFunctionReference = function toFunctionReference(string) {\n        var ref = self;\n        var levels = string.split('.');\n        var level = null;\n        while ((level = levels.shift())) {\n            ref = ref[level];\n            if (!ref) {\n                return null;\n            }\n        }\n        return ref;\n    };\n\n    var methods = {\n        process: 'POST',\n        patch: 'PATCH',\n        revert: 'DELETE',\n        fetch: 'GET',\n        restore: 'GET',\n        load: 'GET',\n    };\n\n    var createServerAPI = function createServerAPI(outline) {\n        var api = {};\n\n        api.url = isString(outline) ? outline : outline.url || '';\n        api.timeout = outline.timeout ? parseInt(outline.timeout, 10) : 0;\n        api.headers = outline.headers ? outline.headers : {};\n\n        forin(methods, function(key) {\n            api[key] = createAction(key, outline[key], methods[key], api.timeout, api.headers);\n        });\n\n        // remove process if no url or process on outline\n        api.process = outline.process || isString(outline) || outline.url ? api.process : null;\n\n        // special treatment for remove\n        api.remove = outline.remove || null;\n\n        // remove generic headers from api object\n        delete api.headers;\n\n        return api;\n    };\n\n    var createAction = function createAction(name, outline, method, timeout, headers) {\n        // is explicitely set to null so disable\n        if (outline === null) {\n            return null;\n        }\n\n        // if is custom function, done! Dev handles everything.\n        if (typeof outline === 'function') {\n            return outline;\n        }\n\n        // build action object\n        var action = {\n            url: method === 'GET' || method === 'PATCH' ? '?' + name + '=' : '',\n            method: method,\n            headers: headers,\n            withCredentials: false,\n            timeout: timeout,\n            onload: null,\n            ondata: null,\n            onerror: null,\n        };\n\n        // is a single url\n        if (isString(outline)) {\n            action.url = outline;\n            return action;\n        }\n\n        // overwrite\n        Object.assign(action, outline);\n\n        // see if should reformat headers;\n        if (isString(action.headers)) {\n            var parts = action.headers.split(/:(.+)/);\n            action.headers = {\n                header: parts[0],\n                value: parts[1],\n            };\n        }\n\n        // if is bool withCredentials\n        action.withCredentials = toBoolean(action.withCredentials);\n\n        return action;\n    };\n\n    var toServerAPI = function toServerAPI(value) {\n        return createServerAPI(value);\n    };\n\n    var isNull = function isNull(value) {\n        return value === null;\n    };\n\n    var isObject = function isObject(value) {\n        return typeof value === 'object' && value !== null;\n    };\n\n    var isAPI = function isAPI(value) {\n        return (\n            isObject(value) &&\n            isString(value.url) &&\n            isObject(value.process) &&\n            isObject(value.revert) &&\n            isObject(value.restore) &&\n            isObject(value.fetch)\n        );\n    };\n\n    var getType = function getType(value) {\n        if (isArray(value)) {\n            return 'array';\n        }\n\n        if (isNull(value)) {\n            return 'null';\n        }\n\n        if (isInt(value)) {\n            return 'int';\n        }\n\n        if (/^[0-9]+ ?(?:GB|MB|KB)$/gi.test(value)) {\n            return 'bytes';\n        }\n\n        if (isAPI(value)) {\n            return 'api';\n        }\n\n        return typeof value;\n    };\n\n    var replaceSingleQuotes = function replaceSingleQuotes(str) {\n        return str\n            .replace(/{\\s*'/g, '{\"')\n            .replace(/'\\s*}/g, '\"}')\n            .replace(/'\\s*:/g, '\":')\n            .replace(/:\\s*'/g, ':\"')\n            .replace(/,\\s*'/g, ',\"')\n            .replace(/'\\s*,/g, '\",');\n    };\n\n    var conversionTable = {\n        array: toArray,\n        boolean: toBoolean,\n        int: function int(value) {\n            return getType(value) === 'bytes' ? toBytes(value) : toInt(value);\n        },\n        number: toFloat,\n        float: toFloat,\n        bytes: toBytes,\n        string: function string(value) {\n            return isFunction(value) ? value : toString(value);\n        },\n        function: function _function(value) {\n            return toFunctionReference(value);\n        },\n        serverapi: toServerAPI,\n        object: function object(value) {\n            try {\n                return JSON.parse(replaceSingleQuotes(value));\n            } catch (e) {\n                return null;\n            }\n        },\n    };\n\n    var convertTo = function convertTo(value, type) {\n        return conversionTable[type](value);\n    };\n\n    var getValueByType = function getValueByType(newValue, defaultValue, valueType) {\n        // can always assign default value\n        if (newValue === defaultValue) {\n            return newValue;\n        }\n\n        // get the type of the new value\n        var newValueType = getType(newValue);\n\n        // is valid type?\n        if (newValueType !== valueType) {\n            // is string input, let's attempt to convert\n            var convertedValue = convertTo(newValue, valueType);\n\n            // what is the type now\n            newValueType = getType(convertedValue);\n\n            // no valid conversions found\n            if (convertedValue === null) {\n                throw 'Trying to assign value with incorrect type to \"' +\n                    option +\n                    '\", allowed type: \"' +\n                    valueType +\n                    '\"';\n            } else {\n                newValue = convertedValue;\n            }\n        }\n\n        // assign new value\n        return newValue;\n    };\n\n    var createOption = function createOption(defaultValue, valueType) {\n        var currentValue = defaultValue;\n        return {\n            enumerable: true,\n            get: function get() {\n                return currentValue;\n            },\n            set: function set(newValue) {\n                currentValue = getValueByType(newValue, defaultValue, valueType);\n            },\n        };\n    };\n\n    var createOptions = function createOptions(options) {\n        var obj = {};\n        forin(options, function(prop) {\n            var optionDefinition = options[prop];\n            obj[prop] = createOption(optionDefinition[0], optionDefinition[1]);\n        });\n        return createObject(obj);\n    };\n\n    var createInitialState = function createInitialState(options) {\n        return {\n            // model\n            items: [],\n\n            // timeout used for calling update items\n            listUpdateTimeout: null,\n\n            // timeout used for stacking metadata updates\n            itemUpdateTimeout: null,\n\n            // queue of items waiting to be processed\n            processingQueue: [],\n\n            // options\n            options: createOptions(options),\n        };\n    };\n\n    var fromCamels = function fromCamels(string) {\n        var separator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '-';\n        return string\n            .split(/(?=[A-Z])/)\n            .map(function(part) {\n                return part.toLowerCase();\n            })\n            .join(separator);\n    };\n\n    var createOptionAPI = function createOptionAPI(store, options) {\n        var obj = {};\n        forin(options, function(key) {\n            obj[key] = {\n                get: function get() {\n                    return store.getState().options[key];\n                },\n                set: function set(value) {\n                    store.dispatch('SET_' + fromCamels(key, '_').toUpperCase(), {\n                        value: value,\n                    });\n                },\n            };\n        });\n        return obj;\n    };\n\n    var createOptionActions = function createOptionActions(options) {\n        return function(dispatch, query, state) {\n            var obj = {};\n            forin(options, function(key) {\n                var name = fromCamels(key, '_').toUpperCase();\n\n                obj['SET_' + name] = function(action) {\n                    try {\n                        state.options[key] = action.value;\n                    } catch (e) {} // nope, failed\n\n                    // we successfully set the value of this option\n                    dispatch('DID_SET_' + name, { value: state.options[key] });\n                };\n            });\n            return obj;\n        };\n    };\n\n    var createOptionQueries = function createOptionQueries(options) {\n        return function(state) {\n            var obj = {};\n            forin(options, function(key) {\n                obj['GET_' + fromCamels(key, '_').toUpperCase()] = function(action) {\n                    return state.options[key];\n                };\n            });\n            return obj;\n        };\n    };\n\n    var InteractionMethod = {\n        API: 1,\n        DROP: 2,\n        BROWSE: 3,\n        PASTE: 4,\n        NONE: 5,\n    };\n\n    var getUniqueId = function getUniqueId() {\n        return Math.random()\n            .toString(36)\n            .substring(2, 11);\n    };\n\n    function _typeof(obj) {\n        if (typeof Symbol === 'function' && typeof Symbol.iterator === 'symbol') {\n            _typeof = function(obj) {\n                return typeof obj;\n            };\n        } else {\n            _typeof = function(obj) {\n                return obj &&\n                    typeof Symbol === 'function' &&\n                    obj.constructor === Symbol &&\n                    obj !== Symbol.prototype\n                    ? 'symbol'\n                    : typeof obj;\n            };\n        }\n\n        return _typeof(obj);\n    }\n\n    var REACT_ELEMENT_TYPE;\n\n    function _jsx(type, props, key, children) {\n        if (!REACT_ELEMENT_TYPE) {\n            REACT_ELEMENT_TYPE =\n                (typeof Symbol === 'function' && Symbol['for'] && Symbol['for']('react.element')) ||\n                0xeac7;\n        }\n\n        var defaultProps = type && type.defaultProps;\n        var childrenLength = arguments.length - 3;\n\n        if (!props && childrenLength !== 0) {\n            props = {\n                children: void 0,\n            };\n        }\n\n        if (props && defaultProps) {\n            for (var propName in defaultProps) {\n                if (props[propName] === void 0) {\n                    props[propName] = defaultProps[propName];\n                }\n            }\n        } else if (!props) {\n            props = defaultProps || {};\n        }\n\n        if (childrenLength === 1) {\n            props.children = children;\n        } else if (childrenLength > 1) {\n            var childArray = new Array(childrenLength);\n\n            for (var i = 0; i < childrenLength; i++) {\n                childArray[i] = arguments[i + 3];\n            }\n\n            props.children = childArray;\n        }\n\n        return {\n            $$typeof: REACT_ELEMENT_TYPE,\n            type: type,\n            key: key === undefined ? null : '' + key,\n            ref: null,\n            props: props,\n            _owner: null,\n        };\n    }\n\n    function _asyncIterator(iterable) {\n        var method;\n\n        if (typeof Symbol !== 'undefined') {\n            if (Symbol.asyncIterator) {\n                method = iterable[Symbol.asyncIterator];\n                if (method != null) return method.call(iterable);\n            }\n\n            if (Symbol.iterator) {\n                method = iterable[Symbol.iterator];\n                if (method != null) return method.call(iterable);\n            }\n        }\n\n        throw new TypeError('Object is not async iterable');\n    }\n\n    function _AwaitValue(value) {\n        this.wrapped = value;\n    }\n\n    function _AsyncGenerator(gen) {\n        var front, back;\n\n        function send(key, arg) {\n            return new Promise(function(resolve, reject) {\n                var request = {\n                    key: key,\n                    arg: arg,\n                    resolve: resolve,\n                    reject: reject,\n                    next: null,\n                };\n\n                if (back) {\n                    back = back.next = request;\n                } else {\n                    front = back = request;\n                    resume(key, arg);\n                }\n            });\n        }\n\n        function resume(key, arg) {\n            try {\n                var result = gen[key](arg);\n                var value = result.value;\n                var wrappedAwait = value instanceof _AwaitValue;\n                Promise.resolve(wrappedAwait ? value.wrapped : value).then(\n                    function(arg) {\n                        if (wrappedAwait) {\n                            resume('next', arg);\n                            return;\n                        }\n\n                        settle(result.done ? 'return' : 'normal', arg);\n                    },\n                    function(err) {\n                        resume('throw', err);\n                    }\n                );\n            } catch (err) {\n                settle('throw', err);\n            }\n        }\n\n        function settle(type, value) {\n            switch (type) {\n                case 'return':\n                    front.resolve({\n                        value: value,\n                        done: true,\n                    });\n                    break;\n\n                case 'throw':\n                    front.reject(value);\n                    break;\n\n                default:\n                    front.resolve({\n                        value: value,\n                        done: false,\n                    });\n                    break;\n            }\n\n            front = front.next;\n\n            if (front) {\n                resume(front.key, front.arg);\n            } else {\n                back = null;\n            }\n        }\n\n        this._invoke = send;\n\n        if (typeof gen.return !== 'function') {\n            this.return = undefined;\n        }\n    }\n\n    if (typeof Symbol === 'function' && Symbol.asyncIterator) {\n        _AsyncGenerator.prototype[Symbol.asyncIterator] = function() {\n            return this;\n        };\n    }\n\n    _AsyncGenerator.prototype.next = function(arg) {\n        return this._invoke('next', arg);\n    };\n\n    _AsyncGenerator.prototype.throw = function(arg) {\n        return this._invoke('throw', arg);\n    };\n\n    _AsyncGenerator.prototype.return = function(arg) {\n        return this._invoke('return', arg);\n    };\n\n    function _wrapAsyncGenerator(fn) {\n        return function() {\n            return new _AsyncGenerator(fn.apply(this, arguments));\n        };\n    }\n\n    function _awaitAsyncGenerator(value) {\n        return new _AwaitValue(value);\n    }\n\n    function _asyncGeneratorDelegate(inner, awaitWrap) {\n        var iter = {},\n            waiting = false;\n\n        function pump(key, value) {\n            waiting = true;\n            value = new Promise(function(resolve) {\n                resolve(inner[key](value));\n            });\n            return {\n                done: false,\n                value: awaitWrap(value),\n            };\n        }\n\n        if (typeof Symbol === 'function' && Symbol.iterator) {\n            iter[Symbol.iterator] = function() {\n                return this;\n            };\n        }\n\n        iter.next = function(value) {\n            if (waiting) {\n                waiting = false;\n                return value;\n            }\n\n            return pump('next', value);\n        };\n\n        if (typeof inner.throw === 'function') {\n            iter.throw = function(value) {\n                if (waiting) {\n                    waiting = false;\n                    throw value;\n                }\n\n                return pump('throw', value);\n            };\n        }\n\n        if (typeof inner.return === 'function') {\n            iter.return = function(value) {\n                return pump('return', value);\n            };\n        }\n\n        return iter;\n    }\n\n    function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n        try {\n            var info = gen[key](arg);\n            var value = info.value;\n        } catch (error) {\n            reject(error);\n            return;\n        }\n\n        if (info.done) {\n            resolve(value);\n        } else {\n            Promise.resolve(value).then(_next, _throw);\n        }\n    }\n\n    function _asyncToGenerator(fn) {\n        return function() {\n            var self = this,\n                args = arguments;\n            return new Promise(function(resolve, reject) {\n                var gen = fn.apply(self, args);\n\n                function _next(value) {\n                    asyncGeneratorStep(gen, resolve, reject, _next, _throw, 'next', value);\n                }\n\n                function _throw(err) {\n                    asyncGeneratorStep(gen, resolve, reject, _next, _throw, 'throw', err);\n                }\n\n                _next(undefined);\n            });\n        };\n    }\n\n    function _classCallCheck(instance, Constructor) {\n        if (!(instance instanceof Constructor)) {\n            throw new TypeError('Cannot call a class as a function');\n        }\n    }\n\n    function _defineProperties(target, props) {\n        for (var i = 0; i < props.length; i++) {\n            var descriptor = props[i];\n            descriptor.enumerable = descriptor.enumerable || false;\n            descriptor.configurable = true;\n            if ('value' in descriptor) descriptor.writable = true;\n            Object.defineProperty(target, descriptor.key, descriptor);\n        }\n    }\n\n    function _createClass(Constructor, protoProps, staticProps) {\n        if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n        if (staticProps) _defineProperties(Constructor, staticProps);\n        return Constructor;\n    }\n\n    function _defineEnumerableProperties(obj, descs) {\n        for (var key in descs) {\n            var desc = descs[key];\n            desc.configurable = desc.enumerable = true;\n            if ('value' in desc) desc.writable = true;\n            Object.defineProperty(obj, key, desc);\n        }\n\n        if (Object.getOwnPropertySymbols) {\n            var objectSymbols = Object.getOwnPropertySymbols(descs);\n\n            for (var i = 0; i < objectSymbols.length; i++) {\n                var sym = objectSymbols[i];\n                var desc = descs[sym];\n                desc.configurable = desc.enumerable = true;\n                if ('value' in desc) desc.writable = true;\n                Object.defineProperty(obj, sym, desc);\n            }\n        }\n\n        return obj;\n    }\n\n    function _defaults(obj, defaults) {\n        var keys = Object.getOwnPropertyNames(defaults);\n\n        for (var i = 0; i < keys.length; i++) {\n            var key = keys[i];\n            var value = Object.getOwnPropertyDescriptor(defaults, key);\n\n            if (value && value.configurable && obj[key] === undefined) {\n                Object.defineProperty(obj, key, value);\n            }\n        }\n\n        return obj;\n    }\n\n    function _defineProperty(obj, key, value) {\n        if (key in obj) {\n            Object.defineProperty(obj, key, {\n                value: value,\n                enumerable: true,\n                configurable: true,\n                writable: true,\n            });\n        } else {\n            obj[key] = value;\n        }\n\n        return obj;\n    }\n\n    function _extends() {\n        _extends =\n            Object.assign ||\n            function(target) {\n                for (var i = 1; i < arguments.length; i++) {\n                    var source = arguments[i];\n\n                    for (var key in source) {\n                        if (Object.prototype.hasOwnProperty.call(source, key)) {\n                            target[key] = source[key];\n                        }\n                    }\n                }\n\n                return target;\n            };\n\n        return _extends.apply(this, arguments);\n    }\n\n    function _objectSpread(target) {\n        for (var i = 1; i < arguments.length; i++) {\n            var source = arguments[i] != null ? arguments[i] : {};\n            var ownKeys = Object.keys(source);\n\n            if (typeof Object.getOwnPropertySymbols === 'function') {\n                ownKeys = ownKeys.concat(\n                    Object.getOwnPropertySymbols(source).filter(function(sym) {\n                        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n                    })\n                );\n            }\n\n            ownKeys.forEach(function(key) {\n                _defineProperty(target, key, source[key]);\n            });\n        }\n\n        return target;\n    }\n\n    function ownKeys(object, enumerableOnly) {\n        var keys = Object.keys(object);\n\n        if (Object.getOwnPropertySymbols) {\n            var symbols = Object.getOwnPropertySymbols(object);\n            if (enumerableOnly)\n                symbols = symbols.filter(function(sym) {\n                    return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n                });\n            keys.push.apply(keys, symbols);\n        }\n\n        return keys;\n    }\n\n    function _objectSpread2(target) {\n        for (var i = 1; i < arguments.length; i++) {\n            var source = arguments[i] != null ? arguments[i] : {};\n\n            if (i % 2) {\n                ownKeys(source, true).forEach(function(key) {\n                    _defineProperty(target, key, source[key]);\n                });\n            } else if (Object.getOwnPropertyDescriptors) {\n                Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n            } else {\n                ownKeys(source).forEach(function(key) {\n                    Object.defineProperty(\n                        target,\n                        key,\n                        Object.getOwnPropertyDescriptor(source, key)\n                    );\n                });\n            }\n        }\n\n        return target;\n    }\n\n    function _inherits(subClass, superClass) {\n        if (typeof superClass !== 'function' && superClass !== null) {\n            throw new TypeError('Super expression must either be null or a function');\n        }\n\n        subClass.prototype = Object.create(superClass && superClass.prototype, {\n            constructor: {\n                value: subClass,\n                writable: true,\n                configurable: true,\n            },\n        });\n        if (superClass) _setPrototypeOf(subClass, superClass);\n    }\n\n    function _inheritsLoose(subClass, superClass) {\n        subClass.prototype = Object.create(superClass.prototype);\n        subClass.prototype.constructor = subClass;\n        subClass.__proto__ = superClass;\n    }\n\n    function _getPrototypeOf(o) {\n        _getPrototypeOf = Object.setPrototypeOf\n            ? Object.getPrototypeOf\n            : function _getPrototypeOf(o) {\n                  return o.__proto__ || Object.getPrototypeOf(o);\n              };\n        return _getPrototypeOf(o);\n    }\n\n    function _setPrototypeOf(o, p) {\n        _setPrototypeOf =\n            Object.setPrototypeOf ||\n            function _setPrototypeOf(o, p) {\n                o.__proto__ = p;\n                return o;\n            };\n\n        return _setPrototypeOf(o, p);\n    }\n\n    function isNativeReflectConstruct() {\n        if (typeof Reflect === 'undefined' || !Reflect.construct) return false;\n        if (Reflect.construct.sham) return false;\n        if (typeof Proxy === 'function') return true;\n\n        try {\n            Date.prototype.toString.call(Reflect.construct(Date, [], function() {}));\n            return true;\n        } catch (e) {\n            return false;\n        }\n    }\n\n    function _construct(Parent, args, Class) {\n        if (isNativeReflectConstruct()) {\n            _construct = Reflect.construct;\n        } else {\n            _construct = function _construct(Parent, args, Class) {\n                var a = [null];\n                a.push.apply(a, args);\n                var Constructor = Function.bind.apply(Parent, a);\n                var instance = new Constructor();\n                if (Class) _setPrototypeOf(instance, Class.prototype);\n                return instance;\n            };\n        }\n\n        return _construct.apply(null, arguments);\n    }\n\n    function _isNativeFunction(fn) {\n        return Function.toString.call(fn).indexOf('[native code]') !== -1;\n    }\n\n    function _wrapNativeSuper(Class) {\n        var _cache = typeof Map === 'function' ? new Map() : undefined;\n\n        _wrapNativeSuper = function _wrapNativeSuper(Class) {\n            if (Class === null || !_isNativeFunction(Class)) return Class;\n\n            if (typeof Class !== 'function') {\n                throw new TypeError('Super expression must either be null or a function');\n            }\n\n            if (typeof _cache !== 'undefined') {\n                if (_cache.has(Class)) return _cache.get(Class);\n\n                _cache.set(Class, Wrapper);\n            }\n\n            function Wrapper() {\n                return _construct(Class, arguments, _getPrototypeOf(this).constructor);\n            }\n\n            Wrapper.prototype = Object.create(Class.prototype, {\n                constructor: {\n                    value: Wrapper,\n                    enumerable: false,\n                    writable: true,\n                    configurable: true,\n                },\n            });\n            return _setPrototypeOf(Wrapper, Class);\n        };\n\n        return _wrapNativeSuper(Class);\n    }\n\n    function _instanceof(left, right) {\n        if (right != null && typeof Symbol !== 'undefined' && right[Symbol.hasInstance]) {\n            return !!right[Symbol.hasInstance](left);\n        } else {\n            return left instanceof right;\n        }\n    }\n\n    function _interopRequireDefault(obj) {\n        return obj && obj.__esModule\n            ? obj\n            : {\n                  default: obj,\n              };\n    }\n\n    function _interopRequireWildcard(obj) {\n        if (obj && obj.__esModule) {\n            return obj;\n        } else {\n            var newObj = {};\n\n            if (obj != null) {\n                for (var key in obj) {\n                    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n                        var desc =\n                            Object.defineProperty && Object.getOwnPropertyDescriptor\n                                ? Object.getOwnPropertyDescriptor(obj, key)\n                                : {};\n\n                        if (desc.get || desc.set) {\n                            Object.defineProperty(newObj, key, desc);\n                        } else {\n                            newObj[key] = obj[key];\n                        }\n                    }\n                }\n            }\n\n            newObj.default = obj;\n            return newObj;\n        }\n    }\n\n    function _newArrowCheck(innerThis, boundThis) {\n        if (innerThis !== boundThis) {\n            throw new TypeError('Cannot instantiate an arrow function');\n        }\n    }\n\n    function _objectDestructuringEmpty(obj) {\n        if (obj == null) throw new TypeError('Cannot destructure undefined');\n    }\n\n    function _objectWithoutPropertiesLoose(source, excluded) {\n        if (source == null) return {};\n        var target = {};\n        var sourceKeys = Object.keys(source);\n        var key, i;\n\n        for (i = 0; i < sourceKeys.length; i++) {\n            key = sourceKeys[i];\n            if (excluded.indexOf(key) >= 0) continue;\n            target[key] = source[key];\n        }\n\n        return target;\n    }\n\n    function _objectWithoutProperties(source, excluded) {\n        if (source == null) return {};\n\n        var target = _objectWithoutPropertiesLoose(source, excluded);\n\n        var key, i;\n\n        if (Object.getOwnPropertySymbols) {\n            var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n            for (i = 0; i < sourceSymbolKeys.length; i++) {\n                key = sourceSymbolKeys[i];\n                if (excluded.indexOf(key) >= 0) continue;\n                if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n                target[key] = source[key];\n            }\n        }\n\n        return target;\n    }\n\n    function _assertThisInitialized(self) {\n        if (self === void 0) {\n            throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n        }\n\n        return self;\n    }\n\n    function _possibleConstructorReturn(self, call) {\n        if (call && (typeof call === 'object' || typeof call === 'function')) {\n            return call;\n        }\n\n        return _assertThisInitialized(self);\n    }\n\n    function _superPropBase(object, property) {\n        while (!Object.prototype.hasOwnProperty.call(object, property)) {\n            object = _getPrototypeOf(object);\n            if (object === null) break;\n        }\n\n        return object;\n    }\n\n    function _get(target, property, receiver) {\n        if (typeof Reflect !== 'undefined' && Reflect.get) {\n            _get = Reflect.get;\n        } else {\n            _get = function _get(target, property, receiver) {\n                var base = _superPropBase(target, property);\n\n                if (!base) return;\n                var desc = Object.getOwnPropertyDescriptor(base, property);\n\n                if (desc.get) {\n                    return desc.get.call(receiver);\n                }\n\n                return desc.value;\n            };\n        }\n\n        return _get(target, property, receiver || target);\n    }\n\n    function set(target, property, value, receiver) {\n        if (typeof Reflect !== 'undefined' && Reflect.set) {\n            set = Reflect.set;\n        } else {\n            set = function set(target, property, value, receiver) {\n                var base = _superPropBase(target, property);\n\n                var desc;\n\n                if (base) {\n                    desc = Object.getOwnPropertyDescriptor(base, property);\n\n                    if (desc.set) {\n                        desc.set.call(receiver, value);\n                        return true;\n                    } else if (!desc.writable) {\n                        return false;\n                    }\n                }\n\n                desc = Object.getOwnPropertyDescriptor(receiver, property);\n\n                if (desc) {\n                    if (!desc.writable) {\n                        return false;\n                    }\n\n                    desc.value = value;\n                    Object.defineProperty(receiver, property, desc);\n                } else {\n                    _defineProperty(receiver, property, value);\n                }\n\n                return true;\n            };\n        }\n\n        return set(target, property, value, receiver);\n    }\n\n    function _set(target, property, value, receiver, isStrict) {\n        var s = set(target, property, value, receiver || target);\n\n        if (!s && isStrict) {\n            throw new Error('failed to set property');\n        }\n\n        return value;\n    }\n\n    function _taggedTemplateLiteral(strings, raw) {\n        if (!raw) {\n            raw = strings.slice(0);\n        }\n\n        return Object.freeze(\n            Object.defineProperties(strings, {\n                raw: {\n                    value: Object.freeze(raw),\n                },\n            })\n        );\n    }\n\n    function _taggedTemplateLiteralLoose(strings, raw) {\n        if (!raw) {\n            raw = strings.slice(0);\n        }\n\n        strings.raw = raw;\n        return strings;\n    }\n\n    function _temporalRef(val, name) {\n        if (val === _temporalUndefined) {\n            throw new ReferenceError(name + ' is not defined - temporal dead zone');\n        } else {\n            return val;\n        }\n    }\n\n    function _readOnlyError(name) {\n        throw new Error('\"' + name + '\" is read-only');\n    }\n\n    function _classNameTDZError(name) {\n        throw new Error('Class \"' + name + '\" cannot be referenced in computed property keys.');\n    }\n\n    var _temporalUndefined = {};\n\n    function _slicedToArray(arr, i) {\n        return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n    }\n\n    function _slicedToArrayLoose(arr, i) {\n        return _arrayWithHoles(arr) || _iterableToArrayLimitLoose(arr, i) || _nonIterableRest();\n    }\n\n    function _toArray(arr) {\n        return _arrayWithHoles(arr) || _iterableToArray(arr) || _nonIterableRest();\n    }\n\n    function _toConsumableArray(arr) {\n        return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n    }\n\n    function _arrayWithoutHoles(arr) {\n        if (Array.isArray(arr)) {\n            for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n            return arr2;\n        }\n    }\n\n    function _arrayWithHoles(arr) {\n        if (Array.isArray(arr)) return arr;\n    }\n\n    function _iterableToArray(iter) {\n        if (\n            Symbol.iterator in Object(iter) ||\n            Object.prototype.toString.call(iter) === '[object Arguments]'\n        )\n            return Array.from(iter);\n    }\n\n    function _iterableToArrayLimit(arr, i) {\n        var _arr = [];\n        var _n = true;\n        var _d = false;\n        var _e = undefined;\n\n        try {\n            for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n                _arr.push(_s.value);\n\n                if (i && _arr.length === i) break;\n            }\n        } catch (err) {\n            _d = true;\n            _e = err;\n        } finally {\n            try {\n                if (!_n && _i['return'] != null) _i['return']();\n            } finally {\n                if (_d) throw _e;\n            }\n        }\n\n        return _arr;\n    }\n\n    function _iterableToArrayLimitLoose(arr, i) {\n        var _arr = [];\n\n        for (var _iterator = arr[Symbol.iterator](), _step; !(_step = _iterator.next()).done; ) {\n            _arr.push(_step.value);\n\n            if (i && _arr.length === i) break;\n        }\n\n        return _arr;\n    }\n\n    function _nonIterableSpread() {\n        throw new TypeError('Invalid attempt to spread non-iterable instance');\n    }\n\n    function _nonIterableRest() {\n        throw new TypeError('Invalid attempt to destructure non-iterable instance');\n    }\n\n    function _skipFirstGeneratorNext(fn) {\n        return function() {\n            var it = fn.apply(this, arguments);\n            it.next();\n            return it;\n        };\n    }\n\n    function _toPrimitive(input, hint) {\n        if (typeof input !== 'object' || input === null) return input;\n        var prim = input[Symbol.toPrimitive];\n\n        if (prim !== undefined) {\n            var res = prim.call(input, hint || 'default');\n            if (typeof res !== 'object') return res;\n            throw new TypeError('@@toPrimitive must return a primitive value.');\n        }\n\n        return (hint === 'string' ? String : Number)(input);\n    }\n\n    function _toPropertyKey(arg) {\n        var key = _toPrimitive(arg, 'string');\n\n        return typeof key === 'symbol' ? key : String(key);\n    }\n\n    function _initializerWarningHelper(descriptor, context) {\n        throw new Error(\n            'Decorating class property failed. Please ensure that ' +\n                'proposal-class-properties is enabled and set to use loose mode. ' +\n                'To use proposal-class-properties in spec mode with decorators, wait for ' +\n                'the next major version of decorators in stage 2.'\n        );\n    }\n\n    function _initializerDefineProperty(target, property, descriptor, context) {\n        if (!descriptor) return;\n        Object.defineProperty(target, property, {\n            enumerable: descriptor.enumerable,\n            configurable: descriptor.configurable,\n            writable: descriptor.writable,\n            value: descriptor.initializer ? descriptor.initializer.call(context) : void 0,\n        });\n    }\n\n    function _applyDecoratedDescriptor(target, property, decorators, descriptor, context) {\n        var desc = {};\n        Object.keys(descriptor).forEach(function(key) {\n            desc[key] = descriptor[key];\n        });\n        desc.enumerable = !!desc.enumerable;\n        desc.configurable = !!desc.configurable;\n\n        if ('value' in desc || desc.initializer) {\n            desc.writable = true;\n        }\n\n        desc = decorators\n            .slice()\n            .reverse()\n            .reduce(function(desc, decorator) {\n                return decorator(target, property, desc) || desc;\n            }, desc);\n\n        if (context && desc.initializer !== void 0) {\n            desc.value = desc.initializer ? desc.initializer.call(context) : void 0;\n            desc.initializer = undefined;\n        }\n\n        if (desc.initializer === void 0) {\n            Object.defineProperty(target, property, desc);\n            desc = null;\n        }\n\n        return desc;\n    }\n\n    var id = 0;\n\n    function _classPrivateFieldLooseKey(name) {\n        return '__private_' + id++ + '_' + name;\n    }\n\n    function _classPrivateFieldLooseBase(receiver, privateKey) {\n        if (!Object.prototype.hasOwnProperty.call(receiver, privateKey)) {\n            throw new TypeError('attempted to use private field on non-instance');\n        }\n\n        return receiver;\n    }\n\n    function _classPrivateFieldGet(receiver, privateMap) {\n        var descriptor = privateMap.get(receiver);\n\n        if (!descriptor) {\n            throw new TypeError('attempted to get private field on non-instance');\n        }\n\n        if (descriptor.get) {\n            return descriptor.get.call(receiver);\n        }\n\n        return descriptor.value;\n    }\n\n    function _classPrivateFieldSet(receiver, privateMap, value) {\n        var descriptor = privateMap.get(receiver);\n\n        if (!descriptor) {\n            throw new TypeError('attempted to set private field on non-instance');\n        }\n\n        if (descriptor.set) {\n            descriptor.set.call(receiver, value);\n        } else {\n            if (!descriptor.writable) {\n                throw new TypeError('attempted to set read only private field');\n            }\n\n            descriptor.value = value;\n        }\n\n        return value;\n    }\n\n    function _classPrivateFieldDestructureSet(receiver, privateMap) {\n        if (!privateMap.has(receiver)) {\n            throw new TypeError('attempted to set private field on non-instance');\n        }\n\n        var descriptor = privateMap.get(receiver);\n\n        if (descriptor.set) {\n            if (!('__destrObj' in descriptor)) {\n                descriptor.__destrObj = {\n                    set value(v) {\n                        descriptor.set.call(receiver, v);\n                    },\n                };\n            }\n\n            return descriptor.__destrObj;\n        } else {\n            if (!descriptor.writable) {\n                throw new TypeError('attempted to set read only private field');\n            }\n\n            return descriptor;\n        }\n    }\n\n    function _classStaticPrivateFieldSpecGet(receiver, classConstructor, descriptor) {\n        if (receiver !== classConstructor) {\n            throw new TypeError('Private static access of wrong provenance');\n        }\n\n        return descriptor.value;\n    }\n\n    function _classStaticPrivateFieldSpecSet(receiver, classConstructor, descriptor, value) {\n        if (receiver !== classConstructor) {\n            throw new TypeError('Private static access of wrong provenance');\n        }\n\n        if (!descriptor.writable) {\n            throw new TypeError('attempted to set read only private field');\n        }\n\n        descriptor.value = value;\n        return value;\n    }\n\n    function _classStaticPrivateMethodGet(receiver, classConstructor, method) {\n        if (receiver !== classConstructor) {\n            throw new TypeError('Private static access of wrong provenance');\n        }\n\n        return method;\n    }\n\n    function _classStaticPrivateMethodSet() {\n        throw new TypeError('attempted to set read only static private field');\n    }\n\n    function _decorate(decorators, factory, superClass, mixins) {\n        var api = _getDecoratorsApi();\n\n        if (mixins) {\n            for (var i = 0; i < mixins.length; i++) {\n                api = mixins[i](api);\n            }\n        }\n\n        var r = factory(function initialize(O) {\n            api.initializeInstanceElements(O, decorated.elements);\n        }, superClass);\n        var decorated = api.decorateClass(\n            _coalesceClassElements(r.d.map(_createElementDescriptor)),\n            decorators\n        );\n        api.initializeClassElements(r.F, decorated.elements);\n        return api.runClassFinishers(r.F, decorated.finishers);\n    }\n\n    function _getDecoratorsApi() {\n        _getDecoratorsApi = function() {\n            return api;\n        };\n\n        var api = {\n            elementsDefinitionOrder: [['method'], ['field']],\n            initializeInstanceElements: function(O, elements) {\n                ['method', 'field'].forEach(function(kind) {\n                    elements.forEach(function(element) {\n                        if (element.kind === kind && element.placement === 'own') {\n                            this.defineClassElement(O, element);\n                        }\n                    }, this);\n                }, this);\n            },\n            initializeClassElements: function(F, elements) {\n                var proto = F.prototype;\n                ['method', 'field'].forEach(function(kind) {\n                    elements.forEach(function(element) {\n                        var placement = element.placement;\n\n                        if (\n                            element.kind === kind &&\n                            (placement === 'static' || placement === 'prototype')\n                        ) {\n                            var receiver = placement === 'static' ? F : proto;\n                            this.defineClassElement(receiver, element);\n                        }\n                    }, this);\n                }, this);\n            },\n            defineClassElement: function(receiver, element) {\n                var descriptor = element.descriptor;\n\n                if (element.kind === 'field') {\n                    var initializer = element.initializer;\n                    descriptor = {\n                        enumerable: descriptor.enumerable,\n                        writable: descriptor.writable,\n                        configurable: descriptor.configurable,\n                        value: initializer === void 0 ? void 0 : initializer.call(receiver),\n                    };\n                }\n\n                Object.defineProperty(receiver, element.key, descriptor);\n            },\n            decorateClass: function(elements, decorators) {\n                var newElements = [];\n                var finishers = [];\n                var placements = {\n                    static: [],\n                    prototype: [],\n                    own: [],\n                };\n                elements.forEach(function(element) {\n                    this.addElementPlacement(element, placements);\n                }, this);\n                elements.forEach(function(element) {\n                    if (!_hasDecorators(element)) return newElements.push(element);\n                    var elementFinishersExtras = this.decorateElement(element, placements);\n                    newElements.push(elementFinishersExtras.element);\n                    newElements.push.apply(newElements, elementFinishersExtras.extras);\n                    finishers.push.apply(finishers, elementFinishersExtras.finishers);\n                }, this);\n\n                if (!decorators) {\n                    return {\n                        elements: newElements,\n                        finishers: finishers,\n                    };\n                }\n\n                var result = this.decorateConstructor(newElements, decorators);\n                finishers.push.apply(finishers, result.finishers);\n                result.finishers = finishers;\n                return result;\n            },\n            addElementPlacement: function(element, placements, silent) {\n                var keys = placements[element.placement];\n\n                if (!silent && keys.indexOf(element.key) !== -1) {\n                    throw new TypeError('Duplicated element (' + element.key + ')');\n                }\n\n                keys.push(element.key);\n            },\n            decorateElement: function(element, placements) {\n                var extras = [];\n                var finishers = [];\n\n                for (var decorators = element.decorators, i = decorators.length - 1; i >= 0; i--) {\n                    var keys = placements[element.placement];\n                    keys.splice(keys.indexOf(element.key), 1);\n                    var elementObject = this.fromElementDescriptor(element);\n                    var elementFinisherExtras = this.toElementFinisherExtras(\n                        (0, decorators[i])(elementObject) || elementObject\n                    );\n                    element = elementFinisherExtras.element;\n                    this.addElementPlacement(element, placements);\n\n                    if (elementFinisherExtras.finisher) {\n                        finishers.push(elementFinisherExtras.finisher);\n                    }\n\n                    var newExtras = elementFinisherExtras.extras;\n\n                    if (newExtras) {\n                        for (var j = 0; j < newExtras.length; j++) {\n                            this.addElementPlacement(newExtras[j], placements);\n                        }\n\n                        extras.push.apply(extras, newExtras);\n                    }\n                }\n\n                return {\n                    element: element,\n                    finishers: finishers,\n                    extras: extras,\n                };\n            },\n            decorateConstructor: function(elements, decorators) {\n                var finishers = [];\n\n                for (var i = decorators.length - 1; i >= 0; i--) {\n                    var obj = this.fromClassDescriptor(elements);\n                    var elementsAndFinisher = this.toClassDescriptor(\n                        (0, decorators[i])(obj) || obj\n                    );\n\n                    if (elementsAndFinisher.finisher !== undefined) {\n                        finishers.push(elementsAndFinisher.finisher);\n                    }\n\n                    if (elementsAndFinisher.elements !== undefined) {\n                        elements = elementsAndFinisher.elements;\n\n                        for (var j = 0; j < elements.length - 1; j++) {\n                            for (var k = j + 1; k < elements.length; k++) {\n                                if (\n                                    elements[j].key === elements[k].key &&\n                                    elements[j].placement === elements[k].placement\n                                ) {\n                                    throw new TypeError(\n                                        'Duplicated element (' + elements[j].key + ')'\n                                    );\n                                }\n                            }\n                        }\n                    }\n                }\n\n                return {\n                    elements: elements,\n                    finishers: finishers,\n                };\n            },\n            fromElementDescriptor: function(element) {\n                var obj = {\n                    kind: element.kind,\n                    key: element.key,\n                    placement: element.placement,\n                    descriptor: element.descriptor,\n                };\n                var desc = {\n                    value: 'Descriptor',\n                    configurable: true,\n                };\n                Object.defineProperty(obj, Symbol.toStringTag, desc);\n                if (element.kind === 'field') obj.initializer = element.initializer;\n                return obj;\n            },\n            toElementDescriptors: function(elementObjects) {\n                if (elementObjects === undefined) return;\n                return _toArray(elementObjects).map(function(elementObject) {\n                    var element = this.toElementDescriptor(elementObject);\n                    this.disallowProperty(elementObject, 'finisher', 'An element descriptor');\n                    this.disallowProperty(elementObject, 'extras', 'An element descriptor');\n                    return element;\n                }, this);\n            },\n            toElementDescriptor: function(elementObject) {\n                var kind = String(elementObject.kind);\n\n                if (kind !== 'method' && kind !== 'field') {\n                    throw new TypeError(\n                        'An element descriptor\\'s .kind property must be either \"method\" or' +\n                            ' \"field\", but a decorator created an element descriptor with' +\n                            ' .kind \"' +\n                            kind +\n                            '\"'\n                    );\n                }\n\n                var key = _toPropertyKey(elementObject.key);\n\n                var placement = String(elementObject.placement);\n\n                if (placement !== 'static' && placement !== 'prototype' && placement !== 'own') {\n                    throw new TypeError(\n                        'An element descriptor\\'s .placement property must be one of \"static\",' +\n                            ' \"prototype\" or \"own\", but a decorator created an element descriptor' +\n                            ' with .placement \"' +\n                            placement +\n                            '\"'\n                    );\n                }\n\n                var descriptor = elementObject.descriptor;\n                this.disallowProperty(elementObject, 'elements', 'An element descriptor');\n                var element = {\n                    kind: kind,\n                    key: key,\n                    placement: placement,\n                    descriptor: Object.assign({}, descriptor),\n                };\n\n                if (kind !== 'field') {\n                    this.disallowProperty(elementObject, 'initializer', 'A method descriptor');\n                } else {\n                    this.disallowProperty(\n                        descriptor,\n                        'get',\n                        'The property descriptor of a field descriptor'\n                    );\n                    this.disallowProperty(\n                        descriptor,\n                        'set',\n                        'The property descriptor of a field descriptor'\n                    );\n                    this.disallowProperty(\n                        descriptor,\n                        'value',\n                        'The property descriptor of a field descriptor'\n                    );\n                    element.initializer = elementObject.initializer;\n                }\n\n                return element;\n            },\n            toElementFinisherExtras: function(elementObject) {\n                var element = this.toElementDescriptor(elementObject);\n\n                var finisher = _optionalCallableProperty(elementObject, 'finisher');\n\n                var extras = this.toElementDescriptors(elementObject.extras);\n                return {\n                    element: element,\n                    finisher: finisher,\n                    extras: extras,\n                };\n            },\n            fromClassDescriptor: function(elements) {\n                var obj = {\n                    kind: 'class',\n                    elements: elements.map(this.fromElementDescriptor, this),\n                };\n                var desc = {\n                    value: 'Descriptor',\n                    configurable: true,\n                };\n                Object.defineProperty(obj, Symbol.toStringTag, desc);\n                return obj;\n            },\n            toClassDescriptor: function(obj) {\n                var kind = String(obj.kind);\n\n                if (kind !== 'class') {\n                    throw new TypeError(\n                        'A class descriptor\\'s .kind property must be \"class\", but a decorator' +\n                            ' created a class descriptor with .kind \"' +\n                            kind +\n                            '\"'\n                    );\n                }\n\n                this.disallowProperty(obj, 'key', 'A class descriptor');\n                this.disallowProperty(obj, 'placement', 'A class descriptor');\n                this.disallowProperty(obj, 'descriptor', 'A class descriptor');\n                this.disallowProperty(obj, 'initializer', 'A class descriptor');\n                this.disallowProperty(obj, 'extras', 'A class descriptor');\n\n                var finisher = _optionalCallableProperty(obj, 'finisher');\n\n                var elements = this.toElementDescriptors(obj.elements);\n                return {\n                    elements: elements,\n                    finisher: finisher,\n                };\n            },\n            runClassFinishers: function(constructor, finishers) {\n                for (var i = 0; i < finishers.length; i++) {\n                    var newConstructor = (0, finishers[i])(constructor);\n\n                    if (newConstructor !== undefined) {\n                        if (typeof newConstructor !== 'function') {\n                            throw new TypeError('Finishers must return a constructor.');\n                        }\n\n                        constructor = newConstructor;\n                    }\n                }\n\n                return constructor;\n            },\n            disallowProperty: function(obj, name, objectType) {\n                if (obj[name] !== undefined) {\n                    throw new TypeError(objectType + \" can't have a .\" + name + ' property.');\n                }\n            },\n        };\n        return api;\n    }\n\n    function _createElementDescriptor(def) {\n        var key = _toPropertyKey(def.key);\n\n        var descriptor;\n\n        if (def.kind === 'method') {\n            descriptor = {\n                value: def.value,\n                writable: true,\n                configurable: true,\n                enumerable: false,\n            };\n        } else if (def.kind === 'get') {\n            descriptor = {\n                get: def.value,\n                configurable: true,\n                enumerable: false,\n            };\n        } else if (def.kind === 'set') {\n            descriptor = {\n                set: def.value,\n                configurable: true,\n                enumerable: false,\n            };\n        } else if (def.kind === 'field') {\n            descriptor = {\n                configurable: true,\n                writable: true,\n                enumerable: true,\n            };\n        }\n\n        var element = {\n            kind: def.kind === 'field' ? 'field' : 'method',\n            key: key,\n            placement: def.static ? 'static' : def.kind === 'field' ? 'own' : 'prototype',\n            descriptor: descriptor,\n        };\n        if (def.decorators) element.decorators = def.decorators;\n        if (def.kind === 'field') element.initializer = def.value;\n        return element;\n    }\n\n    function _coalesceGetterSetter(element, other) {\n        if (element.descriptor.get !== undefined) {\n            other.descriptor.get = element.descriptor.get;\n        } else {\n            other.descriptor.set = element.descriptor.set;\n        }\n    }\n\n    function _coalesceClassElements(elements) {\n        var newElements = [];\n\n        var isSameElement = function(other) {\n            return (\n                other.kind === 'method' &&\n                other.key === element.key &&\n                other.placement === element.placement\n            );\n        };\n\n        for (var i = 0; i < elements.length; i++) {\n            var element = elements[i];\n            var other;\n\n            if (element.kind === 'method' && (other = newElements.find(isSameElement))) {\n                if (_isDataDescriptor(element.descriptor) || _isDataDescriptor(other.descriptor)) {\n                    if (_hasDecorators(element) || _hasDecorators(other)) {\n                        throw new ReferenceError(\n                            'Duplicated methods (' + element.key + \") can't be decorated.\"\n                        );\n                    }\n\n                    other.descriptor = element.descriptor;\n                } else {\n                    if (_hasDecorators(element)) {\n                        if (_hasDecorators(other)) {\n                            throw new ReferenceError(\n                                \"Decorators can't be placed on different accessors with for \" +\n                                    'the same property (' +\n                                    element.key +\n                                    ').'\n                            );\n                        }\n\n                        other.decorators = element.decorators;\n                    }\n\n                    _coalesceGetterSetter(element, other);\n                }\n            } else {\n                newElements.push(element);\n            }\n        }\n\n        return newElements;\n    }\n\n    function _hasDecorators(element) {\n        return element.decorators && element.decorators.length;\n    }\n\n    function _isDataDescriptor(desc) {\n        return desc !== undefined && !(desc.value === undefined && desc.writable === undefined);\n    }\n\n    function _optionalCallableProperty(obj, name) {\n        var value = obj[name];\n\n        if (value !== undefined && typeof value !== 'function') {\n            throw new TypeError(\"Expected '\" + name + \"' to be a function\");\n        }\n\n        return value;\n    }\n\n    function _classPrivateMethodGet(receiver, privateSet, fn) {\n        if (!privateSet.has(receiver)) {\n            throw new TypeError('attempted to get private field on non-instance');\n        }\n\n        return fn;\n    }\n\n    function _classPrivateMethodSet() {\n        throw new TypeError('attempted to reassign private method');\n    }\n\n    function _wrapRegExp(re, groups) {\n        _wrapRegExp = function(re, groups) {\n            return new BabelRegExp(re, groups);\n        };\n\n        var _RegExp = _wrapNativeSuper(RegExp);\n\n        var _super = RegExp.prototype;\n\n        var _groups = new WeakMap();\n\n        function BabelRegExp(re, groups) {\n            var _this = _RegExp.call(this, re);\n\n            _groups.set(_this, groups);\n\n            return _this;\n        }\n\n        _inherits(BabelRegExp, _RegExp);\n\n        BabelRegExp.prototype.exec = function(str) {\n            var result = _super.exec.call(this, str);\n\n            if (result) result.groups = buildGroups(result, this);\n            return result;\n        };\n\n        BabelRegExp.prototype[Symbol.replace] = function(str, substitution) {\n            if (typeof substitution === 'string') {\n                var groups = _groups.get(this);\n\n                return _super[Symbol.replace].call(\n                    this,\n                    str,\n                    substitution.replace(/\\$<([^>]+)>/g, function(_, name) {\n                        return '$' + groups[name];\n                    })\n                );\n            } else if (typeof substitution === 'function') {\n                var _this = this;\n\n                return _super[Symbol.replace].call(this, str, function() {\n                    var args = [];\n                    args.push.apply(args, arguments);\n\n                    if (typeof args[args.length - 1] !== 'object') {\n                        args.push(buildGroups(args, _this));\n                    }\n\n                    return substitution.apply(this, args);\n                });\n            } else {\n                return _super[Symbol.replace].call(this, str, substitution);\n            }\n        };\n\n        function buildGroups(result, re) {\n            var g = _groups.get(re);\n\n            return Object.keys(g).reduce(function(groups, name) {\n                groups[name] = result[g[name]];\n                return groups;\n            }, Object.create(null));\n        }\n\n        return _wrapRegExp.apply(this, arguments);\n    }\n\n    var arrayRemove = function arrayRemove(arr, index) {\n        return arr.splice(index, 1);\n    };\n\n    var run = function run(cb, sync) {\n        if (sync) {\n            cb();\n        } else if (document.hidden) {\n            Promise.resolve(1).then(cb);\n        } else {\n            setTimeout(cb, 0);\n        }\n    };\n\n    var on = function on() {\n        var listeners = [];\n        var off = function off(event, cb) {\n            arrayRemove(\n                listeners,\n                listeners.findIndex(function(listener) {\n                    return listener.event === event && (listener.cb === cb || !cb);\n                })\n            );\n        };\n        var _fire = function fire(event, args, sync) {\n            listeners\n                .filter(function(listener) {\n                    return listener.event === event;\n                })\n                .map(function(listener) {\n                    return listener.cb;\n                })\n                .forEach(function(cb) {\n                    return run(function() {\n                        return cb.apply(void 0, _toConsumableArray(args));\n                    }, sync);\n                });\n        };\n        return {\n            fireSync: function fireSync(event) {\n                for (\n                    var _len = arguments.length,\n                        args = new Array(_len > 1 ? _len - 1 : 0),\n                        _key = 1;\n                    _key < _len;\n                    _key++\n                ) {\n                    args[_key - 1] = arguments[_key];\n                }\n                _fire(event, args, true);\n            },\n            fire: function fire(event) {\n                for (\n                    var _len2 = arguments.length,\n                        args = new Array(_len2 > 1 ? _len2 - 1 : 0),\n                        _key2 = 1;\n                    _key2 < _len2;\n                    _key2++\n                ) {\n                    args[_key2 - 1] = arguments[_key2];\n                }\n                _fire(event, args, false);\n            },\n            on: function on(event, cb) {\n                listeners.push({ event: event, cb: cb });\n            },\n            onOnce: function onOnce(event, _cb) {\n                listeners.push({\n                    event: event,\n                    cb: function cb() {\n                        off(event, _cb);\n                        _cb.apply(void 0, arguments);\n                    },\n                });\n            },\n            off: off,\n        };\n    };\n\n    var copyObjectPropertiesToObject = function copyObjectPropertiesToObject(\n        src,\n        target,\n        excluded\n    ) {\n        Object.getOwnPropertyNames(src)\n            .filter(function(property) {\n                return !excluded.includes(property);\n            })\n            .forEach(function(key) {\n                return Object.defineProperty(\n                    target,\n                    key,\n                    Object.getOwnPropertyDescriptor(src, key)\n                );\n            });\n    };\n\n    var PRIVATE = [\n        'fire',\n        'process',\n        'revert',\n        'load',\n        'on',\n        'off',\n        'onOnce',\n        'retryLoad',\n        'extend',\n        'archive',\n        'archived',\n        'release',\n        'released',\n        'requestProcessing',\n        'freeze',\n    ];\n\n    var createItemAPI = function createItemAPI(item) {\n        var api = {};\n        copyObjectPropertiesToObject(item, api, PRIVATE);\n        return api;\n    };\n\n    var removeReleasedItems = function removeReleasedItems(items) {\n        items.forEach(function(item, index) {\n            if (item.released) {\n                arrayRemove(items, index);\n            }\n        });\n    };\n\n    var ItemStatus = {\n        INIT: 1,\n        IDLE: 2,\n        PROCESSING_QUEUED: 9,\n        PROCESSING: 3,\n        PROCESSING_COMPLETE: 5,\n        PROCESSING_ERROR: 6,\n        PROCESSING_REVERT_ERROR: 10,\n        LOADING: 7,\n        LOAD_ERROR: 8,\n    };\n\n    var FileOrigin = {\n        INPUT: 1,\n        LIMBO: 2,\n        LOCAL: 3,\n    };\n\n    var getNonNumeric = function getNonNumeric(str) {\n        return /[^0-9]+/.exec(str);\n    };\n\n    var getDecimalSeparator = function getDecimalSeparator() {\n        return getNonNumeric((1.1).toLocaleString())[0];\n    };\n\n    var getThousandsSeparator = function getThousandsSeparator() {\n        // Added for browsers that do not return the thousands separator (happend on native browser Android 4.4.4)\n        // We check against the normal toString output and if they're the same return a comma when decimal separator is a dot\n        var decimalSeparator = getDecimalSeparator();\n        var thousandsStringWithSeparator = (1000.0).toLocaleString();\n        var thousandsStringWithoutSeparator = (1000.0).toString();\n        if (thousandsStringWithSeparator !== thousandsStringWithoutSeparator) {\n            return getNonNumeric(thousandsStringWithSeparator)[0];\n        }\n        return decimalSeparator === '.' ? ',' : '.';\n    };\n\n    var Type = {\n        BOOLEAN: 'boolean',\n        INT: 'int',\n        NUMBER: 'number',\n        STRING: 'string',\n        ARRAY: 'array',\n        OBJECT: 'object',\n        FUNCTION: 'function',\n        ACTION: 'action',\n        SERVER_API: 'serverapi',\n        REGEX: 'regex',\n    };\n\n    // all registered filters\n    var filters = [];\n\n    // loops over matching filters and passes options to each filter, returning the mapped results\n    var applyFilterChain = function applyFilterChain(key, value, utils) {\n        return new Promise(function(resolve, reject) {\n            // find matching filters for this key\n            var matchingFilters = filters\n                .filter(function(f) {\n                    return f.key === key;\n                })\n                .map(function(f) {\n                    return f.cb;\n                });\n\n            // resolve now\n            if (matchingFilters.length === 0) {\n                resolve(value);\n                return;\n            }\n\n            // first filter to kick things of\n            var initialFilter = matchingFilters.shift();\n\n            // chain filters\n            matchingFilters\n                .reduce(\n                    // loop over promises passing value to next promise\n                    function(current, next) {\n                        return current.then(function(value) {\n                            return next(value, utils);\n                        });\n                    },\n\n                    // call initial filter, will return a promise\n                    initialFilter(value, utils)\n\n                    // all executed\n                )\n                .then(function(value) {\n                    return resolve(value);\n                })\n                .catch(function(error) {\n                    return reject(error);\n                });\n        });\n    };\n\n    var applyFilters = function applyFilters(key, value, utils) {\n        return filters\n            .filter(function(f) {\n                return f.key === key;\n            })\n            .map(function(f) {\n                return f.cb(value, utils);\n            });\n    };\n\n    // adds a new filter to the list\n    var addFilter = function addFilter(key, cb) {\n        return filters.push({ key: key, cb: cb });\n    };\n\n    var extendDefaultOptions = function extendDefaultOptions(additionalOptions) {\n        return Object.assign(defaultOptions, additionalOptions);\n    };\n\n    var getOptions = function getOptions() {\n        return Object.assign({}, defaultOptions);\n    };\n\n    var setOptions = function setOptions(opts) {\n        forin(opts, function(key, value) {\n            // key does not exist, so this option cannot be set\n            if (!defaultOptions[key]) {\n                return;\n            }\n            defaultOptions[key][0] = getValueByType(\n                value,\n                defaultOptions[key][0],\n                defaultOptions[key][1]\n            );\n        });\n    };\n\n    // default options on app\n    var defaultOptions = {\n        // the id to add to the root element\n        id: [null, Type.STRING],\n\n        // input field name to use\n        name: ['filepond', Type.STRING],\n\n        // disable the field\n        disabled: [false, Type.BOOLEAN],\n\n        // classname to put on wrapper\n        className: [null, Type.STRING],\n\n        // is the field required\n        required: [false, Type.BOOLEAN],\n\n        // Allow media capture when value is set\n        captureMethod: [null, Type.STRING],\n        // - \"camera\", \"microphone\" or \"camcorder\",\n        // - Does not work with multiple on apple devices\n        // - If set, acceptedFileTypes must be made to match with media wildcard \"image/*\", \"audio/*\" or \"video/*\"\n\n        // sync `acceptedFileTypes` property with `accept` attribute\n        allowSyncAcceptAttribute: [true, Type.BOOLEAN],\n\n        // Feature toggles\n        allowDrop: [true, Type.BOOLEAN], // Allow dropping of files\n        allowBrowse: [true, Type.BOOLEAN], // Allow browsing the file system\n        allowPaste: [true, Type.BOOLEAN], // Allow pasting files\n        allowMultiple: [false, Type.BOOLEAN], // Allow multiple files (disabled by default, as multiple attribute is also required on input to allow multiple)\n        allowReplace: [true, Type.BOOLEAN], // Allow dropping a file on other file to replace it (only works when multiple is set to false)\n        allowRevert: [true, Type.BOOLEAN], // Allows user to revert file upload\n        allowRemove: [true, Type.BOOLEAN], // Allow user to remove a file\n        allowProcess: [true, Type.BOOLEAN], // Allows user to process a file, when set to false, this removes the file upload button\n        allowReorder: [false, Type.BOOLEAN], // Allow reordering of files\n        allowDirectoriesOnly: [false, Type.BOOLEAN], // Allow only selecting directories with browse (no support for filtering dnd at this point)\n\n        // Try store file if `server` not set\n        storeAsFile: [false, Type.BOOLEAN],\n\n        // Revert mode\n        forceRevert: [false, Type.BOOLEAN], // Set to 'force' to require the file to be reverted before removal\n\n        // Input requirements\n        maxFiles: [null, Type.INT], // Max number of files\n        checkValidity: [false, Type.BOOLEAN], // Enables custom validity messages\n\n        // Where to put file\n        itemInsertLocationFreedom: [true, Type.BOOLEAN], // Set to false to always add items to begin or end of list\n        itemInsertLocation: ['before', Type.STRING], // Default index in list to add items that have been dropped at the top of the list\n        itemInsertInterval: [75, Type.INT],\n\n        // Drag 'n Drop related\n        dropOnPage: [false, Type.BOOLEAN], // Allow dropping of files anywhere on page (prevents browser from opening file if dropped outside of Up)\n        dropOnElement: [true, Type.BOOLEAN], // Drop needs to happen on element (set to false to also load drops outside of Up)\n        dropValidation: [false, Type.BOOLEAN], // Enable or disable validating files on drop\n        ignoredFiles: [['.ds_store', 'thumbs.db', 'desktop.ini'], Type.ARRAY],\n\n        // Upload related\n        instantUpload: [true, Type.BOOLEAN], // Should upload files immediately on drop\n        maxParallelUploads: [2, Type.INT], // Maximum files to upload in parallel\n        allowMinimumUploadDuration: [true, Type.BOOLEAN], // if true uploads take at least 750 ms, this ensures the user sees the upload progress giving trust the upload actually happened\n\n        // Chunks\n        chunkUploads: [false, Type.BOOLEAN], // Enable chunked uploads\n        chunkForce: [false, Type.BOOLEAN], // Force use of chunk uploads even for files smaller than chunk size\n        chunkSize: [5000000, Type.INT], // Size of chunks (5MB default)\n        chunkRetryDelays: [[500, 1000, 3000], Type.ARRAY], // Amount of times to retry upload of a chunk when it fails\n\n        // The server api end points to use for uploading (see docs)\n        server: [null, Type.SERVER_API],\n\n        // File size calculations, can set to 1024, this is only used for display, properties use file size base 1000\n        fileSizeBase: [1000, Type.INT],\n\n        // Labels and status messages\n        labelFileSizeBytes: ['bytes', Type.STRING],\n        labelFileSizeKilobytes: ['KB', Type.STRING],\n        labelFileSizeMegabytes: ['MB', Type.STRING],\n        labelFileSizeGigabytes: ['GB', Type.STRING],\n\n        labelDecimalSeparator: [getDecimalSeparator(), Type.STRING], // Default is locale separator\n        labelThousandsSeparator: [getThousandsSeparator(), Type.STRING], // Default is locale separator\n\n        labelIdle: [\n            'Drag & Drop your files or <span class=\"filepond--label-action\">Browse</span>',\n            Type.STRING,\n        ],\n\n        labelInvalidField: ['Field contains invalid files', Type.STRING],\n        labelFileWaitingForSize: ['Waiting for size', Type.STRING],\n        labelFileSizeNotAvailable: ['Size not available', Type.STRING],\n        labelFileCountSingular: ['file in list', Type.STRING],\n        labelFileCountPlural: ['files in list', Type.STRING],\n        labelFileLoading: ['Loading', Type.STRING],\n        labelFileAdded: ['Added', Type.STRING], // assistive only\n        labelFileLoadError: ['Error during load', Type.STRING],\n        labelFileRemoved: ['Removed', Type.STRING], // assistive only\n        labelFileRemoveError: ['Error during remove', Type.STRING],\n        labelFileProcessing: ['Uploading', Type.STRING],\n        labelFileProcessingComplete: ['Upload complete', Type.STRING],\n        labelFileProcessingAborted: ['Upload cancelled', Type.STRING],\n        labelFileProcessingError: ['Error during upload', Type.STRING],\n        labelFileProcessingRevertError: ['Error during revert', Type.STRING],\n\n        labelTapToCancel: ['tap to cancel', Type.STRING],\n        labelTapToRetry: ['tap to retry', Type.STRING],\n        labelTapToUndo: ['tap to undo', Type.STRING],\n\n        labelButtonRemoveItem: ['Remove', Type.STRING],\n        labelButtonAbortItemLoad: ['Abort', Type.STRING],\n        labelButtonRetryItemLoad: ['Retry', Type.STRING],\n        labelButtonAbortItemProcessing: ['Cancel', Type.STRING],\n        labelButtonUndoItemProcessing: ['Undo', Type.STRING],\n        labelButtonRetryItemProcessing: ['Retry', Type.STRING],\n        labelButtonProcessItem: ['Upload', Type.STRING],\n\n        // make sure width and height plus viewpox are even numbers so icons are nicely centered\n        iconRemove: [\n            '<svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M11.586 13l-2.293 2.293a1 1 0 0 0 1.414 1.414L13 14.414l2.293 2.293a1 1 0 0 0 1.414-1.414L14.414 13l2.293-2.293a1 1 0 0 0-1.414-1.414L13 11.586l-2.293-2.293a1 1 0 0 0-1.414 1.414L11.586 13z\" fill=\"currentColor\" fill-rule=\"nonzero\"/></svg>',\n            Type.STRING,\n        ],\n\n        iconProcess: [\n            '<svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 10.414v3.585a1 1 0 0 1-2 0v-3.585l-1.293 1.293a1 1 0 0 1-1.414-1.415l3-3a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.415L14 10.414zM9 18a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2H9z\" fill=\"currentColor\" fill-rule=\"evenodd\"/></svg>',\n            Type.STRING,\n        ],\n\n        iconRetry: [\n            '<svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M10.81 9.185l-.038.02A4.997 4.997 0 0 0 8 13.683a5 5 0 0 0 5 5 5 5 0 0 0 5-5 1 1 0 0 1 2 0A7 7 0 1 1 9.722 7.496l-.842-.21a.999.999 0 1 1 .484-1.94l3.23.806c.535.133.86.675.73 1.21l-.804 3.233a.997.997 0 0 1-1.21.73.997.997 0 0 1-.73-1.21l.23-.928v-.002z\" fill=\"currentColor\" fill-rule=\"nonzero\"/></svg>',\n            Type.STRING,\n        ],\n\n        iconUndo: [\n            '<svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M9.185 10.81l.02-.038A4.997 4.997 0 0 1 13.683 8a5 5 0 0 1 5 5 5 5 0 0 1-5 5 1 1 0 0 0 0 2A7 7 0 1 0 7.496 9.722l-.21-.842a.999.999 0 1 0-1.94.484l.806 3.23c.133.535.675.86 1.21.73l3.233-.803a.997.997 0 0 0 .73-1.21.997.997 0 0 0-1.21-.73l-.928.23-.002-.001z\" fill=\"currentColor\" fill-rule=\"nonzero\"/></svg>',\n            Type.STRING,\n        ],\n\n        iconDone: [\n            '<svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M18.293 9.293a1 1 0 0 1 1.414 1.414l-7.002 7a1 1 0 0 1-1.414 0l-3.998-4a1 1 0 1 1 1.414-1.414L12 15.586l6.294-6.293z\" fill=\"currentColor\" fill-rule=\"nonzero\"/></svg>',\n            Type.STRING,\n        ],\n\n        // event handlers\n        oninit: [null, Type.FUNCTION],\n        onwarning: [null, Type.FUNCTION],\n        onerror: [null, Type.FUNCTION],\n        onactivatefile: [null, Type.FUNCTION],\n        oninitfile: [null, Type.FUNCTION],\n        onaddfilestart: [null, Type.FUNCTION],\n        onaddfileprogress: [null, Type.FUNCTION],\n        onaddfile: [null, Type.FUNCTION],\n        onprocessfilestart: [null, Type.FUNCTION],\n        onprocessfileprogress: [null, Type.FUNCTION],\n        onprocessfileabort: [null, Type.FUNCTION],\n        onprocessfilerevert: [null, Type.FUNCTION],\n        onprocessfile: [null, Type.FUNCTION],\n        onprocessfiles: [null, Type.FUNCTION],\n        onremovefile: [null, Type.FUNCTION],\n        onpreparefile: [null, Type.FUNCTION],\n        onupdatefiles: [null, Type.FUNCTION],\n        onreorderfiles: [null, Type.FUNCTION],\n\n        // hooks\n        beforeDropFile: [null, Type.FUNCTION],\n        beforeAddFile: [null, Type.FUNCTION],\n        beforeRemoveFile: [null, Type.FUNCTION],\n        beforePrepareFile: [null, Type.FUNCTION],\n\n        // styles\n        stylePanelLayout: [null, Type.STRING], // null 'integrated', 'compact', 'circle'\n        stylePanelAspectRatio: [null, Type.STRING], // null or '3:2' or 1\n        styleItemPanelAspectRatio: [null, Type.STRING],\n        styleButtonRemoveItemPosition: ['left', Type.STRING],\n        styleButtonProcessItemPosition: ['right', Type.STRING],\n        styleLoadIndicatorPosition: ['right', Type.STRING],\n        styleProgressIndicatorPosition: ['right', Type.STRING],\n        styleButtonRemoveItemAlign: [false, Type.BOOLEAN],\n\n        // custom initial files array\n        files: [[], Type.ARRAY],\n\n        // show support by displaying credits\n        credits: [['https://pqina.nl/', 'Powered by PQINA'], Type.ARRAY],\n    };\n\n    var getItemByQuery = function getItemByQuery(items, query) {\n        // just return first index\n        if (isEmpty(query)) {\n            return items[0] || null;\n        }\n\n        // query is index\n        if (isInt(query)) {\n            return items[query] || null;\n        }\n\n        // if query is item, get the id\n        if (typeof query === 'object') {\n            query = query.id;\n        }\n\n        // assume query is a string and return item by id\n        return (\n            items.find(function(item) {\n                return item.id === query;\n            }) || null\n        );\n    };\n\n    var getNumericAspectRatioFromString = function getNumericAspectRatioFromString(aspectRatio) {\n        if (isEmpty(aspectRatio)) {\n            return aspectRatio;\n        }\n        if (/:/.test(aspectRatio)) {\n            var parts = aspectRatio.split(':');\n            return parts[1] / parts[0];\n        }\n        return parseFloat(aspectRatio);\n    };\n\n    var getActiveItems = function getActiveItems(items) {\n        return items.filter(function(item) {\n            return !item.archived;\n        });\n    };\n\n    var Status = {\n        EMPTY: 0,\n        IDLE: 1, // waiting\n        ERROR: 2, // a file is in error state\n        BUSY: 3, // busy processing or loading\n        READY: 4, // all files uploaded\n    };\n\n    var res = null;\n    var canUpdateFileInput = function canUpdateFileInput() {\n        if (res === null) {\n            try {\n                var dataTransfer = new DataTransfer();\n                dataTransfer.items.add(new File(['hello world'], 'This_Works.txt'));\n                var el = document.createElement('input');\n                el.setAttribute('type', 'file');\n                el.files = dataTransfer.files;\n                res = el.files.length === 1;\n            } catch (err) {\n                res = false;\n            }\n        }\n        return res;\n    };\n\n    var ITEM_ERROR = [\n        ItemStatus.LOAD_ERROR,\n        ItemStatus.PROCESSING_ERROR,\n        ItemStatus.PROCESSING_REVERT_ERROR,\n    ];\n\n    var ITEM_BUSY = [\n        ItemStatus.LOADING,\n        ItemStatus.PROCESSING,\n        ItemStatus.PROCESSING_QUEUED,\n        ItemStatus.INIT,\n    ];\n\n    var ITEM_READY = [ItemStatus.PROCESSING_COMPLETE];\n\n    var isItemInErrorState = function isItemInErrorState(item) {\n        return ITEM_ERROR.includes(item.status);\n    };\n    var isItemInBusyState = function isItemInBusyState(item) {\n        return ITEM_BUSY.includes(item.status);\n    };\n    var isItemInReadyState = function isItemInReadyState(item) {\n        return ITEM_READY.includes(item.status);\n    };\n\n    var isAsync = function isAsync(state) {\n        return (\n            isObject(state.options.server) &&\n            (isObject(state.options.server.process) || isFunction(state.options.server.process))\n        );\n    };\n\n    var queries = function queries(state) {\n        return {\n            GET_STATUS: function GET_STATUS() {\n                var items = getActiveItems(state.items);\n                var EMPTY = Status.EMPTY,\n                    ERROR = Status.ERROR,\n                    BUSY = Status.BUSY,\n                    IDLE = Status.IDLE,\n                    READY = Status.READY;\n\n                if (items.length === 0) return EMPTY;\n\n                if (items.some(isItemInErrorState)) return ERROR;\n\n                if (items.some(isItemInBusyState)) return BUSY;\n\n                if (items.some(isItemInReadyState)) return READY;\n\n                return IDLE;\n            },\n\n            GET_ITEM: function GET_ITEM(query) {\n                return getItemByQuery(state.items, query);\n            },\n\n            GET_ACTIVE_ITEM: function GET_ACTIVE_ITEM(query) {\n                return getItemByQuery(getActiveItems(state.items), query);\n            },\n\n            GET_ACTIVE_ITEMS: function GET_ACTIVE_ITEMS() {\n                return getActiveItems(state.items);\n            },\n\n            GET_ITEMS: function GET_ITEMS() {\n                return state.items;\n            },\n\n            GET_ITEM_NAME: function GET_ITEM_NAME(query) {\n                var item = getItemByQuery(state.items, query);\n                return item ? item.filename : null;\n            },\n\n            GET_ITEM_SIZE: function GET_ITEM_SIZE(query) {\n                var item = getItemByQuery(state.items, query);\n                return item ? item.fileSize : null;\n            },\n\n            GET_STYLES: function GET_STYLES() {\n                return Object.keys(state.options)\n                    .filter(function(key) {\n                        return /^style/.test(key);\n                    })\n                    .map(function(option) {\n                        return {\n                            name: option,\n                            value: state.options[option],\n                        };\n                    });\n            },\n\n            GET_PANEL_ASPECT_RATIO: function GET_PANEL_ASPECT_RATIO() {\n                var isShapeCircle = /circle/.test(state.options.stylePanelLayout);\n                var aspectRatio = isShapeCircle\n                    ? 1\n                    : getNumericAspectRatioFromString(state.options.stylePanelAspectRatio);\n                return aspectRatio;\n            },\n\n            GET_ITEM_PANEL_ASPECT_RATIO: function GET_ITEM_PANEL_ASPECT_RATIO() {\n                return state.options.styleItemPanelAspectRatio;\n            },\n\n            GET_ITEMS_BY_STATUS: function GET_ITEMS_BY_STATUS(status) {\n                return getActiveItems(state.items).filter(function(item) {\n                    return item.status === status;\n                });\n            },\n\n            GET_TOTAL_ITEMS: function GET_TOTAL_ITEMS() {\n                return getActiveItems(state.items).length;\n            },\n\n            SHOULD_UPDATE_FILE_INPUT: function SHOULD_UPDATE_FILE_INPUT() {\n                return state.options.storeAsFile && canUpdateFileInput() && !isAsync(state);\n            },\n\n            IS_ASYNC: function IS_ASYNC() {\n                return isAsync(state);\n            },\n\n            GET_FILE_SIZE_LABELS: function GET_FILE_SIZE_LABELS(query) {\n                return {\n                    labelBytes: query('GET_LABEL_FILE_SIZE_BYTES') || undefined,\n                    labelKilobytes: query('GET_LABEL_FILE_SIZE_KILOBYTES') || undefined,\n                    labelMegabytes: query('GET_LABEL_FILE_SIZE_MEGABYTES') || undefined,\n                    labelGigabytes: query('GET_LABEL_FILE_SIZE_GIGABYTES') || undefined,\n                };\n            },\n        };\n    };\n\n    var hasRoomForItem = function hasRoomForItem(state) {\n        var count = getActiveItems(state.items).length;\n\n        // if cannot have multiple items, to add one item it should currently not contain items\n        if (!state.options.allowMultiple) {\n            return count === 0;\n        }\n\n        // if allows multiple items, we check if a max item count has been set, if not, there's no limit\n        var maxFileCount = state.options.maxFiles;\n        if (maxFileCount === null) {\n            return true;\n        }\n\n        // we check if the current count is smaller than the max count, if so, another file can still be added\n        if (count < maxFileCount) {\n            return true;\n        }\n\n        // no more room for another file\n        return false;\n    };\n\n    var limit = function limit(value, min, max) {\n        return Math.max(Math.min(max, value), min);\n    };\n\n    var arrayInsert = function arrayInsert(arr, index, item) {\n        return arr.splice(index, 0, item);\n    };\n\n    var insertItem = function insertItem(items, item, index) {\n        if (isEmpty(item)) {\n            return null;\n        }\n\n        // if index is undefined, append\n        if (typeof index === 'undefined') {\n            items.push(item);\n            return item;\n        }\n\n        // limit the index to the size of the items array\n        index = limit(index, 0, items.length);\n\n        // add item to array\n        arrayInsert(items, index, item);\n\n        // expose\n        return item;\n    };\n\n    var isBase64DataURI = function isBase64DataURI(str) {\n        return /^\\s*data:([a-z]+\\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\\-._~:@\\/?%\\s]*)\\s*$/i.test(\n            str\n        );\n    };\n\n    var getFilenameFromURL = function getFilenameFromURL(url) {\n        return ('' + url)\n            .split('/')\n            .pop()\n            .split('?')\n            .shift();\n    };\n\n    var getExtensionFromFilename = function getExtensionFromFilename(name) {\n        return name.split('.').pop();\n    };\n\n    var guesstimateExtension = function guesstimateExtension(type) {\n        // if no extension supplied, exit here\n        if (typeof type !== 'string') {\n            return '';\n        }\n\n        // get subtype\n        var subtype = type.split('/').pop();\n\n        // is svg subtype\n        if (/svg/.test(subtype)) {\n            return 'svg';\n        }\n\n        if (/zip|compressed/.test(subtype)) {\n            return 'zip';\n        }\n\n        if (/plain/.test(subtype)) {\n            return 'txt';\n        }\n\n        if (/msword/.test(subtype)) {\n            return 'doc';\n        }\n\n        // if is valid subtype\n        if (/[a-z]+/.test(subtype)) {\n            // always use jpg extension\n            if (subtype === 'jpeg') {\n                return 'jpg';\n            }\n\n            // return subtype\n            return subtype;\n        }\n\n        return '';\n    };\n\n    var leftPad = function leftPad(value) {\n        var padding = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n        return (padding + value).slice(-padding.length);\n    };\n\n    var getDateString = function getDateString() {\n        var date = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new Date();\n        return (\n            date.getFullYear() +\n            '-' +\n            leftPad(date.getMonth() + 1, '00') +\n            '-' +\n            leftPad(date.getDate(), '00') +\n            '_' +\n            leftPad(date.getHours(), '00') +\n            '-' +\n            leftPad(date.getMinutes(), '00') +\n            '-' +\n            leftPad(date.getSeconds(), '00')\n        );\n    };\n\n    var getFileFromBlob = function getFileFromBlob(blob, filename) {\n        var type = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n        var extension = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n        var file =\n            typeof type === 'string'\n                ? blob.slice(0, blob.size, type)\n                : blob.slice(0, blob.size, blob.type);\n        file.lastModifiedDate = new Date();\n\n        // copy relative path\n        if (blob._relativePath) file._relativePath = blob._relativePath;\n\n        // if blob has name property, use as filename if no filename supplied\n        if (!isString(filename)) {\n            filename = getDateString();\n        }\n\n        // if filename supplied but no extension and filename has extension\n        if (filename && extension === null && getExtensionFromFilename(filename)) {\n            file.name = filename;\n        } else {\n            extension = extension || guesstimateExtension(file.type);\n            file.name = filename + (extension ? '.' + extension : '');\n        }\n\n        return file;\n    };\n\n    var getBlobBuilder = function getBlobBuilder() {\n        return (window.BlobBuilder =\n            window.BlobBuilder ||\n            window.WebKitBlobBuilder ||\n            window.MozBlobBuilder ||\n            window.MSBlobBuilder);\n    };\n\n    var createBlob = function createBlob(arrayBuffer, mimeType) {\n        var BB = getBlobBuilder();\n\n        if (BB) {\n            var bb = new BB();\n            bb.append(arrayBuffer);\n            return bb.getBlob(mimeType);\n        }\n\n        return new Blob([arrayBuffer], {\n            type: mimeType,\n        });\n    };\n\n    var getBlobFromByteStringWithMimeType = function getBlobFromByteStringWithMimeType(\n        byteString,\n        mimeType\n    ) {\n        var ab = new ArrayBuffer(byteString.length);\n        var ia = new Uint8Array(ab);\n\n        for (var i = 0; i < byteString.length; i++) {\n            ia[i] = byteString.charCodeAt(i);\n        }\n\n        return createBlob(ab, mimeType);\n    };\n\n    var getMimeTypeFromBase64DataURI = function getMimeTypeFromBase64DataURI(dataURI) {\n        return (/^data:(.+);/.exec(dataURI) || [])[1] || null;\n    };\n\n    var getBase64DataFromBase64DataURI = function getBase64DataFromBase64DataURI(dataURI) {\n        // get data part of string (remove data:image/jpeg...,)\n        var data = dataURI.split(',')[1];\n\n        // remove any whitespace as that causes InvalidCharacterError in IE\n        return data.replace(/\\s/g, '');\n    };\n\n    var getByteStringFromBase64DataURI = function getByteStringFromBase64DataURI(dataURI) {\n        return atob(getBase64DataFromBase64DataURI(dataURI));\n    };\n\n    var getBlobFromBase64DataURI = function getBlobFromBase64DataURI(dataURI) {\n        var mimeType = getMimeTypeFromBase64DataURI(dataURI);\n        var byteString = getByteStringFromBase64DataURI(dataURI);\n\n        return getBlobFromByteStringWithMimeType(byteString, mimeType);\n    };\n\n    var getFileFromBase64DataURI = function getFileFromBase64DataURI(dataURI, filename, extension) {\n        return getFileFromBlob(getBlobFromBase64DataURI(dataURI), filename, null, extension);\n    };\n\n    var getFileNameFromHeader = function getFileNameFromHeader(header) {\n        // test if is content disposition header, if not exit\n        if (!/^content-disposition:/i.test(header)) return null;\n\n        // get filename parts\n        var matches = header\n            .split(/filename=|filename\\*=.+''/)\n            .splice(1)\n            .map(function(name) {\n                return name.trim().replace(/^[\"']|[;\"']{0,2}$/g, '');\n            })\n            .filter(function(name) {\n                return name.length;\n            });\n\n        return matches.length ? decodeURI(matches[matches.length - 1]) : null;\n    };\n\n    var getFileSizeFromHeader = function getFileSizeFromHeader(header) {\n        if (/content-length:/i.test(header)) {\n            var size = header.match(/[0-9]+/)[0];\n            return size ? parseInt(size, 10) : null;\n        }\n        return null;\n    };\n\n    var getTranfserIdFromHeader = function getTranfserIdFromHeader(header) {\n        if (/x-content-transfer-id:/i.test(header)) {\n            var id = (header.split(':')[1] || '').trim();\n            return id || null;\n        }\n        return null;\n    };\n\n    var getFileInfoFromHeaders = function getFileInfoFromHeaders(headers) {\n        var info = {\n            source: null,\n            name: null,\n            size: null,\n        };\n\n        var rows = headers.split('\\n');\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n        try {\n            for (\n                var _iterator = rows[Symbol.iterator](), _step;\n                !(_iteratorNormalCompletion = (_step = _iterator.next()).done);\n                _iteratorNormalCompletion = true\n            ) {\n                var header = _step.value;\n\n                var name = getFileNameFromHeader(header);\n                if (name) {\n                    info.name = name;\n                    continue;\n                }\n\n                var size = getFileSizeFromHeader(header);\n                if (size) {\n                    info.size = size;\n                    continue;\n                }\n\n                var source = getTranfserIdFromHeader(header);\n                if (source) {\n                    info.source = source;\n                    continue;\n                }\n            }\n        } catch (err) {\n            _didIteratorError = true;\n            _iteratorError = err;\n        } finally {\n            try {\n                if (!_iteratorNormalCompletion && _iterator.return != null) {\n                    _iterator.return();\n                }\n            } finally {\n                if (_didIteratorError) {\n                    throw _iteratorError;\n                }\n            }\n        }\n\n        return info;\n    };\n\n    var createFileLoader = function createFileLoader(fetchFn) {\n        var state = {\n            source: null,\n            complete: false,\n            progress: 0,\n            size: null,\n            timestamp: null,\n            duration: 0,\n            request: null,\n        };\n\n        var getProgress = function getProgress() {\n            return state.progress;\n        };\n        var abort = function abort() {\n            if (state.request && state.request.abort) {\n                state.request.abort();\n            }\n        };\n\n        // load source\n        var load = function load() {\n            // get quick reference\n            var source = state.source;\n\n            api.fire('init', source);\n\n            // Load Files\n            if (source instanceof File) {\n                api.fire('load', source);\n            } else if (source instanceof Blob) {\n                // Load blobs, set default name to current date\n                api.fire('load', getFileFromBlob(source, source.name));\n            } else if (isBase64DataURI(source)) {\n                // Load base 64, set default name to current date\n                api.fire('load', getFileFromBase64DataURI(source));\n            } else {\n                // Deal as if is external URL, let's load it!\n                loadURL(source);\n            }\n        };\n\n        // loads a url\n        var loadURL = function loadURL(url) {\n            // is remote url and no fetch method supplied\n            if (!fetchFn) {\n                api.fire('error', {\n                    type: 'error',\n                    body: \"Can't load URL\",\n                    code: 400,\n                });\n\n                return;\n            }\n\n            // set request start\n            state.timestamp = Date.now();\n\n            // load file\n            state.request = fetchFn(\n                url,\n                function(response) {\n                    // update duration\n                    state.duration = Date.now() - state.timestamp;\n\n                    // done!\n                    state.complete = true;\n\n                    // turn blob response into a file\n                    if (response instanceof Blob) {\n                        response = getFileFromBlob(\n                            response,\n                            response.name || getFilenameFromURL(url)\n                        );\n                    }\n\n                    api.fire(\n                        'load',\n                        // if has received blob, we go with blob, if no response, we return null\n                        response instanceof Blob ? response : response ? response.body : null\n                    );\n                },\n                function(error) {\n                    api.fire(\n                        'error',\n                        typeof error === 'string'\n                            ? {\n                                  type: 'error',\n                                  code: 0,\n                                  body: error,\n                              }\n                            : error\n                    );\n                },\n                function(computable, current, total) {\n                    // collected some meta data already\n                    if (total) {\n                        state.size = total;\n                    }\n\n                    // update duration\n                    state.duration = Date.now() - state.timestamp;\n\n                    // if we can't compute progress, we're not going to fire progress events\n                    if (!computable) {\n                        state.progress = null;\n                        return;\n                    }\n\n                    // update progress percentage\n                    state.progress = current / total;\n\n                    // expose\n                    api.fire('progress', state.progress);\n                },\n                function() {\n                    api.fire('abort');\n                },\n                function(response) {\n                    var fileinfo = getFileInfoFromHeaders(\n                        typeof response === 'string' ? response : response.headers\n                    );\n                    api.fire('meta', {\n                        size: state.size || fileinfo.size,\n                        filename: fileinfo.name,\n                        source: fileinfo.source,\n                    });\n                }\n            );\n        };\n\n        var api = Object.assign({}, on(), {\n            setSource: function setSource(source) {\n                return (state.source = source);\n            },\n            getProgress: getProgress, // file load progress\n            abort: abort, // abort file load\n            load: load, // start load\n        });\n\n        return api;\n    };\n\n    var isGet = function isGet(method) {\n        return /GET|HEAD/.test(method);\n    };\n\n    var sendRequest = function sendRequest(data, url, options) {\n        var api = {\n            onheaders: function onheaders() {},\n            onprogress: function onprogress() {},\n            onload: function onload() {},\n            ontimeout: function ontimeout() {},\n            onerror: function onerror() {},\n            onabort: function onabort() {},\n            abort: function abort() {\n                aborted = true;\n                xhr.abort();\n            },\n        };\n\n        // timeout identifier, only used when timeout is defined\n        var aborted = false;\n        var headersReceived = false;\n\n        // set default options\n        options = Object.assign(\n            {\n                method: 'POST',\n                headers: {},\n                withCredentials: false,\n            },\n            options\n        );\n\n        // encode url\n        url = encodeURI(url);\n\n        // if method is GET, add any received data to url\n\n        if (isGet(options.method) && data) {\n            url =\n                '' +\n                url +\n                encodeURIComponent(typeof data === 'string' ? data : JSON.stringify(data));\n        }\n\n        // create request\n        var xhr = new XMLHttpRequest();\n\n        // progress of load\n        var process = isGet(options.method) ? xhr : xhr.upload;\n        process.onprogress = function(e) {\n            // no progress event when aborted ( onprogress is called once after abort() )\n            if (aborted) {\n                return;\n            }\n\n            api.onprogress(e.lengthComputable, e.loaded, e.total);\n        };\n\n        // tries to get header info to the app as fast as possible\n        xhr.onreadystatechange = function() {\n            // not interesting in these states ('unsent' and 'openend' as they don't give us any additional info)\n            if (xhr.readyState < 2) {\n                return;\n            }\n\n            // no server response\n            if (xhr.readyState === 4 && xhr.status === 0) {\n                return;\n            }\n\n            if (headersReceived) {\n                return;\n            }\n\n            headersReceived = true;\n\n            // we've probably received some useful data in response headers\n            api.onheaders(xhr);\n        };\n\n        // load successful\n        xhr.onload = function() {\n            // is classified as valid response\n            if (xhr.status >= 200 && xhr.status < 300) {\n                api.onload(xhr);\n            } else {\n                api.onerror(xhr);\n            }\n        };\n\n        // error during load\n        xhr.onerror = function() {\n            return api.onerror(xhr);\n        };\n\n        // request aborted\n        xhr.onabort = function() {\n            aborted = true;\n            api.onabort();\n        };\n\n        // request timeout\n        xhr.ontimeout = function() {\n            return api.ontimeout(xhr);\n        };\n\n        // open up open up!\n        xhr.open(options.method, url, true);\n\n        // set timeout if defined (do it after open so IE11 plays ball)\n        if (isInt(options.timeout)) {\n            xhr.timeout = options.timeout;\n        }\n\n        // add headers\n        Object.keys(options.headers).forEach(function(key) {\n            var value = unescape(encodeURIComponent(options.headers[key]));\n            xhr.setRequestHeader(key, value);\n        });\n\n        // set type of response\n        if (options.responseType) {\n            xhr.responseType = options.responseType;\n        }\n\n        // set credentials\n        if (options.withCredentials) {\n            xhr.withCredentials = true;\n        }\n\n        // let's send our data\n        xhr.send(data);\n\n        return api;\n    };\n\n    var createResponse = function createResponse(type, code, body, headers) {\n        return {\n            type: type,\n            code: code,\n            body: body,\n            headers: headers,\n        };\n    };\n\n    var createTimeoutResponse = function createTimeoutResponse(cb) {\n        return function(xhr) {\n            cb(createResponse('error', 0, 'Timeout', xhr.getAllResponseHeaders()));\n        };\n    };\n\n    var hasQS = function hasQS(str) {\n        return /\\?/.test(str);\n    };\n    var buildURL = function buildURL() {\n        var url = '';\n        for (var _len = arguments.length, parts = new Array(_len), _key = 0; _key < _len; _key++) {\n            parts[_key] = arguments[_key];\n        }\n        parts.forEach(function(part) {\n            url += hasQS(url) && hasQS(part) ? part.replace(/\\?/, '&') : part;\n        });\n        return url;\n    };\n\n    var createFetchFunction = function createFetchFunction() {\n        var apiUrl = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n        var action = arguments.length > 1 ? arguments[1] : undefined;\n        // custom handler (should also handle file, load, error, progress and abort)\n        if (typeof action === 'function') {\n            return action;\n        }\n\n        // no action supplied\n        if (!action || !isString(action.url)) {\n            return null;\n        }\n\n        // set onload hanlder\n        var onload =\n            action.onload ||\n            function(res) {\n                return res;\n            };\n        var onerror =\n            action.onerror ||\n            function(res) {\n                return null;\n            };\n\n        // internal handler\n        return function(url, load, error, progress, abort, headers) {\n            // do local or remote request based on if the url is external\n            var request = sendRequest(\n                url,\n                buildURL(apiUrl, action.url),\n                Object.assign({}, action, {\n                    responseType: 'blob',\n                })\n            );\n\n            request.onload = function(xhr) {\n                // get headers\n                var headers = xhr.getAllResponseHeaders();\n\n                // get filename\n                var filename = getFileInfoFromHeaders(headers).name || getFilenameFromURL(url);\n\n                // create response\n                load(\n                    createResponse(\n                        'load',\n                        xhr.status,\n                        action.method === 'HEAD'\n                            ? null\n                            : getFileFromBlob(onload(xhr.response), filename),\n                        headers\n                    )\n                );\n            };\n\n            request.onerror = function(xhr) {\n                error(\n                    createResponse(\n                        'error',\n                        xhr.status,\n                        onerror(xhr.response) || xhr.statusText,\n                        xhr.getAllResponseHeaders()\n                    )\n                );\n            };\n\n            request.onheaders = function(xhr) {\n                headers(createResponse('headers', xhr.status, null, xhr.getAllResponseHeaders()));\n            };\n\n            request.ontimeout = createTimeoutResponse(error);\n            request.onprogress = progress;\n            request.onabort = abort;\n\n            // should return request\n            return request;\n        };\n    };\n\n    var ChunkStatus = {\n        QUEUED: 0,\n        COMPLETE: 1,\n        PROCESSING: 2,\n        ERROR: 3,\n        WAITING: 4,\n    };\n\n    /*\n                                                       function signature:\n                                                         (file, metadata, load, error, progress, abort, transfer, options) => {\n                                                           return {\n                                                           abort:() => {}\n                                                         }\n                                                       }\n                                                       */\n\n    // apiUrl, action, name, file, metadata, load, error, progress, abort, transfer, options\n    var processFileChunked = function processFileChunked(\n        apiUrl,\n        action,\n        name,\n        file,\n        metadata,\n        load,\n        error,\n        progress,\n        abort,\n        transfer,\n        options\n    ) {\n        // all chunks\n        var chunks = [];\n        var chunkTransferId = options.chunkTransferId,\n            chunkServer = options.chunkServer,\n            chunkSize = options.chunkSize,\n            chunkRetryDelays = options.chunkRetryDelays;\n\n        // default state\n        var state = {\n            serverId: chunkTransferId,\n            aborted: false,\n        };\n\n        // set onload handlers\n        var ondata =\n            action.ondata ||\n            function(fd) {\n                return fd;\n            };\n        var onload =\n            action.onload ||\n            function(xhr, method) {\n                return method === 'HEAD' ? xhr.getResponseHeader('Upload-Offset') : xhr.response;\n            };\n        var onerror =\n            action.onerror ||\n            function(res) {\n                return null;\n            };\n\n        // create server hook\n        var requestTransferId = function requestTransferId(cb) {\n            var formData = new FormData();\n\n            // add metadata under same name\n            if (isObject(metadata)) formData.append(name, JSON.stringify(metadata));\n\n            var headers =\n                typeof action.headers === 'function'\n                    ? action.headers(file, metadata)\n                    : Object.assign({}, action.headers, {\n                          'Upload-Length': file.size,\n                      });\n\n            var requestParams = Object.assign({}, action, {\n                headers: headers,\n            });\n\n            // send request object\n            var request = sendRequest(\n                ondata(formData),\n                buildURL(apiUrl, action.url),\n                requestParams\n            );\n\n            request.onload = function(xhr) {\n                return cb(onload(xhr, requestParams.method));\n            };\n\n            request.onerror = function(xhr) {\n                return error(\n                    createResponse(\n                        'error',\n                        xhr.status,\n                        onerror(xhr.response) || xhr.statusText,\n                        xhr.getAllResponseHeaders()\n                    )\n                );\n            };\n\n            request.ontimeout = createTimeoutResponse(error);\n        };\n\n        var requestTransferOffset = function requestTransferOffset(cb) {\n            var requestUrl = buildURL(apiUrl, chunkServer.url, state.serverId);\n\n            var headers =\n                typeof action.headers === 'function'\n                    ? action.headers(state.serverId)\n                    : Object.assign({}, action.headers);\n\n            var requestParams = {\n                headers: headers,\n                method: 'HEAD',\n            };\n\n            var request = sendRequest(null, requestUrl, requestParams);\n\n            request.onload = function(xhr) {\n                return cb(onload(xhr, requestParams.method));\n            };\n\n            request.onerror = function(xhr) {\n                return error(\n                    createResponse(\n                        'error',\n                        xhr.status,\n                        onerror(xhr.response) || xhr.statusText,\n                        xhr.getAllResponseHeaders()\n                    )\n                );\n            };\n\n            request.ontimeout = createTimeoutResponse(error);\n        };\n\n        // create chunks\n        var lastChunkIndex = Math.floor(file.size / chunkSize);\n        for (var i = 0; i <= lastChunkIndex; i++) {\n            var offset = i * chunkSize;\n            var data = file.slice(offset, offset + chunkSize, 'application/offset+octet-stream');\n            chunks[i] = {\n                index: i,\n                size: data.size,\n                offset: offset,\n                data: data,\n                file: file,\n                progress: 0,\n                retries: _toConsumableArray(chunkRetryDelays),\n                status: ChunkStatus.QUEUED,\n                error: null,\n                request: null,\n                timeout: null,\n            };\n        }\n\n        var completeProcessingChunks = function completeProcessingChunks() {\n            return load(state.serverId);\n        };\n\n        var canProcessChunk = function canProcessChunk(chunk) {\n            return chunk.status === ChunkStatus.QUEUED || chunk.status === ChunkStatus.ERROR;\n        };\n\n        var processChunk = function processChunk(chunk) {\n            // processing is paused, wait here\n            if (state.aborted) return;\n\n            // get next chunk to process\n            chunk = chunk || chunks.find(canProcessChunk);\n\n            // no more chunks to process\n            if (!chunk) {\n                // all done?\n                if (\n                    chunks.every(function(chunk) {\n                        return chunk.status === ChunkStatus.COMPLETE;\n                    })\n                ) {\n                    completeProcessingChunks();\n                }\n\n                // no chunk to handle\n                return;\n            }\n\n            // now processing this chunk\n            chunk.status = ChunkStatus.PROCESSING;\n            chunk.progress = null;\n\n            // allow parsing of formdata\n            var ondata =\n                chunkServer.ondata ||\n                function(fd) {\n                    return fd;\n                };\n            var onerror =\n                chunkServer.onerror ||\n                function(res) {\n                    return null;\n                };\n\n            // send request object\n            var requestUrl = buildURL(apiUrl, chunkServer.url, state.serverId);\n\n            var headers =\n                typeof chunkServer.headers === 'function'\n                    ? chunkServer.headers(chunk)\n                    : Object.assign({}, chunkServer.headers, {\n                          'Content-Type': 'application/offset+octet-stream',\n                          'Upload-Offset': chunk.offset,\n                          'Upload-Length': file.size,\n                          'Upload-Name': file.name,\n                      });\n\n            var request = (chunk.request = sendRequest(\n                ondata(chunk.data),\n                requestUrl,\n                Object.assign({}, chunkServer, {\n                    headers: headers,\n                })\n            ));\n\n            request.onload = function() {\n                // done!\n                chunk.status = ChunkStatus.COMPLETE;\n\n                // remove request reference\n                chunk.request = null;\n\n                // start processing more chunks\n                processChunks();\n            };\n\n            request.onprogress = function(lengthComputable, loaded, total) {\n                chunk.progress = lengthComputable ? loaded : null;\n                updateTotalProgress();\n            };\n\n            request.onerror = function(xhr) {\n                chunk.status = ChunkStatus.ERROR;\n                chunk.request = null;\n                chunk.error = onerror(xhr.response) || xhr.statusText;\n                if (!retryProcessChunk(chunk)) {\n                    error(\n                        createResponse(\n                            'error',\n                            xhr.status,\n                            onerror(xhr.response) || xhr.statusText,\n                            xhr.getAllResponseHeaders()\n                        )\n                    );\n                }\n            };\n\n            request.ontimeout = function(xhr) {\n                chunk.status = ChunkStatus.ERROR;\n                chunk.request = null;\n                if (!retryProcessChunk(chunk)) {\n                    createTimeoutResponse(error)(xhr);\n                }\n            };\n\n            request.onabort = function() {\n                chunk.status = ChunkStatus.QUEUED;\n                chunk.request = null;\n                abort();\n            };\n        };\n\n        var retryProcessChunk = function retryProcessChunk(chunk) {\n            // no more retries left\n            if (chunk.retries.length === 0) return false;\n\n            // new retry\n            chunk.status = ChunkStatus.WAITING;\n            clearTimeout(chunk.timeout);\n            chunk.timeout = setTimeout(function() {\n                processChunk(chunk);\n            }, chunk.retries.shift());\n\n            // we're going to retry\n            return true;\n        };\n\n        var updateTotalProgress = function updateTotalProgress() {\n            // calculate total progress fraction\n            var totalBytesTransfered = chunks.reduce(function(p, chunk) {\n                if (p === null || chunk.progress === null) return null;\n                return p + chunk.progress;\n            }, 0);\n\n            // can't compute progress\n            if (totalBytesTransfered === null) return progress(false, 0, 0);\n\n            // calculate progress values\n            var totalSize = chunks.reduce(function(total, chunk) {\n                return total + chunk.size;\n            }, 0);\n\n            // can update progress indicator\n            progress(true, totalBytesTransfered, totalSize);\n        };\n\n        // process new chunks\n        var processChunks = function processChunks() {\n            var totalProcessing = chunks.filter(function(chunk) {\n                return chunk.status === ChunkStatus.PROCESSING;\n            }).length;\n            if (totalProcessing >= 1) return;\n            processChunk();\n        };\n\n        var abortChunks = function abortChunks() {\n            chunks.forEach(function(chunk) {\n                clearTimeout(chunk.timeout);\n                if (chunk.request) {\n                    chunk.request.abort();\n                }\n            });\n        };\n\n        // let's go!\n        if (!state.serverId) {\n            requestTransferId(function(serverId) {\n                // stop here if aborted, might have happened in between request and callback\n                if (state.aborted) return;\n\n                // pass back to item so we can use it if something goes wrong\n                transfer(serverId);\n\n                // store internally\n                state.serverId = serverId;\n                processChunks();\n            });\n        } else {\n            requestTransferOffset(function(offset) {\n                // stop here if aborted, might have happened in between request and callback\n                if (state.aborted) return;\n\n                // mark chunks with lower offset as complete\n                chunks\n                    .filter(function(chunk) {\n                        return chunk.offset < offset;\n                    })\n                    .forEach(function(chunk) {\n                        chunk.status = ChunkStatus.COMPLETE;\n                        chunk.progress = chunk.size;\n                    });\n\n                // continue processing\n                processChunks();\n            });\n        }\n\n        return {\n            abort: function abort() {\n                state.aborted = true;\n                abortChunks();\n            },\n        };\n    };\n\n    /*\n                                                               function signature:\n                                                                 (file, metadata, load, error, progress, abort) => {\n                                                                   return {\n                                                                   abort:() => {}\n                                                                 }\n                                                               }\n                                                               */\n    var createFileProcessorFunction = function createFileProcessorFunction(\n        apiUrl,\n        action,\n        name,\n        options\n    ) {\n        return function(file, metadata, load, error, progress, abort, transfer) {\n            // no file received\n            if (!file) return;\n\n            // if was passed a file, and we can chunk it, exit here\n            var canChunkUpload = options.chunkUploads;\n            var shouldChunkUpload = canChunkUpload && file.size > options.chunkSize;\n            var willChunkUpload = canChunkUpload && (shouldChunkUpload || options.chunkForce);\n            if (file instanceof Blob && willChunkUpload)\n                return processFileChunked(\n                    apiUrl,\n                    action,\n                    name,\n                    file,\n                    metadata,\n                    load,\n                    error,\n                    progress,\n                    abort,\n                    transfer,\n                    options\n                );\n\n            // set handlers\n            var ondata =\n                action.ondata ||\n                function(fd) {\n                    return fd;\n                };\n            var onload =\n                action.onload ||\n                function(res) {\n                    return res;\n                };\n            var onerror =\n                action.onerror ||\n                function(res) {\n                    return null;\n                };\n\n            var headers =\n                typeof action.headers === 'function'\n                    ? action.headers(file, metadata) || {}\n                    : Object.assign(\n                          {},\n\n                          action.headers\n                      );\n\n            var requestParams = Object.assign({}, action, {\n                headers: headers,\n            });\n\n            // create formdata object\n            var formData = new FormData();\n\n            // add metadata under same name\n            if (isObject(metadata)) {\n                formData.append(name, JSON.stringify(metadata));\n            }\n\n            // Turn into an array of objects so no matter what the input, we can handle it the same way\n            (file instanceof Blob ? [{ name: null, file: file }] : file).forEach(function(item) {\n                formData.append(\n                    name,\n                    item.file,\n                    item.name === null ? item.file.name : '' + item.name + item.file.name\n                );\n            });\n\n            // send request object\n            var request = sendRequest(\n                ondata(formData),\n                buildURL(apiUrl, action.url),\n                requestParams\n            );\n            request.onload = function(xhr) {\n                load(\n                    createResponse(\n                        'load',\n                        xhr.status,\n                        onload(xhr.response),\n                        xhr.getAllResponseHeaders()\n                    )\n                );\n            };\n\n            request.onerror = function(xhr) {\n                error(\n                    createResponse(\n                        'error',\n                        xhr.status,\n                        onerror(xhr.response) || xhr.statusText,\n                        xhr.getAllResponseHeaders()\n                    )\n                );\n            };\n\n            request.ontimeout = createTimeoutResponse(error);\n            request.onprogress = progress;\n            request.onabort = abort;\n\n            // should return request\n            return request;\n        };\n    };\n\n    var createProcessorFunction = function createProcessorFunction() {\n        var apiUrl = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n        var action = arguments.length > 1 ? arguments[1] : undefined;\n        var name = arguments.length > 2 ? arguments[2] : undefined;\n        var options = arguments.length > 3 ? arguments[3] : undefined;\n\n        // custom handler (should also handle file, load, error, progress and abort)\n        if (typeof action === 'function')\n            return function() {\n                for (\n                    var _len = arguments.length, params = new Array(_len), _key = 0;\n                    _key < _len;\n                    _key++\n                ) {\n                    params[_key] = arguments[_key];\n                }\n                return action.apply(void 0, [name].concat(params, [options]));\n            };\n\n        // no action supplied\n        if (!action || !isString(action.url)) return null;\n\n        // internal handler\n        return createFileProcessorFunction(apiUrl, action, name, options);\n    };\n\n    /*\n                                                      function signature:\n                                                      (uniqueFileId, load, error) => { }\n                                                      */\n    var createRevertFunction = function createRevertFunction() {\n        var apiUrl = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n        var action = arguments.length > 1 ? arguments[1] : undefined;\n        // is custom implementation\n        if (typeof action === 'function') {\n            return action;\n        }\n\n        // no action supplied, return stub function, interface will work, but file won't be removed\n        if (!action || !isString(action.url)) {\n            return function(uniqueFileId, load) {\n                return load();\n            };\n        }\n\n        // set onload hanlder\n        var onload =\n            action.onload ||\n            function(res) {\n                return res;\n            };\n        var onerror =\n            action.onerror ||\n            function(res) {\n                return null;\n            };\n\n        // internal implementation\n        return function(uniqueFileId, load, error) {\n            var request = sendRequest(\n                uniqueFileId,\n                apiUrl + action.url,\n                action // contains method, headers and withCredentials properties\n            );\n            request.onload = function(xhr) {\n                load(\n                    createResponse(\n                        'load',\n                        xhr.status,\n                        onload(xhr.response),\n                        xhr.getAllResponseHeaders()\n                    )\n                );\n            };\n\n            request.onerror = function(xhr) {\n                error(\n                    createResponse(\n                        'error',\n                        xhr.status,\n                        onerror(xhr.response) || xhr.statusText,\n                        xhr.getAllResponseHeaders()\n                    )\n                );\n            };\n\n            request.ontimeout = createTimeoutResponse(error);\n\n            return request;\n        };\n    };\n\n    var getRandomNumber = function getRandomNumber() {\n        var min = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n        var max = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n        return min + Math.random() * (max - min);\n    };\n\n    var createPerceivedPerformanceUpdater = function createPerceivedPerformanceUpdater(cb) {\n        var duration = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1000;\n        var offset = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n        var tickMin = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 25;\n        var tickMax = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 250;\n        var timeout = null;\n        var start = Date.now();\n\n        var tick = function tick() {\n            var runtime = Date.now() - start;\n            var delay = getRandomNumber(tickMin, tickMax);\n\n            if (runtime + delay > duration) {\n                delay = runtime + delay - duration;\n            }\n\n            var progress = runtime / duration;\n            if (progress >= 1 || document.hidden) {\n                cb(1);\n                return;\n            }\n\n            cb(progress);\n\n            timeout = setTimeout(tick, delay);\n        };\n\n        if (duration > 0) tick();\n\n        return {\n            clear: function clear() {\n                clearTimeout(timeout);\n            },\n        };\n    };\n\n    var createFileProcessor = function createFileProcessor(processFn, options) {\n        var state = {\n            complete: false,\n            perceivedProgress: 0,\n            perceivedPerformanceUpdater: null,\n            progress: null,\n            timestamp: null,\n            perceivedDuration: 0,\n            duration: 0,\n            request: null,\n            response: null,\n        };\n        var allowMinimumUploadDuration = options.allowMinimumUploadDuration;\n\n        var process = function process(file, metadata) {\n            var progressFn = function progressFn() {\n                // we've not yet started the real download, stop here\n                // the request might not go through, for instance, there might be some server trouble\n                // if state.progress is null, the server does not allow computing progress and we show the spinner instead\n                if (state.duration === 0 || state.progress === null) return;\n\n                // as we're now processing, fire the progress event\n                api.fire('progress', api.getProgress());\n            };\n\n            var completeFn = function completeFn() {\n                state.complete = true;\n                api.fire('load-perceived', state.response.body);\n            };\n\n            // let's start processing\n            api.fire('start');\n\n            // set request start\n            state.timestamp = Date.now();\n\n            // create perceived performance progress indicator\n            state.perceivedPerformanceUpdater = createPerceivedPerformanceUpdater(\n                function(progress) {\n                    state.perceivedProgress = progress;\n                    state.perceivedDuration = Date.now() - state.timestamp;\n\n                    progressFn();\n\n                    // if fake progress is done, and a response has been received,\n                    // and we've not yet called the complete method\n                    if (state.response && state.perceivedProgress === 1 && !state.complete) {\n                        // we done!\n                        completeFn();\n                    }\n                },\n                // random delay as in a list of files you start noticing\n                // files uploading at the exact same speed\n                allowMinimumUploadDuration ? getRandomNumber(750, 1500) : 0\n            );\n\n            // remember request so we can abort it later\n            state.request = processFn(\n                // the file to process\n                file,\n\n                // the metadata to send along\n                metadata,\n\n                // callbacks (load, error, progress, abort, transfer)\n                // load expects the body to be a server id if\n                // you want to make use of revert\n                function(response) {\n                    // we put the response in state so we can access\n                    // it outside of this method\n                    state.response = isObject(response)\n                        ? response\n                        : {\n                              type: 'load',\n                              code: 200,\n                              body: '' + response,\n                              headers: {},\n                          };\n\n                    // update duration\n                    state.duration = Date.now() - state.timestamp;\n\n                    // force progress to 1 as we're now done\n                    state.progress = 1;\n\n                    // actual load is done let's share results\n                    api.fire('load', state.response.body);\n\n                    // we are really done\n                    // if perceived progress is 1 ( wait for perceived progress to complete )\n                    // or if server does not support progress ( null )\n                    if (\n                        !allowMinimumUploadDuration ||\n                        (allowMinimumUploadDuration && state.perceivedProgress === 1)\n                    ) {\n                        completeFn();\n                    }\n                },\n\n                // error is expected to be an object with type, code, body\n                function(error) {\n                    // cancel updater\n                    state.perceivedPerformanceUpdater.clear();\n\n                    // update others about this error\n                    api.fire(\n                        'error',\n                        isObject(error)\n                            ? error\n                            : {\n                                  type: 'error',\n                                  code: 0,\n                                  body: '' + error,\n                              }\n                    );\n                },\n\n                // actual processing progress\n                function(computable, current, total) {\n                    // update actual duration\n                    state.duration = Date.now() - state.timestamp;\n\n                    // update actual progress\n                    state.progress = computable ? current / total : null;\n\n                    progressFn();\n                },\n\n                // abort does not expect a value\n                function() {\n                    // stop updater\n                    state.perceivedPerformanceUpdater.clear();\n\n                    // fire the abort event so we can switch visuals\n                    api.fire('abort', state.response ? state.response.body : null);\n                },\n\n                // register the id for this transfer\n                function(transferId) {\n                    api.fire('transfer', transferId);\n                }\n            );\n        };\n\n        var abort = function abort() {\n            // no request running, can't abort\n            if (!state.request) return;\n\n            // stop updater\n            state.perceivedPerformanceUpdater.clear();\n\n            // abort actual request\n            if (state.request.abort) state.request.abort();\n\n            // if has response object, we've completed the request\n            state.complete = true;\n        };\n\n        var reset = function reset() {\n            abort();\n            state.complete = false;\n            state.perceivedProgress = 0;\n            state.progress = 0;\n            state.timestamp = null;\n            state.perceivedDuration = 0;\n            state.duration = 0;\n            state.request = null;\n            state.response = null;\n        };\n\n        var getProgress = allowMinimumUploadDuration\n            ? function() {\n                  return state.progress ? Math.min(state.progress, state.perceivedProgress) : null;\n              }\n            : function() {\n                  return state.progress || null;\n              };\n\n        var getDuration = allowMinimumUploadDuration\n            ? function() {\n                  return Math.min(state.duration, state.perceivedDuration);\n              }\n            : function() {\n                  return state.duration;\n              };\n\n        var api = Object.assign({}, on(), {\n            process: process, // start processing file\n            abort: abort, // abort active process request\n            getProgress: getProgress,\n            getDuration: getDuration,\n            reset: reset,\n        });\n\n        return api;\n    };\n\n    var getFilenameWithoutExtension = function getFilenameWithoutExtension(name) {\n        return name.substring(0, name.lastIndexOf('.')) || name;\n    };\n\n    var createFileStub = function createFileStub(source) {\n        var data = [source.name, source.size, source.type];\n\n        // is blob or base64, then we need to set the name\n        if (source instanceof Blob || isBase64DataURI(source)) {\n            data[0] = source.name || getDateString();\n        } else if (isBase64DataURI(source)) {\n            // if is base64 data uri we need to determine the average size and type\n            data[1] = source.length;\n            data[2] = getMimeTypeFromBase64DataURI(source);\n        } else if (isString(source)) {\n            // url\n            data[0] = getFilenameFromURL(source);\n            data[1] = 0;\n            data[2] = 'application/octet-stream';\n        }\n\n        return {\n            name: data[0],\n            size: data[1],\n            type: data[2],\n        };\n    };\n\n    var isFile = function isFile(value) {\n        return !!(value instanceof File || (value instanceof Blob && value.name));\n    };\n\n    var deepCloneObject = function deepCloneObject(src) {\n        if (!isObject(src)) return src;\n        var target = isArray(src) ? [] : {};\n        for (var key in src) {\n            if (!src.hasOwnProperty(key)) continue;\n            var v = src[key];\n            target[key] = v && isObject(v) ? deepCloneObject(v) : v;\n        }\n        return target;\n    };\n\n    var createItem = function createItem() {\n        var origin = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n        var serverFileReference =\n            arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n        var file = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n        // unique id for this item, is used to identify the item across views\n        var id = getUniqueId();\n\n        /**\n         * Internal item state\n         */\n        var state = {\n            // is archived\n            archived: false,\n\n            // if is frozen, no longer fires events\n            frozen: false,\n\n            // removed from view\n            released: false,\n\n            // original source\n            source: null,\n\n            // file model reference\n            file: file,\n\n            // id of file on server\n            serverFileReference: serverFileReference,\n\n            // id of file transfer on server\n            transferId: null,\n\n            // is aborted\n            processingAborted: false,\n\n            // current item status\n            status: serverFileReference ? ItemStatus.PROCESSING_COMPLETE : ItemStatus.INIT,\n\n            // active processes\n            activeLoader: null,\n            activeProcessor: null,\n        };\n\n        // callback used when abort processing is called to link back to the resolve method\n        var abortProcessingRequestComplete = null;\n\n        /**\n         * Externally added item metadata\n         */\n        var metadata = {};\n\n        // item data\n        var setStatus = function setStatus(status) {\n            return (state.status = status);\n        };\n\n        // fire event unless the item has been archived\n        var fire = function fire(event) {\n            if (state.released || state.frozen) return;\n            for (\n                var _len = arguments.length, params = new Array(_len > 1 ? _len - 1 : 0), _key = 1;\n                _key < _len;\n                _key++\n            ) {\n                params[_key - 1] = arguments[_key];\n            }\n            api.fire.apply(api, [event].concat(params));\n        };\n\n        // file data\n        var getFileExtension = function getFileExtension() {\n            return getExtensionFromFilename(state.file.name);\n        };\n        var getFileType = function getFileType() {\n            return state.file.type;\n        };\n        var getFileSize = function getFileSize() {\n            return state.file.size;\n        };\n        var getFile = function getFile() {\n            return state.file;\n        };\n\n        //\n        // logic to load a file\n        //\n        var load = function load(source, loader, onload) {\n            // remember the original item source\n            state.source = source;\n\n            // source is known\n            api.fireSync('init');\n\n            // file stub is already there\n            if (state.file) {\n                api.fireSync('load-skip');\n                return;\n            }\n\n            // set a stub file object while loading the actual data\n            state.file = createFileStub(source);\n\n            // starts loading\n            loader.on('init', function() {\n                fire('load-init');\n            });\n\n            // we'eve received a size indication, let's update the stub\n            loader.on('meta', function(meta) {\n                // set size of file stub\n                state.file.size = meta.size;\n\n                // set name of file stub\n                state.file.filename = meta.filename;\n\n                // if has received source, we done\n                if (meta.source) {\n                    origin = FileOrigin.LIMBO;\n                    state.serverFileReference = meta.source;\n                    state.status = ItemStatus.PROCESSING_COMPLETE;\n                }\n\n                // size has been updated\n                fire('load-meta');\n            });\n\n            // the file is now loading we need to update the progress indicators\n            loader.on('progress', function(progress) {\n                setStatus(ItemStatus.LOADING);\n\n                fire('load-progress', progress);\n            });\n\n            // an error was thrown while loading the file, we need to switch to error state\n            loader.on('error', function(error) {\n                setStatus(ItemStatus.LOAD_ERROR);\n\n                fire('load-request-error', error);\n            });\n\n            // user or another process aborted the file load (cannot retry)\n            loader.on('abort', function() {\n                setStatus(ItemStatus.INIT);\n                fire('load-abort');\n            });\n\n            // done loading\n            loader.on('load', function(file) {\n                // as we've now loaded the file the loader is no longer required\n                state.activeLoader = null;\n\n                // called when file has loaded succesfully\n                var success = function success(result) {\n                    // set (possibly) transformed file\n                    state.file = isFile(result) ? result : state.file;\n\n                    // file received\n                    if (origin === FileOrigin.LIMBO && state.serverFileReference) {\n                        setStatus(ItemStatus.PROCESSING_COMPLETE);\n                    } else {\n                        setStatus(ItemStatus.IDLE);\n                    }\n\n                    fire('load');\n                };\n\n                var error = function error(result) {\n                    // set original file\n                    state.file = file;\n                    fire('load-meta');\n\n                    setStatus(ItemStatus.LOAD_ERROR);\n                    fire('load-file-error', result);\n                };\n\n                // if we already have a server file reference, we don't need to call the onload method\n                if (state.serverFileReference) {\n                    success(file);\n                    return;\n                }\n\n                // no server id, let's give this file the full treatment\n                onload(file, success, error);\n            });\n\n            // set loader source data\n            loader.setSource(source);\n\n            // set as active loader\n            state.activeLoader = loader;\n\n            // load the source data\n            loader.load();\n        };\n\n        var retryLoad = function retryLoad() {\n            if (!state.activeLoader) {\n                return;\n            }\n            state.activeLoader.load();\n        };\n\n        var abortLoad = function abortLoad() {\n            if (state.activeLoader) {\n                state.activeLoader.abort();\n                return;\n            }\n            setStatus(ItemStatus.INIT);\n            fire('load-abort');\n        };\n\n        //\n        // logic to process a file\n        //\n        var process = function process(processor, onprocess) {\n            // processing was aborted\n            if (state.processingAborted) {\n                state.processingAborted = false;\n                return;\n            }\n\n            // now processing\n            setStatus(ItemStatus.PROCESSING);\n\n            // reset abort callback\n            abortProcessingRequestComplete = null;\n\n            // if no file loaded we'll wait for the load event\n            if (!(state.file instanceof Blob)) {\n                api.on('load', function() {\n                    process(processor, onprocess);\n                });\n                return;\n            }\n\n            // setup processor\n            processor.on('load', function(serverFileReference) {\n                // need this id to be able to revert the upload\n                state.transferId = null;\n                state.serverFileReference = serverFileReference;\n            });\n\n            // register transfer id\n            processor.on('transfer', function(transferId) {\n                // need this id to be able to revert the upload\n                state.transferId = transferId;\n            });\n\n            processor.on('load-perceived', function(serverFileReference) {\n                // no longer required\n                state.activeProcessor = null;\n\n                // need this id to be able to rever the upload\n                state.transferId = null;\n                state.serverFileReference = serverFileReference;\n\n                setStatus(ItemStatus.PROCESSING_COMPLETE);\n                fire('process-complete', serverFileReference);\n            });\n\n            processor.on('start', function() {\n                fire('process-start');\n            });\n\n            processor.on('error', function(error) {\n                state.activeProcessor = null;\n                setStatus(ItemStatus.PROCESSING_ERROR);\n                fire('process-error', error);\n            });\n\n            processor.on('abort', function(serverFileReference) {\n                state.activeProcessor = null;\n\n                // if file was uploaded but processing was cancelled during perceived processor time store file reference\n                state.serverFileReference = serverFileReference;\n\n                setStatus(ItemStatus.IDLE);\n                fire('process-abort');\n\n                // has timeout so doesn't interfere with remove action\n                if (abortProcessingRequestComplete) {\n                    abortProcessingRequestComplete();\n                }\n            });\n\n            processor.on('progress', function(progress) {\n                fire('process-progress', progress);\n            });\n\n            // when successfully transformed\n            var success = function success(file) {\n                // if was archived in the mean time, don't process\n                if (state.archived) return;\n\n                // process file!\n                processor.process(file, Object.assign({}, metadata));\n            };\n\n            // something went wrong during transform phase\n            var error = console.error;\n\n            // start processing the file\n            onprocess(state.file, success, error);\n\n            // set as active processor\n            state.activeProcessor = processor;\n        };\n\n        var requestProcessing = function requestProcessing() {\n            state.processingAborted = false;\n            setStatus(ItemStatus.PROCESSING_QUEUED);\n        };\n\n        var abortProcessing = function abortProcessing() {\n            return new Promise(function(resolve) {\n                if (!state.activeProcessor) {\n                    state.processingAborted = true;\n\n                    setStatus(ItemStatus.IDLE);\n                    fire('process-abort');\n\n                    resolve();\n                    return;\n                }\n\n                abortProcessingRequestComplete = function abortProcessingRequestComplete() {\n                    resolve();\n                };\n\n                state.activeProcessor.abort();\n            });\n        };\n\n        //\n        // logic to revert a processed file\n        //\n        var revert = function revert(revertFileUpload, forceRevert) {\n            return new Promise(function(resolve, reject) {\n                // a completed upload will have a serverFileReference, a failed chunked upload where\n                // getting a serverId succeeded but >=0 chunks have been uploaded will have transferId set\n                var serverTransferId =\n                    state.serverFileReference !== null\n                        ? state.serverFileReference\n                        : state.transferId;\n\n                // cannot revert without a server id for this process\n                if (serverTransferId === null) {\n                    resolve();\n                    return;\n                }\n\n                // revert the upload (fire and forget)\n                revertFileUpload(\n                    serverTransferId,\n                    function() {\n                        // reset file server id and transfer id as now it's not available on the server\n                        state.serverFileReference = null;\n                        state.transferId = null;\n                        resolve();\n                    },\n                    function(error) {\n                        // don't set error state when reverting is optional, it will always resolve\n                        if (!forceRevert) {\n                            resolve();\n                            return;\n                        }\n\n                        // oh no errors\n                        setStatus(ItemStatus.PROCESSING_REVERT_ERROR);\n                        fire('process-revert-error');\n                        reject(error);\n                    }\n                );\n\n                // fire event\n                setStatus(ItemStatus.IDLE);\n                fire('process-revert');\n            });\n        };\n\n        // exposed methods\n        var _setMetadata = function setMetadata(key, value, silent) {\n            var keys = key.split('.');\n            var root = keys[0];\n            var last = keys.pop();\n            var data = metadata;\n            keys.forEach(function(key) {\n                return (data = data[key]);\n            });\n\n            // compare old value against new value, if they're the same, we're not updating\n            if (JSON.stringify(data[last]) === JSON.stringify(value)) return;\n\n            // update value\n            data[last] = value;\n\n            // fire update\n            fire('metadata-update', {\n                key: root,\n                value: metadata[root],\n                silent: silent,\n            });\n        };\n\n        var getMetadata = function getMetadata(key) {\n            return deepCloneObject(key ? metadata[key] : metadata);\n        };\n\n        var api = Object.assign(\n            {\n                id: {\n                    get: function get() {\n                        return id;\n                    },\n                },\n                origin: {\n                    get: function get() {\n                        return origin;\n                    },\n                    set: function set(value) {\n                        return (origin = value);\n                    },\n                },\n                serverId: {\n                    get: function get() {\n                        return state.serverFileReference;\n                    },\n                },\n                transferId: {\n                    get: function get() {\n                        return state.transferId;\n                    },\n                },\n                status: {\n                    get: function get() {\n                        return state.status;\n                    },\n                },\n                filename: {\n                    get: function get() {\n                        return state.file.name;\n                    },\n                },\n                filenameWithoutExtension: {\n                    get: function get() {\n                        return getFilenameWithoutExtension(state.file.name);\n                    },\n                },\n                fileExtension: { get: getFileExtension },\n                fileType: { get: getFileType },\n                fileSize: { get: getFileSize },\n                file: { get: getFile },\n                relativePath: {\n                    get: function get() {\n                        return state.file._relativePath;\n                    },\n                },\n\n                source: {\n                    get: function get() {\n                        return state.source;\n                    },\n                },\n\n                getMetadata: getMetadata,\n                setMetadata: function setMetadata(key, value, silent) {\n                    if (isObject(key)) {\n                        var data = key;\n                        Object.keys(data).forEach(function(key) {\n                            _setMetadata(key, data[key], value);\n                        });\n                        return key;\n                    }\n                    _setMetadata(key, value, silent);\n                    return value;\n                },\n\n                extend: function extend(name, handler) {\n                    return (itemAPI[name] = handler);\n                },\n\n                abortLoad: abortLoad,\n                retryLoad: retryLoad,\n                requestProcessing: requestProcessing,\n                abortProcessing: abortProcessing,\n\n                load: load,\n                process: process,\n                revert: revert,\n            },\n\n            on(),\n            {\n                freeze: function freeze() {\n                    return (state.frozen = true);\n                },\n\n                release: function release() {\n                    return (state.released = true);\n                },\n                released: {\n                    get: function get() {\n                        return state.released;\n                    },\n                },\n\n                archive: function archive() {\n                    return (state.archived = true);\n                },\n                archived: {\n                    get: function get() {\n                        return state.archived;\n                    },\n                },\n            }\n        );\n\n        // create it here instead of returning it instantly so we can extend it later\n        var itemAPI = createObject(api);\n\n        return itemAPI;\n    };\n\n    var getItemIndexByQuery = function getItemIndexByQuery(items, query) {\n        // just return first index\n        if (isEmpty(query)) {\n            return 0;\n        }\n\n        // invalid queries\n        if (!isString(query)) {\n            return -1;\n        }\n\n        // return item by id (or -1 if not found)\n        return items.findIndex(function(item) {\n            return item.id === query;\n        });\n    };\n\n    var getItemById = function getItemById(items, itemId) {\n        var index = getItemIndexByQuery(items, itemId);\n        if (index < 0) {\n            return;\n        }\n        return items[index] || null;\n    };\n\n    var fetchBlob = function fetchBlob(url, load, error, progress, abort, headers) {\n        var request = sendRequest(null, url, {\n            method: 'GET',\n            responseType: 'blob',\n        });\n\n        request.onload = function(xhr) {\n            // get headers\n            var headers = xhr.getAllResponseHeaders();\n\n            // get filename\n            var filename = getFileInfoFromHeaders(headers).name || getFilenameFromURL(url);\n\n            // create response\n            load(\n                createResponse('load', xhr.status, getFileFromBlob(xhr.response, filename), headers)\n            );\n        };\n\n        request.onerror = function(xhr) {\n            error(createResponse('error', xhr.status, xhr.statusText, xhr.getAllResponseHeaders()));\n        };\n\n        request.onheaders = function(xhr) {\n            headers(createResponse('headers', xhr.status, null, xhr.getAllResponseHeaders()));\n        };\n\n        request.ontimeout = createTimeoutResponse(error);\n        request.onprogress = progress;\n        request.onabort = abort;\n\n        // should return request\n        return request;\n    };\n\n    var getDomainFromURL = function getDomainFromURL(url) {\n        if (url.indexOf('//') === 0) {\n            url = location.protocol + url;\n        }\n        return url\n            .toLowerCase()\n            .replace('blob:', '')\n            .replace(/([a-z])?:\\/\\//, '$1')\n            .split('/')[0];\n    };\n\n    var isExternalURL = function isExternalURL(url) {\n        return (\n            (url.indexOf(':') > -1 || url.indexOf('//') > -1) &&\n            getDomainFromURL(location.href) !== getDomainFromURL(url)\n        );\n    };\n\n    var dynamicLabel = function dynamicLabel(label) {\n        return function() {\n            return isFunction(label) ? label.apply(void 0, arguments) : label;\n        };\n    };\n\n    var isMockItem = function isMockItem(item) {\n        return !isFile(item.file);\n    };\n\n    var listUpdated = function listUpdated(dispatch, state) {\n        clearTimeout(state.listUpdateTimeout);\n        state.listUpdateTimeout = setTimeout(function() {\n            dispatch('DID_UPDATE_ITEMS', { items: getActiveItems(state.items) });\n        }, 0);\n    };\n\n    var optionalPromise = function optionalPromise(fn) {\n        for (\n            var _len = arguments.length, params = new Array(_len > 1 ? _len - 1 : 0), _key = 1;\n            _key < _len;\n            _key++\n        ) {\n            params[_key - 1] = arguments[_key];\n        }\n        return new Promise(function(resolve) {\n            if (!fn) {\n                return resolve(true);\n            }\n\n            var result = fn.apply(void 0, params);\n\n            if (result == null) {\n                return resolve(true);\n            }\n\n            if (typeof result === 'boolean') {\n                return resolve(result);\n            }\n\n            if (typeof result.then === 'function') {\n                result.then(resolve);\n            }\n        });\n    };\n\n    var sortItems = function sortItems(state, compare) {\n        state.items.sort(function(a, b) {\n            return compare(createItemAPI(a), createItemAPI(b));\n        });\n    };\n\n    // returns item based on state\n    var getItemByQueryFromState = function getItemByQueryFromState(state, itemHandler) {\n        return function() {\n            var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n            var query = _ref.query,\n                _ref$success = _ref.success,\n                success = _ref$success === void 0 ? function() {} : _ref$success,\n                _ref$failure = _ref.failure,\n                failure = _ref$failure === void 0 ? function() {} : _ref$failure,\n                options = _objectWithoutProperties(_ref, ['query', 'success', 'failure']);\n            var item = getItemByQuery(state.items, query);\n            if (!item) {\n                failure({\n                    error: createResponse('error', 0, 'Item not found'),\n                    file: null,\n                });\n\n                return;\n            }\n            itemHandler(item, success, failure, options || {});\n        };\n    };\n\n    var actions = function actions(dispatch, query, state) {\n        return {\n            /**\n             * Aborts all ongoing processes\n             */\n            ABORT_ALL: function ABORT_ALL() {\n                getActiveItems(state.items).forEach(function(item) {\n                    item.freeze();\n                    item.abortLoad();\n                    item.abortProcessing();\n                });\n            },\n\n            /**\n             * Sets initial files\n             */\n            DID_SET_FILES: function DID_SET_FILES(_ref2) {\n                var _ref2$value = _ref2.value,\n                    value = _ref2$value === void 0 ? [] : _ref2$value;\n                // map values to file objects\n                var files = value.map(function(file) {\n                    return {\n                        source: file.source ? file.source : file,\n                        options: file.options,\n                    };\n                });\n\n                // loop over files, if file is in list, leave it be, if not, remove\n                // test if items should be moved\n                var activeItems = getActiveItems(state.items);\n\n                activeItems.forEach(function(item) {\n                    // if item not is in new value, remove\n                    if (\n                        !files.find(function(file) {\n                            return file.source === item.source || file.source === item.file;\n                        })\n                    ) {\n                        dispatch('REMOVE_ITEM', { query: item, remove: false });\n                    }\n                });\n\n                // add new files\n                activeItems = getActiveItems(state.items);\n                files.forEach(function(file, index) {\n                    // if file is already in list\n                    if (\n                        activeItems.find(function(item) {\n                            return item.source === file.source || item.file === file.source;\n                        })\n                    )\n                        return;\n\n                    // not in list, add\n                    dispatch(\n                        'ADD_ITEM',\n                        Object.assign({}, file, {\n                            interactionMethod: InteractionMethod.NONE,\n                            index: index,\n                        })\n                    );\n                });\n            },\n\n            DID_UPDATE_ITEM_METADATA: function DID_UPDATE_ITEM_METADATA(_ref3) {\n                var id = _ref3.id,\n                    action = _ref3.action,\n                    change = _ref3.change;\n                // don't do anything\n                if (change.silent) return;\n\n                // if is called multiple times in close succession we combined all calls together to save resources\n                clearTimeout(state.itemUpdateTimeout);\n                state.itemUpdateTimeout = setTimeout(function() {\n                    var item = getItemById(state.items, id);\n\n                    // only revert and attempt to upload when we're uploading to a server\n                    if (!query('IS_ASYNC')) {\n                        // should we update the output data\n                        applyFilterChain('SHOULD_PREPARE_OUTPUT', false, {\n                            item: item,\n                            query: query,\n                            action: action,\n                            change: change,\n                        }).then(function(shouldPrepareOutput) {\n                            // plugins determined the output data should be prepared (or not), can be adjusted with beforePrepareOutput hook\n                            var beforePrepareFile = query('GET_BEFORE_PREPARE_FILE');\n                            if (beforePrepareFile)\n                                shouldPrepareOutput = beforePrepareFile(item, shouldPrepareOutput);\n\n                            if (!shouldPrepareOutput) return;\n\n                            dispatch(\n                                'REQUEST_PREPARE_OUTPUT',\n                                {\n                                    query: id,\n                                    item: item,\n                                    success: function success(file) {\n                                        dispatch('DID_PREPARE_OUTPUT', { id: id, file: file });\n                                    },\n                                },\n\n                                true\n                            );\n                        });\n\n                        return;\n                    }\n\n                    // if is local item we need to enable upload button so change can be propagated to server\n                    if (item.origin === FileOrigin.LOCAL) {\n                        dispatch('DID_LOAD_ITEM', {\n                            id: item.id,\n                            error: null,\n                            serverFileReference: item.source,\n                        });\n                    }\n\n                    // for async scenarios\n                    var upload = function upload() {\n                        // we push this forward a bit so the interface is updated correctly\n                        setTimeout(function() {\n                            dispatch('REQUEST_ITEM_PROCESSING', { query: id });\n                        }, 32);\n                    };\n\n                    var revert = function revert(doUpload) {\n                        item.revert(\n                            createRevertFunction(\n                                state.options.server.url,\n                                state.options.server.revert\n                            ),\n                            query('GET_FORCE_REVERT')\n                        )\n                            .then(doUpload ? upload : function() {})\n                            .catch(function() {});\n                    };\n\n                    var abort = function abort(doUpload) {\n                        item.abortProcessing().then(doUpload ? upload : function() {});\n                    };\n\n                    // if we should re-upload the file immediately\n                    if (item.status === ItemStatus.PROCESSING_COMPLETE) {\n                        return revert(state.options.instantUpload);\n                    }\n\n                    // if currently uploading, cancel upload\n                    if (item.status === ItemStatus.PROCESSING) {\n                        return abort(state.options.instantUpload);\n                    }\n\n                    if (state.options.instantUpload) {\n                        upload();\n                    }\n                }, 0);\n            },\n\n            MOVE_ITEM: function MOVE_ITEM(_ref4) {\n                var query = _ref4.query,\n                    index = _ref4.index;\n                var item = getItemByQuery(state.items, query);\n                if (!item) return;\n                var currentIndex = state.items.indexOf(item);\n                index = limit(index, 0, state.items.length - 1);\n                if (currentIndex === index) return;\n                state.items.splice(index, 0, state.items.splice(currentIndex, 1)[0]);\n            },\n\n            SORT: function SORT(_ref5) {\n                var compare = _ref5.compare;\n                sortItems(state, compare);\n                dispatch('DID_SORT_ITEMS', {\n                    items: query('GET_ACTIVE_ITEMS'),\n                });\n            },\n\n            ADD_ITEMS: function ADD_ITEMS(_ref6) {\n                var items = _ref6.items,\n                    index = _ref6.index,\n                    interactionMethod = _ref6.interactionMethod,\n                    _ref6$success = _ref6.success,\n                    success = _ref6$success === void 0 ? function() {} : _ref6$success,\n                    _ref6$failure = _ref6.failure,\n                    failure = _ref6$failure === void 0 ? function() {} : _ref6$failure;\n                var currentIndex = index;\n\n                if (index === -1 || typeof index === 'undefined') {\n                    var insertLocation = query('GET_ITEM_INSERT_LOCATION');\n                    var totalItems = query('GET_TOTAL_ITEMS');\n                    currentIndex = insertLocation === 'before' ? 0 : totalItems;\n                }\n\n                var ignoredFiles = query('GET_IGNORED_FILES');\n                var isValidFile = function isValidFile(source) {\n                    return isFile(source)\n                        ? !ignoredFiles.includes(source.name.toLowerCase())\n                        : !isEmpty(source);\n                };\n                var validItems = items.filter(isValidFile);\n\n                var promises = validItems.map(function(source) {\n                    return new Promise(function(resolve, reject) {\n                        dispatch('ADD_ITEM', {\n                            interactionMethod: interactionMethod,\n                            source: source.source || source,\n                            success: resolve,\n                            failure: reject,\n                            index: currentIndex++,\n                            options: source.options || {},\n                        });\n                    });\n                });\n\n                Promise.all(promises)\n                    .then(success)\n                    .catch(failure);\n            },\n\n            /**\n             * @param source\n             * @param index\n             * @param interactionMethod\n             */\n            ADD_ITEM: function ADD_ITEM(_ref7) {\n                var source = _ref7.source,\n                    _ref7$index = _ref7.index,\n                    index = _ref7$index === void 0 ? -1 : _ref7$index,\n                    interactionMethod = _ref7.interactionMethod,\n                    _ref7$success = _ref7.success,\n                    success = _ref7$success === void 0 ? function() {} : _ref7$success,\n                    _ref7$failure = _ref7.failure,\n                    failure = _ref7$failure === void 0 ? function() {} : _ref7$failure,\n                    _ref7$options = _ref7.options,\n                    options = _ref7$options === void 0 ? {} : _ref7$options;\n                // if no source supplied\n                if (isEmpty(source)) {\n                    failure({\n                        error: createResponse('error', 0, 'No source'),\n                        file: null,\n                    });\n\n                    return;\n                }\n\n                // filter out invalid file items, used to filter dropped directory contents\n                if (\n                    isFile(source) &&\n                    state.options.ignoredFiles.includes(source.name.toLowerCase())\n                ) {\n                    // fail silently\n                    return;\n                }\n\n                // test if there's still room in the list of files\n                if (!hasRoomForItem(state)) {\n                    // if multiple allowed, we can't replace\n                    // or if only a single item is allowed but we're not allowed to replace it we exit\n                    if (\n                        state.options.allowMultiple ||\n                        (!state.options.allowMultiple && !state.options.allowReplace)\n                    ) {\n                        var error = createResponse('warning', 0, 'Max files');\n\n                        dispatch('DID_THROW_MAX_FILES', {\n                            source: source,\n                            error: error,\n                        });\n\n                        failure({ error: error, file: null });\n\n                        return;\n                    }\n\n                    // let's replace the item\n                    // id of first item we're about to remove\n                    var _item = getActiveItems(state.items)[0];\n\n                    // if has been processed remove it from the server as well\n                    if (\n                        _item.status === ItemStatus.PROCESSING_COMPLETE ||\n                        _item.status === ItemStatus.PROCESSING_REVERT_ERROR\n                    ) {\n                        var forceRevert = query('GET_FORCE_REVERT');\n                        _item\n                            .revert(\n                                createRevertFunction(\n                                    state.options.server.url,\n                                    state.options.server.revert\n                                ),\n                                forceRevert\n                            )\n                            .then(function() {\n                                if (!forceRevert) return;\n\n                                // try to add now\n                                dispatch('ADD_ITEM', {\n                                    source: source,\n                                    index: index,\n                                    interactionMethod: interactionMethod,\n                                    success: success,\n                                    failure: failure,\n                                    options: options,\n                                });\n                            })\n                            .catch(function() {}); // no need to handle this catch state for now\n\n                        if (forceRevert) return;\n                    }\n\n                    // remove first item as it will be replaced by this item\n                    dispatch('REMOVE_ITEM', { query: _item.id });\n                }\n\n                // where did the file originate\n                var origin =\n                    options.type === 'local'\n                        ? FileOrigin.LOCAL\n                        : options.type === 'limbo'\n                        ? FileOrigin.LIMBO\n                        : FileOrigin.INPUT;\n\n                // create a new blank item\n                var item = createItem(\n                    // where did this file come from\n                    origin,\n\n                    // an input file never has a server file reference\n                    origin === FileOrigin.INPUT ? null : source,\n\n                    // file mock data, if defined\n                    options.file\n                );\n\n                // set initial meta data\n                Object.keys(options.metadata || {}).forEach(function(key) {\n                    item.setMetadata(key, options.metadata[key]);\n                });\n\n                // created the item, let plugins add methods\n                applyFilters('DID_CREATE_ITEM', item, { query: query, dispatch: dispatch });\n\n                // where to insert new items\n                var itemInsertLocation = query('GET_ITEM_INSERT_LOCATION');\n\n                // adjust index if is not allowed to pick location\n                if (!state.options.itemInsertLocationFreedom) {\n                    index = itemInsertLocation === 'before' ? -1 : state.items.length;\n                }\n\n                // add item to list\n                insertItem(state.items, item, index);\n\n                // sort items in list\n                if (isFunction(itemInsertLocation) && source) {\n                    sortItems(state, itemInsertLocation);\n                }\n\n                // get a quick reference to the item id\n                var id = item.id;\n\n                // observe item events\n                item.on('init', function() {\n                    dispatch('DID_INIT_ITEM', { id: id });\n                });\n\n                item.on('load-init', function() {\n                    dispatch('DID_START_ITEM_LOAD', { id: id });\n                });\n\n                item.on('load-meta', function() {\n                    dispatch('DID_UPDATE_ITEM_META', { id: id });\n                });\n\n                item.on('load-progress', function(progress) {\n                    dispatch('DID_UPDATE_ITEM_LOAD_PROGRESS', { id: id, progress: progress });\n                });\n\n                item.on('load-request-error', function(error) {\n                    var mainStatus = dynamicLabel(state.options.labelFileLoadError)(error);\n\n                    // is client error, no way to recover\n                    if (error.code >= 400 && error.code < 500) {\n                        dispatch('DID_THROW_ITEM_INVALID', {\n                            id: id,\n                            error: error,\n                            status: {\n                                main: mainStatus,\n                                sub: error.code + ' (' + error.body + ')',\n                            },\n                        });\n\n                        // reject the file so can be dealt with through API\n                        failure({ error: error, file: createItemAPI(item) });\n                        return;\n                    }\n\n                    // is possible server error, so might be possible to retry\n                    dispatch('DID_THROW_ITEM_LOAD_ERROR', {\n                        id: id,\n                        error: error,\n                        status: {\n                            main: mainStatus,\n                            sub: state.options.labelTapToRetry,\n                        },\n                    });\n                });\n\n                item.on('load-file-error', function(error) {\n                    dispatch('DID_THROW_ITEM_INVALID', {\n                        id: id,\n                        error: error.status,\n                        status: error.status,\n                    });\n\n                    failure({ error: error.status, file: createItemAPI(item) });\n                });\n\n                item.on('load-abort', function() {\n                    dispatch('REMOVE_ITEM', { query: id });\n                });\n\n                item.on('load-skip', function() {\n                    dispatch('COMPLETE_LOAD_ITEM', {\n                        query: id,\n                        item: item,\n                        data: {\n                            source: source,\n                            success: success,\n                        },\n                    });\n                });\n\n                item.on('load', function() {\n                    var handleAdd = function handleAdd(shouldAdd) {\n                        // no should not add this file\n                        if (!shouldAdd) {\n                            dispatch('REMOVE_ITEM', {\n                                query: id,\n                            });\n\n                            return;\n                        }\n\n                        // now interested in metadata updates\n                        item.on('metadata-update', function(change) {\n                            dispatch('DID_UPDATE_ITEM_METADATA', { id: id, change: change });\n                        });\n\n                        // let plugins decide if the output data should be prepared at this point\n                        // means we'll do this and wait for idle state\n                        applyFilterChain('SHOULD_PREPARE_OUTPUT', false, {\n                            item: item,\n                            query: query,\n                        }).then(function(shouldPrepareOutput) {\n                            // plugins determined the output data should be prepared (or not), can be adjusted with beforePrepareOutput hook\n                            var beforePrepareFile = query('GET_BEFORE_PREPARE_FILE');\n                            if (beforePrepareFile)\n                                shouldPrepareOutput = beforePrepareFile(item, shouldPrepareOutput);\n\n                            var loadComplete = function loadComplete() {\n                                dispatch('COMPLETE_LOAD_ITEM', {\n                                    query: id,\n                                    item: item,\n                                    data: {\n                                        source: source,\n                                        success: success,\n                                    },\n                                });\n\n                                listUpdated(dispatch, state);\n                            };\n\n                            // exit\n                            if (shouldPrepareOutput) {\n                                // wait for idle state and then run PREPARE_OUTPUT\n                                dispatch(\n                                    'REQUEST_PREPARE_OUTPUT',\n                                    {\n                                        query: id,\n                                        item: item,\n                                        success: function success(file) {\n                                            dispatch('DID_PREPARE_OUTPUT', { id: id, file: file });\n                                            loadComplete();\n                                        },\n                                    },\n\n                                    true\n                                );\n\n                                return;\n                            }\n\n                            loadComplete();\n                        });\n                    };\n\n                    // item loaded, allow plugins to\n                    // - read data (quickly)\n                    // - add metadata\n                    applyFilterChain('DID_LOAD_ITEM', item, { query: query, dispatch: dispatch })\n                        .then(function() {\n                            optionalPromise(query('GET_BEFORE_ADD_FILE'), createItemAPI(item)).then(\n                                handleAdd\n                            );\n                        })\n                        .catch(function(e) {\n                            if (!e || !e.error || !e.status) return handleAdd(false);\n                            dispatch('DID_THROW_ITEM_INVALID', {\n                                id: id,\n                                error: e.error,\n                                status: e.status,\n                            });\n                        });\n                });\n\n                item.on('process-start', function() {\n                    dispatch('DID_START_ITEM_PROCESSING', { id: id });\n                });\n\n                item.on('process-progress', function(progress) {\n                    dispatch('DID_UPDATE_ITEM_PROCESS_PROGRESS', { id: id, progress: progress });\n                });\n\n                item.on('process-error', function(error) {\n                    dispatch('DID_THROW_ITEM_PROCESSING_ERROR', {\n                        id: id,\n                        error: error,\n                        status: {\n                            main: dynamicLabel(state.options.labelFileProcessingError)(error),\n                            sub: state.options.labelTapToRetry,\n                        },\n                    });\n                });\n\n                item.on('process-revert-error', function(error) {\n                    dispatch('DID_THROW_ITEM_PROCESSING_REVERT_ERROR', {\n                        id: id,\n                        error: error,\n                        status: {\n                            main: dynamicLabel(state.options.labelFileProcessingRevertError)(error),\n                            sub: state.options.labelTapToRetry,\n                        },\n                    });\n                });\n\n                item.on('process-complete', function(serverFileReference) {\n                    dispatch('DID_COMPLETE_ITEM_PROCESSING', {\n                        id: id,\n                        error: null,\n                        serverFileReference: serverFileReference,\n                    });\n\n                    dispatch('DID_DEFINE_VALUE', { id: id, value: serverFileReference });\n                });\n\n                item.on('process-abort', function() {\n                    dispatch('DID_ABORT_ITEM_PROCESSING', { id: id });\n                });\n\n                item.on('process-revert', function() {\n                    dispatch('DID_REVERT_ITEM_PROCESSING', { id: id });\n                    dispatch('DID_DEFINE_VALUE', { id: id, value: null });\n                });\n\n                // let view know the item has been inserted\n                dispatch('DID_ADD_ITEM', {\n                    id: id,\n                    index: index,\n                    interactionMethod: interactionMethod,\n                });\n\n                listUpdated(dispatch, state);\n\n                // start loading the source\n                var _ref8 = state.options.server || {},\n                    url = _ref8.url,\n                    load = _ref8.load,\n                    restore = _ref8.restore,\n                    fetch = _ref8.fetch;\n\n                item.load(\n                    source,\n\n                    // this creates a function that loads the file based on the type of file (string, base64, blob, file) and location of file (local, remote, limbo)\n                    createFileLoader(\n                        origin === FileOrigin.INPUT\n                            ? // input, if is remote, see if should use custom fetch, else use default fetchBlob\n                              isString(source) && isExternalURL(source)\n                                ? fetch\n                                    ? createFetchFunction(url, fetch)\n                                    : fetchBlob // remote url\n                                : fetchBlob // try to fetch url\n                            : // limbo or local\n                            origin === FileOrigin.LIMBO\n                            ? createFetchFunction(url, restore) // limbo\n                            : createFetchFunction(url, load) // local\n                    ),\n\n                    // called when the file is loaded so it can be piped through the filters\n                    function(file, success, error) {\n                        // let's process the file\n                        applyFilterChain('LOAD_FILE', file, { query: query })\n                            .then(success)\n                            .catch(error);\n                    }\n                );\n            },\n\n            REQUEST_PREPARE_OUTPUT: function REQUEST_PREPARE_OUTPUT(_ref9) {\n                var item = _ref9.item,\n                    success = _ref9.success,\n                    _ref9$failure = _ref9.failure,\n                    failure = _ref9$failure === void 0 ? function() {} : _ref9$failure;\n                // error response if item archived\n                var err = {\n                    error: createResponse('error', 0, 'Item not found'),\n                    file: null,\n                };\n\n                // don't handle archived items, an item could have been archived (load aborted) while waiting to be prepared\n                if (item.archived) return failure(err);\n\n                // allow plugins to alter the file data\n                applyFilterChain('PREPARE_OUTPUT', item.file, { query: query, item: item }).then(\n                    function(result) {\n                        applyFilterChain('COMPLETE_PREPARE_OUTPUT', result, {\n                            query: query,\n                            item: item,\n                        }).then(function(result) {\n                            // don't handle archived items, an item could have been archived (load aborted) while being prepared\n                            if (item.archived) return failure(err);\n\n                            // we done!\n                            success(result);\n                        });\n                    }\n                );\n            },\n\n            COMPLETE_LOAD_ITEM: function COMPLETE_LOAD_ITEM(_ref10) {\n                var item = _ref10.item,\n                    data = _ref10.data;\n                var success = data.success,\n                    source = data.source;\n\n                // sort items in list\n                var itemInsertLocation = query('GET_ITEM_INSERT_LOCATION');\n                if (isFunction(itemInsertLocation) && source) {\n                    sortItems(state, itemInsertLocation);\n                }\n\n                // let interface know the item has loaded\n                dispatch('DID_LOAD_ITEM', {\n                    id: item.id,\n                    error: null,\n                    serverFileReference: item.origin === FileOrigin.INPUT ? null : source,\n                });\n\n                // item has been successfully loaded and added to the\n                // list of items so can now be safely returned for use\n                success(createItemAPI(item));\n\n                // if this is a local server file we need to show a different state\n                if (item.origin === FileOrigin.LOCAL) {\n                    dispatch('DID_LOAD_LOCAL_ITEM', { id: item.id });\n                    return;\n                }\n\n                // if is a temp server file we prevent async upload call here (as the file is already on the server)\n                if (item.origin === FileOrigin.LIMBO) {\n                    dispatch('DID_COMPLETE_ITEM_PROCESSING', {\n                        id: item.id,\n                        error: null,\n                        serverFileReference: source,\n                    });\n\n                    dispatch('DID_DEFINE_VALUE', {\n                        id: item.id,\n                        value: item.serverId || source,\n                    });\n\n                    return;\n                }\n\n                // id we are allowed to upload the file immediately, lets do it\n                if (query('IS_ASYNC') && state.options.instantUpload) {\n                    dispatch('REQUEST_ITEM_PROCESSING', { query: item.id });\n                }\n            },\n\n            RETRY_ITEM_LOAD: getItemByQueryFromState(state, function(item) {\n                // try loading the source one more time\n                item.retryLoad();\n            }),\n\n            REQUEST_ITEM_PREPARE: getItemByQueryFromState(state, function(item, _success, failure) {\n                dispatch(\n                    'REQUEST_PREPARE_OUTPUT',\n                    {\n                        query: item.id,\n                        item: item,\n                        success: function success(file) {\n                            dispatch('DID_PREPARE_OUTPUT', { id: item.id, file: file });\n                            _success({\n                                file: item,\n                                output: file,\n                            });\n                        },\n                        failure: failure,\n                    },\n\n                    true\n                );\n            }),\n\n            REQUEST_ITEM_PROCESSING: getItemByQueryFromState(state, function(\n                item,\n                success,\n                failure\n            ) {\n                // cannot be queued (or is already queued)\n                var itemCanBeQueuedForProcessing =\n                    // waiting for something\n                    item.status === ItemStatus.IDLE ||\n                    // processing went wrong earlier\n                    item.status === ItemStatus.PROCESSING_ERROR;\n\n                // not ready to be processed\n                if (!itemCanBeQueuedForProcessing) {\n                    var processNow = function processNow() {\n                        return dispatch('REQUEST_ITEM_PROCESSING', {\n                            query: item,\n                            success: success,\n                            failure: failure,\n                        });\n                    };\n\n                    var process = function process() {\n                        return document.hidden ? processNow() : setTimeout(processNow, 32);\n                    };\n\n                    // if already done processing or tried to revert but didn't work, try again\n                    if (\n                        item.status === ItemStatus.PROCESSING_COMPLETE ||\n                        item.status === ItemStatus.PROCESSING_REVERT_ERROR\n                    ) {\n                        item.revert(\n                            createRevertFunction(\n                                state.options.server.url,\n                                state.options.server.revert\n                            ),\n                            query('GET_FORCE_REVERT')\n                        )\n                            .then(process)\n                            .catch(function() {}); // don't continue with processing if something went wrong\n                    } else if (item.status === ItemStatus.PROCESSING) {\n                        item.abortProcessing().then(process);\n                    }\n\n                    return;\n                }\n\n                // already queued for processing\n                if (item.status === ItemStatus.PROCESSING_QUEUED) return;\n\n                item.requestProcessing();\n\n                dispatch('DID_REQUEST_ITEM_PROCESSING', { id: item.id });\n\n                dispatch('PROCESS_ITEM', { query: item, success: success, failure: failure }, true);\n            }),\n\n            PROCESS_ITEM: getItemByQueryFromState(state, function(item, success, failure) {\n                var maxParallelUploads = query('GET_MAX_PARALLEL_UPLOADS');\n                var totalCurrentUploads = query('GET_ITEMS_BY_STATUS', ItemStatus.PROCESSING)\n                    .length;\n\n                // queue and wait till queue is freed up\n                if (totalCurrentUploads === maxParallelUploads) {\n                    // queue for later processing\n                    state.processingQueue.push({\n                        id: item.id,\n                        success: success,\n                        failure: failure,\n                    });\n\n                    // stop it!\n                    return;\n                }\n\n                // if was not queued or is already processing exit here\n                if (item.status === ItemStatus.PROCESSING) return;\n\n                var processNext = function processNext() {\n                    // process queueud items\n                    var queueEntry = state.processingQueue.shift();\n\n                    // no items left\n                    if (!queueEntry) return;\n\n                    // get item reference\n                    var id = queueEntry.id,\n                        success = queueEntry.success,\n                        failure = queueEntry.failure;\n                    var itemReference = getItemByQuery(state.items, id);\n\n                    // if item was archived while in queue, jump to next\n                    if (!itemReference || itemReference.archived) {\n                        processNext();\n                        return;\n                    }\n\n                    // process queued item\n                    dispatch(\n                        'PROCESS_ITEM',\n                        { query: id, success: success, failure: failure },\n                        true\n                    );\n                };\n\n                // we done function\n                item.onOnce('process-complete', function() {\n                    success(createItemAPI(item));\n                    processNext();\n\n                    // if origin is local, and we're instant uploading, trigger remove of original\n                    // as revert will remove file from list\n                    var server = state.options.server;\n                    var instantUpload = state.options.instantUpload;\n                    if (\n                        instantUpload &&\n                        item.origin === FileOrigin.LOCAL &&\n                        isFunction(server.remove)\n                    ) {\n                        var noop = function noop() {};\n                        item.origin = FileOrigin.LIMBO;\n                        state.options.server.remove(item.source, noop, noop);\n                    }\n\n                    // All items processed? No errors?\n                    var allItemsProcessed =\n                        query('GET_ITEMS_BY_STATUS', ItemStatus.PROCESSING_COMPLETE).length ===\n                        state.items.length;\n                    if (allItemsProcessed) {\n                        dispatch('DID_COMPLETE_ITEM_PROCESSING_ALL');\n                    }\n                });\n\n                // we error function\n                item.onOnce('process-error', function(error) {\n                    failure({ error: error, file: createItemAPI(item) });\n                    processNext();\n                });\n\n                // start file processing\n                var options = state.options;\n                item.process(\n                    createFileProcessor(\n                        createProcessorFunction(\n                            options.server.url,\n                            options.server.process,\n                            options.name,\n                            {\n                                chunkTransferId: item.transferId,\n                                chunkServer: options.server.patch,\n                                chunkUploads: options.chunkUploads,\n                                chunkForce: options.chunkForce,\n                                chunkSize: options.chunkSize,\n                                chunkRetryDelays: options.chunkRetryDelays,\n                            }\n                        ),\n\n                        {\n                            allowMinimumUploadDuration: query('GET_ALLOW_MINIMUM_UPLOAD_DURATION'),\n                        }\n                    ),\n\n                    // called when the file is about to be processed so it can be piped through the transform filters\n                    function(file, success, error) {\n                        // allow plugins to alter the file data\n                        applyFilterChain('PREPARE_OUTPUT', file, { query: query, item: item })\n                            .then(function(file) {\n                                dispatch('DID_PREPARE_OUTPUT', { id: item.id, file: file });\n\n                                success(file);\n                            })\n                            .catch(error);\n                    }\n                );\n            }),\n\n            RETRY_ITEM_PROCESSING: getItemByQueryFromState(state, function(item) {\n                dispatch('REQUEST_ITEM_PROCESSING', { query: item });\n            }),\n\n            REQUEST_REMOVE_ITEM: getItemByQueryFromState(state, function(item) {\n                optionalPromise(query('GET_BEFORE_REMOVE_FILE'), createItemAPI(item)).then(function(\n                    shouldRemove\n                ) {\n                    if (!shouldRemove) {\n                        return;\n                    }\n                    dispatch('REMOVE_ITEM', { query: item });\n                });\n            }),\n\n            RELEASE_ITEM: getItemByQueryFromState(state, function(item) {\n                item.release();\n            }),\n\n            REMOVE_ITEM: getItemByQueryFromState(state, function(item, success, failure, options) {\n                var removeFromView = function removeFromView() {\n                    // get id reference\n                    var id = item.id;\n\n                    // archive the item, this does not remove it from the list\n                    getItemById(state.items, id).archive();\n\n                    // tell the view the item has been removed\n                    dispatch('DID_REMOVE_ITEM', { error: null, id: id, item: item });\n\n                    // now the list has been modified\n                    listUpdated(dispatch, state);\n\n                    // correctly removed\n                    success(createItemAPI(item));\n                };\n\n                // if this is a local file and the `server.remove` function has been configured,\n                // send source there so dev can remove file from server\n                var server = state.options.server;\n                if (\n                    item.origin === FileOrigin.LOCAL &&\n                    server &&\n                    isFunction(server.remove) &&\n                    options.remove !== false\n                ) {\n                    dispatch('DID_START_ITEM_REMOVE', { id: item.id });\n\n                    server.remove(\n                        item.source,\n                        function() {\n                            return removeFromView();\n                        },\n                        function(status) {\n                            dispatch('DID_THROW_ITEM_REMOVE_ERROR', {\n                                id: item.id,\n                                error: createResponse('error', 0, status, null),\n                                status: {\n                                    main: dynamicLabel(state.options.labelFileRemoveError)(status),\n                                    sub: state.options.labelTapToRetry,\n                                },\n                            });\n                        }\n                    );\n                } else {\n                    // if is requesting revert and can revert need to call revert handler (not calling request_ because that would also trigger beforeRemoveHook)\n                    if (\n                        (options.revert &&\n                            item.origin !== FileOrigin.LOCAL &&\n                            item.serverId !== null) ||\n                        // if chunked uploads are enabled and we're uploading in chunks for this specific file\n                        // or if the file isn't big enough for chunked uploads but chunkForce is set then call\n                        // revert before removing from the view...\n                        (state.options.chunkUploads && item.file.size > state.options.chunkSize) ||\n                        (state.options.chunkUploads && state.options.chunkForce)\n                    ) {\n                        item.revert(\n                            createRevertFunction(\n                                state.options.server.url,\n                                state.options.server.revert\n                            ),\n                            query('GET_FORCE_REVERT')\n                        );\n                    }\n\n                    // can now safely remove from view\n                    removeFromView();\n                }\n            }),\n\n            ABORT_ITEM_LOAD: getItemByQueryFromState(state, function(item) {\n                item.abortLoad();\n            }),\n\n            ABORT_ITEM_PROCESSING: getItemByQueryFromState(state, function(item) {\n                // test if is already processed\n                if (item.serverId) {\n                    dispatch('REVERT_ITEM_PROCESSING', { id: item.id });\n                    return;\n                }\n\n                // abort\n                item.abortProcessing().then(function() {\n                    var shouldRemove = state.options.instantUpload;\n                    if (shouldRemove) {\n                        dispatch('REMOVE_ITEM', { query: item.id });\n                    }\n                });\n            }),\n\n            REQUEST_REVERT_ITEM_PROCESSING: getItemByQueryFromState(state, function(item) {\n                // not instant uploading, revert immediately\n                if (!state.options.instantUpload) {\n                    dispatch('REVERT_ITEM_PROCESSING', { query: item });\n                    return;\n                }\n\n                // if we're instant uploading the file will also be removed if we revert,\n                // so if a before remove file hook is defined we need to run it now\n                var handleRevert = function handleRevert(shouldRevert) {\n                    if (!shouldRevert) return;\n                    dispatch('REVERT_ITEM_PROCESSING', { query: item });\n                };\n\n                var fn = query('GET_BEFORE_REMOVE_FILE');\n                if (!fn) {\n                    return handleRevert(true);\n                }\n\n                var requestRemoveResult = fn(createItemAPI(item));\n                if (requestRemoveResult == null) {\n                    // undefined or null\n                    return handleRevert(true);\n                }\n\n                if (typeof requestRemoveResult === 'boolean') {\n                    return handleRevert(requestRemoveResult);\n                }\n\n                if (typeof requestRemoveResult.then === 'function') {\n                    requestRemoveResult.then(handleRevert);\n                }\n            }),\n\n            REVERT_ITEM_PROCESSING: getItemByQueryFromState(state, function(item) {\n                item.revert(\n                    createRevertFunction(state.options.server.url, state.options.server.revert),\n                    query('GET_FORCE_REVERT')\n                )\n                    .then(function() {\n                        var shouldRemove = state.options.instantUpload || isMockItem(item);\n                        if (shouldRemove) {\n                            dispatch('REMOVE_ITEM', { query: item.id });\n                        }\n                    })\n                    .catch(function() {});\n            }),\n\n            SET_OPTIONS: function SET_OPTIONS(_ref11) {\n                var options = _ref11.options;\n                // get all keys passed\n                var optionKeys = Object.keys(options);\n\n                // get prioritized keyed to include (remove once not in options object)\n                var prioritizedOptionKeys = PrioritizedOptions.filter(function(key) {\n                    return optionKeys.includes(key);\n                });\n\n                // order the keys, prioritized first, then rest\n                var orderedOptionKeys = [].concat(\n                    _toConsumableArray(prioritizedOptionKeys),\n                    _toConsumableArray(\n                        Object.keys(options).filter(function(key) {\n                            return !prioritizedOptionKeys.includes(key);\n                        })\n                    )\n                );\n\n                // dispatch set event for each option\n                orderedOptionKeys.forEach(function(key) {\n                    dispatch('SET_' + fromCamels(key, '_').toUpperCase(), {\n                        value: options[key],\n                    });\n                });\n            },\n        };\n    };\n\n    var PrioritizedOptions = ['server'];\n\n    var formatFilename = function formatFilename(name) {\n        return name;\n    };\n\n    var createElement$1 = function createElement(tagName) {\n        return document.createElement(tagName);\n    };\n\n    var text = function text(node, value) {\n        var textNode = node.childNodes[0];\n        if (!textNode) {\n            textNode = document.createTextNode(value);\n            node.appendChild(textNode);\n        } else if (value !== textNode.nodeValue) {\n            textNode.nodeValue = value;\n        }\n    };\n\n    var polarToCartesian = function polarToCartesian(centerX, centerY, radius, angleInDegrees) {\n        var angleInRadians = (((angleInDegrees % 360) - 90) * Math.PI) / 180.0;\n        return {\n            x: centerX + radius * Math.cos(angleInRadians),\n            y: centerY + radius * Math.sin(angleInRadians),\n        };\n    };\n\n    var describeArc = function describeArc(x, y, radius, startAngle, endAngle, arcSweep) {\n        var start = polarToCartesian(x, y, radius, endAngle);\n        var end = polarToCartesian(x, y, radius, startAngle);\n        return ['M', start.x, start.y, 'A', radius, radius, 0, arcSweep, 0, end.x, end.y].join(' ');\n    };\n\n    var percentageArc = function percentageArc(x, y, radius, from, to) {\n        var arcSweep = 1;\n        if (to > from && to - from <= 0.5) {\n            arcSweep = 0;\n        }\n        if (from > to && from - to >= 0.5) {\n            arcSweep = 0;\n        }\n        return describeArc(\n            x,\n            y,\n            radius,\n            Math.min(0.9999, from) * 360,\n            Math.min(0.9999, to) * 360,\n            arcSweep\n        );\n    };\n\n    var create = function create(_ref) {\n        var root = _ref.root,\n            props = _ref.props;\n        // start at 0\n        props.spin = false;\n        props.progress = 0;\n        props.opacity = 0;\n\n        // svg\n        var svg = createElement('svg');\n        root.ref.path = createElement('path', {\n            'stroke-width': 2,\n            'stroke-linecap': 'round',\n        });\n\n        svg.appendChild(root.ref.path);\n\n        root.ref.svg = svg;\n\n        root.appendChild(svg);\n    };\n\n    var write = function write(_ref2) {\n        var root = _ref2.root,\n            props = _ref2.props;\n        if (props.opacity === 0) {\n            return;\n        }\n\n        if (props.align) {\n            root.element.dataset.align = props.align;\n        }\n\n        // get width of stroke\n        var ringStrokeWidth = parseInt(attr(root.ref.path, 'stroke-width'), 10);\n\n        // calculate size of ring\n        var size = root.rect.element.width * 0.5;\n\n        // ring state\n        var ringFrom = 0;\n        var ringTo = 0;\n\n        // now in busy mode\n        if (props.spin) {\n            ringFrom = 0;\n            ringTo = 0.5;\n        } else {\n            ringFrom = 0;\n            ringTo = props.progress;\n        }\n\n        // get arc path\n        var coordinates = percentageArc(size, size, size - ringStrokeWidth, ringFrom, ringTo);\n\n        // update progress bar\n        attr(root.ref.path, 'd', coordinates);\n\n        // hide while contains 0 value\n        attr(root.ref.path, 'stroke-opacity', props.spin || props.progress > 0 ? 1 : 0);\n    };\n\n    var progressIndicator = createView({\n        tag: 'div',\n        name: 'progress-indicator',\n        ignoreRectUpdate: true,\n        ignoreRect: true,\n        create: create,\n        write: write,\n        mixins: {\n            apis: ['progress', 'spin', 'align'],\n            styles: ['opacity'],\n            animations: {\n                opacity: { type: 'tween', duration: 500 },\n                progress: {\n                    type: 'spring',\n                    stiffness: 0.95,\n                    damping: 0.65,\n                    mass: 10,\n                },\n            },\n        },\n    });\n\n    var create$1 = function create(_ref) {\n        var root = _ref.root,\n            props = _ref.props;\n        root.element.innerHTML = (props.icon || '') + ('<span>' + props.label + '</span>');\n\n        props.isDisabled = false;\n    };\n\n    var write$1 = function write(_ref2) {\n        var root = _ref2.root,\n            props = _ref2.props;\n        var isDisabled = props.isDisabled;\n        var shouldDisable = root.query('GET_DISABLED') || props.opacity === 0;\n\n        if (shouldDisable && !isDisabled) {\n            props.isDisabled = true;\n            attr(root.element, 'disabled', 'disabled');\n        } else if (!shouldDisable && isDisabled) {\n            props.isDisabled = false;\n            root.element.removeAttribute('disabled');\n        }\n    };\n\n    var fileActionButton = createView({\n        tag: 'button',\n        attributes: {\n            type: 'button',\n        },\n\n        ignoreRect: true,\n        ignoreRectUpdate: true,\n        name: 'file-action-button',\n        mixins: {\n            apis: ['label'],\n            styles: ['translateX', 'translateY', 'scaleX', 'scaleY', 'opacity'],\n            animations: {\n                scaleX: 'spring',\n                scaleY: 'spring',\n                translateX: 'spring',\n                translateY: 'spring',\n                opacity: { type: 'tween', duration: 250 },\n            },\n\n            listeners: true,\n        },\n\n        create: create$1,\n        write: write$1,\n    });\n\n    var toNaturalFileSize = function toNaturalFileSize(bytes) {\n        var decimalSeparator =\n            arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '.';\n        var base = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1000;\n        var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n        var _options$labelBytes = options.labelBytes,\n            labelBytes = _options$labelBytes === void 0 ? 'bytes' : _options$labelBytes,\n            _options$labelKilobyt = options.labelKilobytes,\n            labelKilobytes = _options$labelKilobyt === void 0 ? 'KB' : _options$labelKilobyt,\n            _options$labelMegabyt = options.labelMegabytes,\n            labelMegabytes = _options$labelMegabyt === void 0 ? 'MB' : _options$labelMegabyt,\n            _options$labelGigabyt = options.labelGigabytes,\n            labelGigabytes = _options$labelGigabyt === void 0 ? 'GB' : _options$labelGigabyt;\n\n        // no negative byte sizes\n        bytes = Math.round(Math.abs(bytes));\n\n        var KB = base;\n        var MB = base * base;\n        var GB = base * base * base;\n\n        // just bytes\n        if (bytes < KB) {\n            return bytes + ' ' + labelBytes;\n        }\n\n        // kilobytes\n        if (bytes < MB) {\n            return Math.floor(bytes / KB) + ' ' + labelKilobytes;\n        }\n\n        // megabytes\n        if (bytes < GB) {\n            return removeDecimalsWhenZero(bytes / MB, 1, decimalSeparator) + ' ' + labelMegabytes;\n        }\n\n        // gigabytes\n        return removeDecimalsWhenZero(bytes / GB, 2, decimalSeparator) + ' ' + labelGigabytes;\n    };\n\n    var removeDecimalsWhenZero = function removeDecimalsWhenZero(value, decimalCount, separator) {\n        return value\n            .toFixed(decimalCount)\n            .split('.')\n            .filter(function(part) {\n                return part !== '0';\n            })\n            .join(separator);\n    };\n\n    var create$2 = function create(_ref) {\n        var root = _ref.root,\n            props = _ref.props;\n        // filename\n        var fileName = createElement$1('span');\n        fileName.className = 'filepond--file-info-main';\n        // hide for screenreaders\n        // the file is contained in a fieldset with legend that contains the filename\n        // no need to read it twice\n        attr(fileName, 'aria-hidden', 'true');\n        root.appendChild(fileName);\n        root.ref.fileName = fileName;\n\n        // filesize\n        var fileSize = createElement$1('span');\n        fileSize.className = 'filepond--file-info-sub';\n        root.appendChild(fileSize);\n        root.ref.fileSize = fileSize;\n\n        // set initial values\n        text(fileSize, root.query('GET_LABEL_FILE_WAITING_FOR_SIZE'));\n        text(fileName, formatFilename(root.query('GET_ITEM_NAME', props.id)));\n    };\n\n    var updateFile = function updateFile(_ref2) {\n        var root = _ref2.root,\n            props = _ref2.props;\n        text(\n            root.ref.fileSize,\n            toNaturalFileSize(\n                root.query('GET_ITEM_SIZE', props.id),\n                '.',\n                root.query('GET_FILE_SIZE_BASE'),\n                root.query('GET_FILE_SIZE_LABELS', root.query)\n            )\n        );\n\n        text(root.ref.fileName, formatFilename(root.query('GET_ITEM_NAME', props.id)));\n    };\n\n    var updateFileSizeOnError = function updateFileSizeOnError(_ref3) {\n        var root = _ref3.root,\n            props = _ref3.props;\n        // if size is available don't fallback to unknown size message\n        if (isInt(root.query('GET_ITEM_SIZE', props.id))) {\n            updateFile({ root: root, props: props });\n            return;\n        }\n\n        text(root.ref.fileSize, root.query('GET_LABEL_FILE_SIZE_NOT_AVAILABLE'));\n    };\n\n    var fileInfo = createView({\n        name: 'file-info',\n        ignoreRect: true,\n        ignoreRectUpdate: true,\n        write: createRoute({\n            DID_LOAD_ITEM: updateFile,\n            DID_UPDATE_ITEM_META: updateFile,\n            DID_THROW_ITEM_LOAD_ERROR: updateFileSizeOnError,\n            DID_THROW_ITEM_INVALID: updateFileSizeOnError,\n        }),\n\n        didCreateView: function didCreateView(root) {\n            applyFilters('CREATE_VIEW', Object.assign({}, root, { view: root }));\n        },\n        create: create$2,\n        mixins: {\n            styles: ['translateX', 'translateY'],\n            animations: {\n                translateX: 'spring',\n                translateY: 'spring',\n            },\n        },\n    });\n\n    var toPercentage = function toPercentage(value) {\n        return Math.round(value * 100);\n    };\n\n    var create$3 = function create(_ref) {\n        var root = _ref.root;\n\n        // main status\n        var main = createElement$1('span');\n        main.className = 'filepond--file-status-main';\n        root.appendChild(main);\n        root.ref.main = main;\n\n        // sub status\n        var sub = createElement$1('span');\n        sub.className = 'filepond--file-status-sub';\n        root.appendChild(sub);\n        root.ref.sub = sub;\n\n        didSetItemLoadProgress({ root: root, action: { progress: null } });\n    };\n\n    var didSetItemLoadProgress = function didSetItemLoadProgress(_ref2) {\n        var root = _ref2.root,\n            action = _ref2.action;\n        var title =\n            action.progress === null\n                ? root.query('GET_LABEL_FILE_LOADING')\n                : root.query('GET_LABEL_FILE_LOADING') + ' ' + toPercentage(action.progress) + '%';\n\n        text(root.ref.main, title);\n        text(root.ref.sub, root.query('GET_LABEL_TAP_TO_CANCEL'));\n    };\n\n    var didSetItemProcessProgress = function didSetItemProcessProgress(_ref3) {\n        var root = _ref3.root,\n            action = _ref3.action;\n        var title =\n            action.progress === null\n                ? root.query('GET_LABEL_FILE_PROCESSING')\n                : root.query('GET_LABEL_FILE_PROCESSING') +\n                  ' ' +\n                  toPercentage(action.progress) +\n                  '%';\n\n        text(root.ref.main, title);\n        text(root.ref.sub, root.query('GET_LABEL_TAP_TO_CANCEL'));\n    };\n\n    var didRequestItemProcessing = function didRequestItemProcessing(_ref4) {\n        var root = _ref4.root;\n        text(root.ref.main, root.query('GET_LABEL_FILE_PROCESSING'));\n        text(root.ref.sub, root.query('GET_LABEL_TAP_TO_CANCEL'));\n    };\n\n    var didAbortItemProcessing = function didAbortItemProcessing(_ref5) {\n        var root = _ref5.root;\n        text(root.ref.main, root.query('GET_LABEL_FILE_PROCESSING_ABORTED'));\n        text(root.ref.sub, root.query('GET_LABEL_TAP_TO_RETRY'));\n    };\n\n    var didCompleteItemProcessing = function didCompleteItemProcessing(_ref6) {\n        var root = _ref6.root;\n        text(root.ref.main, root.query('GET_LABEL_FILE_PROCESSING_COMPLETE'));\n        text(root.ref.sub, root.query('GET_LABEL_TAP_TO_UNDO'));\n    };\n\n    var clear = function clear(_ref7) {\n        var root = _ref7.root;\n        text(root.ref.main, '');\n        text(root.ref.sub, '');\n    };\n\n    var error = function error(_ref8) {\n        var root = _ref8.root,\n            action = _ref8.action;\n        text(root.ref.main, action.status.main);\n        text(root.ref.sub, action.status.sub);\n    };\n\n    var fileStatus = createView({\n        name: 'file-status',\n        ignoreRect: true,\n        ignoreRectUpdate: true,\n        write: createRoute({\n            DID_LOAD_ITEM: clear,\n            DID_REVERT_ITEM_PROCESSING: clear,\n            DID_REQUEST_ITEM_PROCESSING: didRequestItemProcessing,\n            DID_ABORT_ITEM_PROCESSING: didAbortItemProcessing,\n            DID_COMPLETE_ITEM_PROCESSING: didCompleteItemProcessing,\n            DID_UPDATE_ITEM_PROCESS_PROGRESS: didSetItemProcessProgress,\n            DID_UPDATE_ITEM_LOAD_PROGRESS: didSetItemLoadProgress,\n            DID_THROW_ITEM_LOAD_ERROR: error,\n            DID_THROW_ITEM_INVALID: error,\n            DID_THROW_ITEM_PROCESSING_ERROR: error,\n            DID_THROW_ITEM_PROCESSING_REVERT_ERROR: error,\n            DID_THROW_ITEM_REMOVE_ERROR: error,\n        }),\n\n        didCreateView: function didCreateView(root) {\n            applyFilters('CREATE_VIEW', Object.assign({}, root, { view: root }));\n        },\n        create: create$3,\n        mixins: {\n            styles: ['translateX', 'translateY', 'opacity'],\n            animations: {\n                opacity: { type: 'tween', duration: 250 },\n                translateX: 'spring',\n                translateY: 'spring',\n            },\n        },\n    });\n\n    /**\n     * Button definitions for the file view\n     */\n\n    var Buttons = {\n        AbortItemLoad: {\n            label: 'GET_LABEL_BUTTON_ABORT_ITEM_LOAD',\n            action: 'ABORT_ITEM_LOAD',\n            className: 'filepond--action-abort-item-load',\n            align: 'LOAD_INDICATOR_POSITION', // right\n        },\n        RetryItemLoad: {\n            label: 'GET_LABEL_BUTTON_RETRY_ITEM_LOAD',\n            action: 'RETRY_ITEM_LOAD',\n            icon: 'GET_ICON_RETRY',\n            className: 'filepond--action-retry-item-load',\n            align: 'BUTTON_PROCESS_ITEM_POSITION', // right\n        },\n        RemoveItem: {\n            label: 'GET_LABEL_BUTTON_REMOVE_ITEM',\n            action: 'REQUEST_REMOVE_ITEM',\n            icon: 'GET_ICON_REMOVE',\n            className: 'filepond--action-remove-item',\n            align: 'BUTTON_REMOVE_ITEM_POSITION', // left\n        },\n        ProcessItem: {\n            label: 'GET_LABEL_BUTTON_PROCESS_ITEM',\n            action: 'REQUEST_ITEM_PROCESSING',\n            icon: 'GET_ICON_PROCESS',\n            className: 'filepond--action-process-item',\n            align: 'BUTTON_PROCESS_ITEM_POSITION', // right\n        },\n        AbortItemProcessing: {\n            label: 'GET_LABEL_BUTTON_ABORT_ITEM_PROCESSING',\n            action: 'ABORT_ITEM_PROCESSING',\n            className: 'filepond--action-abort-item-processing',\n            align: 'BUTTON_PROCESS_ITEM_POSITION', // right\n        },\n        RetryItemProcessing: {\n            label: 'GET_LABEL_BUTTON_RETRY_ITEM_PROCESSING',\n            action: 'RETRY_ITEM_PROCESSING',\n            icon: 'GET_ICON_RETRY',\n            className: 'filepond--action-retry-item-processing',\n            align: 'BUTTON_PROCESS_ITEM_POSITION', // right\n        },\n        RevertItemProcessing: {\n            label: 'GET_LABEL_BUTTON_UNDO_ITEM_PROCESSING',\n            action: 'REQUEST_REVERT_ITEM_PROCESSING',\n            icon: 'GET_ICON_UNDO',\n            className: 'filepond--action-revert-item-processing',\n            align: 'BUTTON_PROCESS_ITEM_POSITION', // right\n        },\n    };\n\n    // make a list of buttons, we can then remove buttons from this list if they're disabled\n    var ButtonKeys = [];\n    forin(Buttons, function(key) {\n        ButtonKeys.push(key);\n    });\n\n    var calculateFileInfoOffset = function calculateFileInfoOffset(root) {\n        if (getRemoveIndicatorAligment(root) === 'right') return 0;\n        var buttonRect = root.ref.buttonRemoveItem.rect.element;\n        return buttonRect.hidden ? null : buttonRect.width + buttonRect.left;\n    };\n\n    var calculateButtonWidth = function calculateButtonWidth(root) {\n        var buttonRect = root.ref.buttonAbortItemLoad.rect.element;\n        return buttonRect.width;\n    };\n\n    // Force on full pixels so text stays crips\n    var calculateFileVerticalCenterOffset = function calculateFileVerticalCenterOffset(root) {\n        return Math.floor(root.ref.buttonRemoveItem.rect.element.height / 4);\n    };\n    var calculateFileHorizontalCenterOffset = function calculateFileHorizontalCenterOffset(root) {\n        return Math.floor(root.ref.buttonRemoveItem.rect.element.left / 2);\n    };\n\n    var getLoadIndicatorAlignment = function getLoadIndicatorAlignment(root) {\n        return root.query('GET_STYLE_LOAD_INDICATOR_POSITION');\n    };\n    var getProcessIndicatorAlignment = function getProcessIndicatorAlignment(root) {\n        return root.query('GET_STYLE_PROGRESS_INDICATOR_POSITION');\n    };\n    var getRemoveIndicatorAligment = function getRemoveIndicatorAligment(root) {\n        return root.query('GET_STYLE_BUTTON_REMOVE_ITEM_POSITION');\n    };\n\n    var DefaultStyle = {\n        buttonAbortItemLoad: { opacity: 0 },\n        buttonRetryItemLoad: { opacity: 0 },\n        buttonRemoveItem: { opacity: 0 },\n        buttonProcessItem: { opacity: 0 },\n        buttonAbortItemProcessing: { opacity: 0 },\n        buttonRetryItemProcessing: { opacity: 0 },\n        buttonRevertItemProcessing: { opacity: 0 },\n        loadProgressIndicator: { opacity: 0, align: getLoadIndicatorAlignment },\n        processProgressIndicator: { opacity: 0, align: getProcessIndicatorAlignment },\n        processingCompleteIndicator: { opacity: 0, scaleX: 0.75, scaleY: 0.75 },\n        info: { translateX: 0, translateY: 0, opacity: 0 },\n        status: { translateX: 0, translateY: 0, opacity: 0 },\n    };\n\n    var IdleStyle = {\n        buttonRemoveItem: { opacity: 1 },\n        buttonProcessItem: { opacity: 1 },\n        info: { translateX: calculateFileInfoOffset },\n        status: { translateX: calculateFileInfoOffset },\n    };\n\n    var ProcessingStyle = {\n        buttonAbortItemProcessing: { opacity: 1 },\n        processProgressIndicator: { opacity: 1 },\n        status: { opacity: 1 },\n    };\n\n    var StyleMap = {\n        DID_THROW_ITEM_INVALID: {\n            buttonRemoveItem: { opacity: 1 },\n            info: { translateX: calculateFileInfoOffset },\n            status: { translateX: calculateFileInfoOffset, opacity: 1 },\n        },\n\n        DID_START_ITEM_LOAD: {\n            buttonAbortItemLoad: { opacity: 1 },\n            loadProgressIndicator: { opacity: 1 },\n            status: { opacity: 1 },\n        },\n\n        DID_THROW_ITEM_LOAD_ERROR: {\n            buttonRetryItemLoad: { opacity: 1 },\n            buttonRemoveItem: { opacity: 1 },\n            info: { translateX: calculateFileInfoOffset },\n            status: { opacity: 1 },\n        },\n\n        DID_START_ITEM_REMOVE: {\n            processProgressIndicator: { opacity: 1, align: getRemoveIndicatorAligment },\n            info: { translateX: calculateFileInfoOffset },\n            status: { opacity: 0 },\n        },\n\n        DID_THROW_ITEM_REMOVE_ERROR: {\n            processProgressIndicator: { opacity: 0, align: getRemoveIndicatorAligment },\n            buttonRemoveItem: { opacity: 1 },\n            info: { translateX: calculateFileInfoOffset },\n            status: { opacity: 1, translateX: calculateFileInfoOffset },\n        },\n\n        DID_LOAD_ITEM: IdleStyle,\n        DID_LOAD_LOCAL_ITEM: {\n            buttonRemoveItem: { opacity: 1 },\n            info: { translateX: calculateFileInfoOffset },\n            status: { translateX: calculateFileInfoOffset },\n        },\n\n        DID_START_ITEM_PROCESSING: ProcessingStyle,\n        DID_REQUEST_ITEM_PROCESSING: ProcessingStyle,\n        DID_UPDATE_ITEM_PROCESS_PROGRESS: ProcessingStyle,\n        DID_COMPLETE_ITEM_PROCESSING: {\n            buttonRevertItemProcessing: { opacity: 1 },\n            info: { opacity: 1 },\n            status: { opacity: 1 },\n        },\n\n        DID_THROW_ITEM_PROCESSING_ERROR: {\n            buttonRemoveItem: { opacity: 1 },\n            buttonRetryItemProcessing: { opacity: 1 },\n            status: { opacity: 1 },\n            info: { translateX: calculateFileInfoOffset },\n        },\n\n        DID_THROW_ITEM_PROCESSING_REVERT_ERROR: {\n            buttonRevertItemProcessing: { opacity: 1 },\n            status: { opacity: 1 },\n            info: { opacity: 1 },\n        },\n\n        DID_ABORT_ITEM_PROCESSING: {\n            buttonRemoveItem: { opacity: 1 },\n            buttonProcessItem: { opacity: 1 },\n            info: { translateX: calculateFileInfoOffset },\n            status: { opacity: 1 },\n        },\n\n        DID_REVERT_ITEM_PROCESSING: IdleStyle,\n    };\n\n    // complete indicator view\n    var processingCompleteIndicatorView = createView({\n        create: function create(_ref) {\n            var root = _ref.root;\n            root.element.innerHTML = root.query('GET_ICON_DONE');\n        },\n        name: 'processing-complete-indicator',\n        ignoreRect: true,\n        mixins: {\n            styles: ['scaleX', 'scaleY', 'opacity'],\n            animations: {\n                scaleX: 'spring',\n                scaleY: 'spring',\n                opacity: { type: 'tween', duration: 250 },\n            },\n        },\n    });\n\n    /**\n     * Creates the file view\n     */\n    var create$4 = function create(_ref2) {\n        var root = _ref2.root,\n            props = _ref2.props;\n        // copy Buttons object\n        var LocalButtons = Object.keys(Buttons).reduce(function(prev, curr) {\n            prev[curr] = Object.assign({}, Buttons[curr]);\n            return prev;\n        }, {});\n        var id = props.id;\n\n        // allow reverting upload\n        var allowRevert = root.query('GET_ALLOW_REVERT');\n\n        // allow remove file\n        var allowRemove = root.query('GET_ALLOW_REMOVE');\n\n        // allow processing upload\n        var allowProcess = root.query('GET_ALLOW_PROCESS');\n\n        // is instant uploading, need this to determine the icon of the undo button\n        var instantUpload = root.query('GET_INSTANT_UPLOAD');\n\n        // is async set up\n        var isAsync = root.query('IS_ASYNC');\n\n        // should align remove item buttons\n        var alignRemoveItemButton = root.query('GET_STYLE_BUTTON_REMOVE_ITEM_ALIGN');\n\n        // enabled buttons array\n        var buttonFilter;\n        if (isAsync) {\n            if (allowProcess && !allowRevert) {\n                // only remove revert button\n                buttonFilter = function buttonFilter(key) {\n                    return !/RevertItemProcessing/.test(key);\n                };\n            } else if (!allowProcess && allowRevert) {\n                // only remove process button\n                buttonFilter = function buttonFilter(key) {\n                    return !/ProcessItem|RetryItemProcessing|AbortItemProcessing/.test(key);\n                };\n            } else if (!allowProcess && !allowRevert) {\n                // remove all process buttons\n                buttonFilter = function buttonFilter(key) {\n                    return !/Process/.test(key);\n                };\n            }\n        } else {\n            // no process controls available\n            buttonFilter = function buttonFilter(key) {\n                return !/Process/.test(key);\n            };\n        }\n\n        var enabledButtons = buttonFilter ? ButtonKeys.filter(buttonFilter) : ButtonKeys.concat();\n\n        // update icon and label for revert button when instant uploading\n        if (instantUpload && allowRevert) {\n            LocalButtons['RevertItemProcessing'].label = 'GET_LABEL_BUTTON_REMOVE_ITEM';\n            LocalButtons['RevertItemProcessing'].icon = 'GET_ICON_REMOVE';\n        }\n\n        // remove last button (revert) if not allowed\n        if (isAsync && !allowRevert) {\n            var map = StyleMap['DID_COMPLETE_ITEM_PROCESSING'];\n            map.info.translateX = calculateFileHorizontalCenterOffset;\n            map.info.translateY = calculateFileVerticalCenterOffset;\n            map.status.translateY = calculateFileVerticalCenterOffset;\n            map.processingCompleteIndicator = { opacity: 1, scaleX: 1, scaleY: 1 };\n        }\n\n        // should align center\n        if (isAsync && !allowProcess) {\n            [\n                'DID_START_ITEM_PROCESSING',\n                'DID_REQUEST_ITEM_PROCESSING',\n                'DID_UPDATE_ITEM_PROCESS_PROGRESS',\n                'DID_THROW_ITEM_PROCESSING_ERROR',\n            ].forEach(function(key) {\n                StyleMap[key].status.translateY = calculateFileVerticalCenterOffset;\n            });\n            StyleMap['DID_THROW_ITEM_PROCESSING_ERROR'].status.translateX = calculateButtonWidth;\n        }\n\n        // move remove button to right\n        if (alignRemoveItemButton && allowRevert) {\n            LocalButtons['RevertItemProcessing'].align = 'BUTTON_REMOVE_ITEM_POSITION';\n            var _map = StyleMap['DID_COMPLETE_ITEM_PROCESSING'];\n            _map.info.translateX = calculateFileInfoOffset;\n            _map.status.translateY = calculateFileVerticalCenterOffset;\n            _map.processingCompleteIndicator = { opacity: 1, scaleX: 1, scaleY: 1 };\n        }\n\n        // show/hide RemoveItem button\n        if (!allowRemove) {\n            LocalButtons['RemoveItem'].disabled = true;\n        }\n\n        // create the button views\n        forin(LocalButtons, function(key, definition) {\n            // create button\n            var buttonView = root.createChildView(fileActionButton, {\n                label: root.query(definition.label),\n                icon: root.query(definition.icon),\n                opacity: 0,\n            });\n\n            // should be appended?\n            if (enabledButtons.includes(key)) {\n                root.appendChildView(buttonView);\n            }\n\n            // toggle\n            if (definition.disabled) {\n                buttonView.element.setAttribute('disabled', 'disabled');\n                buttonView.element.setAttribute('hidden', 'hidden');\n            }\n\n            // add position attribute\n            buttonView.element.dataset.align = root.query('GET_STYLE_' + definition.align);\n\n            // add class\n            buttonView.element.classList.add(definition.className);\n\n            // handle interactions\n            buttonView.on('click', function(e) {\n                e.stopPropagation();\n                if (definition.disabled) return;\n                root.dispatch(definition.action, { query: id });\n            });\n\n            // set reference\n            root.ref['button' + key] = buttonView;\n        });\n\n        // checkmark\n        root.ref.processingCompleteIndicator = root.appendChildView(\n            root.createChildView(processingCompleteIndicatorView)\n        );\n\n        root.ref.processingCompleteIndicator.element.dataset.align = root.query(\n            'GET_STYLE_BUTTON_PROCESS_ITEM_POSITION'\n        );\n\n        // create file info view\n        root.ref.info = root.appendChildView(root.createChildView(fileInfo, { id: id }));\n\n        // create file status view\n        root.ref.status = root.appendChildView(root.createChildView(fileStatus, { id: id }));\n\n        // add progress indicators\n        var loadIndicatorView = root.appendChildView(\n            root.createChildView(progressIndicator, {\n                opacity: 0,\n                align: root.query('GET_STYLE_LOAD_INDICATOR_POSITION'),\n            })\n        );\n\n        loadIndicatorView.element.classList.add('filepond--load-indicator');\n        root.ref.loadProgressIndicator = loadIndicatorView;\n\n        var progressIndicatorView = root.appendChildView(\n            root.createChildView(progressIndicator, {\n                opacity: 0,\n                align: root.query('GET_STYLE_PROGRESS_INDICATOR_POSITION'),\n            })\n        );\n\n        progressIndicatorView.element.classList.add('filepond--process-indicator');\n        root.ref.processProgressIndicator = progressIndicatorView;\n\n        // current active styles\n        root.ref.activeStyles = [];\n    };\n\n    var write$2 = function write(_ref3) {\n        var root = _ref3.root,\n            actions = _ref3.actions,\n            props = _ref3.props;\n        // route actions\n        route({ root: root, actions: actions, props: props });\n\n        // select last state change action\n        var action = actions\n            .concat()\n            .filter(function(action) {\n                return /^DID_/.test(action.type);\n            })\n            .reverse()\n            .find(function(action) {\n                return StyleMap[action.type];\n            });\n\n        // a new action happened, let's get the matching styles\n        if (action) {\n            // define new active styles\n            root.ref.activeStyles = [];\n\n            var stylesToApply = StyleMap[action.type];\n            forin(DefaultStyle, function(name, defaultStyles) {\n                // get reference to control\n                var control = root.ref[name];\n\n                // loop over all styles for this control\n                forin(defaultStyles, function(key, defaultValue) {\n                    var value =\n                        stylesToApply[name] && typeof stylesToApply[name][key] !== 'undefined'\n                            ? stylesToApply[name][key]\n                            : defaultValue;\n                    root.ref.activeStyles.push({ control: control, key: key, value: value });\n                });\n            });\n        }\n\n        // apply active styles to element\n        root.ref.activeStyles.forEach(function(_ref4) {\n            var control = _ref4.control,\n                key = _ref4.key,\n                value = _ref4.value;\n            control[key] = typeof value === 'function' ? value(root) : value;\n        });\n    };\n\n    var route = createRoute({\n        DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING: function DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING(\n            _ref5\n        ) {\n            var root = _ref5.root,\n                action = _ref5.action;\n            root.ref.buttonAbortItemProcessing.label = action.value;\n        },\n        DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD: function DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD(_ref6) {\n            var root = _ref6.root,\n                action = _ref6.action;\n            root.ref.buttonAbortItemLoad.label = action.value;\n        },\n        DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL: function DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL(\n            _ref7\n        ) {\n            var root = _ref7.root,\n                action = _ref7.action;\n            root.ref.buttonAbortItemRemoval.label = action.value;\n        },\n        DID_REQUEST_ITEM_PROCESSING: function DID_REQUEST_ITEM_PROCESSING(_ref8) {\n            var root = _ref8.root;\n            root.ref.processProgressIndicator.spin = true;\n            root.ref.processProgressIndicator.progress = 0;\n        },\n        DID_START_ITEM_LOAD: function DID_START_ITEM_LOAD(_ref9) {\n            var root = _ref9.root;\n            root.ref.loadProgressIndicator.spin = true;\n            root.ref.loadProgressIndicator.progress = 0;\n        },\n        DID_START_ITEM_REMOVE: function DID_START_ITEM_REMOVE(_ref10) {\n            var root = _ref10.root;\n            root.ref.processProgressIndicator.spin = true;\n            root.ref.processProgressIndicator.progress = 0;\n        },\n        DID_UPDATE_ITEM_LOAD_PROGRESS: function DID_UPDATE_ITEM_LOAD_PROGRESS(_ref11) {\n            var root = _ref11.root,\n                action = _ref11.action;\n            root.ref.loadProgressIndicator.spin = false;\n            root.ref.loadProgressIndicator.progress = action.progress;\n        },\n        DID_UPDATE_ITEM_PROCESS_PROGRESS: function DID_UPDATE_ITEM_PROCESS_PROGRESS(_ref12) {\n            var root = _ref12.root,\n                action = _ref12.action;\n            root.ref.processProgressIndicator.spin = false;\n            root.ref.processProgressIndicator.progress = action.progress;\n        },\n    });\n\n    var file = createView({\n        create: create$4,\n        write: write$2,\n        didCreateView: function didCreateView(root) {\n            applyFilters('CREATE_VIEW', Object.assign({}, root, { view: root }));\n        },\n        name: 'file',\n    });\n\n    /**\n     * Creates the file view\n     */\n    var create$5 = function create(_ref) {\n        var root = _ref.root,\n            props = _ref.props;\n\n        // filename\n        root.ref.fileName = createElement$1('legend');\n        root.appendChild(root.ref.fileName);\n\n        // file appended\n        root.ref.file = root.appendChildView(root.createChildView(file, { id: props.id }));\n\n        // data has moved to data.js\n        root.ref.data = false;\n    };\n\n    /**\n     * Data storage\n     */\n    var didLoadItem = function didLoadItem(_ref2) {\n        var root = _ref2.root,\n            props = _ref2.props;\n        // updates the legend of the fieldset so screenreaders can better group buttons\n        text(root.ref.fileName, formatFilename(root.query('GET_ITEM_NAME', props.id)));\n    };\n\n    var fileWrapper = createView({\n        create: create$5,\n        ignoreRect: true,\n        write: createRoute({\n            DID_LOAD_ITEM: didLoadItem,\n        }),\n\n        didCreateView: function didCreateView(root) {\n            applyFilters('CREATE_VIEW', Object.assign({}, root, { view: root }));\n        },\n        tag: 'fieldset',\n        name: 'file-wrapper',\n    });\n\n    var PANEL_SPRING_PROPS = { type: 'spring', damping: 0.6, mass: 7 };\n\n    var create$6 = function create(_ref) {\n        var root = _ref.root,\n            props = _ref.props;\n        [\n            {\n                name: 'top',\n            },\n\n            {\n                name: 'center',\n                props: {\n                    translateY: null,\n                    scaleY: null,\n                },\n\n                mixins: {\n                    animations: {\n                        scaleY: PANEL_SPRING_PROPS,\n                    },\n\n                    styles: ['translateY', 'scaleY'],\n                },\n            },\n\n            {\n                name: 'bottom',\n                props: {\n                    translateY: null,\n                },\n\n                mixins: {\n                    animations: {\n                        translateY: PANEL_SPRING_PROPS,\n                    },\n\n                    styles: ['translateY'],\n                },\n            },\n        ].forEach(function(section) {\n            createSection(root, section, props.name);\n        });\n\n        root.element.classList.add('filepond--' + props.name);\n\n        root.ref.scalable = null;\n    };\n\n    var createSection = function createSection(root, section, className) {\n        var viewConstructor = createView({\n            name: 'panel-' + section.name + ' filepond--' + className,\n            mixins: section.mixins,\n            ignoreRectUpdate: true,\n        });\n\n        var view = root.createChildView(viewConstructor, section.props);\n\n        root.ref[section.name] = root.appendChildView(view);\n    };\n\n    var write$3 = function write(_ref2) {\n        var root = _ref2.root,\n            props = _ref2.props;\n\n        // update scalable state\n        if (root.ref.scalable === null || props.scalable !== root.ref.scalable) {\n            root.ref.scalable = isBoolean(props.scalable) ? props.scalable : true;\n            root.element.dataset.scalable = root.ref.scalable;\n        }\n\n        // no height, can't set\n        if (!props.height) return;\n\n        // get child rects\n        var topRect = root.ref.top.rect.element;\n        var bottomRect = root.ref.bottom.rect.element;\n\n        // make sure height never is smaller than bottom and top seciton heights combined (will probably never happen, but who knows)\n        var height = Math.max(topRect.height + bottomRect.height, props.height);\n\n        // offset center part\n        root.ref.center.translateY = topRect.height;\n\n        // scale center part\n        // use math ceil to prevent transparent lines because of rounding errors\n        root.ref.center.scaleY = (height - topRect.height - bottomRect.height) / 100;\n\n        // offset bottom part\n        root.ref.bottom.translateY = height - bottomRect.height;\n    };\n\n    var panel = createView({\n        name: 'panel',\n        read: function read(_ref3) {\n            var root = _ref3.root,\n                props = _ref3.props;\n            return (props.heightCurrent = root.ref.bottom.translateY);\n        },\n        write: write$3,\n        create: create$6,\n        ignoreRect: true,\n        mixins: {\n            apis: ['height', 'heightCurrent', 'scalable'],\n        },\n    });\n\n    var createDragHelper = function createDragHelper(items) {\n        var itemIds = items.map(function(item) {\n            return item.id;\n        });\n        var prevIndex = undefined;\n        return {\n            setIndex: function setIndex(index) {\n                prevIndex = index;\n            },\n            getIndex: function getIndex() {\n                return prevIndex;\n            },\n            getItemIndex: function getItemIndex(item) {\n                return itemIds.indexOf(item.id);\n            },\n        };\n    };\n\n    var ITEM_TRANSLATE_SPRING = {\n        type: 'spring',\n        stiffness: 0.75,\n        damping: 0.45,\n        mass: 10,\n    };\n\n    var ITEM_SCALE_SPRING = 'spring';\n\n    var StateMap = {\n        DID_START_ITEM_LOAD: 'busy',\n        DID_UPDATE_ITEM_LOAD_PROGRESS: 'loading',\n        DID_THROW_ITEM_INVALID: 'load-invalid',\n        DID_THROW_ITEM_LOAD_ERROR: 'load-error',\n        DID_LOAD_ITEM: 'idle',\n        DID_THROW_ITEM_REMOVE_ERROR: 'remove-error',\n        DID_START_ITEM_REMOVE: 'busy',\n        DID_START_ITEM_PROCESSING: 'busy processing',\n        DID_REQUEST_ITEM_PROCESSING: 'busy processing',\n        DID_UPDATE_ITEM_PROCESS_PROGRESS: 'processing',\n        DID_COMPLETE_ITEM_PROCESSING: 'processing-complete',\n        DID_THROW_ITEM_PROCESSING_ERROR: 'processing-error',\n        DID_THROW_ITEM_PROCESSING_REVERT_ERROR: 'processing-revert-error',\n        DID_ABORT_ITEM_PROCESSING: 'cancelled',\n        DID_REVERT_ITEM_PROCESSING: 'idle',\n    };\n\n    /**\n     * Creates the file view\n     */\n    var create$7 = function create(_ref) {\n        var root = _ref.root,\n            props = _ref.props;\n\n        // select\n        root.ref.handleClick = function(e) {\n            return root.dispatch('DID_ACTIVATE_ITEM', { id: props.id });\n        };\n\n        // set id\n        root.element.id = 'filepond--item-' + props.id;\n        root.element.addEventListener('click', root.ref.handleClick);\n\n        // file view\n        root.ref.container = root.appendChildView(\n            root.createChildView(fileWrapper, { id: props.id })\n        );\n\n        // file panel\n        root.ref.panel = root.appendChildView(root.createChildView(panel, { name: 'item-panel' }));\n\n        // default start height\n        root.ref.panel.height = null;\n\n        // by default not marked for removal\n        props.markedForRemoval = false;\n\n        // if not allowed to reorder file items, exit here\n        if (!root.query('GET_ALLOW_REORDER')) return;\n\n        // set to idle so shows grab cursor\n        root.element.dataset.dragState = 'idle';\n\n        var grab = function grab(e) {\n            if (!e.isPrimary) return;\n\n            var removedActivateListener = false;\n\n            var origin = {\n                x: e.pageX,\n                y: e.pageY,\n            };\n\n            props.dragOrigin = {\n                x: root.translateX,\n                y: root.translateY,\n            };\n\n            props.dragCenter = {\n                x: e.offsetX,\n                y: e.offsetY,\n            };\n\n            var dragState = createDragHelper(root.query('GET_ACTIVE_ITEMS'));\n\n            root.dispatch('DID_GRAB_ITEM', { id: props.id, dragState: dragState });\n\n            var drag = function drag(e) {\n                if (!e.isPrimary) return;\n\n                e.stopPropagation();\n                e.preventDefault();\n\n                props.dragOffset = {\n                    x: e.pageX - origin.x,\n                    y: e.pageY - origin.y,\n                };\n\n                // if dragged stop listening to clicks, will re-add when done dragging\n                var dist =\n                    props.dragOffset.x * props.dragOffset.x +\n                    props.dragOffset.y * props.dragOffset.y;\n                if (dist > 16 && !removedActivateListener) {\n                    removedActivateListener = true;\n                    root.element.removeEventListener('click', root.ref.handleClick);\n                }\n\n                root.dispatch('DID_DRAG_ITEM', { id: props.id, dragState: dragState });\n            };\n\n            var drop = function drop(e) {\n                if (!e.isPrimary) return;\n\n                document.removeEventListener('pointermove', drag);\n                document.removeEventListener('pointerup', drop);\n\n                props.dragOffset = {\n                    x: e.pageX - origin.x,\n                    y: e.pageY - origin.y,\n                };\n\n                root.dispatch('DID_DROP_ITEM', { id: props.id, dragState: dragState });\n\n                // start listening to clicks again\n                if (removedActivateListener) {\n                    setTimeout(function() {\n                        return root.element.addEventListener('click', root.ref.handleClick);\n                    }, 0);\n                }\n            };\n\n            document.addEventListener('pointermove', drag);\n            document.addEventListener('pointerup', drop);\n        };\n\n        root.element.addEventListener('pointerdown', grab);\n    };\n\n    var route$1 = createRoute({\n        DID_UPDATE_PANEL_HEIGHT: function DID_UPDATE_PANEL_HEIGHT(_ref2) {\n            var root = _ref2.root,\n                action = _ref2.action;\n            root.height = action.height;\n        },\n    });\n\n    var write$4 = createRoute(\n        {\n            DID_GRAB_ITEM: function DID_GRAB_ITEM(_ref3) {\n                var root = _ref3.root,\n                    props = _ref3.props;\n                props.dragOrigin = {\n                    x: root.translateX,\n                    y: root.translateY,\n                };\n            },\n            DID_DRAG_ITEM: function DID_DRAG_ITEM(_ref4) {\n                var root = _ref4.root;\n                root.element.dataset.dragState = 'drag';\n            },\n            DID_DROP_ITEM: function DID_DROP_ITEM(_ref5) {\n                var root = _ref5.root,\n                    props = _ref5.props;\n                props.dragOffset = null;\n                props.dragOrigin = null;\n                root.element.dataset.dragState = 'drop';\n            },\n        },\n        function(_ref6) {\n            var root = _ref6.root,\n                actions = _ref6.actions,\n                props = _ref6.props,\n                shouldOptimize = _ref6.shouldOptimize;\n\n            if (root.element.dataset.dragState === 'drop') {\n                if (root.scaleX <= 1) {\n                    root.element.dataset.dragState = 'idle';\n                }\n            }\n\n            // select last state change action\n            var action = actions\n                .concat()\n                .filter(function(action) {\n                    return /^DID_/.test(action.type);\n                })\n                .reverse()\n                .find(function(action) {\n                    return StateMap[action.type];\n                });\n\n            // no need to set same state twice\n            if (action && action.type !== props.currentState) {\n                // set current state\n                props.currentState = action.type;\n\n                // set state\n                root.element.dataset.filepondItemState = StateMap[props.currentState] || '';\n            }\n\n            // route actions\n            var aspectRatio =\n                root.query('GET_ITEM_PANEL_ASPECT_RATIO') || root.query('GET_PANEL_ASPECT_RATIO');\n            if (!aspectRatio) {\n                route$1({ root: root, actions: actions, props: props });\n                if (!root.height && root.ref.container.rect.element.height > 0) {\n                    root.height = root.ref.container.rect.element.height;\n                }\n            } else if (!shouldOptimize) {\n                root.height = root.rect.element.width * aspectRatio;\n            }\n\n            // sync panel height with item height\n            if (shouldOptimize) {\n                root.ref.panel.height = null;\n            }\n\n            root.ref.panel.height = root.height;\n        }\n    );\n\n    var item = createView({\n        create: create$7,\n        write: write$4,\n        destroy: function destroy(_ref7) {\n            var root = _ref7.root,\n                props = _ref7.props;\n            root.element.removeEventListener('click', root.ref.handleClick);\n            root.dispatch('RELEASE_ITEM', { query: props.id });\n        },\n        tag: 'li',\n        name: 'item',\n        mixins: {\n            apis: [\n                'id',\n                'interactionMethod',\n                'markedForRemoval',\n                'spawnDate',\n                'dragCenter',\n                'dragOrigin',\n                'dragOffset',\n            ],\n            styles: ['translateX', 'translateY', 'scaleX', 'scaleY', 'opacity', 'height'],\n\n            animations: {\n                scaleX: ITEM_SCALE_SPRING,\n                scaleY: ITEM_SCALE_SPRING,\n                translateX: ITEM_TRANSLATE_SPRING,\n                translateY: ITEM_TRANSLATE_SPRING,\n                opacity: { type: 'tween', duration: 150 },\n            },\n        },\n    });\n\n    var getItemsPerRow = function(horizontalSpace, itemWidth) {\n        // add one pixel leeway, when using percentages for item width total items can be 1.99 per row\n\n        return Math.max(1, Math.floor((horizontalSpace + 1) / itemWidth));\n    };\n\n    var getItemIndexByPosition = function getItemIndexByPosition(view, children, positionInView) {\n        if (!positionInView) return;\n\n        var horizontalSpace = view.rect.element.width;\n        // const children = view.childViews;\n        var l = children.length;\n        var last = null;\n\n        // -1, don't move items to accomodate (either add to top or bottom)\n        if (l === 0 || positionInView.top < children[0].rect.element.top) return -1;\n\n        // let's get the item width\n        var item = children[0];\n        var itemRect = item.rect.element;\n        var itemHorizontalMargin = itemRect.marginLeft + itemRect.marginRight;\n        var itemWidth = itemRect.width + itemHorizontalMargin;\n        var itemsPerRow = getItemsPerRow(horizontalSpace, itemWidth);\n\n        // stack\n        if (itemsPerRow === 1) {\n            for (var index = 0; index < l; index++) {\n                var child = children[index];\n                var childMid = child.rect.outer.top + child.rect.element.height * 0.5;\n                if (positionInView.top < childMid) {\n                    return index;\n                }\n            }\n            return l;\n        }\n\n        // grid\n        var itemVerticalMargin = itemRect.marginTop + itemRect.marginBottom;\n        var itemHeight = itemRect.height + itemVerticalMargin;\n        for (var _index = 0; _index < l; _index++) {\n            var indexX = _index % itemsPerRow;\n            var indexY = Math.floor(_index / itemsPerRow);\n\n            var offsetX = indexX * itemWidth;\n            var offsetY = indexY * itemHeight;\n\n            var itemTop = offsetY - itemRect.marginTop;\n            var itemRight = offsetX + itemWidth;\n            var itemBottom = offsetY + itemHeight + itemRect.marginBottom;\n\n            if (positionInView.top < itemBottom && positionInView.top > itemTop) {\n                if (positionInView.left < itemRight) {\n                    return _index;\n                } else if (_index !== l - 1) {\n                    last = _index;\n                } else {\n                    last = null;\n                }\n            }\n        }\n\n        if (last !== null) {\n            return last;\n        }\n\n        return l;\n    };\n\n    var dropAreaDimensions = {\n        height: 0,\n        width: 0,\n        get getHeight() {\n            return this.height;\n        },\n        set setHeight(val) {\n            if (this.height === 0 || val === 0) this.height = val;\n        },\n        get getWidth() {\n            return this.width;\n        },\n        set setWidth(val) {\n            if (this.width === 0 || val === 0) this.width = val;\n        },\n        setDimensions: function setDimensions(height, width) {\n            if (this.height === 0 || height === 0) this.height = height;\n            if (this.width === 0 || width === 0) this.width = width;\n        },\n    };\n\n    var create$8 = function create(_ref) {\n        var root = _ref.root;\n        // need to set role to list as otherwise it won't be read as a list by VoiceOver\n        attr(root.element, 'role', 'list');\n\n        root.ref.lastItemSpanwDate = Date.now();\n    };\n\n    /**\n     * Inserts a new item\n     * @param root\n     * @param action\n     */\n    var addItemView = function addItemView(_ref2) {\n        var root = _ref2.root,\n            action = _ref2.action;\n        var id = action.id,\n            index = action.index,\n            interactionMethod = action.interactionMethod;\n\n        root.ref.addIndex = index;\n\n        var now = Date.now();\n        var spawnDate = now;\n        var opacity = 1;\n\n        if (interactionMethod !== InteractionMethod.NONE) {\n            opacity = 0;\n            var cooldown = root.query('GET_ITEM_INSERT_INTERVAL');\n            var dist = now - root.ref.lastItemSpanwDate;\n            spawnDate = dist < cooldown ? now + (cooldown - dist) : now;\n        }\n\n        root.ref.lastItemSpanwDate = spawnDate;\n\n        root.appendChildView(\n            root.createChildView(\n                // view type\n                item,\n\n                // props\n                {\n                    spawnDate: spawnDate,\n                    id: id,\n                    opacity: opacity,\n                    interactionMethod: interactionMethod,\n                }\n            ),\n\n            index\n        );\n    };\n\n    var moveItem = function moveItem(item, x, y) {\n        var vx = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n        var vy = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\n        // set to null to remove animation while dragging\n        if (item.dragOffset) {\n            item.translateX = null;\n            item.translateY = null;\n            item.translateX = item.dragOrigin.x + item.dragOffset.x;\n            item.translateY = item.dragOrigin.y + item.dragOffset.y;\n            item.scaleX = 1.025;\n            item.scaleY = 1.025;\n        } else {\n            item.translateX = x;\n            item.translateY = y;\n\n            if (Date.now() > item.spawnDate) {\n                // reveal element\n                if (item.opacity === 0) {\n                    introItemView(item, x, y, vx, vy);\n                }\n\n                // make sure is default scale every frame\n                item.scaleX = 1;\n                item.scaleY = 1;\n                item.opacity = 1;\n            }\n        }\n    };\n\n    var introItemView = function introItemView(item, x, y, vx, vy) {\n        if (item.interactionMethod === InteractionMethod.NONE) {\n            item.translateX = null;\n            item.translateX = x;\n            item.translateY = null;\n            item.translateY = y;\n        } else if (item.interactionMethod === InteractionMethod.DROP) {\n            item.translateX = null;\n            item.translateX = x - vx * 20;\n\n            item.translateY = null;\n            item.translateY = y - vy * 10;\n\n            item.scaleX = 0.8;\n            item.scaleY = 0.8;\n        } else if (item.interactionMethod === InteractionMethod.BROWSE) {\n            item.translateY = null;\n            item.translateY = y - 30;\n        } else if (item.interactionMethod === InteractionMethod.API) {\n            item.translateX = null;\n            item.translateX = x - 30;\n            item.translateY = null;\n        }\n    };\n\n    /**\n     * Removes an existing item\n     * @param root\n     * @param action\n     */\n    var removeItemView = function removeItemView(_ref3) {\n        var root = _ref3.root,\n            action = _ref3.action;\n        var id = action.id;\n\n        // get the view matching the given id\n        var view = root.childViews.find(function(child) {\n            return child.id === id;\n        });\n\n        // if no view found, exit\n        if (!view) {\n            return;\n        }\n\n        // animate view out of view\n        view.scaleX = 0.9;\n        view.scaleY = 0.9;\n        view.opacity = 0;\n\n        // mark for removal\n        view.markedForRemoval = true;\n    };\n\n    var getItemHeight = function getItemHeight(child) {\n        return (\n            child.rect.element.height +\n            child.rect.element.marginBottom * 0.5 +\n            child.rect.element.marginTop * 0.5\n        );\n    };\n    var getItemWidth = function getItemWidth(child) {\n        return (\n            child.rect.element.width +\n            child.rect.element.marginLeft * 0.5 +\n            child.rect.element.marginRight * 0.5\n        );\n    };\n\n    var dragItem = function dragItem(_ref4) {\n        var root = _ref4.root,\n            action = _ref4.action;\n        var id = action.id,\n            dragState = action.dragState;\n\n        // reference to item\n        var item = root.query('GET_ITEM', { id: id });\n\n        // get the view matching the given id\n        var view = root.childViews.find(function(child) {\n            return child.id === id;\n        });\n\n        var numItems = root.childViews.length;\n        var oldIndex = dragState.getItemIndex(item);\n\n        // if no view found, exit\n        if (!view) return;\n\n        var dragPosition = {\n            x: view.dragOrigin.x + view.dragOffset.x + view.dragCenter.x,\n            y: view.dragOrigin.y + view.dragOffset.y + view.dragCenter.y,\n        };\n\n        // get drag area dimensions\n        var dragHeight = getItemHeight(view);\n        var dragWidth = getItemWidth(view);\n\n        // get rows and columns (There will always be at least one row and one column if a file is present)\n        var cols = Math.floor(root.rect.outer.width / dragWidth);\n        if (cols > numItems) cols = numItems;\n\n        // rows are used to find when we have left the preview area bounding box\n        var rows = Math.floor(numItems / cols + 1);\n\n        dropAreaDimensions.setHeight = dragHeight * rows;\n        dropAreaDimensions.setWidth = dragWidth * cols;\n\n        // get new index of dragged item\n        var location = {\n            y: Math.floor(dragPosition.y / dragHeight),\n            x: Math.floor(dragPosition.x / dragWidth),\n            getGridIndex: function getGridIndex() {\n                if (\n                    dragPosition.y > dropAreaDimensions.getHeight ||\n                    dragPosition.y < 0 ||\n                    dragPosition.x > dropAreaDimensions.getWidth ||\n                    dragPosition.x < 0\n                )\n                    return oldIndex;\n                return this.y * cols + this.x;\n            },\n            getColIndex: function getColIndex() {\n                var items = root.query('GET_ACTIVE_ITEMS');\n                var visibleChildren = root.childViews.filter(function(child) {\n                    return child.rect.element.height;\n                });\n                var children = items.map(function(item) {\n                    return visibleChildren.find(function(childView) {\n                        return childView.id === item.id;\n                    });\n                });\n\n                var currentIndex = children.findIndex(function(child) {\n                    return child === view;\n                });\n                var dragHeight = getItemHeight(view);\n                var l = children.length;\n                var idx = l;\n                var childHeight = 0;\n                var childBottom = 0;\n                var childTop = 0;\n                for (var i = 0; i < l; i++) {\n                    childHeight = getItemHeight(children[i]);\n                    childTop = childBottom;\n                    childBottom = childTop + childHeight;\n                    if (dragPosition.y < childBottom) {\n                        if (currentIndex > i) {\n                            if (dragPosition.y < childTop + dragHeight) {\n                                idx = i;\n                                break;\n                            }\n                            continue;\n                        }\n                        idx = i;\n                        break;\n                    }\n                }\n                return idx;\n            },\n        };\n\n        // get new index\n        var index = cols > 1 ? location.getGridIndex() : location.getColIndex();\n        root.dispatch('MOVE_ITEM', { query: view, index: index });\n\n        // if the index of the item changed, dispatch reorder action\n        var currentIndex = dragState.getIndex();\n\n        if (currentIndex === undefined || currentIndex !== index) {\n            dragState.setIndex(index);\n\n            if (currentIndex === undefined) return;\n\n            root.dispatch('DID_REORDER_ITEMS', {\n                items: root.query('GET_ACTIVE_ITEMS'),\n                origin: oldIndex,\n                target: index,\n            });\n        }\n    };\n\n    /**\n     * Setup action routes\n     */\n    var route$2 = createRoute({\n        DID_ADD_ITEM: addItemView,\n        DID_REMOVE_ITEM: removeItemView,\n        DID_DRAG_ITEM: dragItem,\n    });\n\n    /**\n     * Write to view\n     * @param root\n     * @param actions\n     * @param props\n     */\n    var write$5 = function write(_ref5) {\n        var root = _ref5.root,\n            props = _ref5.props,\n            actions = _ref5.actions,\n            shouldOptimize = _ref5.shouldOptimize;\n        // route actions\n        route$2({ root: root, props: props, actions: actions });\n        var dragCoordinates = props.dragCoordinates;\n\n        // available space on horizontal axis\n        var horizontalSpace = root.rect.element.width;\n\n        // only draw children that have dimensions\n        var visibleChildren = root.childViews.filter(function(child) {\n            return child.rect.element.height;\n        });\n\n        // sort based on current active items\n        var children = root\n            .query('GET_ACTIVE_ITEMS')\n            .map(function(item) {\n                return visibleChildren.find(function(child) {\n                    return child.id === item.id;\n                });\n            })\n            .filter(function(item) {\n                return item;\n            });\n\n        // get index\n        var dragIndex = dragCoordinates\n            ? getItemIndexByPosition(root, children, dragCoordinates)\n            : null;\n\n        // add index is used to reserve the dropped/added item index till the actual item is rendered\n        var addIndex = root.ref.addIndex || null;\n\n        // add index no longer needed till possibly next draw\n        root.ref.addIndex = null;\n\n        var dragIndexOffset = 0;\n        var removeIndexOffset = 0;\n        var addIndexOffset = 0;\n\n        if (children.length === 0) return;\n\n        var childRect = children[0].rect.element;\n        var itemVerticalMargin = childRect.marginTop + childRect.marginBottom;\n        var itemHorizontalMargin = childRect.marginLeft + childRect.marginRight;\n        var itemWidth = childRect.width + itemHorizontalMargin;\n        var itemHeight = childRect.height + itemVerticalMargin;\n        var itemsPerRow = getItemsPerRow(horizontalSpace, itemWidth);\n\n        // stack\n        if (itemsPerRow === 1) {\n            var offsetY = 0;\n            var dragOffset = 0;\n\n            children.forEach(function(child, index) {\n                if (dragIndex) {\n                    var dist = index - dragIndex;\n                    if (dist === -2) {\n                        dragOffset = -itemVerticalMargin * 0.25;\n                    } else if (dist === -1) {\n                        dragOffset = -itemVerticalMargin * 0.75;\n                    } else if (dist === 0) {\n                        dragOffset = itemVerticalMargin * 0.75;\n                    } else if (dist === 1) {\n                        dragOffset = itemVerticalMargin * 0.25;\n                    } else {\n                        dragOffset = 0;\n                    }\n                }\n\n                if (shouldOptimize) {\n                    child.translateX = null;\n                    child.translateY = null;\n                }\n\n                if (!child.markedForRemoval) {\n                    moveItem(child, 0, offsetY + dragOffset);\n                }\n\n                var itemHeight = child.rect.element.height + itemVerticalMargin;\n\n                var visualHeight = itemHeight * (child.markedForRemoval ? child.opacity : 1);\n\n                offsetY += visualHeight;\n            });\n        }\n        // grid\n        else {\n            var prevX = 0;\n            var prevY = 0;\n\n            children.forEach(function(child, index) {\n                if (index === dragIndex) {\n                    dragIndexOffset = 1;\n                }\n\n                if (index === addIndex) {\n                    addIndexOffset += 1;\n                }\n\n                if (child.markedForRemoval && child.opacity < 0.5) {\n                    removeIndexOffset -= 1;\n                }\n\n                var visualIndex = index + addIndexOffset + dragIndexOffset + removeIndexOffset;\n\n                var indexX = visualIndex % itemsPerRow;\n                var indexY = Math.floor(visualIndex / itemsPerRow);\n\n                var offsetX = indexX * itemWidth;\n                var offsetY = indexY * itemHeight;\n\n                var vectorX = Math.sign(offsetX - prevX);\n                var vectorY = Math.sign(offsetY - prevY);\n\n                prevX = offsetX;\n                prevY = offsetY;\n\n                if (child.markedForRemoval) return;\n\n                if (shouldOptimize) {\n                    child.translateX = null;\n                    child.translateY = null;\n                }\n\n                moveItem(child, offsetX, offsetY, vectorX, vectorY);\n            });\n        }\n    };\n\n    /**\n     * Filters actions that are meant specifically for a certain child of the list\n     * @param child\n     * @param actions\n     */\n    var filterSetItemActions = function filterSetItemActions(child, actions) {\n        return actions.filter(function(action) {\n            // if action has an id, filter out actions that don't have this child id\n            if (action.data && action.data.id) {\n                return child.id === action.data.id;\n            }\n\n            // allow all other actions\n            return true;\n        });\n    };\n\n    var list = createView({\n        create: create$8,\n        write: write$5,\n        tag: 'ul',\n        name: 'list',\n        didWriteView: function didWriteView(_ref6) {\n            var root = _ref6.root;\n            root.childViews\n                .filter(function(view) {\n                    return view.markedForRemoval && view.opacity === 0 && view.resting;\n                })\n                .forEach(function(view) {\n                    view._destroy();\n                    root.removeChildView(view);\n                });\n        },\n        filterFrameActionsForChild: filterSetItemActions,\n        mixins: {\n            apis: ['dragCoordinates'],\n        },\n    });\n\n    var create$9 = function create(_ref) {\n        var root = _ref.root,\n            props = _ref.props;\n        root.ref.list = root.appendChildView(root.createChildView(list));\n        props.dragCoordinates = null;\n        props.overflowing = false;\n    };\n\n    var storeDragCoordinates = function storeDragCoordinates(_ref2) {\n        var root = _ref2.root,\n            props = _ref2.props,\n            action = _ref2.action;\n        if (!root.query('GET_ITEM_INSERT_LOCATION_FREEDOM')) return;\n        props.dragCoordinates = {\n            left: action.position.scopeLeft - root.ref.list.rect.element.left,\n            top:\n                action.position.scopeTop -\n                (root.rect.outer.top + root.rect.element.marginTop + root.rect.element.scrollTop),\n        };\n    };\n\n    var clearDragCoordinates = function clearDragCoordinates(_ref3) {\n        var props = _ref3.props;\n        props.dragCoordinates = null;\n    };\n\n    var route$3 = createRoute({\n        DID_DRAG: storeDragCoordinates,\n        DID_END_DRAG: clearDragCoordinates,\n    });\n\n    var write$6 = function write(_ref4) {\n        var root = _ref4.root,\n            props = _ref4.props,\n            actions = _ref4.actions;\n\n        // route actions\n        route$3({ root: root, props: props, actions: actions });\n\n        // current drag position\n        root.ref.list.dragCoordinates = props.dragCoordinates;\n\n        // if currently overflowing but no longer received overflow\n        if (props.overflowing && !props.overflow) {\n            props.overflowing = false;\n\n            // reset overflow state\n            root.element.dataset.state = '';\n            root.height = null;\n        }\n\n        // if is not overflowing currently but does receive overflow value\n        if (props.overflow) {\n            var newHeight = Math.round(props.overflow);\n            if (newHeight !== root.height) {\n                props.overflowing = true;\n                root.element.dataset.state = 'overflow';\n                root.height = newHeight;\n            }\n        }\n    };\n\n    var listScroller = createView({\n        create: create$9,\n        write: write$6,\n        name: 'list-scroller',\n        mixins: {\n            apis: ['overflow', 'dragCoordinates'],\n            styles: ['height', 'translateY'],\n            animations: {\n                translateY: 'spring',\n            },\n        },\n    });\n\n    var attrToggle = function attrToggle(element, name, state) {\n        var enabledValue = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : '';\n        if (state) {\n            attr(element, name, enabledValue);\n        } else {\n            element.removeAttribute(name);\n        }\n    };\n\n    var resetFileInput = function resetFileInput(input) {\n        // no value, no need to reset\n        if (!input || input.value === '') {\n            return;\n        }\n\n        try {\n            // for modern browsers\n            input.value = '';\n        } catch (err) {}\n\n        // for IE10\n        if (input.value) {\n            // quickly append input to temp form and reset form\n            var form = createElement$1('form');\n            var parentNode = input.parentNode;\n            var ref = input.nextSibling;\n            form.appendChild(input);\n            form.reset();\n\n            // re-inject input where it originally was\n            if (ref) {\n                parentNode.insertBefore(input, ref);\n            } else {\n                parentNode.appendChild(input);\n            }\n        }\n    };\n\n    var create$a = function create(_ref) {\n        var root = _ref.root,\n            props = _ref.props;\n\n        // set id so can be referenced from outside labels\n        root.element.id = 'filepond--browser-' + props.id;\n\n        // set name of element (is removed when a value is set)\n        attr(root.element, 'name', root.query('GET_NAME'));\n\n        // we have to link this element to the status element\n        attr(root.element, 'aria-controls', 'filepond--assistant-' + props.id);\n\n        // set label, we use labelled by as otherwise the screenreader does not read the \"browse\" text in the label (as it has tabindex: 0)\n        attr(root.element, 'aria-labelledby', 'filepond--drop-label-' + props.id);\n\n        // set configurable props\n        setAcceptedFileTypes({\n            root: root,\n            action: { value: root.query('GET_ACCEPTED_FILE_TYPES') },\n        });\n        toggleAllowMultiple({ root: root, action: { value: root.query('GET_ALLOW_MULTIPLE') } });\n        toggleDirectoryFilter({\n            root: root,\n            action: { value: root.query('GET_ALLOW_DIRECTORIES_ONLY') },\n        });\n        toggleDisabled({ root: root });\n        toggleRequired({ root: root, action: { value: root.query('GET_REQUIRED') } });\n        setCaptureMethod({ root: root, action: { value: root.query('GET_CAPTURE_METHOD') } });\n\n        // handle changes to the input field\n        root.ref.handleChange = function(e) {\n            if (!root.element.value) {\n                return;\n            }\n\n            // extract files and move value of webkitRelativePath path to _relativePath\n            var files = Array.from(root.element.files).map(function(file) {\n                file._relativePath = file.webkitRelativePath;\n                return file;\n            });\n\n            // we add a little delay so the OS file select window can move out of the way before we add our file\n            setTimeout(function() {\n                // load files\n                props.onload(files);\n\n                // reset input, it's just for exposing a method to drop files, should not retain any state\n                resetFileInput(root.element);\n            }, 250);\n        };\n\n        root.element.addEventListener('change', root.ref.handleChange);\n    };\n\n    var setAcceptedFileTypes = function setAcceptedFileTypes(_ref2) {\n        var root = _ref2.root,\n            action = _ref2.action;\n        if (!root.query('GET_ALLOW_SYNC_ACCEPT_ATTRIBUTE')) return;\n        attrToggle(\n            root.element,\n            'accept',\n            !!action.value,\n            action.value ? action.value.join(',') : ''\n        );\n    };\n\n    var toggleAllowMultiple = function toggleAllowMultiple(_ref3) {\n        var root = _ref3.root,\n            action = _ref3.action;\n        attrToggle(root.element, 'multiple', action.value);\n    };\n\n    var toggleDirectoryFilter = function toggleDirectoryFilter(_ref4) {\n        var root = _ref4.root,\n            action = _ref4.action;\n        attrToggle(root.element, 'webkitdirectory', action.value);\n    };\n\n    var toggleDisabled = function toggleDisabled(_ref5) {\n        var root = _ref5.root;\n        var isDisabled = root.query('GET_DISABLED');\n        var doesAllowBrowse = root.query('GET_ALLOW_BROWSE');\n        var disableField = isDisabled || !doesAllowBrowse;\n        attrToggle(root.element, 'disabled', disableField);\n    };\n\n    var toggleRequired = function toggleRequired(_ref6) {\n        var root = _ref6.root,\n            action = _ref6.action;\n        // want to remove required, always possible\n        if (!action.value) {\n            attrToggle(root.element, 'required', false);\n        }\n        // if want to make required, only possible when zero items\n        else if (root.query('GET_TOTAL_ITEMS') === 0) {\n            attrToggle(root.element, 'required', true);\n        }\n    };\n\n    var setCaptureMethod = function setCaptureMethod(_ref7) {\n        var root = _ref7.root,\n            action = _ref7.action;\n        attrToggle(\n            root.element,\n            'capture',\n            !!action.value,\n            action.value === true ? '' : action.value\n        );\n    };\n\n    var updateRequiredStatus = function updateRequiredStatus(_ref8) {\n        var root = _ref8.root;\n        var element = root.element;\n        // always remove the required attribute when more than zero items\n        if (root.query('GET_TOTAL_ITEMS') > 0) {\n            attrToggle(element, 'required', false);\n            attrToggle(element, 'name', false);\n        } else {\n            // add name attribute\n            attrToggle(element, 'name', true, root.query('GET_NAME'));\n\n            // remove any validation messages\n            var shouldCheckValidity = root.query('GET_CHECK_VALIDITY');\n            if (shouldCheckValidity) {\n                element.setCustomValidity('');\n            }\n\n            // we only add required if the field has been deemed required\n            if (root.query('GET_REQUIRED')) {\n                attrToggle(element, 'required', true);\n            }\n        }\n    };\n\n    var updateFieldValidityStatus = function updateFieldValidityStatus(_ref9) {\n        var root = _ref9.root;\n        var shouldCheckValidity = root.query('GET_CHECK_VALIDITY');\n        if (!shouldCheckValidity) return;\n        root.element.setCustomValidity(root.query('GET_LABEL_INVALID_FIELD'));\n    };\n\n    var browser = createView({\n        tag: 'input',\n        name: 'browser',\n        ignoreRect: true,\n        ignoreRectUpdate: true,\n        attributes: {\n            type: 'file',\n        },\n\n        create: create$a,\n        destroy: function destroy(_ref10) {\n            var root = _ref10.root;\n            root.element.removeEventListener('change', root.ref.handleChange);\n        },\n        write: createRoute({\n            DID_LOAD_ITEM: updateRequiredStatus,\n            DID_REMOVE_ITEM: updateRequiredStatus,\n            DID_THROW_ITEM_INVALID: updateFieldValidityStatus,\n\n            DID_SET_DISABLED: toggleDisabled,\n            DID_SET_ALLOW_BROWSE: toggleDisabled,\n            DID_SET_ALLOW_DIRECTORIES_ONLY: toggleDirectoryFilter,\n            DID_SET_ALLOW_MULTIPLE: toggleAllowMultiple,\n            DID_SET_ACCEPTED_FILE_TYPES: setAcceptedFileTypes,\n            DID_SET_CAPTURE_METHOD: setCaptureMethod,\n            DID_SET_REQUIRED: toggleRequired,\n        }),\n    });\n\n    var Key = {\n        ENTER: 13,\n        SPACE: 32,\n    };\n\n    var create$b = function create(_ref) {\n        var root = _ref.root,\n            props = _ref.props;\n\n        // create the label and link it to the file browser\n        var label = createElement$1('label');\n        attr(label, 'for', 'filepond--browser-' + props.id);\n\n        // use for labeling file input (aria-labelledby on file input)\n        attr(label, 'id', 'filepond--drop-label-' + props.id);\n\n        // hide the label for screenreaders, the input element will read the contents of the label when it's focussed. If we don't set aria-hidden the screenreader will also navigate the contents of the label separately from the input.\n        attr(label, 'aria-hidden', 'true');\n\n        // handle keys\n        root.ref.handleKeyDown = function(e) {\n            var isActivationKey = e.keyCode === Key.ENTER || e.keyCode === Key.SPACE;\n            if (!isActivationKey) return;\n            // stops from triggering the element a second time\n            e.preventDefault();\n\n            // click link (will then in turn activate file input)\n            root.ref.label.click();\n        };\n\n        root.ref.handleClick = function(e) {\n            var isLabelClick = e.target === label || label.contains(e.target);\n\n            // don't want to click twice\n            if (isLabelClick) return;\n\n            // click link (will then in turn activate file input)\n            root.ref.label.click();\n        };\n\n        // attach events\n        label.addEventListener('keydown', root.ref.handleKeyDown);\n        root.element.addEventListener('click', root.ref.handleClick);\n\n        // update\n        updateLabelValue(label, props.caption);\n\n        // add!\n        root.appendChild(label);\n        root.ref.label = label;\n    };\n\n    var updateLabelValue = function updateLabelValue(label, value) {\n        label.innerHTML = value;\n        var clickable = label.querySelector('.filepond--label-action');\n        if (clickable) {\n            attr(clickable, 'tabindex', '0');\n        }\n        return value;\n    };\n\n    var dropLabel = createView({\n        name: 'drop-label',\n        ignoreRect: true,\n        create: create$b,\n        destroy: function destroy(_ref2) {\n            var root = _ref2.root;\n            root.ref.label.addEventListener('keydown', root.ref.handleKeyDown);\n            root.element.removeEventListener('click', root.ref.handleClick);\n        },\n        write: createRoute({\n            DID_SET_LABEL_IDLE: function DID_SET_LABEL_IDLE(_ref3) {\n                var root = _ref3.root,\n                    action = _ref3.action;\n                updateLabelValue(root.ref.label, action.value);\n            },\n        }),\n\n        mixins: {\n            styles: ['opacity', 'translateX', 'translateY'],\n            animations: {\n                opacity: { type: 'tween', duration: 150 },\n                translateX: 'spring',\n                translateY: 'spring',\n            },\n        },\n    });\n\n    var blob = createView({\n        name: 'drip-blob',\n        ignoreRect: true,\n        mixins: {\n            styles: ['translateX', 'translateY', 'scaleX', 'scaleY', 'opacity'],\n            animations: {\n                scaleX: 'spring',\n                scaleY: 'spring',\n                translateX: 'spring',\n                translateY: 'spring',\n                opacity: { type: 'tween', duration: 250 },\n            },\n        },\n    });\n\n    var addBlob = function addBlob(_ref) {\n        var root = _ref.root;\n        var centerX = root.rect.element.width * 0.5;\n        var centerY = root.rect.element.height * 0.5;\n\n        root.ref.blob = root.appendChildView(\n            root.createChildView(blob, {\n                opacity: 0,\n                scaleX: 2.5,\n                scaleY: 2.5,\n                translateX: centerX,\n                translateY: centerY,\n            })\n        );\n    };\n\n    var moveBlob = function moveBlob(_ref2) {\n        var root = _ref2.root,\n            action = _ref2.action;\n        if (!root.ref.blob) {\n            addBlob({ root: root });\n            return;\n        }\n\n        root.ref.blob.translateX = action.position.scopeLeft;\n        root.ref.blob.translateY = action.position.scopeTop;\n        root.ref.blob.scaleX = 1;\n        root.ref.blob.scaleY = 1;\n        root.ref.blob.opacity = 1;\n    };\n\n    var hideBlob = function hideBlob(_ref3) {\n        var root = _ref3.root;\n        if (!root.ref.blob) {\n            return;\n        }\n        root.ref.blob.opacity = 0;\n    };\n\n    var explodeBlob = function explodeBlob(_ref4) {\n        var root = _ref4.root;\n        if (!root.ref.blob) {\n            return;\n        }\n        root.ref.blob.scaleX = 2.5;\n        root.ref.blob.scaleY = 2.5;\n        root.ref.blob.opacity = 0;\n    };\n\n    var write$7 = function write(_ref5) {\n        var root = _ref5.root,\n            props = _ref5.props,\n            actions = _ref5.actions;\n        route$4({ root: root, props: props, actions: actions });\n        var blob = root.ref.blob;\n\n        if (actions.length === 0 && blob && blob.opacity === 0) {\n            root.removeChildView(blob);\n            root.ref.blob = null;\n        }\n    };\n\n    var route$4 = createRoute({\n        DID_DRAG: moveBlob,\n        DID_DROP: explodeBlob,\n        DID_END_DRAG: hideBlob,\n    });\n\n    var drip = createView({\n        ignoreRect: true,\n        ignoreRectUpdate: true,\n        name: 'drip',\n        write: write$7,\n    });\n\n    var setInputFiles = function setInputFiles(element, files) {\n        try {\n            // Create a DataTransfer instance and add a newly created file\n            var dataTransfer = new DataTransfer();\n            files.forEach(function(file) {\n                if (file instanceof File) {\n                    dataTransfer.items.add(file);\n                } else {\n                    dataTransfer.items.add(\n                        new File([file], file.name, {\n                            type: file.type,\n                        })\n                    );\n                }\n            });\n\n            // Assign the DataTransfer files list to the file input\n            element.files = dataTransfer.files;\n        } catch (err) {\n            return false;\n        }\n        return true;\n    };\n\n    var create$c = function create(_ref) {\n        var root = _ref.root;\n        return (root.ref.fields = {});\n    };\n\n    var getField = function getField(root, id) {\n        return root.ref.fields[id];\n    };\n\n    var syncFieldPositionsWithItems = function syncFieldPositionsWithItems(root) {\n        root.query('GET_ACTIVE_ITEMS').forEach(function(item) {\n            if (!root.ref.fields[item.id]) return;\n            root.element.appendChild(root.ref.fields[item.id]);\n        });\n    };\n\n    var didReorderItems = function didReorderItems(_ref2) {\n        var root = _ref2.root;\n        return syncFieldPositionsWithItems(root);\n    };\n\n    var didAddItem = function didAddItem(_ref3) {\n        var root = _ref3.root,\n            action = _ref3.action;\n        var fileItem = root.query('GET_ITEM', action.id);\n        var isLocalFile = fileItem.origin === FileOrigin.LOCAL;\n        var shouldUseFileInput = !isLocalFile && root.query('SHOULD_UPDATE_FILE_INPUT');\n        var dataContainer = createElement$1('input');\n        dataContainer.type = shouldUseFileInput ? 'file' : 'hidden';\n        dataContainer.name = root.query('GET_NAME');\n        dataContainer.disabled = root.query('GET_DISABLED');\n        root.ref.fields[action.id] = dataContainer;\n        syncFieldPositionsWithItems(root);\n    };\n\n    var didLoadItem$1 = function didLoadItem(_ref4) {\n        var root = _ref4.root,\n            action = _ref4.action;\n        var field = getField(root, action.id);\n        if (!field) return;\n\n        // store server ref in hidden input\n        if (action.serverFileReference !== null) field.value = action.serverFileReference;\n\n        // store file item in file input\n        if (!root.query('SHOULD_UPDATE_FILE_INPUT')) return;\n\n        var fileItem = root.query('GET_ITEM', action.id);\n        setInputFiles(field, [fileItem.file]);\n    };\n\n    var didPrepareOutput = function didPrepareOutput(_ref5) {\n        var root = _ref5.root,\n            action = _ref5.action;\n        // this timeout pushes the handler after 'load'\n        if (!root.query('SHOULD_UPDATE_FILE_INPUT')) return;\n        setTimeout(function() {\n            var field = getField(root, action.id);\n            if (!field) return;\n            setInputFiles(field, [action.file]);\n        }, 0);\n    };\n\n    var didSetDisabled = function didSetDisabled(_ref6) {\n        var root = _ref6.root;\n        root.element.disabled = root.query('GET_DISABLED');\n    };\n\n    var didRemoveItem = function didRemoveItem(_ref7) {\n        var root = _ref7.root,\n            action = _ref7.action;\n        var field = getField(root, action.id);\n        if (!field) return;\n        if (field.parentNode) field.parentNode.removeChild(field);\n        delete root.ref.fields[action.id];\n    };\n\n    // only runs for server files. will refuse to update the value if the field\n    // is a file field\n    var didDefineValue = function didDefineValue(_ref8) {\n        var root = _ref8.root,\n            action = _ref8.action;\n        var field = getField(root, action.id);\n        if (!field) return;\n        if (action.value === null) {\n            // clear field value\n            field.removeAttribute('value');\n        } else {\n            // set field value\n            if (field.type != 'file') {\n                field.value = action.value;\n            }\n        }\n        syncFieldPositionsWithItems(root);\n    };\n\n    var write$8 = createRoute({\n        DID_SET_DISABLED: didSetDisabled,\n        DID_ADD_ITEM: didAddItem,\n        DID_LOAD_ITEM: didLoadItem$1,\n        DID_REMOVE_ITEM: didRemoveItem,\n        DID_DEFINE_VALUE: didDefineValue,\n        DID_PREPARE_OUTPUT: didPrepareOutput,\n        DID_REORDER_ITEMS: didReorderItems,\n        DID_SORT_ITEMS: didReorderItems,\n    });\n\n    var data = createView({\n        tag: 'fieldset',\n        name: 'data',\n        create: create$c,\n        write: write$8,\n        ignoreRect: true,\n    });\n\n    var getRootNode = function getRootNode(element) {\n        return 'getRootNode' in element ? element.getRootNode() : document;\n    };\n\n    var images = ['jpg', 'jpeg', 'png', 'gif', 'bmp', 'webp', 'svg', 'tiff'];\n    var text$1 = ['css', 'csv', 'html', 'txt'];\n    var map = {\n        zip: 'zip|compressed',\n        epub: 'application/epub+zip',\n    };\n\n    var guesstimateMimeType = function guesstimateMimeType() {\n        var extension = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n        extension = extension.toLowerCase();\n        if (images.includes(extension)) {\n            return (\n                'image/' +\n                (extension === 'jpg' ? 'jpeg' : extension === 'svg' ? 'svg+xml' : extension)\n            );\n        }\n        if (text$1.includes(extension)) {\n            return 'text/' + extension;\n        }\n\n        return map[extension] || '';\n    };\n\n    var requestDataTransferItems = function requestDataTransferItems(dataTransfer) {\n        return new Promise(function(resolve, reject) {\n            // try to get links from transfer, if found we'll exit immediately (unless a file is in the dataTransfer as well, this is because Firefox could represent the file as a URL and a file object at the same time)\n            var links = getLinks(dataTransfer);\n            if (links.length && !hasFiles(dataTransfer)) {\n                return resolve(links);\n            }\n            // try to get files from the transfer\n            getFiles(dataTransfer).then(resolve);\n        });\n    };\n\n    /**\n     * Test if datatransfer has files\n     */\n    var hasFiles = function hasFiles(dataTransfer) {\n        if (dataTransfer.files) return dataTransfer.files.length > 0;\n        return false;\n    };\n\n    /**\n     * Extracts files from a DataTransfer object\n     */\n    var getFiles = function getFiles(dataTransfer) {\n        return new Promise(function(resolve, reject) {\n            // get the transfer items as promises\n            var promisedFiles = (dataTransfer.items ? Array.from(dataTransfer.items) : [])\n                // only keep file system items (files and directories)\n                .filter(function(item) {\n                    return isFileSystemItem(item);\n                })\n\n                // map each item to promise\n                .map(function(item) {\n                    return getFilesFromItem(item);\n                });\n\n            // if is empty, see if we can extract some info from the files property as a fallback\n            if (!promisedFiles.length) {\n                // TODO: test for directories (should not be allowed)\n                // Use FileReader, problem is that the files property gets lost in the process\n                resolve(dataTransfer.files ? Array.from(dataTransfer.files) : []);\n                return;\n            }\n\n            // done!\n            Promise.all(promisedFiles)\n                .then(function(returnedFileGroups) {\n                    // flatten groups\n                    var files = [];\n                    returnedFileGroups.forEach(function(group) {\n                        files.push.apply(files, group);\n                    });\n\n                    // done (filter out empty files)!\n                    resolve(\n                        files\n                            .filter(function(file) {\n                                return file;\n                            })\n                            .map(function(file) {\n                                if (!file._relativePath)\n                                    file._relativePath = file.webkitRelativePath;\n                                return file;\n                            })\n                    );\n                })\n                .catch(console.error);\n        });\n    };\n\n    var isFileSystemItem = function isFileSystemItem(item) {\n        if (isEntry(item)) {\n            var entry = getAsEntry(item);\n            if (entry) {\n                return entry.isFile || entry.isDirectory;\n            }\n        }\n        return item.kind === 'file';\n    };\n\n    var getFilesFromItem = function getFilesFromItem(item) {\n        return new Promise(function(resolve, reject) {\n            if (isDirectoryEntry(item)) {\n                getFilesInDirectory(getAsEntry(item))\n                    .then(resolve)\n                    .catch(reject);\n                return;\n            }\n\n            resolve([item.getAsFile()]);\n        });\n    };\n\n    var getFilesInDirectory = function getFilesInDirectory(entry) {\n        return new Promise(function(resolve, reject) {\n            var files = [];\n\n            // the total entries to read\n            var dirCounter = 0;\n            var fileCounter = 0;\n\n            var resolveIfDone = function resolveIfDone() {\n                if (fileCounter === 0 && dirCounter === 0) {\n                    resolve(files);\n                }\n            };\n\n            // the recursive function\n            var readEntries = function readEntries(dirEntry) {\n                dirCounter++;\n\n                var directoryReader = dirEntry.createReader();\n\n                // directories are returned in batches, we need to process all batches before we're done\n                var readBatch = function readBatch() {\n                    directoryReader.readEntries(function(entries) {\n                        if (entries.length === 0) {\n                            dirCounter--;\n                            resolveIfDone();\n                            return;\n                        }\n\n                        entries.forEach(function(entry) {\n                            // recursively read more directories\n                            if (entry.isDirectory) {\n                                readEntries(entry);\n                            } else {\n                                // read as file\n                                fileCounter++;\n\n                                entry.file(function(file) {\n                                    var correctedFile = correctMissingFileType(file);\n                                    if (entry.fullPath)\n                                        correctedFile._relativePath = entry.fullPath;\n                                    files.push(correctedFile);\n                                    fileCounter--;\n                                    resolveIfDone();\n                                });\n                            }\n                        });\n\n                        // try to get next batch of files\n                        readBatch();\n                    }, reject);\n                };\n\n                // read first batch of files\n                readBatch();\n            };\n\n            // go!\n            readEntries(entry);\n        });\n    };\n\n    var correctMissingFileType = function correctMissingFileType(file) {\n        if (file.type.length) return file;\n        var date = file.lastModifiedDate;\n        var name = file.name;\n        var type = guesstimateMimeType(getExtensionFromFilename(file.name));\n        if (!type.length) return file;\n        file = file.slice(0, file.size, type);\n        file.name = name;\n        file.lastModifiedDate = date;\n        return file;\n    };\n\n    var isDirectoryEntry = function isDirectoryEntry(item) {\n        return isEntry(item) && (getAsEntry(item) || {}).isDirectory;\n    };\n\n    var isEntry = function isEntry(item) {\n        return 'webkitGetAsEntry' in item;\n    };\n\n    var getAsEntry = function getAsEntry(item) {\n        return item.webkitGetAsEntry();\n    };\n\n    /**\n     * Extracts links from a DataTransfer object\n     */\n    var getLinks = function getLinks(dataTransfer) {\n        var links = [];\n        try {\n            // look in meta data property\n            links = getLinksFromTransferMetaData(dataTransfer);\n            if (links.length) {\n                return links;\n            }\n            links = getLinksFromTransferURLData(dataTransfer);\n        } catch (e) {\n            // nope nope nope (probably IE trouble)\n        }\n        return links;\n    };\n\n    var getLinksFromTransferURLData = function getLinksFromTransferURLData(dataTransfer) {\n        var data = dataTransfer.getData('url');\n        if (typeof data === 'string' && data.length) {\n            return [data];\n        }\n        return [];\n    };\n\n    var getLinksFromTransferMetaData = function getLinksFromTransferMetaData(dataTransfer) {\n        var data = dataTransfer.getData('text/html');\n        if (typeof data === 'string' && data.length) {\n            var matches = data.match(/src\\s*=\\s*\"(.+?)\"/);\n            if (matches) {\n                return [matches[1]];\n            }\n        }\n        return [];\n    };\n\n    var dragNDropObservers = [];\n\n    var eventPosition = function eventPosition(e) {\n        return {\n            pageLeft: e.pageX,\n            pageTop: e.pageY,\n            scopeLeft: e.offsetX || e.layerX,\n            scopeTop: e.offsetY || e.layerY,\n        };\n    };\n\n    var createDragNDropClient = function createDragNDropClient(\n        element,\n        scopeToObserve,\n        filterElement\n    ) {\n        var observer = getDragNDropObserver(scopeToObserve);\n\n        var client = {\n            element: element,\n            filterElement: filterElement,\n            state: null,\n            ondrop: function ondrop() {},\n            onenter: function onenter() {},\n            ondrag: function ondrag() {},\n            onexit: function onexit() {},\n            onload: function onload() {},\n            allowdrop: function allowdrop() {},\n        };\n\n        client.destroy = observer.addListener(client);\n\n        return client;\n    };\n\n    var getDragNDropObserver = function getDragNDropObserver(element) {\n        // see if already exists, if so, return\n        var observer = dragNDropObservers.find(function(item) {\n            return item.element === element;\n        });\n        if (observer) {\n            return observer;\n        }\n\n        // create new observer, does not yet exist for this element\n        var newObserver = createDragNDropObserver(element);\n        dragNDropObservers.push(newObserver);\n        return newObserver;\n    };\n\n    var createDragNDropObserver = function createDragNDropObserver(element) {\n        var clients = [];\n\n        var routes = {\n            dragenter: dragenter,\n            dragover: dragover,\n            dragleave: dragleave,\n            drop: drop,\n        };\n\n        var handlers = {};\n\n        forin(routes, function(event, createHandler) {\n            handlers[event] = createHandler(element, clients);\n            element.addEventListener(event, handlers[event], false);\n        });\n\n        var observer = {\n            element: element,\n            addListener: function addListener(client) {\n                // add as client\n                clients.push(client);\n\n                // return removeListener function\n                return function() {\n                    // remove client\n                    clients.splice(clients.indexOf(client), 1);\n\n                    // if no more clients, clean up observer\n                    if (clients.length === 0) {\n                        dragNDropObservers.splice(dragNDropObservers.indexOf(observer), 1);\n\n                        forin(routes, function(event) {\n                            element.removeEventListener(event, handlers[event], false);\n                        });\n                    }\n                };\n            },\n        };\n\n        return observer;\n    };\n\n    var elementFromPoint = function elementFromPoint(root, point) {\n        if (!('elementFromPoint' in root)) {\n            root = document;\n        }\n        return root.elementFromPoint(point.x, point.y);\n    };\n\n    var isEventTarget = function isEventTarget(e, target) {\n        // get root\n        var root = getRootNode(target);\n\n        // get element at position\n        // if root is not actual shadow DOM and does not have elementFromPoint method, use the one on document\n        var elementAtPosition = elementFromPoint(root, {\n            x: e.pageX - window.pageXOffset,\n            y: e.pageY - window.pageYOffset,\n        });\n\n        // test if target is the element or if one of its children is\n        return elementAtPosition === target || target.contains(elementAtPosition);\n    };\n\n    var initialTarget = null;\n\n    var setDropEffect = function setDropEffect(dataTransfer, effect) {\n        // is in try catch as IE11 will throw error if not\n        try {\n            dataTransfer.dropEffect = effect;\n        } catch (e) {}\n    };\n\n    var dragenter = function dragenter(root, clients) {\n        return function(e) {\n            e.preventDefault();\n\n            initialTarget = e.target;\n\n            clients.forEach(function(client) {\n                var element = client.element,\n                    onenter = client.onenter;\n\n                if (isEventTarget(e, element)) {\n                    client.state = 'enter';\n\n                    // fire enter event\n                    onenter(eventPosition(e));\n                }\n            });\n        };\n    };\n\n    var dragover = function dragover(root, clients) {\n        return function(e) {\n            e.preventDefault();\n\n            var dataTransfer = e.dataTransfer;\n\n            requestDataTransferItems(dataTransfer).then(function(items) {\n                var overDropTarget = false;\n\n                clients.some(function(client) {\n                    var filterElement = client.filterElement,\n                        element = client.element,\n                        onenter = client.onenter,\n                        onexit = client.onexit,\n                        ondrag = client.ondrag,\n                        allowdrop = client.allowdrop;\n\n                    // by default we can drop\n                    setDropEffect(dataTransfer, 'copy');\n\n                    // allow transfer of these items\n                    var allowsTransfer = allowdrop(items);\n\n                    // only used when can be dropped on page\n                    if (!allowsTransfer) {\n                        setDropEffect(dataTransfer, 'none');\n                        return;\n                    }\n\n                    // targetting this client\n                    if (isEventTarget(e, element)) {\n                        overDropTarget = true;\n\n                        // had no previous state, means we are entering this client\n                        if (client.state === null) {\n                            client.state = 'enter';\n                            onenter(eventPosition(e));\n                            return;\n                        }\n\n                        // now over element (no matter if it allows the drop or not)\n                        client.state = 'over';\n\n                        // needs to allow transfer\n                        if (filterElement && !allowsTransfer) {\n                            setDropEffect(dataTransfer, 'none');\n                            return;\n                        }\n\n                        // dragging\n                        ondrag(eventPosition(e));\n                    } else {\n                        // should be over an element to drop\n                        if (filterElement && !overDropTarget) {\n                            setDropEffect(dataTransfer, 'none');\n                        }\n\n                        // might have just left this client?\n                        if (client.state) {\n                            client.state = null;\n                            onexit(eventPosition(e));\n                        }\n                    }\n                });\n            });\n        };\n    };\n\n    var drop = function drop(root, clients) {\n        return function(e) {\n            e.preventDefault();\n\n            var dataTransfer = e.dataTransfer;\n\n            requestDataTransferItems(dataTransfer).then(function(items) {\n                clients.forEach(function(client) {\n                    var filterElement = client.filterElement,\n                        element = client.element,\n                        ondrop = client.ondrop,\n                        onexit = client.onexit,\n                        allowdrop = client.allowdrop;\n\n                    client.state = null;\n\n                    // if we're filtering on element we need to be over the element to drop\n                    if (filterElement && !isEventTarget(e, element)) return;\n\n                    // no transfer for this client\n                    if (!allowdrop(items)) return onexit(eventPosition(e));\n\n                    // we can drop these items on this client\n                    ondrop(eventPosition(e), items);\n                });\n            });\n        };\n    };\n\n    var dragleave = function dragleave(root, clients) {\n        return function(e) {\n            if (initialTarget !== e.target) {\n                return;\n            }\n\n            clients.forEach(function(client) {\n                var onexit = client.onexit;\n\n                client.state = null;\n\n                onexit(eventPosition(e));\n            });\n        };\n    };\n\n    var createHopper = function createHopper(scope, validateItems, options) {\n        // is now hopper scope\n        scope.classList.add('filepond--hopper');\n\n        // shortcuts\n        var catchesDropsOnPage = options.catchesDropsOnPage,\n            requiresDropOnElement = options.requiresDropOnElement,\n            _options$filterItems = options.filterItems,\n            filterItems =\n                _options$filterItems === void 0\n                    ? function(items) {\n                          return items;\n                      }\n                    : _options$filterItems;\n\n        // create a dnd client\n        var client = createDragNDropClient(\n            scope,\n            catchesDropsOnPage ? document.documentElement : scope,\n            requiresDropOnElement\n        );\n\n        // current client state\n        var lastState = '';\n        var currentState = '';\n\n        // determines if a file may be dropped\n        client.allowdrop = function(items) {\n            // TODO: if we can, throw error to indicate the items cannot by dropped\n\n            return validateItems(filterItems(items));\n        };\n\n        client.ondrop = function(position, items) {\n            var filteredItems = filterItems(items);\n\n            if (!validateItems(filteredItems)) {\n                api.ondragend(position);\n                return;\n            }\n\n            currentState = 'drag-drop';\n\n            api.onload(filteredItems, position);\n        };\n\n        client.ondrag = function(position) {\n            api.ondrag(position);\n        };\n\n        client.onenter = function(position) {\n            currentState = 'drag-over';\n\n            api.ondragstart(position);\n        };\n\n        client.onexit = function(position) {\n            currentState = 'drag-exit';\n\n            api.ondragend(position);\n        };\n\n        var api = {\n            updateHopperState: function updateHopperState() {\n                if (lastState !== currentState) {\n                    scope.dataset.hopperState = currentState;\n                    lastState = currentState;\n                }\n            },\n            onload: function onload() {},\n            ondragstart: function ondragstart() {},\n            ondrag: function ondrag() {},\n            ondragend: function ondragend() {},\n            destroy: function destroy() {\n                // destroy client\n                client.destroy();\n            },\n        };\n\n        return api;\n    };\n\n    var listening = false;\n    var listeners$1 = [];\n\n    var handlePaste = function handlePaste(e) {\n        // if is pasting in input or textarea and the target is outside of a filepond scope, ignore\n        var activeEl = document.activeElement;\n        if (activeEl && /textarea|input/i.test(activeEl.nodeName)) {\n            // test textarea or input is contained in filepond root\n            var inScope = false;\n            var element = activeEl;\n            while (element !== document.body) {\n                if (element.classList.contains('filepond--root')) {\n                    inScope = true;\n                    break;\n                }\n                element = element.parentNode;\n            }\n\n            if (!inScope) return;\n        }\n\n        requestDataTransferItems(e.clipboardData).then(function(files) {\n            // no files received\n            if (!files.length) {\n                return;\n            }\n\n            // notify listeners of received files\n            listeners$1.forEach(function(listener) {\n                return listener(files);\n            });\n        });\n    };\n\n    var listen = function listen(cb) {\n        // can't add twice\n        if (listeners$1.includes(cb)) {\n            return;\n        }\n\n        // add initial listener\n        listeners$1.push(cb);\n\n        // setup paste listener for entire page\n        if (listening) {\n            return;\n        }\n\n        listening = true;\n        document.addEventListener('paste', handlePaste);\n    };\n\n    var unlisten = function unlisten(listener) {\n        arrayRemove(listeners$1, listeners$1.indexOf(listener));\n\n        // clean up\n        if (listeners$1.length === 0) {\n            document.removeEventListener('paste', handlePaste);\n            listening = false;\n        }\n    };\n\n    var createPaster = function createPaster() {\n        var cb = function cb(files) {\n            api.onload(files);\n        };\n\n        var api = {\n            destroy: function destroy() {\n                unlisten(cb);\n            },\n            onload: function onload() {},\n        };\n\n        listen(cb);\n\n        return api;\n    };\n\n    /**\n     * Creates the file view\n     */\n    var create$d = function create(_ref) {\n        var root = _ref.root,\n            props = _ref.props;\n        root.element.id = 'filepond--assistant-' + props.id;\n        attr(root.element, 'role', 'status');\n        attr(root.element, 'aria-live', 'polite');\n        attr(root.element, 'aria-relevant', 'additions');\n    };\n\n    var addFilesNotificationTimeout = null;\n    var notificationClearTimeout = null;\n\n    var filenames = [];\n\n    var assist = function assist(root, message) {\n        root.element.textContent = message;\n    };\n\n    var clear$1 = function clear(root) {\n        root.element.textContent = '';\n    };\n\n    var listModified = function listModified(root, filename, label) {\n        var total = root.query('GET_TOTAL_ITEMS');\n        assist(\n            root,\n            label +\n                ' ' +\n                filename +\n                ', ' +\n                total +\n                ' ' +\n                (total === 1\n                    ? root.query('GET_LABEL_FILE_COUNT_SINGULAR')\n                    : root.query('GET_LABEL_FILE_COUNT_PLURAL'))\n        );\n\n        // clear group after set amount of time so the status is not read twice\n        clearTimeout(notificationClearTimeout);\n        notificationClearTimeout = setTimeout(function() {\n            clear$1(root);\n        }, 1500);\n    };\n\n    var isUsingFilePond = function isUsingFilePond(root) {\n        return root.element.parentNode.contains(document.activeElement);\n    };\n\n    var itemAdded = function itemAdded(_ref2) {\n        var root = _ref2.root,\n            action = _ref2.action;\n        if (!isUsingFilePond(root)) {\n            return;\n        }\n\n        root.element.textContent = '';\n        var item = root.query('GET_ITEM', action.id);\n        filenames.push(item.filename);\n\n        clearTimeout(addFilesNotificationTimeout);\n        addFilesNotificationTimeout = setTimeout(function() {\n            listModified(root, filenames.join(', '), root.query('GET_LABEL_FILE_ADDED'));\n\n            filenames.length = 0;\n        }, 750);\n    };\n\n    var itemRemoved = function itemRemoved(_ref3) {\n        var root = _ref3.root,\n            action = _ref3.action;\n        if (!isUsingFilePond(root)) {\n            return;\n        }\n\n        var item = action.item;\n        listModified(root, item.filename, root.query('GET_LABEL_FILE_REMOVED'));\n    };\n\n    var itemProcessed = function itemProcessed(_ref4) {\n        var root = _ref4.root,\n            action = _ref4.action;\n        // will also notify the user when FilePond is not being used, as the user might be occupied with other activities while uploading a file\n\n        var item = root.query('GET_ITEM', action.id);\n        var filename = item.filename;\n        var label = root.query('GET_LABEL_FILE_PROCESSING_COMPLETE');\n\n        assist(root, filename + ' ' + label);\n    };\n\n    var itemProcessedUndo = function itemProcessedUndo(_ref5) {\n        var root = _ref5.root,\n            action = _ref5.action;\n        var item = root.query('GET_ITEM', action.id);\n        var filename = item.filename;\n        var label = root.query('GET_LABEL_FILE_PROCESSING_ABORTED');\n\n        assist(root, filename + ' ' + label);\n    };\n\n    var itemError = function itemError(_ref6) {\n        var root = _ref6.root,\n            action = _ref6.action;\n        var item = root.query('GET_ITEM', action.id);\n        var filename = item.filename;\n\n        // will also notify the user when FilePond is not being used, as the user might be occupied with other activities while uploading a file\n\n        assist(root, action.status.main + ' ' + filename + ' ' + action.status.sub);\n    };\n\n    var assistant = createView({\n        create: create$d,\n        ignoreRect: true,\n        ignoreRectUpdate: true,\n        write: createRoute({\n            DID_LOAD_ITEM: itemAdded,\n            DID_REMOVE_ITEM: itemRemoved,\n            DID_COMPLETE_ITEM_PROCESSING: itemProcessed,\n\n            DID_ABORT_ITEM_PROCESSING: itemProcessedUndo,\n            DID_REVERT_ITEM_PROCESSING: itemProcessedUndo,\n\n            DID_THROW_ITEM_REMOVE_ERROR: itemError,\n            DID_THROW_ITEM_LOAD_ERROR: itemError,\n            DID_THROW_ITEM_INVALID: itemError,\n            DID_THROW_ITEM_PROCESSING_ERROR: itemError,\n        }),\n\n        tag: 'span',\n        name: 'assistant',\n    });\n\n    var toCamels = function toCamels(string) {\n        var separator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '-';\n        return string.replace(new RegExp(separator + '.', 'g'), function(sub) {\n            return sub.charAt(1).toUpperCase();\n        });\n    };\n\n    var debounce = function debounce(func) {\n        var interval = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 16;\n        var immidiateOnly =\n            arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n        var last = Date.now();\n        var timeout = null;\n\n        return function() {\n            for (\n                var _len = arguments.length, args = new Array(_len), _key = 0;\n                _key < _len;\n                _key++\n            ) {\n                args[_key] = arguments[_key];\n            }\n            clearTimeout(timeout);\n\n            var dist = Date.now() - last;\n\n            var fn = function fn() {\n                last = Date.now();\n                func.apply(void 0, args);\n            };\n\n            if (dist < interval) {\n                // we need to delay by the difference between interval and dist\n                // for example: if distance is 10 ms and interval is 16 ms,\n                // we need to wait an additional 6ms before calling the function)\n                if (!immidiateOnly) {\n                    timeout = setTimeout(fn, interval - dist);\n                }\n            } else {\n                // go!\n                fn();\n            }\n        };\n    };\n\n    var MAX_FILES_LIMIT = 1000000;\n\n    var prevent = function prevent(e) {\n        return e.preventDefault();\n    };\n\n    var create$e = function create(_ref) {\n        var root = _ref.root,\n            props = _ref.props;\n        // Add id\n        var id = root.query('GET_ID');\n        if (id) {\n            root.element.id = id;\n        }\n\n        // Add className\n        var className = root.query('GET_CLASS_NAME');\n        if (className) {\n            className\n                .split(' ')\n                .filter(function(name) {\n                    return name.length;\n                })\n                .forEach(function(name) {\n                    root.element.classList.add(name);\n                });\n        }\n\n        // Field label\n        root.ref.label = root.appendChildView(\n            root.createChildView(\n                dropLabel,\n                Object.assign({}, props, {\n                    translateY: null,\n                    caption: root.query('GET_LABEL_IDLE'),\n                })\n            )\n        );\n\n        // List of items\n        root.ref.list = root.appendChildView(\n            root.createChildView(listScroller, { translateY: null })\n        );\n\n        // Background panel\n        root.ref.panel = root.appendChildView(root.createChildView(panel, { name: 'panel-root' }));\n\n        // Assistant notifies assistive tech when content changes\n        root.ref.assistant = root.appendChildView(\n            root.createChildView(assistant, Object.assign({}, props))\n        );\n\n        // Data\n        root.ref.data = root.appendChildView(root.createChildView(data, Object.assign({}, props)));\n\n        // Measure (tests if fixed height was set)\n        // DOCTYPE needs to be set for this to work\n        root.ref.measure = createElement$1('div');\n        root.ref.measure.style.height = '100%';\n        root.element.appendChild(root.ref.measure);\n\n        // information on the root height or fixed height status\n        root.ref.bounds = null;\n\n        // apply initial style properties\n        root.query('GET_STYLES')\n            .filter(function(style) {\n                return !isEmpty(style.value);\n            })\n            .map(function(_ref2) {\n                var name = _ref2.name,\n                    value = _ref2.value;\n                root.element.dataset[name] = value;\n            });\n\n        // determine if width changed\n        root.ref.widthPrevious = null;\n        root.ref.widthUpdated = debounce(function() {\n            root.ref.updateHistory = [];\n            root.dispatch('DID_RESIZE_ROOT');\n        }, 250);\n\n        // history of updates\n        root.ref.previousAspectRatio = null;\n        root.ref.updateHistory = [];\n\n        // prevent scrolling and zooming on iOS (only if supports pointer events, for then we can enable reorder)\n        var canHover = window.matchMedia('(pointer: fine) and (hover: hover)').matches;\n        var hasPointerEvents = 'PointerEvent' in window;\n        if (root.query('GET_ALLOW_REORDER') && hasPointerEvents && !canHover) {\n            root.element.addEventListener('touchmove', prevent, { passive: false });\n            root.element.addEventListener('gesturestart', prevent);\n        }\n\n        // add credits\n        var credits = root.query('GET_CREDITS');\n        var hasCredits = credits.length === 2;\n        if (hasCredits) {\n            var frag = document.createElement('a');\n            frag.className = 'filepond--credits';\n            frag.setAttribute('aria-hidden', 'true');\n            frag.href = credits[0];\n            frag.tabindex = -1;\n            frag.target = '_blank';\n            frag.rel = 'noopener noreferrer';\n            frag.textContent = credits[1];\n            root.element.appendChild(frag);\n            root.ref.credits = frag;\n        }\n    };\n\n    var write$9 = function write(_ref3) {\n        var root = _ref3.root,\n            props = _ref3.props,\n            actions = _ref3.actions;\n        // route actions\n        route$5({ root: root, props: props, actions: actions });\n\n        // apply style properties\n        actions\n            .filter(function(action) {\n                return /^DID_SET_STYLE_/.test(action.type);\n            })\n            .filter(function(action) {\n                return !isEmpty(action.data.value);\n            })\n            .map(function(_ref4) {\n                var type = _ref4.type,\n                    data = _ref4.data;\n                var name = toCamels(type.substring(8).toLowerCase(), '_');\n                root.element.dataset[name] = data.value;\n                root.invalidateLayout();\n            });\n\n        if (root.rect.element.hidden) return;\n\n        if (root.rect.element.width !== root.ref.widthPrevious) {\n            root.ref.widthPrevious = root.rect.element.width;\n            root.ref.widthUpdated();\n        }\n\n        // get box bounds, we do this only once\n        var bounds = root.ref.bounds;\n        if (!bounds) {\n            bounds = root.ref.bounds = calculateRootBoundingBoxHeight(root);\n\n            // destroy measure element\n            root.element.removeChild(root.ref.measure);\n            root.ref.measure = null;\n        }\n\n        // get quick references to various high level parts of the upload tool\n        var _root$ref = root.ref,\n            hopper = _root$ref.hopper,\n            label = _root$ref.label,\n            list = _root$ref.list,\n            panel = _root$ref.panel;\n\n        // sets correct state to hopper scope\n        if (hopper) {\n            hopper.updateHopperState();\n        }\n\n        // bool to indicate if we're full or not\n        var aspectRatio = root.query('GET_PANEL_ASPECT_RATIO');\n        var isMultiItem = root.query('GET_ALLOW_MULTIPLE');\n        var totalItems = root.query('GET_TOTAL_ITEMS');\n        var maxItems = isMultiItem ? root.query('GET_MAX_FILES') || MAX_FILES_LIMIT : 1;\n        var atMaxCapacity = totalItems === maxItems;\n\n        // action used to add item\n        var addAction = actions.find(function(action) {\n            return action.type === 'DID_ADD_ITEM';\n        });\n\n        // if reached max capacity and we've just reached it\n        if (atMaxCapacity && addAction) {\n            // get interaction type\n            var interactionMethod = addAction.data.interactionMethod;\n\n            // hide label\n            label.opacity = 0;\n\n            if (isMultiItem) {\n                label.translateY = -40;\n            } else {\n                if (interactionMethod === InteractionMethod.API) {\n                    label.translateX = 40;\n                } else if (interactionMethod === InteractionMethod.BROWSE) {\n                    label.translateY = 40;\n                } else {\n                    label.translateY = 30;\n                }\n            }\n        } else if (!atMaxCapacity) {\n            label.opacity = 1;\n            label.translateX = 0;\n            label.translateY = 0;\n        }\n\n        var listItemMargin = calculateListItemMargin(root);\n\n        var listHeight = calculateListHeight(root);\n\n        var labelHeight = label.rect.element.height;\n        var currentLabelHeight = !isMultiItem || atMaxCapacity ? 0 : labelHeight;\n\n        var listMarginTop = atMaxCapacity ? list.rect.element.marginTop : 0;\n        var listMarginBottom = totalItems === 0 ? 0 : list.rect.element.marginBottom;\n\n        var visualHeight =\n            currentLabelHeight + listMarginTop + listHeight.visual + listMarginBottom;\n        var boundsHeight =\n            currentLabelHeight + listMarginTop + listHeight.bounds + listMarginBottom;\n\n        // link list to label bottom position\n        list.translateY =\n            Math.max(0, currentLabelHeight - list.rect.element.marginTop) - listItemMargin.top;\n\n        if (aspectRatio) {\n            // fixed aspect ratio\n\n            // calculate height based on width\n            var width = root.rect.element.width;\n            var height = width * aspectRatio;\n\n            // clear history if aspect ratio has changed\n            if (aspectRatio !== root.ref.previousAspectRatio) {\n                root.ref.previousAspectRatio = aspectRatio;\n                root.ref.updateHistory = [];\n            }\n\n            // remember this width\n            var history = root.ref.updateHistory;\n            history.push(width);\n\n            var MAX_BOUNCES = 2;\n            if (history.length > MAX_BOUNCES * 2) {\n                var l = history.length;\n                var bottom = l - 10;\n                var bounces = 0;\n                for (var i = l; i >= bottom; i--) {\n                    if (history[i] === history[i - 2]) {\n                        bounces++;\n                    }\n\n                    if (bounces >= MAX_BOUNCES) {\n                        // dont adjust height\n                        return;\n                    }\n                }\n            }\n\n            // fix height of panel so it adheres to aspect ratio\n            panel.scalable = false;\n            panel.height = height;\n\n            // available height for list\n            var listAvailableHeight =\n                // the height of the panel minus the label height\n                height -\n                currentLabelHeight -\n                // the room we leave open between the end of the list and the panel bottom\n                (listMarginBottom - listItemMargin.bottom) -\n                // if we're full we need to leave some room between the top of the panel and the list\n                (atMaxCapacity ? listMarginTop : 0);\n\n            if (listHeight.visual > listAvailableHeight) {\n                list.overflow = listAvailableHeight;\n            } else {\n                list.overflow = null;\n            }\n\n            // set container bounds (so pushes siblings downwards)\n            root.height = height;\n        } else if (bounds.fixedHeight) {\n            // fixed height\n\n            // fix height of panel\n            panel.scalable = false;\n\n            // available height for list\n            var _listAvailableHeight =\n                // the height of the panel minus the label height\n                bounds.fixedHeight -\n                currentLabelHeight -\n                // the room we leave open between the end of the list and the panel bottom\n                (listMarginBottom - listItemMargin.bottom) -\n                // if we're full we need to leave some room between the top of the panel and the list\n                (atMaxCapacity ? listMarginTop : 0);\n\n            // set list height\n            if (listHeight.visual > _listAvailableHeight) {\n                list.overflow = _listAvailableHeight;\n            } else {\n                list.overflow = null;\n            }\n\n            // no need to set container bounds as these are handles by CSS fixed height\n        } else if (bounds.cappedHeight) {\n            // max-height\n\n            // not a fixed height panel\n            var isCappedHeight = visualHeight >= bounds.cappedHeight;\n            var panelHeight = Math.min(bounds.cappedHeight, visualHeight);\n            panel.scalable = true;\n            panel.height = isCappedHeight\n                ? panelHeight\n                : panelHeight - listItemMargin.top - listItemMargin.bottom;\n\n            // available height for list\n            var _listAvailableHeight2 =\n                // the height of the panel minus the label height\n                panelHeight -\n                currentLabelHeight -\n                // the room we leave open between the end of the list and the panel bottom\n                (listMarginBottom - listItemMargin.bottom) -\n                // if we're full we need to leave some room between the top of the panel and the list\n                (atMaxCapacity ? listMarginTop : 0);\n\n            // set list height (if is overflowing)\n            if (visualHeight > bounds.cappedHeight && listHeight.visual > _listAvailableHeight2) {\n                list.overflow = _listAvailableHeight2;\n            } else {\n                list.overflow = null;\n            }\n\n            // set container bounds (so pushes siblings downwards)\n            root.height = Math.min(\n                bounds.cappedHeight,\n                boundsHeight - listItemMargin.top - listItemMargin.bottom\n            );\n        } else {\n            // flexible height\n\n            // not a fixed height panel\n            var itemMargin = totalItems > 0 ? listItemMargin.top + listItemMargin.bottom : 0;\n            panel.scalable = true;\n            panel.height = Math.max(labelHeight, visualHeight - itemMargin);\n\n            // set container bounds (so pushes siblings downwards)\n            root.height = Math.max(labelHeight, boundsHeight - itemMargin);\n        }\n\n        // move credits to bottom\n        if (root.ref.credits && panel.heightCurrent)\n            root.ref.credits.style.transform = 'translateY(' + panel.heightCurrent + 'px)';\n    };\n\n    var calculateListItemMargin = function calculateListItemMargin(root) {\n        var item = root.ref.list.childViews[0].childViews[0];\n        return item\n            ? {\n                  top: item.rect.element.marginTop,\n                  bottom: item.rect.element.marginBottom,\n              }\n            : {\n                  top: 0,\n                  bottom: 0,\n              };\n    };\n\n    var calculateListHeight = function calculateListHeight(root) {\n        var visual = 0;\n        var bounds = 0;\n\n        // get file list reference\n        var scrollList = root.ref.list;\n        var itemList = scrollList.childViews[0];\n        var visibleChildren = itemList.childViews.filter(function(child) {\n            return child.rect.element.height;\n        });\n        var children = root\n            .query('GET_ACTIVE_ITEMS')\n            .map(function(item) {\n                return visibleChildren.find(function(child) {\n                    return child.id === item.id;\n                });\n            })\n            .filter(function(item) {\n                return item;\n            });\n\n        // no children, done!\n        if (children.length === 0) return { visual: visual, bounds: bounds };\n\n        var horizontalSpace = itemList.rect.element.width;\n        var dragIndex = getItemIndexByPosition(itemList, children, scrollList.dragCoordinates);\n\n        var childRect = children[0].rect.element;\n\n        var itemVerticalMargin = childRect.marginTop + childRect.marginBottom;\n        var itemHorizontalMargin = childRect.marginLeft + childRect.marginRight;\n\n        var itemWidth = childRect.width + itemHorizontalMargin;\n        var itemHeight = childRect.height + itemVerticalMargin;\n\n        var newItem = typeof dragIndex !== 'undefined' && dragIndex >= 0 ? 1 : 0;\n        var removedItem = children.find(function(child) {\n            return child.markedForRemoval && child.opacity < 0.45;\n        })\n            ? -1\n            : 0;\n        var verticalItemCount = children.length + newItem + removedItem;\n        var itemsPerRow = getItemsPerRow(horizontalSpace, itemWidth);\n\n        // stack\n        if (itemsPerRow === 1) {\n            children.forEach(function(item) {\n                var height = item.rect.element.height + itemVerticalMargin;\n                bounds += height;\n                visual += height * item.opacity;\n            });\n        }\n        // grid\n        else {\n            bounds = Math.ceil(verticalItemCount / itemsPerRow) * itemHeight;\n            visual = bounds;\n        }\n\n        return { visual: visual, bounds: bounds };\n    };\n\n    var calculateRootBoundingBoxHeight = function calculateRootBoundingBoxHeight(root) {\n        var height = root.ref.measureHeight || null;\n        var cappedHeight = parseInt(root.style.maxHeight, 10) || null;\n        var fixedHeight = height === 0 ? null : height;\n\n        return {\n            cappedHeight: cappedHeight,\n            fixedHeight: fixedHeight,\n        };\n    };\n\n    var exceedsMaxFiles = function exceedsMaxFiles(root, items) {\n        var allowReplace = root.query('GET_ALLOW_REPLACE');\n        var allowMultiple = root.query('GET_ALLOW_MULTIPLE');\n        var totalItems = root.query('GET_TOTAL_ITEMS');\n        var maxItems = root.query('GET_MAX_FILES');\n\n        // total amount of items being dragged\n        var totalBrowseItems = items.length;\n\n        // if does not allow multiple items and dragging more than one item\n        if (!allowMultiple && totalBrowseItems > 1) {\n            root.dispatch('DID_THROW_MAX_FILES', {\n                source: items,\n                error: createResponse('warning', 0, 'Max files'),\n            });\n\n            return true;\n        }\n\n        // limit max items to one if not allowed to drop multiple items\n        maxItems = allowMultiple ? maxItems : 1;\n\n        if (!allowMultiple && allowReplace) {\n            // There is only one item, so there is room to replace or add an item\n            return false;\n        }\n\n        // no more room?\n        var hasMaxItems = isInt(maxItems);\n        if (hasMaxItems && totalItems + totalBrowseItems > maxItems) {\n            root.dispatch('DID_THROW_MAX_FILES', {\n                source: items,\n                error: createResponse('warning', 0, 'Max files'),\n            });\n\n            return true;\n        }\n\n        return false;\n    };\n\n    var getDragIndex = function getDragIndex(list, children, position) {\n        var itemList = list.childViews[0];\n        return getItemIndexByPosition(itemList, children, {\n            left: position.scopeLeft - itemList.rect.element.left,\n            top:\n                position.scopeTop -\n                (list.rect.outer.top + list.rect.element.marginTop + list.rect.element.scrollTop),\n        });\n    };\n\n    /**\n     * Enable or disable file drop functionality\n     */\n    var toggleDrop = function toggleDrop(root) {\n        var isAllowed = root.query('GET_ALLOW_DROP');\n        var isDisabled = root.query('GET_DISABLED');\n        var enabled = isAllowed && !isDisabled;\n        if (enabled && !root.ref.hopper) {\n            var hopper = createHopper(\n                root.element,\n                function(items) {\n                    // allow quick validation of dropped items\n                    var beforeDropFile =\n                        root.query('GET_BEFORE_DROP_FILE') ||\n                        function() {\n                            return true;\n                        };\n\n                    // all items should be validated by all filters as valid\n                    var dropValidation = root.query('GET_DROP_VALIDATION');\n                    return dropValidation\n                        ? items.every(function(item) {\n                              return (\n                                  applyFilters('ALLOW_HOPPER_ITEM', item, {\n                                      query: root.query,\n                                  }).every(function(result) {\n                                      return result === true;\n                                  }) && beforeDropFile(item)\n                              );\n                          })\n                        : true;\n                },\n                {\n                    filterItems: function filterItems(items) {\n                        var ignoredFiles = root.query('GET_IGNORED_FILES');\n                        return items.filter(function(item) {\n                            if (isFile(item)) {\n                                return !ignoredFiles.includes(item.name.toLowerCase());\n                            }\n                            return true;\n                        });\n                    },\n                    catchesDropsOnPage: root.query('GET_DROP_ON_PAGE'),\n                    requiresDropOnElement: root.query('GET_DROP_ON_ELEMENT'),\n                }\n            );\n\n            hopper.onload = function(items, position) {\n                // get item children elements and sort based on list sort\n                var list = root.ref.list.childViews[0];\n                var visibleChildren = list.childViews.filter(function(child) {\n                    return child.rect.element.height;\n                });\n                var children = root\n                    .query('GET_ACTIVE_ITEMS')\n                    .map(function(item) {\n                        return visibleChildren.find(function(child) {\n                            return child.id === item.id;\n                        });\n                    })\n                    .filter(function(item) {\n                        return item;\n                    });\n\n                applyFilterChain('ADD_ITEMS', items, { dispatch: root.dispatch }).then(function(\n                    queue\n                ) {\n                    // these files don't fit so stop here\n                    if (exceedsMaxFiles(root, queue)) return false;\n\n                    // go\n                    root.dispatch('ADD_ITEMS', {\n                        items: queue,\n                        index: getDragIndex(root.ref.list, children, position),\n                        interactionMethod: InteractionMethod.DROP,\n                    });\n                });\n\n                root.dispatch('DID_DROP', { position: position });\n\n                root.dispatch('DID_END_DRAG', { position: position });\n            };\n\n            hopper.ondragstart = function(position) {\n                root.dispatch('DID_START_DRAG', { position: position });\n            };\n\n            hopper.ondrag = debounce(function(position) {\n                root.dispatch('DID_DRAG', { position: position });\n            });\n\n            hopper.ondragend = function(position) {\n                root.dispatch('DID_END_DRAG', { position: position });\n            };\n\n            root.ref.hopper = hopper;\n\n            root.ref.drip = root.appendChildView(root.createChildView(drip));\n        } else if (!enabled && root.ref.hopper) {\n            root.ref.hopper.destroy();\n            root.ref.hopper = null;\n            root.removeChildView(root.ref.drip);\n        }\n    };\n\n    /**\n     * Enable or disable browse functionality\n     */\n    var toggleBrowse = function toggleBrowse(root, props) {\n        var isAllowed = root.query('GET_ALLOW_BROWSE');\n        var isDisabled = root.query('GET_DISABLED');\n        var enabled = isAllowed && !isDisabled;\n        if (enabled && !root.ref.browser) {\n            root.ref.browser = root.appendChildView(\n                root.createChildView(\n                    browser,\n                    Object.assign({}, props, {\n                        onload: function onload(items) {\n                            applyFilterChain('ADD_ITEMS', items, {\n                                dispatch: root.dispatch,\n                            }).then(function(queue) {\n                                // these files don't fit so stop here\n                                if (exceedsMaxFiles(root, queue)) return false;\n\n                                // add items!\n                                root.dispatch('ADD_ITEMS', {\n                                    items: queue,\n                                    index: -1,\n                                    interactionMethod: InteractionMethod.BROWSE,\n                                });\n                            });\n                        },\n                    })\n                ),\n\n                0\n            );\n        } else if (!enabled && root.ref.browser) {\n            root.removeChildView(root.ref.browser);\n            root.ref.browser = null;\n        }\n    };\n\n    /**\n     * Enable or disable paste functionality\n     */\n    var togglePaste = function togglePaste(root) {\n        var isAllowed = root.query('GET_ALLOW_PASTE');\n        var isDisabled = root.query('GET_DISABLED');\n        var enabled = isAllowed && !isDisabled;\n        if (enabled && !root.ref.paster) {\n            root.ref.paster = createPaster();\n            root.ref.paster.onload = function(items) {\n                applyFilterChain('ADD_ITEMS', items, { dispatch: root.dispatch }).then(function(\n                    queue\n                ) {\n                    // these files don't fit so stop here\n                    if (exceedsMaxFiles(root, queue)) return false;\n\n                    // add items!\n                    root.dispatch('ADD_ITEMS', {\n                        items: queue,\n                        index: -1,\n                        interactionMethod: InteractionMethod.PASTE,\n                    });\n                });\n            };\n        } else if (!enabled && root.ref.paster) {\n            root.ref.paster.destroy();\n            root.ref.paster = null;\n        }\n    };\n\n    /**\n     * Route actions\n     */\n    var route$5 = createRoute({\n        DID_SET_ALLOW_BROWSE: function DID_SET_ALLOW_BROWSE(_ref5) {\n            var root = _ref5.root,\n                props = _ref5.props;\n            toggleBrowse(root, props);\n        },\n        DID_SET_ALLOW_DROP: function DID_SET_ALLOW_DROP(_ref6) {\n            var root = _ref6.root;\n            toggleDrop(root);\n        },\n        DID_SET_ALLOW_PASTE: function DID_SET_ALLOW_PASTE(_ref7) {\n            var root = _ref7.root;\n            togglePaste(root);\n        },\n        DID_SET_DISABLED: function DID_SET_DISABLED(_ref8) {\n            var root = _ref8.root,\n                props = _ref8.props;\n            toggleDrop(root);\n            togglePaste(root);\n            toggleBrowse(root, props);\n            var isDisabled = root.query('GET_DISABLED');\n            if (isDisabled) {\n                root.element.dataset.disabled = 'disabled';\n            } else {\n                // delete root.element.dataset.disabled; <= this does not work on iOS 10\n                root.element.removeAttribute('data-disabled');\n            }\n        },\n    });\n\n    var root = createView({\n        name: 'root',\n        read: function read(_ref9) {\n            var root = _ref9.root;\n            if (root.ref.measure) {\n                root.ref.measureHeight = root.ref.measure.offsetHeight;\n            }\n        },\n        create: create$e,\n        write: write$9,\n        destroy: function destroy(_ref10) {\n            var root = _ref10.root;\n            if (root.ref.paster) {\n                root.ref.paster.destroy();\n            }\n            if (root.ref.hopper) {\n                root.ref.hopper.destroy();\n            }\n            root.element.removeEventListener('touchmove', prevent);\n            root.element.removeEventListener('gesturestart', prevent);\n        },\n        mixins: {\n            styles: ['height'],\n        },\n    });\n\n    // creates the app\n    var createApp = function createApp() {\n        var initialOptions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        // let element\n        var originalElement = null;\n\n        // get default options\n        var defaultOptions = getOptions();\n\n        // create the data store, this will contain all our app info\n        var store = createStore(\n            // initial state (should be serializable)\n            createInitialState(defaultOptions),\n\n            // queries\n            [queries, createOptionQueries(defaultOptions)],\n\n            // action handlers\n            [actions, createOptionActions(defaultOptions)]\n        );\n\n        // set initial options\n        store.dispatch('SET_OPTIONS', { options: initialOptions });\n\n        // kick thread if visibility changes\n        var visibilityHandler = function visibilityHandler() {\n            if (document.hidden) return;\n            store.dispatch('KICK');\n        };\n        document.addEventListener('visibilitychange', visibilityHandler);\n\n        // re-render on window resize start and finish\n        var resizeDoneTimer = null;\n        var isResizing = false;\n        var isResizingHorizontally = false;\n        var initialWindowWidth = null;\n        var currentWindowWidth = null;\n        var resizeHandler = function resizeHandler() {\n            if (!isResizing) {\n                isResizing = true;\n            }\n            clearTimeout(resizeDoneTimer);\n            resizeDoneTimer = setTimeout(function() {\n                isResizing = false;\n                initialWindowWidth = null;\n                currentWindowWidth = null;\n                if (isResizingHorizontally) {\n                    isResizingHorizontally = false;\n                    store.dispatch('DID_STOP_RESIZE');\n                }\n            }, 500);\n        };\n        window.addEventListener('resize', resizeHandler);\n\n        // render initial view\n        var view = root(store, { id: getUniqueId() });\n\n        //\n        // PRIVATE API -------------------------------------------------------------------------------------\n        //\n        var isResting = false;\n        var isHidden = false;\n\n        var readWriteApi = {\n            // necessary for update loop\n\n            /**\n             * Reads from dom (never call manually)\n             * @private\n             */\n            _read: function _read() {\n                // test if we're resizing horizontally\n                // TODO: see if we can optimize this by measuring root rect\n                if (isResizing) {\n                    currentWindowWidth = window.innerWidth;\n                    if (!initialWindowWidth) {\n                        initialWindowWidth = currentWindowWidth;\n                    }\n\n                    if (!isResizingHorizontally && currentWindowWidth !== initialWindowWidth) {\n                        store.dispatch('DID_START_RESIZE');\n                        isResizingHorizontally = true;\n                    }\n                }\n\n                if (isHidden && isResting) {\n                    // test if is no longer hidden\n                    isResting = view.element.offsetParent === null;\n                }\n\n                // if resting, no need to read as numbers will still all be correct\n                if (isResting) return;\n\n                // read view data\n                view._read();\n\n                // if is hidden we need to know so we exit rest mode when revealed\n                isHidden = view.rect.element.hidden;\n            },\n\n            /**\n             * Writes to dom (never call manually)\n             * @private\n             */\n            _write: function _write(ts) {\n                // get all actions from store\n                var actions = store\n                    .processActionQueue()\n\n                    // filter out set actions (these will automatically trigger DID_SET)\n                    .filter(function(action) {\n                        return !/^SET_/.test(action.type);\n                    });\n\n                // if was idling and no actions stop here\n                if (isResting && !actions.length) return;\n\n                // some actions might trigger events\n                routeActionsToEvents(actions);\n\n                // update the view\n                isResting = view._write(ts, actions, isResizingHorizontally);\n\n                // will clean up all archived items\n                removeReleasedItems(store.query('GET_ITEMS'));\n\n                // now idling\n                if (isResting) {\n                    store.processDispatchQueue();\n                }\n            },\n        };\n\n        //\n        // EXPOSE EVENTS -------------------------------------------------------------------------------------\n        //\n        var createEvent = function createEvent(name) {\n            return function(data) {\n                // create default event\n                var event = {\n                    type: name,\n                };\n\n                // no data to add\n                if (!data) {\n                    return event;\n                }\n\n                // copy relevant props\n                if (data.hasOwnProperty('error')) {\n                    event.error = data.error ? Object.assign({}, data.error) : null;\n                }\n\n                if (data.status) {\n                    event.status = Object.assign({}, data.status);\n                }\n\n                if (data.file) {\n                    event.output = data.file;\n                }\n\n                // only source is available, else add item if possible\n                if (data.source) {\n                    event.file = data.source;\n                } else if (data.item || data.id) {\n                    var item = data.item ? data.item : store.query('GET_ITEM', data.id);\n                    event.file = item ? createItemAPI(item) : null;\n                }\n\n                // map all items in a possible items array\n                if (data.items) {\n                    event.items = data.items.map(createItemAPI);\n                }\n\n                // if this is a progress event add the progress amount\n                if (/progress/.test(name)) {\n                    event.progress = data.progress;\n                }\n\n                // copy relevant props\n                if (data.hasOwnProperty('origin') && data.hasOwnProperty('target')) {\n                    event.origin = data.origin;\n                    event.target = data.target;\n                }\n\n                return event;\n            };\n        };\n\n        var eventRoutes = {\n            DID_DESTROY: createEvent('destroy'),\n\n            DID_INIT: createEvent('init'),\n\n            DID_THROW_MAX_FILES: createEvent('warning'),\n\n            DID_INIT_ITEM: createEvent('initfile'),\n            DID_START_ITEM_LOAD: createEvent('addfilestart'),\n            DID_UPDATE_ITEM_LOAD_PROGRESS: createEvent('addfileprogress'),\n            DID_LOAD_ITEM: createEvent('addfile'),\n\n            DID_THROW_ITEM_INVALID: [createEvent('error'), createEvent('addfile')],\n\n            DID_THROW_ITEM_LOAD_ERROR: [createEvent('error'), createEvent('addfile')],\n\n            DID_THROW_ITEM_REMOVE_ERROR: [createEvent('error'), createEvent('removefile')],\n\n            DID_PREPARE_OUTPUT: createEvent('preparefile'),\n\n            DID_START_ITEM_PROCESSING: createEvent('processfilestart'),\n            DID_UPDATE_ITEM_PROCESS_PROGRESS: createEvent('processfileprogress'),\n            DID_ABORT_ITEM_PROCESSING: createEvent('processfileabort'),\n            DID_COMPLETE_ITEM_PROCESSING: createEvent('processfile'),\n            DID_COMPLETE_ITEM_PROCESSING_ALL: createEvent('processfiles'),\n            DID_REVERT_ITEM_PROCESSING: createEvent('processfilerevert'),\n\n            DID_THROW_ITEM_PROCESSING_ERROR: [createEvent('error'), createEvent('processfile')],\n\n            DID_REMOVE_ITEM: createEvent('removefile'),\n\n            DID_UPDATE_ITEMS: createEvent('updatefiles'),\n\n            DID_ACTIVATE_ITEM: createEvent('activatefile'),\n\n            DID_REORDER_ITEMS: createEvent('reorderfiles'),\n        };\n\n        var exposeEvent = function exposeEvent(event) {\n            // create event object to be dispatched\n            var detail = Object.assign({ pond: exports }, event);\n            delete detail.type;\n            view.element.dispatchEvent(\n                new CustomEvent('FilePond:' + event.type, {\n                    // event info\n                    detail: detail,\n\n                    // event behaviour\n                    bubbles: true,\n                    cancelable: true,\n                    composed: true, // triggers listeners outside of shadow root\n                })\n            );\n\n            // event object to params used for `on()` event handlers and callbacks `oninit()`\n            var params = [];\n\n            // if is possible error event, make it the first param\n            if (event.hasOwnProperty('error')) {\n                params.push(event.error);\n            }\n\n            // file is always section\n            if (event.hasOwnProperty('file')) {\n                params.push(event.file);\n            }\n\n            // append other props\n            var filtered = ['type', 'error', 'file'];\n            Object.keys(event)\n                .filter(function(key) {\n                    return !filtered.includes(key);\n                })\n                .forEach(function(key) {\n                    return params.push(event[key]);\n                });\n\n            // on(type, () => { })\n            exports.fire.apply(exports, [event.type].concat(params));\n\n            // oninit = () => {}\n            var handler = store.query('GET_ON' + event.type.toUpperCase());\n            if (handler) {\n                handler.apply(void 0, params);\n            }\n        };\n\n        var routeActionsToEvents = function routeActionsToEvents(actions) {\n            if (!actions.length) return;\n            actions\n                .filter(function(action) {\n                    return eventRoutes[action.type];\n                })\n                .forEach(function(action) {\n                    var routes = eventRoutes[action.type];\n                    (Array.isArray(routes) ? routes : [routes]).forEach(function(route) {\n                        // this isn't fantastic, but because of the stacking of settimeouts plugins can handle the did_load before the did_init\n                        if (action.type === 'DID_INIT_ITEM') {\n                            exposeEvent(route(action.data));\n                        } else {\n                            setTimeout(function() {\n                                exposeEvent(route(action.data));\n                            }, 0);\n                        }\n                    });\n                });\n        };\n\n        //\n        // PUBLIC API -------------------------------------------------------------------------------------\n        //\n        var setOptions = function setOptions(options) {\n            return store.dispatch('SET_OPTIONS', { options: options });\n        };\n\n        var getFile = function getFile(query) {\n            return store.query('GET_ACTIVE_ITEM', query);\n        };\n\n        var prepareFile = function prepareFile(query) {\n            return new Promise(function(resolve, reject) {\n                store.dispatch('REQUEST_ITEM_PREPARE', {\n                    query: query,\n                    success: function success(item) {\n                        resolve(item);\n                    },\n                    failure: function failure(error) {\n                        reject(error);\n                    },\n                });\n            });\n        };\n\n        var addFile = function addFile(source) {\n            var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n            return new Promise(function(resolve, reject) {\n                addFiles([{ source: source, options: options }], { index: options.index })\n                    .then(function(items) {\n                        return resolve(items && items[0]);\n                    })\n                    .catch(reject);\n            });\n        };\n\n        var isFilePondFile = function isFilePondFile(obj) {\n            return obj.file && obj.id;\n        };\n\n        var removeFile = function removeFile(query, options) {\n            // if only passed options\n            if (typeof query === 'object' && !isFilePondFile(query) && !options) {\n                options = query;\n                query = undefined;\n            }\n\n            // request item removal\n            store.dispatch('REMOVE_ITEM', Object.assign({}, options, { query: query }));\n\n            // see if item has been removed\n            return store.query('GET_ACTIVE_ITEM', query) === null;\n        };\n\n        var addFiles = function addFiles() {\n            for (\n                var _len = arguments.length, args = new Array(_len), _key = 0;\n                _key < _len;\n                _key++\n            ) {\n                args[_key] = arguments[_key];\n            }\n            return new Promise(function(resolve, reject) {\n                var sources = [];\n                var options = {};\n\n                // user passed a sources array\n                if (isArray(args[0])) {\n                    sources.push.apply(sources, args[0]);\n                    Object.assign(options, args[1] || {});\n                } else {\n                    // user passed sources as arguments, last one might be options object\n                    var lastArgument = args[args.length - 1];\n                    if (typeof lastArgument === 'object' && !(lastArgument instanceof Blob)) {\n                        Object.assign(options, args.pop());\n                    }\n\n                    // add rest to sources\n                    sources.push.apply(sources, args);\n                }\n\n                store.dispatch('ADD_ITEMS', {\n                    items: sources,\n                    index: options.index,\n                    interactionMethod: InteractionMethod.API,\n                    success: resolve,\n                    failure: reject,\n                });\n            });\n        };\n\n        var getFiles = function getFiles() {\n            return store.query('GET_ACTIVE_ITEMS');\n        };\n\n        var processFile = function processFile(query) {\n            return new Promise(function(resolve, reject) {\n                store.dispatch('REQUEST_ITEM_PROCESSING', {\n                    query: query,\n                    success: function success(item) {\n                        resolve(item);\n                    },\n                    failure: function failure(error) {\n                        reject(error);\n                    },\n                });\n            });\n        };\n\n        var prepareFiles = function prepareFiles() {\n            for (\n                var _len2 = arguments.length, args = new Array(_len2), _key2 = 0;\n                _key2 < _len2;\n                _key2++\n            ) {\n                args[_key2] = arguments[_key2];\n            }\n            var queries = Array.isArray(args[0]) ? args[0] : args;\n            var items = queries.length ? queries : getFiles();\n            return Promise.all(items.map(prepareFile));\n        };\n\n        var processFiles = function processFiles() {\n            for (\n                var _len3 = arguments.length, args = new Array(_len3), _key3 = 0;\n                _key3 < _len3;\n                _key3++\n            ) {\n                args[_key3] = arguments[_key3];\n            }\n            var queries = Array.isArray(args[0]) ? args[0] : args;\n            if (!queries.length) {\n                var files = getFiles().filter(function(item) {\n                    return (\n                        !(item.status === ItemStatus.IDLE && item.origin === FileOrigin.LOCAL) &&\n                        item.status !== ItemStatus.PROCESSING &&\n                        item.status !== ItemStatus.PROCESSING_COMPLETE &&\n                        item.status !== ItemStatus.PROCESSING_REVERT_ERROR\n                    );\n                });\n\n                return Promise.all(files.map(processFile));\n            }\n            return Promise.all(queries.map(processFile));\n        };\n\n        var removeFiles = function removeFiles() {\n            for (\n                var _len4 = arguments.length, args = new Array(_len4), _key4 = 0;\n                _key4 < _len4;\n                _key4++\n            ) {\n                args[_key4] = arguments[_key4];\n            }\n\n            var queries = Array.isArray(args[0]) ? args[0] : args;\n\n            var options;\n            if (typeof queries[queries.length - 1] === 'object') {\n                options = queries.pop();\n            } else if (Array.isArray(args[0])) {\n                options = args[1];\n            }\n\n            var files = getFiles();\n\n            if (!queries.length)\n                return Promise.all(\n                    files.map(function(file) {\n                        return removeFile(file, options);\n                    })\n                );\n\n            // when removing by index the indexes shift after each file removal so we need to convert indexes to ids\n            var mappedQueries = queries\n                .map(function(query) {\n                    return isNumber(query) ? (files[query] ? files[query].id : null) : query;\n                })\n                .filter(function(query) {\n                    return query;\n                });\n\n            return mappedQueries.map(function(q) {\n                return removeFile(q, options);\n            });\n        };\n\n        var exports = Object.assign(\n            {},\n\n            on(),\n            {},\n\n            readWriteApi,\n            {},\n\n            createOptionAPI(store, defaultOptions),\n            {\n                /**\n                 * Override options defined in options object\n                 * @param options\n                 */\n                setOptions: setOptions,\n\n                /**\n                 * Load the given file\n                 * @param source - the source of the file (either a File, base64 data uri or url)\n                 * @param options - object, { index: 0 }\n                 */\n                addFile: addFile,\n\n                /**\n                 * Load the given files\n                 * @param sources - the sources of the files to load\n                 * @param options - object, { index: 0 }\n                 */\n                addFiles: addFiles,\n\n                /**\n                 * Returns the file objects matching the given query\n                 * @param query { string, number, null }\n                 */\n                getFile: getFile,\n\n                /**\n                 * Upload file with given name\n                 * @param query { string, number, null  }\n                 */\n                processFile: processFile,\n\n                /**\n                 * Request prepare output for file with given name\n                 * @param query { string, number, null  }\n                 */\n                prepareFile: prepareFile,\n\n                /**\n                 * Removes a file by its name\n                 * @param query { string, number, null  }\n                 */\n                removeFile: removeFile,\n\n                /**\n                 * Moves a file to a new location in the files list\n                 */\n                moveFile: function moveFile(query, index) {\n                    return store.dispatch('MOVE_ITEM', { query: query, index: index });\n                },\n\n                /**\n                 * Returns all files (wrapped in public api)\n                 */\n                getFiles: getFiles,\n\n                /**\n                 * Starts uploading all files\n                 */\n                processFiles: processFiles,\n\n                /**\n                 * Clears all files from the files list\n                 */\n                removeFiles: removeFiles,\n\n                /**\n                 * Starts preparing output of all files\n                 */\n                prepareFiles: prepareFiles,\n\n                /**\n                 * Sort list of files\n                 */\n                sort: function sort(compare) {\n                    return store.dispatch('SORT', { compare: compare });\n                },\n\n                /**\n                 * Browse the file system for a file\n                 */\n                browse: function browse() {\n                    // needs to be trigger directly as user action needs to be traceable (is not traceable in requestAnimationFrame)\n                    var input = view.element.querySelector('input[type=file]');\n                    if (input) {\n                        input.click();\n                    }\n                },\n\n                /**\n                 * Destroys the app\n                 */\n                destroy: function destroy() {\n                    // request destruction\n                    exports.fire('destroy', view.element);\n\n                    // stop active processes (file uploads, fetches, stuff like that)\n                    // loop over items and depending on states call abort for ongoing processes\n                    store.dispatch('ABORT_ALL');\n\n                    // destroy view\n                    view._destroy();\n\n                    // stop listening to resize\n                    window.removeEventListener('resize', resizeHandler);\n\n                    // stop listening to the visiblitychange event\n                    document.removeEventListener('visibilitychange', visibilityHandler);\n\n                    // dispatch destroy\n                    store.dispatch('DID_DESTROY');\n                },\n\n                /**\n                 * Inserts the plugin before the target element\n                 */\n                insertBefore: function insertBefore$1(element) {\n                    return insertBefore(view.element, element);\n                },\n\n                /**\n                 * Inserts the plugin after the target element\n                 */\n                insertAfter: function insertAfter$1(element) {\n                    return insertAfter(view.element, element);\n                },\n\n                /**\n                 * Appends the plugin to the target element\n                 */\n                appendTo: function appendTo(element) {\n                    return element.appendChild(view.element);\n                },\n\n                /**\n                 * Replaces an element with the app\n                 */\n                replaceElement: function replaceElement(element) {\n                    // insert the app before the element\n                    insertBefore(view.element, element);\n\n                    // remove the original element\n                    element.parentNode.removeChild(element);\n\n                    // remember original element\n                    originalElement = element;\n                },\n\n                /**\n                 * Restores the original element\n                 */\n                restoreElement: function restoreElement() {\n                    if (!originalElement) {\n                        return; // no element to restore\n                    }\n\n                    // restore original element\n                    insertAfter(originalElement, view.element);\n\n                    // remove our element\n                    view.element.parentNode.removeChild(view.element);\n\n                    // remove reference\n                    originalElement = null;\n                },\n\n                /**\n                 * Returns true if the app root is attached to given element\n                 * @param element\n                 */\n                isAttachedTo: function isAttachedTo(element) {\n                    return view.element === element || originalElement === element;\n                },\n\n                /**\n                 * Returns the root element\n                 */\n                element: {\n                    get: function get() {\n                        return view.element;\n                    },\n                },\n\n                /**\n                 * Returns the current pond status\n                 */\n                status: {\n                    get: function get() {\n                        return store.query('GET_STATUS');\n                    },\n                },\n            }\n        );\n\n        // Done!\n        store.dispatch('DID_INIT');\n\n        // create actual api object\n        return createObject(exports);\n    };\n\n    var createAppObject = function createAppObject() {\n        var customOptions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        // default options\n        var defaultOptions = {};\n        forin(getOptions(), function(key, value) {\n            defaultOptions[key] = value[0];\n        });\n\n        // set app options\n        var app = createApp(\n            Object.assign(\n                {},\n\n                defaultOptions,\n                {},\n\n                customOptions\n            )\n        );\n\n        // return the plugin instance\n        return app;\n    };\n\n    var lowerCaseFirstLetter = function lowerCaseFirstLetter(string) {\n        return string.charAt(0).toLowerCase() + string.slice(1);\n    };\n\n    var attributeNameToPropertyName = function attributeNameToPropertyName(attributeName) {\n        return toCamels(attributeName.replace(/^data-/, ''));\n    };\n\n    var mapObject = function mapObject(object, propertyMap) {\n        // remove unwanted\n        forin(propertyMap, function(selector, mapping) {\n            forin(object, function(property, value) {\n                // create regexp shortcut\n                var selectorRegExp = new RegExp(selector);\n\n                // tests if\n                var matches = selectorRegExp.test(property);\n\n                // no match, skip\n                if (!matches) {\n                    return;\n                }\n\n                // if there's a mapping, the original property is always removed\n                delete object[property];\n\n                // should only remove, we done!\n                if (mapping === false) {\n                    return;\n                }\n\n                // move value to new property\n                if (isString(mapping)) {\n                    object[mapping] = value;\n                    return;\n                }\n\n                // move to group\n                var group = mapping.group;\n                if (isObject(mapping) && !object[group]) {\n                    object[group] = {};\n                }\n\n                object[group][lowerCaseFirstLetter(property.replace(selectorRegExp, ''))] = value;\n            });\n\n            // do submapping\n            if (mapping.mapping) {\n                mapObject(object[mapping.group], mapping.mapping);\n            }\n        });\n    };\n\n    var getAttributesAsObject = function getAttributesAsObject(node) {\n        var attributeMapping =\n            arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        // turn attributes into object\n        var attributes = [];\n        forin(node.attributes, function(index) {\n            attributes.push(node.attributes[index]);\n        });\n\n        var output = attributes\n            .filter(function(attribute) {\n                return attribute.name;\n            })\n            .reduce(function(obj, attribute) {\n                var value = attr(node, attribute.name);\n\n                obj[attributeNameToPropertyName(attribute.name)] =\n                    value === attribute.name ? true : value;\n                return obj;\n            }, {});\n\n        // do mapping of object properties\n        mapObject(output, attributeMapping);\n\n        return output;\n    };\n\n    var createAppAtElement = function createAppAtElement(element) {\n        var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n        // how attributes of the input element are mapped to the options for the plugin\n        var attributeMapping = {\n            // translate to other name\n            '^class$': 'className',\n            '^multiple$': 'allowMultiple',\n            '^capture$': 'captureMethod',\n            '^webkitdirectory$': 'allowDirectoriesOnly',\n\n            // group under single property\n            '^server': {\n                group: 'server',\n                mapping: {\n                    '^process': {\n                        group: 'process',\n                    },\n\n                    '^revert': {\n                        group: 'revert',\n                    },\n\n                    '^fetch': {\n                        group: 'fetch',\n                    },\n\n                    '^restore': {\n                        group: 'restore',\n                    },\n\n                    '^load': {\n                        group: 'load',\n                    },\n                },\n            },\n\n            // don't include in object\n            '^type$': false,\n            '^files$': false,\n        };\n\n        // add additional option translators\n        applyFilters('SET_ATTRIBUTE_TO_OPTION_MAP', attributeMapping);\n\n        // create final options object by setting options object and then overriding options supplied on element\n        var mergedOptions = Object.assign({}, options);\n\n        var attributeOptions = getAttributesAsObject(\n            element.nodeName === 'FIELDSET' ? element.querySelector('input[type=file]') : element,\n            attributeMapping\n        );\n\n        // merge with options object\n        Object.keys(attributeOptions).forEach(function(key) {\n            if (isObject(attributeOptions[key])) {\n                if (!isObject(mergedOptions[key])) {\n                    mergedOptions[key] = {};\n                }\n                Object.assign(mergedOptions[key], attributeOptions[key]);\n            } else {\n                mergedOptions[key] = attributeOptions[key];\n            }\n        });\n\n        // if parent is a fieldset, get files from parent by selecting all input fields that are not file upload fields\n        // these will then be automatically set to the initial files\n        mergedOptions.files = (options.files || []).concat(\n            Array.from(element.querySelectorAll('input:not([type=file])')).map(function(input) {\n                return {\n                    source: input.value,\n                    options: {\n                        type: input.dataset.type,\n                    },\n                };\n            })\n        );\n\n        // build plugin\n        var app = createAppObject(mergedOptions);\n\n        // add already selected files\n        if (element.files) {\n            Array.from(element.files).forEach(function(file) {\n                app.addFile(file);\n            });\n        }\n\n        // replace the target element\n        app.replaceElement(element);\n\n        // expose\n        return app;\n    };\n\n    // if an element is passed, we create the instance at that element, if not, we just create an up object\n    var createApp$1 = function createApp() {\n        return isNode(arguments.length <= 0 ? undefined : arguments[0])\n            ? createAppAtElement.apply(void 0, arguments)\n            : createAppObject.apply(void 0, arguments);\n    };\n\n    var PRIVATE_METHODS = ['fire', '_read', '_write'];\n\n    var createAppAPI = function createAppAPI(app) {\n        var api = {};\n\n        copyObjectPropertiesToObject(app, api, PRIVATE_METHODS);\n\n        return api;\n    };\n\n    /**\n     * Replaces placeholders in given string with replacements\n     * @param string - \"Foo {bar}\"\"\n     * @param replacements - { \"bar\": 10 }\n     */\n    var replaceInString = function replaceInString(string, replacements) {\n        return string.replace(/(?:{([a-zA-Z]+)})/g, function(match, group) {\n            return replacements[group];\n        });\n    };\n\n    var createWorker = function createWorker(fn) {\n        var workerBlob = new Blob(['(', fn.toString(), ')()'], {\n            type: 'application/javascript',\n        });\n\n        var workerURL = URL.createObjectURL(workerBlob);\n        var worker = new Worker(workerURL);\n\n        return {\n            transfer: function transfer(message, cb) {},\n            post: function post(message, cb, transferList) {\n                var id = getUniqueId();\n\n                worker.onmessage = function(e) {\n                    if (e.data.id === id) {\n                        cb(e.data.message);\n                    }\n                };\n\n                worker.postMessage(\n                    {\n                        id: id,\n                        message: message,\n                    },\n\n                    transferList\n                );\n            },\n            terminate: function terminate() {\n                worker.terminate();\n                URL.revokeObjectURL(workerURL);\n            },\n        };\n    };\n\n    var loadImage = function loadImage(url) {\n        return new Promise(function(resolve, reject) {\n            var img = new Image();\n            img.onload = function() {\n                resolve(img);\n            };\n            img.onerror = function(e) {\n                reject(e);\n            };\n            img.src = url;\n        });\n    };\n\n    var renameFile = function renameFile(file, name) {\n        var renamedFile = file.slice(0, file.size, file.type);\n        renamedFile.lastModifiedDate = file.lastModifiedDate;\n        renamedFile.name = name;\n        return renamedFile;\n    };\n\n    var copyFile = function copyFile(file) {\n        return renameFile(file, file.name);\n    };\n\n    // already registered plugins (can't register twice)\n    var registeredPlugins = [];\n\n    // pass utils to plugin\n    var createAppPlugin = function createAppPlugin(plugin) {\n        // already registered\n        if (registeredPlugins.includes(plugin)) {\n            return;\n        }\n\n        // remember this plugin\n        registeredPlugins.push(plugin);\n\n        // setup!\n        var pluginOutline = plugin({\n            addFilter: addFilter,\n            utils: {\n                Type: Type,\n                forin: forin,\n                isString: isString,\n                isFile: isFile,\n                toNaturalFileSize: toNaturalFileSize,\n                replaceInString: replaceInString,\n                getExtensionFromFilename: getExtensionFromFilename,\n                getFilenameWithoutExtension: getFilenameWithoutExtension,\n                guesstimateMimeType: guesstimateMimeType,\n                getFileFromBlob: getFileFromBlob,\n                getFilenameFromURL: getFilenameFromURL,\n                createRoute: createRoute,\n                createWorker: createWorker,\n                createView: createView,\n                createItemAPI: createItemAPI,\n                loadImage: loadImage,\n                copyFile: copyFile,\n                renameFile: renameFile,\n                createBlob: createBlob,\n                applyFilterChain: applyFilterChain,\n                text: text,\n                getNumericAspectRatioFromString: getNumericAspectRatioFromString,\n            },\n\n            views: {\n                fileActionButton: fileActionButton,\n            },\n        });\n\n        // add plugin options to default options\n        extendDefaultOptions(pluginOutline.options);\n    };\n\n    // feature detection used by supported() method\n    var isOperaMini = function isOperaMini() {\n        return Object.prototype.toString.call(window.operamini) === '[object OperaMini]';\n    };\n    var hasPromises = function hasPromises() {\n        return 'Promise' in window;\n    };\n    var hasBlobSlice = function hasBlobSlice() {\n        return 'slice' in Blob.prototype;\n    };\n    var hasCreateObjectURL = function hasCreateObjectURL() {\n        return 'URL' in window && 'createObjectURL' in window.URL;\n    };\n    var hasVisibility = function hasVisibility() {\n        return 'visibilityState' in document;\n    };\n    var hasTiming = function hasTiming() {\n        return 'performance' in window;\n    }; // iOS 8.x\n    var hasCSSSupports = function hasCSSSupports() {\n        return 'supports' in (window.CSS || {});\n    }; // use to detect Safari 9+\n    var isIE11 = function isIE11() {\n        return /MSIE|Trident/.test(window.navigator.userAgent);\n    };\n\n    var supported = (function() {\n        // Runs immediately and then remembers result for subsequent calls\n        var isSupported =\n            // Has to be a browser\n            isBrowser() &&\n            // Can't run on Opera Mini due to lack of everything\n            !isOperaMini() &&\n            // Require these APIs to feature detect a modern browser\n            hasVisibility() &&\n            hasPromises() &&\n            hasBlobSlice() &&\n            hasCreateObjectURL() &&\n            hasTiming() &&\n            // doesn't need CSSSupports but is a good way to detect Safari 9+ (we do want to support IE11 though)\n            (hasCSSSupports() || isIE11());\n\n        return function() {\n            return isSupported;\n        };\n    })();\n\n    /**\n     * Plugin internal state (over all instances)\n     */\n    var state = {\n        // active app instances, used to redraw the apps and to find the later\n        apps: [],\n    };\n\n    // plugin name\n    var name = 'filepond';\n\n    /**\n     * Public Plugin methods\n     */\n    var fn = function fn() {};\n    exports.Status = {};\n    exports.FileStatus = {};\n    exports.FileOrigin = {};\n    exports.OptionTypes = {};\n    exports.create = fn;\n    exports.destroy = fn;\n    exports.parse = fn;\n    exports.find = fn;\n    exports.registerPlugin = fn;\n    exports.getOptions = fn;\n    exports.setOptions = fn;\n\n    // if not supported, no API\n    if (supported()) {\n        // start painter and fire load event\n        createPainter(\n            function() {\n                state.apps.forEach(function(app) {\n                    return app._read();\n                });\n            },\n            function(ts) {\n                state.apps.forEach(function(app) {\n                    return app._write(ts);\n                });\n            }\n        );\n\n        // fire loaded event so we know when FilePond is available\n        var dispatch = function dispatch() {\n            // let others know we have area ready\n            document.dispatchEvent(\n                new CustomEvent('FilePond:loaded', {\n                    detail: {\n                        supported: supported,\n                        create: exports.create,\n                        destroy: exports.destroy,\n                        parse: exports.parse,\n                        find: exports.find,\n                        registerPlugin: exports.registerPlugin,\n                        setOptions: exports.setOptions,\n                    },\n                })\n            );\n\n            // clean up event\n            document.removeEventListener('DOMContentLoaded', dispatch);\n        };\n\n        if (document.readyState !== 'loading') {\n            // move to back of execution queue, FilePond should have been exported by then\n            setTimeout(function() {\n                return dispatch();\n            }, 0);\n        } else {\n            document.addEventListener('DOMContentLoaded', dispatch);\n        }\n\n        // updates the OptionTypes object based on the current options\n        var updateOptionTypes = function updateOptionTypes() {\n            return forin(getOptions(), function(key, value) {\n                exports.OptionTypes[key] = value[1];\n            });\n        };\n\n        exports.Status = Object.assign({}, Status);\n        exports.FileOrigin = Object.assign({}, FileOrigin);\n        exports.FileStatus = Object.assign({}, ItemStatus);\n\n        exports.OptionTypes = {};\n        updateOptionTypes();\n\n        // create method, creates apps and adds them to the app array\n        exports.create = function create() {\n            var app = createApp$1.apply(void 0, arguments);\n            app.on('destroy', exports.destroy);\n            state.apps.push(app);\n            return createAppAPI(app);\n        };\n\n        // destroys apps and removes them from the app array\n        exports.destroy = function destroy(hook) {\n            // returns true if the app was destroyed successfully\n            var indexToRemove = state.apps.findIndex(function(app) {\n                return app.isAttachedTo(hook);\n            });\n            if (indexToRemove >= 0) {\n                // remove from apps\n                var app = state.apps.splice(indexToRemove, 1)[0];\n\n                // restore original dom element\n                app.restoreElement();\n\n                return true;\n            }\n\n            return false;\n        };\n\n        // parses the given context for plugins (does not include the context element itself)\n        exports.parse = function parse(context) {\n            // get all possible hooks\n            var matchedHooks = Array.from(context.querySelectorAll('.' + name));\n\n            // filter out already active hooks\n            var newHooks = matchedHooks.filter(function(newHook) {\n                return !state.apps.find(function(app) {\n                    return app.isAttachedTo(newHook);\n                });\n            });\n\n            // create new instance for each hook\n            return newHooks.map(function(hook) {\n                return exports.create(hook);\n            });\n        };\n\n        // returns an app based on the given element hook\n        exports.find = function find(hook) {\n            var app = state.apps.find(function(app) {\n                return app.isAttachedTo(hook);\n            });\n            if (!app) {\n                return null;\n            }\n            return createAppAPI(app);\n        };\n\n        // adds a plugin extension\n        exports.registerPlugin = function registerPlugin() {\n            for (\n                var _len = arguments.length, plugins = new Array(_len), _key = 0;\n                _key < _len;\n                _key++\n            ) {\n                plugins[_key] = arguments[_key];\n            }\n\n            // register plugins\n            plugins.forEach(createAppPlugin);\n\n            // update OptionTypes, each plugin might have extended the default options\n            updateOptionTypes();\n        };\n\n        exports.getOptions = function getOptions$1() {\n            var opts = {};\n            forin(getOptions(), function(key, value) {\n                opts[key] = value[0];\n            });\n            return opts;\n        };\n\n        exports.setOptions = function setOptions$1(opts) {\n            if (isObject(opts)) {\n                // update existing plugins\n                state.apps.forEach(function(app) {\n                    app.setOptions(opts);\n                });\n\n                // override defaults\n                setOptions(opts);\n            }\n\n            // return new options\n            return exports.getOptions();\n        };\n    }\n\n    exports.supported = supported;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n});\n","/*!\n * FilePondPluginFileValidateSize 2.2.8\n * Licensed under MIT, https://opensource.org/licenses/MIT/\n * Please visit https://pqina.nl/filepond/ for details.\n */\n\n/* eslint-disable */\n\n(function(global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined'\n        ? (module.exports = factory())\n        : typeof define === 'function' && define.amd\n        ? define(factory)\n        : ((global = global || self), (global.FilePondPluginFileValidateSize = factory()));\n})(this, function() {\n    'use strict';\n\n    var plugin = function plugin(_ref) {\n        var addFilter = _ref.addFilter,\n            utils = _ref.utils;\n        // get quick reference to Type utils\n        var Type = utils.Type,\n            replaceInString = utils.replaceInString,\n            toNaturalFileSize = utils.toNaturalFileSize;\n\n        // filtering if an item is allowed in hopper\n        addFilter('ALLOW_HOPPER_ITEM', function(file, _ref2) {\n            var query = _ref2.query;\n            if (!query('GET_ALLOW_FILE_SIZE_VALIDATION')) {\n                return true;\n            }\n\n            var sizeMax = query('GET_MAX_FILE_SIZE');\n            if (sizeMax !== null && file.size > sizeMax) {\n                return false;\n            }\n\n            var sizeMin = query('GET_MIN_FILE_SIZE');\n            if (sizeMin !== null && file.size < sizeMin) {\n                return false;\n            }\n\n            return true;\n        });\n\n        // called for each file that is loaded\n        // right before it is set to the item state\n        // should return a promise\n        addFilter('LOAD_FILE', function(file, _ref3) {\n            var query = _ref3.query;\n            return new Promise(function(resolve, reject) {\n                // if not allowed, all fine, exit\n                if (!query('GET_ALLOW_FILE_SIZE_VALIDATION')) {\n                    return resolve(file);\n                }\n\n                // check if file should be filtered\n                var fileFilter = query('GET_FILE_VALIDATE_SIZE_FILTER');\n                if (fileFilter && !fileFilter(file)) {\n                    return resolve(file);\n                }\n\n                // reject or resolve based on file size\n                var sizeMax = query('GET_MAX_FILE_SIZE');\n                if (sizeMax !== null && file.size > sizeMax) {\n                    reject({\n                        status: {\n                            main: query('GET_LABEL_MAX_FILE_SIZE_EXCEEDED'),\n                            sub: replaceInString(query('GET_LABEL_MAX_FILE_SIZE'), {\n                                filesize: toNaturalFileSize(\n                                    sizeMax,\n                                    '.',\n                                    query('GET_FILE_SIZE_BASE'),\n                                    query('GET_FILE_SIZE_LABELS', query)\n                                ),\n                            }),\n                        },\n                    });\n\n                    return;\n                }\n\n                // reject or resolve based on file size\n                var sizeMin = query('GET_MIN_FILE_SIZE');\n                if (sizeMin !== null && file.size < sizeMin) {\n                    reject({\n                        status: {\n                            main: query('GET_LABEL_MIN_FILE_SIZE_EXCEEDED'),\n                            sub: replaceInString(query('GET_LABEL_MIN_FILE_SIZE'), {\n                                filesize: toNaturalFileSize(\n                                    sizeMin,\n                                    '.',\n                                    query('GET_FILE_SIZE_BASE'),\n                                    query('GET_FILE_SIZE_LABELS', query)\n                                ),\n                            }),\n                        },\n                    });\n\n                    return;\n                }\n\n                // returns the current option value\n                var totalSizeMax = query('GET_MAX_TOTAL_FILE_SIZE');\n                if (totalSizeMax !== null) {\n                    // get the current total file size\n                    var currentTotalSize = query('GET_ACTIVE_ITEMS').reduce(function(total, item) {\n                        return total + item.fileSize;\n                    }, 0);\n\n                    // get the size of the new file\n                    if (currentTotalSize > totalSizeMax) {\n                        reject({\n                            status: {\n                                main: query('GET_LABEL_MAX_TOTAL_FILE_SIZE_EXCEEDED'),\n                                sub: replaceInString(query('GET_LABEL_MAX_TOTAL_FILE_SIZE'), {\n                                    filesize: toNaturalFileSize(\n                                        totalSizeMax,\n                                        '.',\n                                        query('GET_FILE_SIZE_BASE'),\n                                        query('GET_FILE_SIZE_LABELS', query)\n                                    ),\n                                }),\n                            },\n                        });\n\n                        return;\n                    }\n                }\n\n                // file is fine, let's pass it back\n                resolve(file);\n            });\n        });\n\n        return {\n            options: {\n                // Enable or disable file type validation\n                allowFileSizeValidation: [true, Type.BOOLEAN],\n\n                // Max individual file size in bytes\n                maxFileSize: [null, Type.INT],\n\n                // Min individual file size in bytes\n                minFileSize: [null, Type.INT],\n\n                // Max total file size in bytes\n                maxTotalFileSize: [null, Type.INT],\n\n                // Filter the files that need to be validated for size\n                fileValidateSizeFilter: [null, Type.FUNCTION],\n\n                // error labels\n                labelMinFileSizeExceeded: ['File is too small', Type.STRING],\n                labelMinFileSize: ['Minimum file size is {filesize}', Type.STRING],\n\n                labelMaxFileSizeExceeded: ['File is too large', Type.STRING],\n                labelMaxFileSize: ['Maximum file size is {filesize}', Type.STRING],\n\n                labelMaxTotalFileSizeExceeded: ['Maximum total size exceeded', Type.STRING],\n                labelMaxTotalFileSize: ['Maximum total file size is {filesize}', Type.STRING],\n            },\n        };\n    };\n\n    // fire pluginloaded event if running in browser, this allows registering the plugin when using async script tags\n    var isBrowser = typeof window !== 'undefined' && typeof window.document !== 'undefined';\n    if (isBrowser) {\n        document.dispatchEvent(new CustomEvent('FilePond:pluginloaded', { detail: plugin }));\n    }\n\n    return plugin;\n});\n","/*!\n * FilePondPluginFileValidateType 1.2.9\n * Licensed under MIT, https://opensource.org/licenses/MIT/\n * Please visit https://pqina.nl/filepond/ for details.\n */\n\n/* eslint-disable */\n\n(function(global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined'\n        ? (module.exports = factory())\n        : typeof define === 'function' && define.amd\n        ? define(factory)\n        : ((global = global || self), (global.FilePondPluginFileValidateType = factory()));\n})(this, function() {\n    'use strict';\n\n    var plugin = function plugin(_ref) {\n        var addFilter = _ref.addFilter,\n            utils = _ref.utils;\n        // get quick reference to Type utils\n        var Type = utils.Type,\n            isString = utils.isString,\n            replaceInString = utils.replaceInString,\n            guesstimateMimeType = utils.guesstimateMimeType,\n            getExtensionFromFilename = utils.getExtensionFromFilename,\n            getFilenameFromURL = utils.getFilenameFromURL;\n\n        var mimeTypeMatchesWildCard = function mimeTypeMatchesWildCard(mimeType, wildcard) {\n            var mimeTypeGroup = (/^[^/]+/.exec(mimeType) || []).pop(); // image/png -> image\n            var wildcardGroup = wildcard.slice(0, -2); // image/* -> image\n            return mimeTypeGroup === wildcardGroup;\n        };\n\n        var isValidMimeType = function isValidMimeType(acceptedTypes, userInputType) {\n            return acceptedTypes.some(function(acceptedType) {\n                // accepted is wildcard mime type\n                if (/\\*$/.test(acceptedType)) {\n                    return mimeTypeMatchesWildCard(userInputType, acceptedType);\n                }\n\n                // is normal mime type\n                return acceptedType === userInputType;\n            });\n        };\n\n        var getItemType = function getItemType(item) {\n            // if the item is a url we guess the mime type by the extension\n            var type = '';\n            if (isString(item)) {\n                var filename = getFilenameFromURL(item);\n                var extension = getExtensionFromFilename(filename);\n                if (extension) {\n                    type = guesstimateMimeType(extension);\n                }\n            } else {\n                type = item.type;\n            }\n\n            return type;\n        };\n\n        var validateFile = function validateFile(item, acceptedFileTypes, typeDetector) {\n            // no types defined, everything is allowed \\o/\n            if (acceptedFileTypes.length === 0) {\n                return true;\n            }\n\n            // gets the item type\n            var type = getItemType(item);\n\n            // no type detector, test now\n            if (!typeDetector) {\n                return isValidMimeType(acceptedFileTypes, type);\n            }\n\n            // use type detector\n            return new Promise(function(resolve, reject) {\n                typeDetector(item, type)\n                    .then(function(detectedType) {\n                        if (isValidMimeType(acceptedFileTypes, detectedType)) {\n                            resolve();\n                        } else {\n                            reject();\n                        }\n                    })\n                    .catch(reject);\n            });\n        };\n\n        var applyMimeTypeMap = function applyMimeTypeMap(map) {\n            return function(acceptedFileType) {\n                return map[acceptedFileType] === null\n                    ? false\n                    : map[acceptedFileType] || acceptedFileType;\n            };\n        };\n\n        // setup attribute mapping for accept\n        addFilter('SET_ATTRIBUTE_TO_OPTION_MAP', function(map) {\n            return Object.assign(map, {\n                accept: 'acceptedFileTypes',\n            });\n        });\n\n        // filtering if an item is allowed in hopper\n        addFilter('ALLOW_HOPPER_ITEM', function(file, _ref2) {\n            var query = _ref2.query;\n            // if we are not doing file type validation exit\n            if (!query('GET_ALLOW_FILE_TYPE_VALIDATION')) {\n                return true;\n            }\n\n            // we validate the file against the accepted file types\n            return validateFile(file, query('GET_ACCEPTED_FILE_TYPES'));\n        });\n\n        // called for each file that is loaded\n        // right before it is set to the item state\n        // should return a promise\n        addFilter('LOAD_FILE', function(file, _ref3) {\n            var query = _ref3.query;\n            return new Promise(function(resolve, reject) {\n                if (!query('GET_ALLOW_FILE_TYPE_VALIDATION')) {\n                    resolve(file);\n                    return;\n                }\n\n                var acceptedFileTypes = query('GET_ACCEPTED_FILE_TYPES');\n\n                // custom type detector method\n                var typeDetector = query('GET_FILE_VALIDATE_TYPE_DETECT_TYPE');\n\n                // if invalid, exit here\n                var validationResult = validateFile(file, acceptedFileTypes, typeDetector);\n\n                var handleRejection = function handleRejection() {\n                    var acceptedFileTypesMapped = acceptedFileTypes\n                        .map(\n                            applyMimeTypeMap(\n                                query('GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES_MAP')\n                            )\n                        )\n                        .filter(function(label) {\n                            return label !== false;\n                        });\n\n                    var acceptedFileTypesMappedUnique = acceptedFileTypesMapped.filter(function(\n                        item,\n                        index\n                    ) {\n                        return acceptedFileTypesMapped.indexOf(item) === index;\n                    });\n\n                    reject({\n                        status: {\n                            main: query('GET_LABEL_FILE_TYPE_NOT_ALLOWED'),\n                            sub: replaceInString(\n                                query('GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES'),\n                                {\n                                    allTypes: acceptedFileTypesMappedUnique.join(', '),\n                                    allButLastType: acceptedFileTypesMappedUnique\n                                        .slice(0, -1)\n                                        .join(', '),\n                                    lastType:\n                                        acceptedFileTypesMappedUnique[\n                                            acceptedFileTypesMappedUnique.length - 1\n                                        ],\n                                }\n                            ),\n                        },\n                    });\n                };\n\n                // has returned new filename immidiately\n                if (typeof validationResult === 'boolean') {\n                    if (!validationResult) {\n                        return handleRejection();\n                    }\n                    return resolve(file);\n                }\n\n                // is promise\n                validationResult\n                    .then(function() {\n                        resolve(file);\n                    })\n                    .catch(handleRejection);\n            });\n        });\n\n        // expose plugin\n        return {\n            // default options\n            options: {\n                // Enable or disable file type validation\n                allowFileTypeValidation: [true, Type.BOOLEAN],\n\n                // What file types to accept\n                acceptedFileTypes: [[], Type.ARRAY],\n                // - must be comma separated\n                // - mime types: image/png, image/jpeg, image/gif\n                // - extensions: .png, .jpg, .jpeg ( not enabled yet )\n                // - wildcards: image/*\n\n                // label to show when a type is not allowed\n                labelFileTypeNotAllowed: ['File is of invalid type', Type.STRING],\n\n                // nicer label\n                fileValidateTypeLabelExpectedTypes: [\n                    'Expects {allButLastType} or {lastType}',\n                    Type.STRING,\n                ],\n\n                // map mime types to extensions\n                fileValidateTypeLabelExpectedTypesMap: [{}, Type.OBJECT],\n\n                // Custom function to detect type of file\n                fileValidateTypeDetectType: [null, Type.FUNCTION],\n            },\n        };\n    };\n\n    // fire pluginloaded event if running in browser, this allows registering the plugin when using async script tags\n    var isBrowser = typeof window !== 'undefined' && typeof window.document !== 'undefined';\n    if (isBrowser) {\n        document.dispatchEvent(new CustomEvent('FilePond:pluginloaded', { detail: plugin }));\n    }\n\n    return plugin;\n});\n"],"names":["$parcel$interopDefault","a","__esModule","default","$parcel$export","e","n","v","s","Object","defineProperty","get","set","enumerable","configurable","parcelRequire","$parcel$global","globalThis","self","window","global","parcelRegister","register","module","exports","factory","exports1","decimalSeparator","thousandsStringWithSeparator","isSupported","createStore","initialState","queries","arguments","length","undefined","actions","state","assign","actionQueue","dispatchQueue","dispatch","type","data","isBlocking","document","hidden","push","actionHandlers","query","str","_queryHandles","_len","args","Array","_key","queryHandles","apply","forEach","action","getState","processActionQueue","queue","concat","processDispatchQueue","_ref","obj","property","definition","forin","cb","key","hasOwnProperty","createObject","attr","node","name","value","getAttribute","hasAttribute","setAttribute","svgElements","isSVGElement","tag","includes","createElement","className","attributes","element","createElementNS","IS_BROWSER","isBrowser","getChildCount","el","children","childNodes","getViewRect","elementRect","childViews","offset","scale","left","top","right","width","bottom","height","rect","inner","outer","filter","childView","isRectIgnored","map","childViewRect","expandRect","calculateRectSize","marginBottom","marginRight","parent","child","isNumber","thereYet","position","destination","velocity","errorMargin","Math","abs","easeInOutQuad","t","animator","spring","_ref$stiffness","stiffness","_ref$damping","damping","_ref$mass","mass","target","resting","api","interpolate","ts","skipToEndState","f","onupdate","oncomplete","tween","p","_ref$duration","duration","_ref$easing","easing","_ref$delay","delay","start","reverse","createAnimator","category","def","props","addGetSet","keys","overwrite","isArray","o","getter","setter","isDefined","defaults","opacity","scaleX","scaleY","translateX","translateY","rotateX","rotateY","rotateZ","originX","originY","propsHaveChanged","currentProps","newProps","prop","applyStyles","_ref2","perspective","transforms","styles","elementCurrentStyle","style","cssText","Mixins","mixinConfig","viewProps","viewInternalAPI","viewExternalAPI","view","initialProps","getRect","write","destroy","listeners","viewState","events","add","fn","addEventListener","remove","removeEventListener","on","off","splice","findIndex","event","animations","animation","apis","updateRect","layoutCalculated","paddingTop","parseInt","marginTop","marginLeft","offsetLeft","offsetTop","offsetWidth","offsetHeight","scrollTop","offsetParent","createView","_ref$tag","_ref$name","_ref$attributes","_ref$read","read","_ref$write","_ref$create","create","_ref$destroy","_ref$filterFrameActio","filterFrameActionsForChild","_ref$didCreateView","didCreateView","_ref$didWriteView","didWriteView","_ref$ignoreRect","ignoreRect","_ref$ignoreRectUpdate","ignoreRectUpdate","_ref$mixins","mixins","store","getComputedStyle","frameRect","isResting","activeMixins","ref","writers","readers","destroyers","getElement","getChildViews","sharedAPIDefinition","internalAPIDefinition","is","needle","appendChild","index","insertBefore","createChildView","linkView","unlinkView","indexOf","appendChildView","removeChildView","parentNode","removeChild","registerWriter","writer","registerReader","reader","registerDestroyer","destroyer","invalidateLayout","externalAPIDefinition","_read","root","internalAPI","_write","frameActions","shouldOptimize","timestamp","mixin","_destroy","mixinAPIDefinition","sort","b","mixinAPI","childCount","createRoute","routes","_ref$actions","newNode","referenceNode","insertAfter","nextSibling","isEmpty","trim","toString","isBoolean","toBoolean","isString","toNumber","replace","toInt","toFloat","parseFloat","isInt","isFinite","floor","toBytes","base","naturalFileSize","test","isFunction","toFunctionReference","string","levels","split","level","shift","methods","process","patch","revert","fetch","restore","load","createServerAPI","outline","url","timeout","headers","createAction","method","withCredentials","onload","ondata","onerror","parts","header","isObject","getType","conversionTable","array","splitter","boolean","int","number","float","bytes","function","serverapi","object","JSON","parse","getValueByType","newValue","defaultValue","valueType","newValueType","convertedValue","option","createOption","currentValue","createOptions","options","optionDefinition","fromCamels","separator","part","toLowerCase","join","createOptionAPI","toUpperCase","InteractionMethod","API","DROP","BROWSE","PASTE","NONE","getUniqueId","random","substring","_AwaitValue","wrapped","_AsyncGenerator","gen","front","back","resume","arg","result","wrappedAwait","Promise","resolve","then","settle","done","err","reject","next","_invoke","request","return","_toConsumableArray","arr","_arrayWithoutHoles","i","arr2","_iterableToArray","iter","Symbol","iterator","prototype","call","from","_nonIterableSpread","TypeError","asyncIterator","throw","arrayRemove","run","sync","setTimeout","listener","_fire","fireSync","fire","_len2","_key2","onOnce","_cb","copyObjectPropertiesToObject","src","excluded","getOwnPropertyNames","getOwnPropertyDescriptor","PRIVATE","createItemAPI","item","removeReleasedItems","items","released","ItemStatus","INIT","IDLE","PROCESSING_QUEUED","PROCESSING","PROCESSING_COMPLETE","PROCESSING_ERROR","PROCESSING_REVERT_ERROR","LOADING","LOAD_ERROR","FileOrigin","INPUT","LIMBO","LOCAL","getNonNumeric","exec","getDecimalSeparator","toLocaleString","Type","BOOLEAN","INT","NUMBER","STRING","ARRAY","OBJECT","FUNCTION","ACTION","SERVER_API","REGEX","filters","applyFilterChain","utils","matchingFilters","initialFilter","reduce","current","catch","error","applyFilters","addFilter","getOptions","defaultOptions","setOptions","opts","id","disabled","required","captureMethod","allowSyncAcceptAttribute","allowDrop","allowBrowse","allowPaste","allowMultiple","allowReplace","allowRevert","allowRemove","allowProcess","allowReorder","allowDirectoriesOnly","storeAsFile","forceRevert","maxFiles","checkValidity","itemInsertLocationFreedom","itemInsertLocation","itemInsertInterval","dropOnPage","dropOnElement","dropValidation","ignoredFiles","instantUpload","maxParallelUploads","allowMinimumUploadDuration","chunkUploads","chunkForce","chunkSize","chunkRetryDelays","server","fileSizeBase","labelFileSizeBytes","labelFileSizeKilobytes","labelFileSizeMegabytes","labelFileSizeGigabytes","labelDecimalSeparator","labelThousandsSeparator","labelIdle","labelInvalidField","labelFileWaitingForSize","labelFileSizeNotAvailable","labelFileCountSingular","labelFileCountPlural","labelFileLoading","labelFileAdded","labelFileLoadError","labelFileRemoved","labelFileRemoveError","labelFileProcessing","labelFileProcessingComplete","labelFileProcessingAborted","labelFileProcessingError","labelFileProcessingRevertError","labelTapToCancel","labelTapToRetry","labelTapToUndo","labelButtonRemoveItem","labelButtonAbortItemLoad","labelButtonRetryItemLoad","labelButtonAbortItemProcessing","labelButtonUndoItemProcessing","labelButtonRetryItemProcessing","labelButtonProcessItem","iconRemove","iconProcess","iconRetry","iconUndo","iconDone","oninit","onwarning","onactivatefile","oninitfile","onaddfilestart","onaddfileprogress","onaddfile","onprocessfilestart","onprocessfileprogress","onprocessfileabort","onprocessfilerevert","onprocessfile","onprocessfiles","onremovefile","onpreparefile","onupdatefiles","onreorderfiles","beforeDropFile","beforeAddFile","beforeRemoveFile","beforePrepareFile","stylePanelLayout","stylePanelAspectRatio","styleItemPanelAspectRatio","styleButtonRemoveItemPosition","styleButtonProcessItemPosition","styleLoadIndicatorPosition","styleProgressIndicatorPosition","styleButtonRemoveItemAlign","files","credits","getItemByQuery","find","getNumericAspectRatioFromString","aspectRatio","getActiveItems","archived","Status","EMPTY","ERROR","BUSY","READY","res","canUpdateFileInput","dataTransfer","DataTransfer","File","ITEM_ERROR","ITEM_BUSY","ITEM_READY","isItemInErrorState","status","isItemInBusyState","isItemInReadyState","isAsync","GET_STATUS","some","GET_ITEM","GET_ACTIVE_ITEM","GET_ACTIVE_ITEMS","GET_ITEMS","GET_ITEM_NAME","filename","GET_ITEM_SIZE","fileSize","GET_STYLES","option1","GET_PANEL_ASPECT_RATIO","isShapeCircle","GET_ITEM_PANEL_ASPECT_RATIO","GET_ITEMS_BY_STATUS","GET_TOTAL_ITEMS","SHOULD_UPDATE_FILE_INPUT","IS_ASYNC","GET_FILE_SIZE_LABELS","labelBytes","labelKilobytes","labelMegabytes","labelGigabytes","hasRoomForItem","count","maxFileCount","limit","min","max","insertItem","isBase64DataURI","getFilenameFromURL","pop","getExtensionFromFilename","guesstimateExtension","subtype","leftPad","padding","slice","getDateString","date","Date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getFileFromBlob","blob","extension","file","size","lastModifiedDate","_relativePath","createBlob","arrayBuffer","mimeType","BB","BlobBuilder","WebKitBlobBuilder","MozBlobBuilder","MSBlobBuilder","bb","append","getBlob","Blob","getBlobFromByteStringWithMimeType","byteString","ab","ArrayBuffer","ia","Uint8Array","charCodeAt","getMimeTypeFromBase64DataURI","dataURI","getBlobFromBase64DataURI","atob","getFileNameFromHeader","matches","decodeURI","getFileSizeFromHeader","match","getFileInfoFromHeaders","info","source","rows","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","createFileLoader","fetchFn","complete","progress","loadURL","body","code","now","response","computable","total","fileinfo","setSource","getProgress","abort","isGet","sendRequest","onheaders","onprogress","ontimeout","onabort","aborted","xhr","headersReceived","encodeURI","encodeURIComponent","stringify","XMLHttpRequest","upload","lengthComputable","loaded","onreadystatechange","readyState","open","unescape","setRequestHeader","responseType","send","createResponse","createTimeoutResponse","getAllResponseHeaders","hasQS","buildURL","createFetchFunction","apiUrl","statusText","ChunkStatus","QUEUED","COMPLETE","WAITING","processFileChunked","metadata","transfer","requestParams","formData","chunks","chunkTransferId","chunkServer","serverId","fd","getResponseHeader","lastChunkIndex","retries","canProcessChunk","chunk","processChunk","every","requestUrl","processChunks","updateTotalProgress","retryProcessChunk","clearTimeout","totalBytesTransfered","abortChunks","FormData","createProcessorFunction","params","canChunkUpload","shouldChunkUpload","willChunkUpload","createRevertFunction","uniqueFileId","getRandomNumber","createPerceivedPerformanceUpdater","tickMin","tickMax","tick","runtime","clear","createFileProcessor","processFn","perceivedProgress","perceivedPerformanceUpdater","perceivedDuration","getDuration","progressFn","completeFn","transferId","reset","getFilenameWithoutExtension","lastIndexOf","createFileStub","isFile","deepCloneObject","v1","createItem","origin","serverFileReference","frozen","processingAborted","activeLoader","activeProcessor","abortProcessingRequestComplete","setStatus","_setMetadata","silent","last","filenameWithoutExtension","fileExtension","fileType","relativePath","getMetadata","setMetadata","extend","handler","itemAPI","abortLoad","retryLoad","requestProcessing","abortProcessing","loader","meta","success","processor","onprocess","console","revertFileUpload","serverTransferId","freeze","release","archive","getItemById","itemId","fetchBlob","getDomainFromURL","location","protocol","dynamicLabel","label","listUpdated","listUpdateTimeout","optionalPromise","sortItems","compare","getItemByQueryFromState","itemHandler","_ref$success","_ref$failure","failure","_objectWithoutProperties","_objectWithoutPropertiesLoose","sourceKeys","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","ABORT_ALL","DID_SET_FILES","_ref2$value","activeItems","interactionMethod","DID_UPDATE_ITEM_METADATA","_ref3","change","itemUpdateTimeout","doUpload","shouldPrepareOutput","MOVE_ITEM","_ref4","currentIndex","SORT","_ref5","ADD_ITEMS","_ref6","_ref6$success","_ref6$failure","insertLocation","totalItems","all","validItems","ADD_ITEM","_ref7","_ref7$index","_ref7$success","_ref7$failure","_ref7$options","_item","mainStatus","main","sub","handleAdd","shouldAdd","loadComplete","_ref8","href","REQUEST_PREPARE_OUTPUT","_ref9","_ref9$failure","COMPLETE_LOAD_ITEM","_ref10","RETRY_ITEM_LOAD","REQUEST_ITEM_PREPARE","_success","output","REQUEST_ITEM_PROCESSING","processNow","PROCESS_ITEM","totalCurrentUploads","processingQueue","processNext","queueEntry","itemReference","noop","RETRY_ITEM_PROCESSING","REQUEST_REMOVE_ITEM","shouldRemove","RELEASE_ITEM","REMOVE_ITEM","removeFromView","ABORT_ITEM_LOAD","ABORT_ITEM_PROCESSING","REQUEST_REVERT_ITEM_PROCESSING","handleRevert","shouldRevert","requestRemoveResult","REVERT_ITEM_PROCESSING","SET_OPTIONS","_ref11","optionKeys","prioritizedOptionKeys","PrioritizedOptions","orderedOptionKeys","formatFilename","createElement$1","tagName","text","textNode","nodeValue","createTextNode","polarToCartesian","centerX","centerY","radius","angleInDegrees","angleInRadians","PI","x","cos","y","sin","describeArc","startAngle","endAngle","arcSweep","end","percentageArc","to","progressIndicator","spin","svg","path","align","dataset","ringStrokeWidth","ringFrom","ringTo","coordinates","fileActionButton","innerHTML","icon","isDisabled","shouldDisable","removeAttribute","toNaturalFileSize","_options$labelBytes","_options$labelKilobyt","_options$labelMegabyt","_options$labelGigabyt","MB","GB","round","removeDecimalsWhenZero","decimalCount","toFixed","updateFile","fileName","updateFileSizeOnError","fileInfo","DID_LOAD_ITEM","DID_UPDATE_ITEM_META","DID_THROW_ITEM_LOAD_ERROR","DID_THROW_ITEM_INVALID","toPercentage","didSetItemLoadProgress","title","fileStatus","DID_REVERT_ITEM_PROCESSING","DID_REQUEST_ITEM_PROCESSING","DID_ABORT_ITEM_PROCESSING","DID_COMPLETE_ITEM_PROCESSING","DID_UPDATE_ITEM_PROCESS_PROGRESS","DID_UPDATE_ITEM_LOAD_PROGRESS","DID_THROW_ITEM_PROCESSING_ERROR","DID_THROW_ITEM_PROCESSING_REVERT_ERROR","DID_THROW_ITEM_REMOVE_ERROR","Buttons","AbortItemLoad","RetryItemLoad","RemoveItem","ProcessItem","AbortItemProcessing","RetryItemProcessing","RevertItemProcessing","ButtonKeys","calculateFileInfoOffset","getRemoveIndicatorAligment","buttonRect","buttonRemoveItem","calculateButtonWidth","buttonAbortItemLoad","calculateFileVerticalCenterOffset","calculateFileHorizontalCenterOffset","DefaultStyle","buttonRetryItemLoad","buttonProcessItem","buttonAbortItemProcessing","buttonRetryItemProcessing","buttonRevertItemProcessing","loadProgressIndicator","processProgressIndicator","processingCompleteIndicator","IdleStyle","ProcessingStyle","StyleMap","DID_START_ITEM_LOAD","DID_START_ITEM_REMOVE","DID_LOAD_LOCAL_ITEM","DID_START_ITEM_PROCESSING","processingCompleteIndicatorView","route","DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING","DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD","DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL","buttonAbortItemRemoval","_ref12","buttonFilter","LocalButtons","prev","curr","alignRemoveItemButton","enabledButtons","_map","buttonView","classList","stopPropagation","loadIndicatorView","progressIndicatorView","activeStyles","stylesToApply","defaultStyles","control","fileWrapper","PANEL_SPRING_PROPS","createSection","section","viewConstructor","panel","heightCurrent","scalable","topRect","bottomRect","center","createDragHelper","itemIds","prevIndex","setIndex","getIndex","getItemIndex","ITEM_TRANSLATE_SPRING","ITEM_SCALE_SPRING","StateMap","route$1","DID_UPDATE_PANEL_HEIGHT","handleClick","container","markedForRemoval","dragState","isPrimary","removedActivateListener","pageX","pageY","dragOrigin","dragCenter","offsetX","offsetY","drag","preventDefault","dragOffset","drop","DID_GRAB_ITEM","DID_DRAG_ITEM","DID_DROP_ITEM","currentState","filepondItemState","getItemsPerRow","horizontalSpace","itemWidth","getItemIndexByPosition","positionInView","l","itemRect","itemHorizontalMargin","itemsPerRow","childMid","itemVerticalMargin","itemHeight","_index","indexX","indexY","itemTop","itemRight","itemBottom","dropAreaDimensions","getHeight","setHeight","val","getWidth","setWidth","setDimensions","moveItem","vx","vy","spawnDate","introItemView","getItemHeight","route$2","DID_ADD_ITEM","addIndex","cooldown","dist","lastItemSpanwDate","DID_REMOVE_ITEM","numItems","oldIndex","dragPosition","dragHeight","dragWidth","cols","location1","getGridIndex","getColIndex","visibleChildren","idx","childHeight","childBottom","childTop","list","dragCoordinates","dragIndex","dragIndexOffset","removeIndexOffset","addIndexOffset","childRect","visualHeight","prevX","prevY","visualIndex","vectorX","sign","vectorY","route$3","DID_DRAG","scopeLeft","scopeTop","DID_END_DRAG","listScroller","overflowing","overflow","newHeight","attrToggle","enabledValue","resetFileInput","input","form","setAcceptedFileTypes","toggleAllowMultiple","toggleDirectoryFilter","toggleDisabled","doesAllowBrowse","toggleRequired","setCaptureMethod","updateRequiredStatus","setCustomValidity","browser","handleChange","webkitRelativePath","DID_SET_DISABLED","DID_SET_ALLOW_BROWSE","DID_SET_ALLOW_DIRECTORIES_ONLY","DID_SET_ALLOW_MULTIPLE","DID_SET_ACCEPTED_FILE_TYPES","DID_SET_CAPTURE_METHOD","DID_SET_REQUIRED","Key","ENTER","SPACE","updateLabelValue","clickable","querySelector","dropLabel","handleKeyDown","keyCode","click","contains","caption","DID_SET_LABEL_IDLE","addBlob","route$4","DID_DROP","drip","setInputFiles","getField","fields","syncFieldPositionsWithItems","didReorderItems","shouldUseFileInput","fileItem","dataContainer","field","DID_DEFINE_VALUE","DID_PREPARE_OUTPUT","DID_REORDER_ITEMS","DID_SORT_ITEMS","images","text$1","zip","epub","guesstimateMimeType","requestDataTransferItems","links","getLinks","hasFiles","getFiles","promisedFiles","isFileSystemItem","getFilesFromItem","returnedFileGroups","group","isEntry","entry","getAsEntry","isDirectory","kind","isDirectoryEntry","getFilesInDirectory","getAsFile","dirCounter","fileCounter","resolveIfDone","readEntries","dirEntry","directoryReader","createReader","readBatch","entries","correctedFile","correctMissingFileType","fullPath","webkitGetAsEntry","getLinksFromTransferMetaData","getLinksFromTransferURLData","getData","dragNDropObservers","eventPosition","pageLeft","pageTop","layerX","layerY","createDragNDropClient","scopeToObserve","filterElement","observer","getDragNDropObserver","client","ondrop","onenter","ondrag","onexit","allowdrop","addListener","newObserver","createDragNDropObserver","clients","dragenter","dragover","dragleave","handlers","createHandler","isEventTarget","point","elementAtPosition","getRootNode","pageXOffset","pageYOffset","elementFromPoint","initialTarget","setDropEffect","effect","dropEffect","overDropTarget","allowsTransfer","createHopper","scope","validateItems","catchesDropsOnPage","requiresDropOnElement","_options$filterItems","filterItems","documentElement","lastState","filteredItems","ondragend","ondragstart","updateHopperState","hopperState","listening","listeners$1","handlePaste","activeEl","activeElement","nodeName","inScope","clipboardData","listen","unlisten","createPaster","addFilesNotificationTimeout","notificationClearTimeout","filenames","assist","message","textContent","clear$1","listModified","isUsingFilePond","itemProcessedUndo","itemError","assistant","toCamels","RegExp","charAt","debounce","func","interval","immidiateOnly","prevent","calculateListItemMargin","calculateListHeight","visual","bounds","scrollList","itemList","removedItem","verticalItemCount","ceil","calculateRootBoundingBoxHeight","measureHeight","cappedHeight","maxHeight","fixedHeight","exceedsMaxFiles","maxItems","totalBrowseItems","getDragIndex","toggleDrop","isAllowed","enabled","hopper","toggleBrowse","togglePaste","paster","route$5","DID_SET_ALLOW_DROP","DID_SET_ALLOW_PASTE","measure","widthPrevious","widthUpdated","updateHistory","previousAspectRatio","canHover","matchMedia","hasPointerEvents","passive","frag","tabindex","rel","_root$ref","isMultiItem","atMaxCapacity","addAction","listItemMargin","listHeight","labelHeight","currentLabelHeight","listMarginTop","listMarginBottom","boundsHeight","history","MAX_BOUNCES","bounces","listAvailableHeight","_listAvailableHeight","isCappedHeight","panelHeight","_listAvailableHeight2","itemMargin","transform","createApp","initialOptions","originalElement","visibilityHandler","resizeDoneTimer","isResizing","isResizingHorizontally","initialWindowWidth","currentWindowWidth","resizeHandler","isHidden","createEvent","eventRoutes","DID_DESTROY","DID_INIT","DID_THROW_MAX_FILES","DID_INIT_ITEM","DID_COMPLETE_ITEM_PROCESSING_ALL","DID_UPDATE_ITEMS","DID_ACTIVATE_ITEM","exposeEvent","detail","pond","dispatchEvent","CustomEvent","bubbles","cancelable","composed","filtered","routeActionsToEvents","prepareFile","removeFile","addFiles","sources","lastArgument","processFile","innerWidth","addFile","getFile","moveFile","processFiles","_len3","_key3","removeFiles","_len4","_key4","mappedQueries","q","prepareFiles","browse","appendTo","replaceElement","restoreElement","isAttachedTo","createAppObject","customOptions","mapObject","propertyMap","selector","mapping","selectorRegExp","getAttributesAsObject","attributeMapping","attribute","attributeName","createAppAtElement","mergedOptions","attributeOptions","querySelectorAll","app","createApp$1","isNode","HTMLElement","PRIVATE_METHODS","createAppAPI","replaceInString","replacements","createWorker","workerBlob","workerURL","URL","createObjectURL","worker","Worker","post","transferList","onmessage","postMessage","terminate","revokeObjectURL","loadImage","img","Image","renameFile","renamedFile","copyFile","registeredPlugins","createAppPlugin","plugin","pluginOutline","views","supported","operamini","hasCSSSupports","CSS","navigator","userAgent","apps","FileStatus","OptionTypes","registerPlugin","createPainter","fps","painter","requestTick","cancelTick","setTimerType","performance","requestAnimationFrame","cancelAnimationFrame","delta","updateOptionTypes","hook","indexToRemove","context","newHooks","matchedHooks","newHook","plugins","sizeMax","sizeMin","fileFilter","filesize","totalSizeMax","currentTotalSize","allowFileSizeValidation","maxFileSize","minFileSize","maxTotalFileSize","fileValidateSizeFilter","labelMinFileSizeExceeded","labelMinFileSize","labelMaxFileSizeExceeded","labelMaxFileSize","labelMaxTotalFileSizeExceeded","labelMaxTotalFileSize","isValidMimeType","acceptedTypes","userInputType","acceptedType","wildcard","getItemType","validateFile","acceptedFileTypes","typeDetector","detectedType","accept","validationResult","handleRejection","acceptedFileTypesMapped","acceptedFileType","acceptedFileTypesMappedUnique","allTypes","allButLastType","lastType","allowFileTypeValidation","labelFileTypeNotAllowed","fileValidateTypeLabelExpectedTypes","fileValidateTypeLabelExpectedTypesMap","fileValidateTypeDetectType"],"version":3,"file":"filepond.8361a518.js.map"}