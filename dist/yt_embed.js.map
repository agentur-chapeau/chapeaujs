{"version":3,"file":"yt_embed.js","sources":["../src/scripts/yt_embed.js"],"sourcesContent":["(function () {\n  const videoHTML = `\n            <iframe class=\"c-video__iframe\" style=\"display: none\" frameborder=\"0\" allow=\"fullscreen\"></iframe>\n            <img class=\"c-video__thumbnail\">\n            <div class=\"c-video__overlay\">\n                <a href=\"#\" class=\"c-video__button w-button\">Video laden</a>\n                <span class=\"c-video__text\">\n                Das Video wird von YouTube eingebettet.<br>\n                Es gelten die\n                <a class=\"c-video__link\" href=\"https://policies.google.com/privacy?hl=de\"\n                    target=\"_blank\">Datenschutzerkl√§rungen</a>\n                von Google.\n                </span>\n            </div>\n        `;\n  function getIdFromUrl(urlString) {\n    const url = new URL(urlString);\n    let videoId = url.searchParams.get(\"v\"); // Full URL\n    if (!videoId) {\n      videoId = url.pathname.split(\"/\").slice(-1); // Short URL\n    }\n    return videoId;\n  }\n  /** @param {HTMLElement} $el */\n  function createVideo($el) {\n    $el.classList.add(\"c-video\");\n    $el.innerHTML = videoHTML;\n    const $iframe = $el.querySelector(\".c-video .c-video__iframe\");\n    const $thumbnail = $el.querySelector(\".c-video .c-video__thumbnail\");\n    const $overlay = $el.querySelector(\".c-video .c-video__overlay\");\n    const $link = $el.querySelector(\".c-video .c-video__link\");\n    const url = $el.dataset.url;\n    const videoId = getIdFromUrl(url);\n    const hasThumbnail = $el.dataset.thumbnail != null;\n    if (hasThumbnail) {\n      $thumbnail.src = $el.dataset.thumbnail;\n    } else {\n      $thumbnail.src = `https://img.youtube.com/vi/${videoId}/maxresdefault.jpg`;\n      // Check if maxresredefault thumbnail is available\n      $thumbnail.addEventListener(\"load\", () => {\n        if ($thumbnail.naturalHeight <= 90) {\n          // Fallback image from YT is 120x90\n          $thumbnail.src = `http://img.youtube.com/vi/${videoId}/sddefault.jpg`; // Standard thumbnail\n        }\n      });\n    }\n    $overlay.addEventListener(\"click\", () => Chapeau.loadVideos());\n    $link.addEventListener(\"click\", (e) => e.stopPropagation());\n    // Remove padding-top if webflow yt-embed\n    if ($el.classList.contains(\"w-embed-youtubevideo\")) {\n      $el.style.paddingTop = null;\n    }\n    function load() {\n      const embedUrl = `https://www.youtube-nocookie.com/embed/${videoId}`;\n      $iframe.src = embedUrl;\n      $iframe.style.display = null;\n      $thumbnail.style.display = \"none\";\n      $overlay.style.display = \"none\";\n    }\n    return {\n      load,\n    };\n  }\n  // Convert all embedded YT-Elements\n  Array.from(\n    document.querySelectorAll(\n      \".w-richtext-figure-type-video > div, .w-embed-youtubevideo\",\n    ),\n  ).forEach((el) => {\n    const url = el.querySelector(\"iframe\").src;\n    el.setAttribute(\"c-video\", \"\");\n    el.setAttribute(\"data-url\", url);\n  });\n  const videos = Array.from(document.querySelectorAll(\"[c-video]\")).map(\n    createVideo,\n  );\n  function loadVideos() {\n    videos.forEach((video) => video.load());\n    sessionStorage.setItem(\"c-accept_yt\", true);\n  }\n  const accept = sessionStorage.getItem(\"c-accept_yt\");\n  if (accept == \"true\") {\n    loadVideos();\n  }\n\n  // Exports\n  window.Chapeau = {\n    ...(window.Chapeau || {}),\n    loadVideos,\n  };\n})();\n"],"names":[],"mappings":"CAAC,WAAY;AACX,QAAM,YAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAclB,WAAS,aAAa,WAAW;AAC/B,UAAM,MAAM,IAAI,IAAI,SAAS;AAC7B,QAAI,UAAU,IAAI,aAAa,IAAI,GAAG;AACtC,QAAI,CAAC,SAAS;AACZ,gBAAU,IAAI,SAAS,MAAM,GAAG,EAAE,MAAM,EAAE;AAAA,IAC3C;AACD,WAAO;AAAA,EACR;AAED,WAAS,YAAY,KAAK;AACxB,QAAI,UAAU,IAAI,SAAS;AAC3B,QAAI,YAAY;AAChB,UAAM,UAAU,IAAI,cAAc,2BAA2B;AAC7D,UAAM,aAAa,IAAI,cAAc,8BAA8B;AACnE,UAAM,WAAW,IAAI,cAAc,4BAA4B;AAC/D,UAAM,QAAQ,IAAI,cAAc,yBAAyB;AACzD,UAAM,MAAM,IAAI,QAAQ;AACxB,UAAM,UAAU,aAAa,GAAG;AAChC,UAAM,eAAe,IAAI,QAAQ,aAAa;AAC9C,QAAI,cAAc;AAChB,iBAAW,MAAM,IAAI,QAAQ;AAAA,IACnC,OAAW;AACL,iBAAW,MAAM,8BAA8B,OAAO;AAEtD,iBAAW,iBAAiB,QAAQ,MAAM;AACxC,YAAI,WAAW,iBAAiB,IAAI;AAElC,qBAAW,MAAM,6BAA6B,OAAO;AAAA,QACtD;AAAA,MACT,CAAO;AAAA,IACF;AACD,aAAS,iBAAiB,SAAS,MAAM,QAAQ,WAAY,CAAA;AAC7D,UAAM,iBAAiB,SAAS,CAAC,MAAM,EAAE,gBAAe,CAAE;AAE1D,QAAI,IAAI,UAAU,SAAS,sBAAsB,GAAG;AAClD,UAAI,MAAM,aAAa;AAAA,IACxB;AACD,aAAS,OAAO;AACd,YAAM,WAAW,0CAA0C,OAAO;AAClE,cAAQ,MAAM;AACd,cAAQ,MAAM,UAAU;AACxB,iBAAW,MAAM,UAAU;AAC3B,eAAS,MAAM,UAAU;AAAA,IAC1B;AACD,WAAO;AAAA,MACL;AAAA,IACN;AAAA,EACG;AAED,QAAM;AAAA,IACJ,SAAS;AAAA,MACP;AAAA,IACD;AAAA,EACL,EAAI,QAAQ,CAAC,OAAO;AAChB,UAAM,MAAM,GAAG,cAAc,QAAQ,EAAE;AACvC,OAAG,aAAa,WAAW,EAAE;AAC7B,OAAG,aAAa,YAAY,GAAG;AAAA,EACnC,CAAG;AACD,QAAM,SAAS,MAAM,KAAK,SAAS,iBAAiB,WAAW,CAAC,EAAE;AAAA,IAChE;AAAA,EACJ;AACE,WAAS,aAAa;AACpB,WAAO,QAAQ,CAAC,UAAU,MAAM,KAAM,CAAA;AACtC,mBAAe,QAAQ,eAAe,IAAI;AAAA,EAC3C;AACD,QAAM,SAAS,eAAe,QAAQ,aAAa;AACnD,MAAI,UAAU,QAAQ;AACpB;EACD;AAGD,SAAO,UAAU;AAAA,IACf,GAAI,OAAO,WAAW;IACtB;AAAA,EACJ;AACA,GAAI;"}